$(function(){
  $(".add-li li a:eq(1)").on("click",function(){      //tab选项 点击切换事件
    staffGetData("modify-people-table",staffGetUrl,"peoplePage","peopleLocation")
  })


  $("#add-people-module").on("click",function(){ // 添加人员模块
    $("#add-people-table").append('<tr><td><input class="form-control" name="staffDepartment" type="text" placeholder="部门(必填)"></td><td><input class="form-control" name="staffName" type="text" placeholder="姓名(必填)"></td><td><input class="form-control" name="staffEmail" type="text" placeholder="公司邮箱(选填)"></td><td><input class="form-control" name="staffExtension" type="text" placeholder="分机(选填)"></td><td><input class="form-control" name="staffNumber" type="text" placeholder="手机(选填)"></td><td><div class="delete text-center">×</div></td></tr>');
  })

  $("#add-people-table").on("click",".delete",function(){ //删除多余行数
    $(this).parent().parent().remove();
  })

  $("#modify-people-table").on("click",".edit-people-info",function(){ //点击‘编辑'按钮
    var $tdTxt = $(this).parent().parent().children("td"),
        $thisTxt = $(this).text();

    if($thisTxt== "编辑"){
      $(this).text("取消")
      $(this).addClass("btn-cancel")
      $tdTxt.each(function(index){
        var txt = $(this).text();
        if(index !== 0 && index !== 6 ){
            $(this).empty();
            $(this).append('<input type="text" class="form-control" value="' + txt + '">');
        }
      })
    }
    if($thisTxt == "取消"){
      $(this).removeClass("btn-cancel")
      $(this).text("编辑")
      $tdTxt.each(function(index){
        var txt = $(this).children(".form-control").attr("value");
        if(txt !== undefined){
          $(this).empty().text(txt);
        }
      })
    }
  })

  $("#modify-people-table").on("click",".delete-people-info",function(){  //点击“删除” 按钮
    if($(".btn-cancel").length !== 0){
      alert("不要在编辑的情况下，使用删除功能！")
     return false;
    }
    var staffDeleteId = $(this).parent().parent().children().eq(1).attr("data-idnum"),
        staffDeleteObj = {};
        staffDeleteObj.staffId = staffDeleteId;

    $.ajax({
         type:"POST",
         url:deletePeopleUrl,
         contentType:'application/json;charset=UTF-8',
         dataType:"json",  // 预期服务器返回的数据类型。如果不指定，jQuery 将自动根据 HTTP 包 MIME 信息来智能判断，比如XML MIME类型就被识别为XML。
         data:JSON.stringify(staffDeleteObj),
         success:function(data){

           var deletePeopleData;
           if(typeof(data) == "string"){
               deletePeopleData = JSON.parse(data);
           }else if(typeof(data) == "object"){
               deletePeopleData = data;
           }

           if(deletePeopleData.code == "0"){
             deletePeopleData = deletePeopleData.data;

             $("#modify-people-table").createTable({tableData:deletePeopleData,choiceContent:'modifyStaff',pageId:"#page",totalPageId:'#total-page',skipPageId:"#skip-click",tableId:'#modify-people-table',sessionPage:'deletePeoplePage',sessionLocation:'deletePeopleLocation'})
             alert("删除成功!");
             return false;
           }
           if(deletePeopleData.code == "9000001"){
             alert(deletePeopleData.message)
             return false;
           }

         },
         error:function(error){
          console.log(error)
         }
      });
  })


  $("#people-save").off("click").on("click",function(){  //添加staff
    var $elem = $("#add-people-table tr:not(':first-child')"),
        peopleData = validatePeopleData($elem,"add");  //表单验证
    if(!peopleData) return false;
    //添加员工 post 请求

    $.ajax({
         type:"POST",
         url:addPeopleUrl,
         contentType:'application/json;charset=UTF-8',
         dataType:"json",  // 预期服务器返回的数据类型。如果不指定，jQuery 将自动根据 HTTP 包 MIME 信息来智能判断，比如XML MIME类型就被识别为XML。
         data:JSON.stringify(peopleData),
         success:function(data){

           var addPeopleData;
           if(typeof(data) == "string"){
               addPeopleData = JSON.parse(data);
           }else if(typeof(data) == "object"){
               addPeopleData = data;
           }

           if(addPeopleData.message == "操作成功"){
             alert("添加成功!!");
             $("#add-people-table input").val("");
             $("#add-people-table tr:not('.table-content')").remove();
             return false;
           }
           if(addPeopleData.code == "9000001"){
             alert(addPeopleData.message)
             return false;
           }

         },
         error:function(error){
          console.log(error)
         }
      });

  })
  $("#people-modify-save").on("click",function(){  //修改staff

    //表单验证
    if($(".btn-cancel").length == 0){
      alert("先编辑，再提交")
      return false;
    }
    var $elem = $("#modify-people-table tr td .btn-cancel"),
        peopleData = validatePeopleData($elem,"modify");
    if(!peopleData) return false;
    $.ajax({
         type:"POST",
         url:modifyPeopleUrl,
         contentType:'application/json;charset=UTF-8',
         dataType:"json",  // 预期服务器返回的数据类型。如果不指定，jQuery 将自动根据 HTTP 包 MIME 信息来智能判断，比如XML MIME类型就被识别为XML。
         data:JSON.stringify(peopleData),
         success:function(data){

           var addPeopleData;
           if(typeof(data) == "string"){
               addPeopleData = JSON.parse(data);
           }else if(typeof(data) == "object"){
               addPeopleData = data;
           }
           if(addPeopleData.message == "操作成功"){
             addPeopleData = addPeopleData.data;
            alert("修改成功!!");


             $("#modify-people-table").createTable({tableData:addPeopleData,choiceContent:'modifyStaff',pageId:"#page",totalPageId:'#total-page',skipPageId:"#skip-click",tableId:'#modify-people-table',sessionPage:'modifyPeoplePage',sessionLocation:'modifyPeopleLocation'})

             return false;
           }else{
             alert("有异常问题，试试刷新页面！")
             return false;
           }

         },
         error:function(error){
          console.log(error)
         }
      });

    //修改员工 post 请求


  })

})
function validatePeopleData($elem,content){ //表单验证
  var peopleBoolean = true,peopleFormData = [],publicId ="";
  $elem.each(function(index){
    var selfIndex = index;
        peopleFormData[index] = {},
        $prevElement = $(this).children();

    if(content == "modify"){
      $prevElement = $(this).parent().parent().children();
        peopleFormData[index] = {};
        peopleFormData[index].staffId = $prevElement.eq(1).attr("data-idnum")
      // // validateData[selfIndex].bookId = $prevElement.eq(1).attr("data-idnum");
    }

    $prevElement.find(".form-control").each(function(index2){


      var $thisVal = $(this).val().replace(/(^\s+)|(\s+$)/g,"");

      if(index2 == 0 || index2 == 1){
        if($thisVal == ""){
          alert("请仔细查看是否填完必填选项")
          peopleBoolean = false;
        }
      }

      if(!peopleBoolean) return false;

      switch (index2) {   //整理数据
        case 0:
          peopleFormData[selfIndex].staffDepartment = $thisVal
          break;
        case 1:
          peopleFormData[selfIndex].staffName = $thisVal
          break;
        case 2:
          peopleFormData[selfIndex].staffEmail = $thisVal
          break;
        case 3:
          peopleFormData[selfIndex].staffExtension = $thisVal
          break;
        case 4:
          peopleFormData[selfIndex].staffNumber = $thisVal
          break;
        default:
          alert("error")
      }
      return peopleBoolean
    })

    if(!peopleBoolean) return false;
    return peopleBoolean;
  })

  if(!peopleBoolean) return false;

  var pepoleDataLen = peopleFormData.length,
      emailReg = /^[a-z0-9A-Z]+[- | a-z0-9A-Z . _]+@cn.fujitsu.com$/,
      extensionReg = /^[0-9]*[1-9][0-9]*$/,
      mobileReg = /^[1]\d{10}$/;

  for(var i=0;i<pepoleDataLen;i++){

    var staffEmail = peopleFormData[i]["staffEmail"],
        staffExtension = peopleFormData[i]["staffExtension"],
       staffNumber = peopleFormData[i]["staffNumber"];

    if(staffEmail !== ""){   //验证邮箱
        if(!(emailReg.test(staffEmail))){
           alert("邮箱格式错误!\n正确格式：XXX@cn.fujitsu.com")
           peopleBoolean = false;
           break;
        }
    }
    if(staffExtension !== "" && staffExtension !== "无"){   //验证邮箱
        if(!(extensionReg.test(staffExtension))){
           alert("分机为非负数")
           peopleBoolean = false;
           break;
        }
    }
    if(staffNumber !== "" && staffNumber !== "无"){//验证手机
      if(!(mobileReg.test(staffNumber))){
        alert("手机格式错误\n正确格式：11位手机号码")
        peopleBoolean = false;
        break;
      }
    }
  }
  if(!peopleBoolean) {
    return false;
  }else{
    return peopleFormData;
  }

}


function calendar(){  //日历
  $('#add-patent .datetimepicker,#modify-patent .datetimepicker').datetimepicker({
    format:'yyyy/mm/dd',
    autoclose:true,//自动关闭
    minView:2,//最精准的时间选择为日期0-分 1-时 2-日 3-月
    weekStart:0,
    language:'zh-CN'
  });
}

function staffGetData($elemTable,url,pageName,pageLocation){  //get 请求数据
  $("#"+ $elemTable +" tr td").remove();
  loading($("#"+ $elemTable))

  $.ajax({       //员工信息展示
       type:"GET",
       url:url,
       success:function(data){
       //  sessionStorage.clear();
         $("#ant-site-loading").remove();
         var staffData,
             	messageData="",
	             staffDataArr =[];
         if(typeof(data) == "string"){
             staffData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             staffData = data;
         }
         messageData = staffData.message;
         staffDataArr = staffData.data;
        if(messageData  == "操作成功"){

           //引用table插件

           $("#modify-people-table").createTable({tableData:staffDataArr,choiceContent:'modifyStaff',pageId:"#page",totalPageId:'#total-page',skipPageId:"#skip-click",tableId:'#modify-people-table',sessionPage:pageName,sessionLocation:pageLocation})

       }
      if(messageData  == "操作失败"){

           //引用table插件

           $("#modify-people-table").createTable({tableData:staffDataArr,choiceContent:'modifyStaff',pageId:"#page",totalPageId:'#total-page',skipPageId:"#skip-click",tableId:'#modify-people-table',sessionPage:pageName,sessionLocation:pageLocation})

       }


      },
      error:function(error){
        console.log(error)
      }
    });
}

$(function(){
  calendar();
  $("#photo-title").on("blur",function(){
    var postTitle = {},self = this;
    postTitle.photoTitle = $(this).val().replace(/(^\s+)|(\s+$)/g,"");
    $.ajax({       //员工信息展示
        url: photoTitleCheckUrl,
        type: 'POST',
        data: postTitle,
        success:function(data){
         //  sessionStorage.clear();
        //   $("#ant-site-loading").remove();
           var photoTitleData;
           if(typeof(data) == "string"){
               photoTitleData = JSON.parse(data);
           }else if(typeof(data) == "object"){
               photoTitleData = data;
           }
           if(photoTitleData.message == "标题重复"){
             $("#error-info").remove();
             $(self).after('<span id="error-info" style="color:red;">标题重复</span>')
             return false;
           }else if(photoTitleData.message == "未重复"){
             $("#error-info").remove();
           }

        },
        error:function(error){
          console.log(error)
        }
      });
  })
  $("#photo-save").on("click",function(){
     var photoBoolean = true;
     if($("#error-info").length == 1){
       alert("修改标题")
       photoBoolean = false;
       return photoBoolean;
     }
     $("#add-photo input").each(function(){
       var inputVal = $(this).val().replace(/(^\s+)|(\s+$)/g,"")
       if(inputVal == ""){
         alert("内容不能为空!")
         photoBoolean = false;
         return photoBoolean;
       }
     })
     if( !photoBoolean) return photoBoolean;
     addPhoto(addPhotoPostUrl)
  })
})


function addPhoto(url){

  var photoGallery = new FormData($("#add-photo-form")[0]);

  $.ajax({       //员工信息展示
      url: url,
      type: 'POST',
      cache: false,
      data: photoGallery,
      processData: false,
      contentType: false,
      success:function(data){
        $("#add-photo input").val("");
        alert(data.message)
      },
      error:function(error){
        console.log(error)
      }
    });
}
function calendar(){
  $('#add-photo .datetimepicker').datetimepicker({
    format:'yyyy/mm/dd',
    autoclose:true,//自动关闭
    minView:2,//最精准的时间选择为日期0-分 1-时 2-日 3-月
    weekStart:0,
    language:'zh-CN'
  });
}

$(function(){

  $("#add-table input").val("")
  $("#add-table input").eq(1).val("1")
  addCalendar();  //日历控件调用

  $(".add-li li a:eq(1)").on("click",function(){      //点击编辑加载数据
    var getparams = {};
        getparams.selectSort = "在录";
        getparams.searchBuyer = $("#searchName").val();
        getparams.searchBook = $("#searchBook").val();
    indexGetData(indexUrl,getparams,$("#modify-table"))
  })

  $("#add-table,#modify-table").on("click",".input-select>input.form-control",function(){  //下拉框的点击事件
    var $eleNext = $(this).next();
    if($eleNext.hasClass("display-none")){
      $eleNext.removeClass("display-none")
    }
  })


  $("#add-table,#modify-table").on("click",".input-select>ul.list-unstyled>li",function(){ //下拉框的点击事件
    var $eleParent = $(this).parent(),
        $eleTxt = $(this).text();
      $(this).parent().prev().val($eleTxt)

    $(this).addClass("input-select-li").siblings().removeClass("input-select-li")
    if(!$eleParent.hasClass("display-none")){
      $eleParent.addClass("display-none")
    }

  })

  $("#add-line").on("click",function(){         //添加行数 点击事件
    $("#add-table").append('<tr><td><input class="form-control" name="bookName" type="text" placeholder="书名(必填)" /></td><td><input class="form-control" name="bookVolume" type="text" value="1" placeholder="册数(必填)"/></td><td><div class="input-select"><input class="form-control" name="bookBuyer" readonly="readonly" autocomplete="off" type="text" placeholder="购买者(必填)" /><ul class="list-unstyled display-none"><li>皮冰锋</li><li>周恩策</li><li>张沈斌</li><li>华松</li><li>孙昊立</li></ul><div></td><td><input class="form-control" name="bookBorrower" type="text" placeholder="借记人(可选)" /></td><td><input  class="form-control datetimepicker" name="buyTime" type="text" autocomplete="off" placeholder="购买日期(必填)" /></td><td><div class="delete text-center">×</div></td></tr>')

  //  $("#add-table").append('<tr><td><input class="form-control" type="text" placeholder="书名(必填)" /></td><td><input class="form-control" type="text" value="1" placeholder="册数(必填)"/></td><td><input class="form-control" type="text" placeholder="购买者(必填)" /></td><td><input class="form-control" type="text" placeholder="借记人(可选)" /></td><td><input  class="form-control datetimepicker" type="text" placeholder="购买日期(必填)" /></td><td><div class="delete text-center">×</div></td></tr>')
    addCalendar();
  })

  $("#add-table").on("click",".delete",function(){
    $(this).parent().parent().remove();
  })

  $("#modify-table").on("click",".table-edit",function(){        //编辑  点击事件
    var $this = $(this);
    if($this.text() == "编辑"){
        $this.parent().parent().children("td").each(function(index){
          var txt = $(this).text();
          if(txt !== "编辑" && index !== 0){
            if(index !== 5){
              $(this).empty();
              $(this).append('<input type="text" class="form-control" value="' + txt + '">');
            }
            if(index == 3){
              $(this).empty();
              $(this).append('<div class="input-select"><input class="form-control" name="bookBuyer" autocomplete="off" type="text" value="'+ txt +'" placeholder="购买者(必填)" /><ul class="list-unstyled display-none"><li>皮冰锋</li><li>周恩策</li><li>张沈斌</li><li>华松</li><li>孙昊立</li></ul></div>')
            }
            if(index == 5){
              $(this).empty();
              $(this).append('<input type="text" class="form-control datetimepicker" autocomplete="off" value="' + txt + '">');
              modifyCalendar();
            }
          }
        })
        $this.text("取消").addClass("btn-cancel").removeClass("btn-edit2")
    }else if($this.text() == "取消"){
        $this.parent().parent().children("td").each(function(){
          var txt = $(this).find("input").attr("value");
          if(txt !== undefined){
            $(this).empty().text(txt);
          }
        })
        $this.text("编辑").removeClass("btn-cancel").addClass("btn-edit2")
    }
    return false;
  })

  $("#add-save").on("click",function(){   //添加书籍 事件
     var $elem = $("#add-table tr:not(:first-child)");

     var addData = validateRules($elem,"添加");
	//	console.log(JSON.stringify(addData))
     if(addData == false){
       return false;
     }

    /* 添加书籍 post 请求*/
    $.ajax({
         type:"POST",
         url:addPostUrl,
         contentType:'application/json;charset=UTF-8',
         dataType:"json",  // 预期服务器返回的数据类型。如果不指定，jQuery 将自动根据 HTTP 包 MIME 信息来智能判断，比如XML MIME类型就被识别为XML。
         data:JSON.stringify(addData),
         success:function(data){

           var bookAddData;
           if(typeof(data) == "string"){
               bookAddData = JSON.parse(data);
           }else if(typeof(data) == "object"){
               bookAddData = data;
           }
           if(bookAddData.message == "操作成功"){
             alert("添加成功!!");
             $("#add-table input").val("");
			       $("#add-table input").eq(1).val("1");
             $("#add-table tr:not('.table-content')").remove();
             return false;
           }
           if(bookAddData.code == "9000001"){
             alert("后台系统错误:"+ bookAddData.message + "，请重新提交!");
             return false;
           }
           if(bookAddData.code == "9000002"){
             alert("参数缺失:" + bookAddData.message + ".请重新提交!");
             return false;
           }
         },
         error:function(error){
          console.log(error)
         }
      });

    return false;
  })

  $("#modify-save").on("click",function(){     //修改数据提交事件
    if($("#modify-table .btn-cancel").length == 0){
      alert("先编辑，再提交")
      return false;
    }
    var modifyData = validateRules($("#modify-table .btn-cancel"),"修改"); //调用验证函数

    if(modifyData == false) return false; //验证失败

    /* 修改书籍 post 请求*/

    $.ajax({
         type:"POST",
         url: modifyPostUrl,
         contentType:'application/json',
         dataType:"json",
         data:JSON.stringify(modifyData),
         success:function(data){
          //sessionStorage.clear();
          var bookModifyData,codeState;
          if(typeof(data) == "string"){
              bookModifyData = JSON.parse(data);
          }else if(typeof(data) == "object"){
              bookModifyData = data;
          }
          codeState = bookModifyData.code;
          if(codeState == "0"){
            $("#modify-table tr td").remove();
            var bookData = bookModifyData.data;
            //table 插件引用
             $("#modify-table").createTable({tableData:bookData,choiceContent:'modify',pageId:"#page",totalPageId:'#total-page',skipPageId:"#skip-click",tableId:'#modify-table',sessionPage:'addPage',sessionLocation:'addLocation'})
             alert("修改成功")
          }else if(codeState == "9000002"){
            alert("错误：" + bookModifyData.message)
            return false;
          }else if(codeState == "9000001"){
            alert("错误：" + bookModifyData.message)
            return false;
          }
        },
        error:function(error){
          console.log(error)
        }
      });
    return false;
  })
  function addCalendar(){   // 日历控件初始化
    $('#add-table .datetimepicker').datetimepicker({
      format:'yyyy/mm/dd',
      autoclose:true,//自动关闭
      minView:2,//最精准的时间选择为日期0-分 1-时 2-日 3-月
      weekStart:0,
      language:'zh-CN'
    });
  }
  function modifyCalendar(){  // 日历控件初始化
    $('#modify-table .datetimepicker').datetimepicker({
      format:'yyyy/mm/dd',
      autoclose:true,//自动关闭
      minView:2,//最精准的时间选择为日期0-分 1-时 2-日 3-月
      weekStart:0,
      language:'zh-CN'
    });
  }
})

function validateRules($validate,tabcontent){  //表单验证
  var validateData = [],validateboolean = true;
  $validate.each(function(index){   //dom
    var selfIndex = index,
        $prevElement = $(this).children();
        validateData[selfIndex] = {};
    if(tabcontent == "修改"){
      $prevElement = $(this).parent().parent().children();
      validateData[selfIndex] = {};
      validateData[selfIndex].bookId = $prevElement.eq(1).attr("data-idnum");
    }
    $prevElement.find("input").each(function(index2){ //循环input的内容
        var $thisVal = $(this).val();

        if(index2 !== 3){   //排除“借阅者”检验
          if($thisVal.trim() !== ""){
            switch (index2) {
              case 0:
                validateData[selfIndex].bookName = $thisVal
                break;
              case 1:
                validateData[selfIndex].bookVolume = $thisVal
                break;
              case 2:
                validateData[selfIndex].bookBuyer = $thisVal
                break;
              case 4:
                validateData[selfIndex].buyTime = $thisVal
                break;
              default:
                alert("error")
            }
          }else{
            alert("请填好内容或者删除你添加的空白行")
            validateboolean = false;
          }
        }
        if(index2 == 3){
          if($thisVal.trim() == ""){
           validateData[selfIndex].bookBorrower = "无";
          }else{
           validateData[selfIndex].bookBorrower = $thisVal;
          }
        }
        return validateboolean;
    })
    return validateboolean;
  })

  if(!validateboolean) return false;

  var validateLength = validateData.length;

  var regNum = /^[1-9]\d*$/,
    regDate = /^(\d{4})\/(\d{2})\/(\d{2})$/;
  for(var i=0;i<validateLength;i++){        //判断册数，购买日期一栏是否为数字
    var resultNumBoolean = regNum.test(validateData[i]['bookVolume']),
        resultDateBoolean = regDate.test(validateData[i]['buyTime']) ;
    if(!(resultNumBoolean && resultDateBoolean)){
      validateboolean = false;
      alert("册数、购买日期一栏请检查格式是否正确")
      break;
    }
  }
  if(!validateboolean) return false;
  if(validateboolean){
    return validateData;
  }else{
    return false;
  }

//  return validateData;
}

function indexGetData(url,getparams,$elem){  //get方式获取数据
    $("#modify-table tr td").remove();
    loading($elem)

    $.ajax({
         type:"GET",
         url:url,
         data:getparams,
         success:function(data){
          // sessionStorage.clear();
          $("#ant-site-loading").remove();
           var bookData,
               messageData="";
           if(typeof(data) == "string"){
               bookData = JSON.parse(data);
           }else if(typeof(data) == "object"){
               bookData = data;
           }
           messageData = bookData.message;
           if(messageData == "操作成功"){
             var bookData = bookData.data;

             $("#modify-table").createTable({tableData:bookData,choiceContent:'modify',pageId:"#page",skipPageId:"#skip-click",totalPageId:'#total-page',tableId:'#modify-table',sessionPage:'addPage',sessionLocation:'addLocation'})

           }else{
             alert(messageData)
             return false;
           }
        },
        error:function(error){
          console.log(error)
        }
      });
}

/**
 * French translation for bootstrap-datetimepicker
 * Nico Mollet <nico.mollet@gmail.com>
 */
;(function($){
	$.fn.datetimepicker.dates['fr'] = {
		days: ["Dimanche", "Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi", "Dimanche"],
		daysShort: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam", "Dim"],
		daysMin: ["D", "L", "Ma", "Me", "J", "V", "S", "D"],
		months: ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"],
		monthsShort: ["Jan", "Fev", "Mar", "Avr", "Mai", "Jui", "Jul", "Aou", "Sep", "Oct", "Nov", "Dec"],
		today: "Aujourd'hui",
		suffix: [],
		meridiem: ["am", "pm"],
		weekStart: 1,
		format: "dd/mm/yyyy hh:ii"
	};
}(jQuery));

/* =========================================================
 * bootstrap-datetimepicker.js
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Improvements by Andrew Rowls
 * Improvements by Sébastien Malot
 * Improvements by Yun Lai
 * Improvements by Kenneth Henderick
 * Improvements by CuGBabyBeaR
 * Improvements by Christian Vaas <auspex@auspex.eu>
 *
 * Project URL : http://www.malot.fr/bootstrap-datetimepicker
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

(function(factory){
    if (typeof define === 'function' && define.amd)
      define(['jquery'], factory);
    else if (typeof exports === 'object')
      factory(require('jquery'));
    else
      factory(jQuery);

}(function($, undefined){

  // Add ECMA262-5 Array methods if not supported natively (IE8)
  if (!('indexOf' in Array.prototype)) {
    Array.prototype.indexOf = function (find, i) {
      if (i === undefined) i = 0;
      if (i < 0) i += this.length;
      if (i < 0) i = 0;
      for (var n = this.length; i < n; i++) {
        if (i in this && this[i] === find) {
          return i;
        }
      }
      return -1;
    }
  }

  // Add timezone abbreviation support for ie6+, Chrome, Firefox
  function timeZoneAbbreviation() {
    var abbreviation, date, formattedStr, i, len, matchedStrings, ref, str;
    date = (new Date()).toString();
    formattedStr = ((ref = date.split('(')[1]) != null ? ref.slice(0, -1) : 0) || date.split(' ');
    if (formattedStr instanceof Array) {
      matchedStrings = [];
      for (var i = 0, len = formattedStr.length; i < len; i++) {
        str = formattedStr[i];
        if ((abbreviation = (ref = str.match(/\b[A-Z]+\b/)) !== null) ? ref[0] : 0) {
          matchedStrings.push(abbreviation);
        }
      }
      formattedStr = matchedStrings.pop();
    }
    return formattedStr;
  }

  function UTCDate() {
    return new Date(Date.UTC.apply(Date, arguments));
  }

  // Picker object
  var Datetimepicker = function (element, options) {
    var that = this;

    this.element = $(element);

    // add container for single page application
    // when page switch the datetimepicker div will be removed also.
    this.container = options.container || 'body';

    this.language = options.language || this.element.data('date-language') || 'en';
    this.language = this.language in dates ? this.language : this.language.split('-')[0]; // fr-CA fallback to fr
    this.language = this.language in dates ? this.language : 'en';
    this.isRTL = dates[this.language].rtl || false;
    this.formatType = options.formatType || this.element.data('format-type') || 'standard';
    this.format = DPGlobal.parseFormat(options.format || this.element.data('date-format') || dates[this.language].format || DPGlobal.getDefaultFormat(this.formatType, 'input'), this.formatType);
    this.isInline = false;
    this.isVisible = false;
    this.isInput = this.element.is('input');
    this.fontAwesome = options.fontAwesome || this.element.data('font-awesome') || false;

    this.bootcssVer = options.bootcssVer || (this.isInput ? (this.element.is('.form-control') ? 3 : 2) : ( this.bootcssVer = this.element.is('.input-group') ? 3 : 2 ));

    this.component = this.element.is('.date') ? ( this.bootcssVer === 3 ? this.element.find('.input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-remove, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o').parent() : this.element.find('.add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar, .add-on .fa-calendar, .add-on .fa-clock-o').parent()) : false;
    this.componentReset = this.element.is('.date') ? ( this.bootcssVer === 3 ? this.element.find('.input-group-addon .glyphicon-remove, .input-group-addon .fa-times').parent():this.element.find('.add-on .icon-remove, .add-on .fa-times').parent()) : false;
    this.hasInput = this.component && this.element.find('input').length;
    if (this.component && this.component.length === 0) {
      this.component = false;
    }
    this.linkField = options.linkField || this.element.data('link-field') || false;
    this.linkFormat = DPGlobal.parseFormat(options.linkFormat || this.element.data('link-format') || DPGlobal.getDefaultFormat(this.formatType, 'link'), this.formatType);
    this.minuteStep = options.minuteStep || this.element.data('minute-step') || 5;
    this.pickerPosition = options.pickerPosition || this.element.data('picker-position') || 'bottom-right';
    this.showMeridian = options.showMeridian || this.element.data('show-meridian') || false;
    this.initialDate = options.initialDate || new Date();
    this.zIndex = options.zIndex || this.element.data('z-index') || undefined;
    this.title = typeof options.title === 'undefined' ? false : options.title;
    this.timezone = options.timezone || timeZoneAbbreviation();

    this.icons = {
      leftArrow: this.fontAwesome ? 'fa-arrow-left' : (this.bootcssVer === 3 ? 'glyphicon-arrow-left' : 'icon-arrow-left'),
      rightArrow: this.fontAwesome ? 'fa-arrow-right' : (this.bootcssVer === 3 ? 'glyphicon-arrow-right' : 'icon-arrow-right')
    }
    this.icontype = this.fontAwesome ? 'fa' : 'glyphicon';

    this._attachEvents();

    this.clickedOutside = function (e) {
        // Clicked outside the datetimepicker, hide it
        if ($(e.target).closest('.datetimepicker').length === 0) {
            that.hide();
        }
    }

    this.formatViewType = 'datetime';
    if ('formatViewType' in options) {
      this.formatViewType = options.formatViewType;
    } else if ('formatViewType' in this.element.data()) {
      this.formatViewType = this.element.data('formatViewType');
    }

    this.minView = 0;
    if ('minView' in options) {
      this.minView = options.minView;
    } else if ('minView' in this.element.data()) {
      this.minView = this.element.data('min-view');
    }
    this.minView = DPGlobal.convertViewMode(this.minView);

    this.maxView = DPGlobal.modes.length - 1;
    if ('maxView' in options) {
      this.maxView = options.maxView;
    } else if ('maxView' in this.element.data()) {
      this.maxView = this.element.data('max-view');
    }
    this.maxView = DPGlobal.convertViewMode(this.maxView);

    this.wheelViewModeNavigation = false;
    if ('wheelViewModeNavigation' in options) {
      this.wheelViewModeNavigation = options.wheelViewModeNavigation;
    } else if ('wheelViewModeNavigation' in this.element.data()) {
      this.wheelViewModeNavigation = this.element.data('view-mode-wheel-navigation');
    }

    this.wheelViewModeNavigationInverseDirection = false;

    if ('wheelViewModeNavigationInverseDirection' in options) {
      this.wheelViewModeNavigationInverseDirection = options.wheelViewModeNavigationInverseDirection;
    } else if ('wheelViewModeNavigationInverseDirection' in this.element.data()) {
      this.wheelViewModeNavigationInverseDirection = this.element.data('view-mode-wheel-navigation-inverse-dir');
    }

    this.wheelViewModeNavigationDelay = 100;
    if ('wheelViewModeNavigationDelay' in options) {
      this.wheelViewModeNavigationDelay = options.wheelViewModeNavigationDelay;
    } else if ('wheelViewModeNavigationDelay' in this.element.data()) {
      this.wheelViewModeNavigationDelay = this.element.data('view-mode-wheel-navigation-delay');
    }

    this.startViewMode = 2;
    if ('startView' in options) {
      this.startViewMode = options.startView;
    } else if ('startView' in this.element.data()) {
      this.startViewMode = this.element.data('start-view');
    }
    this.startViewMode = DPGlobal.convertViewMode(this.startViewMode);
    this.viewMode = this.startViewMode;

    this.viewSelect = this.minView;
    if ('viewSelect' in options) {
      this.viewSelect = options.viewSelect;
    } else if ('viewSelect' in this.element.data()) {
      this.viewSelect = this.element.data('view-select');
    }
    this.viewSelect = DPGlobal.convertViewMode(this.viewSelect);

    this.forceParse = true;
    if ('forceParse' in options) {
      this.forceParse = options.forceParse;
    } else if ('dateForceParse' in this.element.data()) {
      this.forceParse = this.element.data('date-force-parse');
    }
    var template = this.bootcssVer === 3 ? DPGlobal.templateV3 : DPGlobal.template;
    while (template.indexOf('{iconType}') !== -1) {
      template = template.replace('{iconType}', this.icontype);
    }
    while (template.indexOf('{leftArrow}') !== -1) {
      template = template.replace('{leftArrow}', this.icons.leftArrow);
    }
    while (template.indexOf('{rightArrow}') !== -1) {
      template = template.replace('{rightArrow}', this.icons.rightArrow);
    }
    this.picker = $(template)
      .appendTo(this.isInline ? this.element : this.container) // 'body')
      .on({
        click:     $.proxy(this.click, this),
        mousedown: $.proxy(this.mousedown, this)
      });

    if (this.wheelViewModeNavigation) {
      if ($.fn.mousewheel) {
        this.picker.on({mousewheel: $.proxy(this.mousewheel, this)});
      } else {
        console.log('Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option');
      }
    }

    if (this.isInline) {
      this.picker.addClass('datetimepicker-inline');
    } else {
      this.picker.addClass('datetimepicker-dropdown-' + this.pickerPosition + ' dropdown-menu');
    }
    if (this.isRTL) {
      this.picker.addClass('datetimepicker-rtl');
      var selector = this.bootcssVer === 3 ? '.prev span, .next span' : '.prev i, .next i';
      this.picker.find(selector).toggleClass(this.icons.leftArrow + ' ' + this.icons.rightArrow);
    }

    $(document).on('mousedown touchend', this.clickedOutside);

    this.autoclose = false;
    if ('autoclose' in options) {
      this.autoclose = options.autoclose;
    } else if ('dateAutoclose' in this.element.data()) {
      this.autoclose = this.element.data('date-autoclose');
    }

    this.keyboardNavigation = true;
    if ('keyboardNavigation' in options) {
      this.keyboardNavigation = options.keyboardNavigation;
    } else if ('dateKeyboardNavigation' in this.element.data()) {
      this.keyboardNavigation = this.element.data('date-keyboard-navigation');
    }

    this.todayBtn = (options.todayBtn || this.element.data('date-today-btn') || false);
    this.clearBtn = (options.clearBtn || this.element.data('date-clear-btn') || false);
    this.todayHighlight = (options.todayHighlight || this.element.data('date-today-highlight') || false);

    this.weekStart = 0;
    if (typeof options.weekStart !== 'undefined') {
      this.weekStart = options.weekStart;
    } else if (typeof this.element.data('date-weekstart') !== 'undefined') {
      this.weekStart = this.element.data('date-weekstart');
    } else if (typeof dates[this.language].weekStart !== 'undefined') {
      this.weekStart = dates[this.language].weekStart;
    }
    this.weekStart = this.weekStart % 7;
    this.weekEnd = ((this.weekStart + 6) % 7);
    this.onRenderDay = function (date) {
      var render = (options.onRenderDay || function () { return []; })(date);
      if (typeof render === 'string') {
        render = [render];
      }
      var res = ['day'];
      return res.concat((render ? render : []));
    };
    this.onRenderHour = function (date) {
      var render = (options.onRenderHour || function () { return []; })(date);
      var res = ['hour'];
      if (typeof render === 'string') {
        render = [render];
      }
      return res.concat((render ? render : []));
    };
    this.onRenderMinute = function (date) {
      var render = (options.onRenderMinute || function () { return []; })(date);
      var res = ['minute'];
      if (typeof render === 'string') {
        render = [render];
      }
      if (date < this.startDate || date > this.endDate) {
        res.push('disabled');
      } else if (Math.floor(this.date.getUTCMinutes() / this.minuteStep) === Math.floor(date.getUTCMinutes() / this.minuteStep)) {
        res.push('active');
      }
      return res.concat((render ? render : []));
    };
    this.onRenderYear = function (date) {
      var render = (options.onRenderYear || function () { return []; })(date);
      var res = ['year'];
      if (typeof render === 'string') {
        render = [render];
      }
      if (this.date.getUTCFullYear() === date.getUTCFullYear()) {
        res.push('active');
      }
      var currentYear = date.getUTCFullYear();
      var endYear = this.endDate.getUTCFullYear();
      if (date < this.startDate || currentYear > endYear) {
        res.push('disabled');
      }
      return res.concat((render ? render : []));
    }
    this.onRenderMonth = function (date) {
      var render = (options.onRenderMonth || function () { return []; })(date);
      var res = ['month'];
      if (typeof render === 'string') {
        render = [render];
      }
      return res.concat((render ? render : []));
    }
    this.startDate = new Date(-8639968443048000);
    this.endDate = new Date(8639968443048000);
    this.datesDisabled = [];
    this.daysOfWeekDisabled = [];
    this.setStartDate(options.startDate || this.element.data('date-startdate'));
    this.setEndDate(options.endDate || this.element.data('date-enddate'));
    this.setDatesDisabled(options.datesDisabled || this.element.data('date-dates-disabled'));
    this.setDaysOfWeekDisabled(options.daysOfWeekDisabled || this.element.data('date-days-of-week-disabled'));
    this.setMinutesDisabled(options.minutesDisabled || this.element.data('date-minute-disabled'));
    this.setHoursDisabled(options.hoursDisabled || this.element.data('date-hour-disabled'));
    this.fillDow();
    this.fillMonths();
    this.update();
    this.showMode();

    if (this.isInline) {
      this.show();
    }
  };

  Datetimepicker.prototype = {
    constructor: Datetimepicker,

    _events:       [],
    _attachEvents: function () {
      this._detachEvents();
      if (this.isInput) { // single input
        this._events = [
          [this.element, {
            focus:   $.proxy(this.show, this),
            keyup:   $.proxy(this.update, this),
            keydown: $.proxy(this.keydown, this)
          }]
        ];
      }
      else if (this.component && this.hasInput) { // component: input + button
        this._events = [
          // For components that are not readonly, allow keyboard nav
          [this.element.find('input'), {
            focus:   $.proxy(this.show, this),
            keyup:   $.proxy(this.update, this),
            keydown: $.proxy(this.keydown, this)
          }],
          [this.component, {
            click: $.proxy(this.show, this)
          }]
        ];
        if (this.componentReset) {
          this._events.push([
            this.componentReset,
            {click: $.proxy(this.reset, this)}
          ]);
        }
      }
      else if (this.element.is('div')) {  // inline datetimepicker
        this.isInline = true;
      }
      else {
        this._events = [
          [this.element, {
            click: $.proxy(this.show, this)
          }]
        ];
      }
      for (var i = 0, el, ev; i < this._events.length; i++) {
        el = this._events[i][0];
        ev = this._events[i][1];
        el.on(ev);
      }
    },

    _detachEvents: function () {
      for (var i = 0, el, ev; i < this._events.length; i++) {
        el = this._events[i][0];
        ev = this._events[i][1];
        el.off(ev);
      }
      this._events = [];
    },

    show: function (e) {
      this.picker.show();
      this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();
      if (this.forceParse) {
        this.update();
      }
      this.place();
      $(window).on('resize', $.proxy(this.place, this));
      if (e) {
        e.stopPropagation();
        e.preventDefault();
      }
      this.isVisible = true;
      this.element.trigger({
        type: 'show',
        date: this.date
      });
    },

    hide: function () {
      if (!this.isVisible) return;
      if (this.isInline) return;
      this.picker.hide();
      $(window).off('resize', this.place);
      this.viewMode = this.startViewMode;
      this.showMode();
      if (!this.isInput) {
        $(document).off('mousedown', this.hide);
      }

      if (
        this.forceParse &&
          (
            this.isInput && this.element.val() ||
              this.hasInput && this.element.find('input').val()
            )
        )
        this.setValue();
      this.isVisible = false;
      this.element.trigger({
        type: 'hide',
        date: this.date
      });
    },

    remove: function () {
      this._detachEvents();
      $(document).off('mousedown', this.clickedOutside);
      this.picker.remove();
      delete this.picker;
      delete this.element.data().datetimepicker;
    },

    getDate: function () {
      var d = this.getUTCDate();
      if (d === null) {
        return null;
      }
      return new Date(d.getTime() + (d.getTimezoneOffset() * 60000));
    },

    getUTCDate: function () {
      return this.date;
    },

    getInitialDate: function () {
      return this.initialDate
    },

    setInitialDate: function (initialDate) {
      this.initialDate = initialDate;
    },

    setDate: function (d) {
      this.setUTCDate(new Date(d.getTime() - (d.getTimezoneOffset() * 60000)));
    },

    setUTCDate: function (d) {
      if (d >= this.startDate && d <= this.endDate) {
        this.date = d;
        this.setValue();
        this.viewDate = this.date;
        this.fill();
      } else {
        this.element.trigger({
          type:      'outOfRange',
          date:      d,
          startDate: this.startDate,
          endDate:   this.endDate
        });
      }
    },

    setFormat: function (format) {
      this.format = DPGlobal.parseFormat(format, this.formatType);
      var element;
      if (this.isInput) {
        element = this.element;
      } else if (this.component) {
        element = this.element.find('input');
      }
      if (element && element.val()) {
        this.setValue();
      }
    },

    setValue: function () {
      var formatted = this.getFormattedDate();
      if (!this.isInput) {
        if (this.component) {
          this.element.find('input').val(formatted);
        }
        this.element.data('date', formatted);
      } else {
        this.element.val(formatted);
      }
      if (this.linkField) {
        $('#' + this.linkField).val(this.getFormattedDate(this.linkFormat));
      }
    },

    getFormattedDate: function (format) {
      format = format || this.format;
      return DPGlobal.formatDate(this.date, format, this.language, this.formatType, this.timezone);
    },

    setStartDate: function (startDate) {
      this.startDate = startDate || this.startDate;
      if (this.startDate.valueOf() !== 8639968443048000) {
        this.startDate = DPGlobal.parseDate(this.startDate, this.format, this.language, this.formatType, this.timezone);
      }
      this.update();
      this.updateNavArrows();
    },

    setEndDate: function (endDate) {
      this.endDate = endDate || this.endDate;
      if (this.endDate.valueOf() !== 8639968443048000) {
        this.endDate = DPGlobal.parseDate(this.endDate, this.format, this.language, this.formatType, this.timezone);
      }
      this.update();
      this.updateNavArrows();
    },

    setDatesDisabled: function (datesDisabled) {
      this.datesDisabled = datesDisabled || [];
      if (!$.isArray(this.datesDisabled)) {
        this.datesDisabled = this.datesDisabled.split(/,\s*/);
      }
      var mThis = this;
      this.datesDisabled = $.map(this.datesDisabled, function (d) {
        return DPGlobal.parseDate(d, mThis.format, mThis.language, mThis.formatType, mThis.timezone).toDateString();
      });
      this.update();
      this.updateNavArrows();
    },

    setTitle: function (selector, value) {
      return this.picker.find(selector)
        .find('th:eq(1)')
        .text(this.title === false ? value : this.title);
    },

    setDaysOfWeekDisabled: function (daysOfWeekDisabled) {
      this.daysOfWeekDisabled = daysOfWeekDisabled || [];
      if (!$.isArray(this.daysOfWeekDisabled)) {
        this.daysOfWeekDisabled = this.daysOfWeekDisabled.split(/,\s*/);
      }
      this.daysOfWeekDisabled = $.map(this.daysOfWeekDisabled, function (d) {
        return parseInt(d, 10);
      });
      this.update();
      this.updateNavArrows();
    },

    setMinutesDisabled: function (minutesDisabled) {
      this.minutesDisabled = minutesDisabled || [];
      if (!$.isArray(this.minutesDisabled)) {
        this.minutesDisabled = this.minutesDisabled.split(/,\s*/);
      }
      this.minutesDisabled = $.map(this.minutesDisabled, function (d) {
        return parseInt(d, 10);
      });
      this.update();
      this.updateNavArrows();
    },

    setHoursDisabled: function (hoursDisabled) {
      this.hoursDisabled = hoursDisabled || [];
      if (!$.isArray(this.hoursDisabled)) {
        this.hoursDisabled = this.hoursDisabled.split(/,\s*/);
      }
      this.hoursDisabled = $.map(this.hoursDisabled, function (d) {
        return parseInt(d, 10);
      });
      this.update();
      this.updateNavArrows();
    },

    place: function () {
      if (this.isInline) return;

      if (!this.zIndex) {
        var index_highest = 0;
        $('div').each(function () {
          var index_current = parseInt($(this).css('zIndex'), 10);
          if (index_current > index_highest) {
            index_highest = index_current;
          }
        });
        this.zIndex = index_highest + 10;
      }

      var offset, top, left, containerOffset;
      if (this.container instanceof $) {
        containerOffset = this.container.offset();
      } else {
        containerOffset = $(this.container).offset();
      }

      if (this.component) {
        offset = this.component.offset();
        left = offset.left;
        if (this.pickerPosition === 'bottom-left' || this.pickerPosition === 'top-left') {
          left += this.component.outerWidth() - this.picker.outerWidth();
        }
      } else {
        offset = this.element.offset();
        left = offset.left;
        if (this.pickerPosition === 'bottom-left' || this.pickerPosition === 'top-left') {
          left += this.element.outerWidth() - this.picker.outerWidth();
        }
      }

      var bodyWidth = document.body.clientWidth || window.innerWidth;
      if (left + 220 > bodyWidth) {
        left = bodyWidth - 220;
      }

      if (this.pickerPosition === 'top-left' || this.pickerPosition === 'top-right') {
        top = offset.top - this.picker.outerHeight();
      } else {
        top = offset.top + this.height;
      }

      top = top - containerOffset.top;
      left = left - containerOffset.left;

      this.picker.css({
        top:    top,
        left:   left,
        zIndex: this.zIndex
      });
    },

    hour_minute: "^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]",

    update: function () {
      var date, fromArgs = false;
      if (arguments && arguments.length && (typeof arguments[0] === 'string' || arguments[0] instanceof Date)) {
        date = arguments[0];
        fromArgs = true;
      } else {
        date = (this.isInput ? this.element.val() : this.element.find('input').val()) || this.element.data('date') || this.initialDate;
        if (typeof date === 'string') {
          date = date.replace(/^\s+|\s+$/g,'');
        }
      }

      if (!date) {
        date = new Date();
        fromArgs = false;
      }

      if (typeof date === "string") {
        if (new RegExp(this.hour_minute).test(date) || new RegExp(this.hour_minute + ":[0-5][0-9]").test(date)) {
          date = this.getDate()
        }
      }

      this.date = DPGlobal.parseDate(date, this.format, this.language, this.formatType, this.timezone);

      if (fromArgs) this.setValue();

      if (this.date < this.startDate) {
        this.viewDate = new Date(this.startDate);
      } else if (this.date > this.endDate) {
        this.viewDate = new Date(this.endDate);
      } else {
        this.viewDate = new Date(this.date);
      }
      this.fill();
    },

    fillDow: function () {
      var dowCnt = this.weekStart,
        html = '<tr>';
      while (dowCnt < this.weekStart + 7) {
        html += '<th class="dow">' + dates[this.language].daysMin[(dowCnt++) % 7] + '</th>';
      }
      html += '</tr>';
      this.picker.find('.datetimepicker-days thead').append(html);
    },

    fillMonths: function () {
      var html = '';
      var d = new Date(this.viewDate);
      for (var i = 0; i < 12; i++) {
        d.setUTCMonth(i);
        var classes = this.onRenderMonth(d);
        html += '<span class="' + classes.join(' ') + '">' + dates[this.language].monthsShort[i] + '</span>';
      }
      this.picker.find('.datetimepicker-months td').html(html);
    },

    fill: function () {
      if (!this.date || !this.viewDate) {
        return;
      }
      var d = new Date(this.viewDate),
        year = d.getUTCFullYear(),
        month = d.getUTCMonth(),
        dayMonth = d.getUTCDate(),
        hours = d.getUTCHours(),
        startYear = this.startDate.getUTCFullYear(),
        startMonth = this.startDate.getUTCMonth(),
        endYear = this.endDate.getUTCFullYear(),
        endMonth = this.endDate.getUTCMonth() + 1,
        currentDate = (new UTCDate(this.date.getUTCFullYear(), this.date.getUTCMonth(), this.date.getUTCDate())).valueOf(),
        today = new Date();
      this.setTitle('.datetimepicker-days', dates[this.language].months[month] + ' ' + year)
      if (this.formatViewType === 'time') {
        var formatted = this.getFormattedDate();
        this.setTitle('.datetimepicker-hours', formatted);
        this.setTitle('.datetimepicker-minutes', formatted);
      } else {
        this.setTitle('.datetimepicker-hours', dayMonth + ' ' + dates[this.language].months[month] + ' ' + year);
        this.setTitle('.datetimepicker-minutes', dayMonth + ' ' + dates[this.language].months[month] + ' ' + year);
      }
      this.picker.find('tfoot th.today')
        .text(dates[this.language].today || dates['en'].today)
        .toggle(this.todayBtn !== false);
      this.picker.find('tfoot th.clear')
        .text(dates[this.language].clear || dates['en'].clear)
        .toggle(this.clearBtn !== false);
      this.updateNavArrows();
      this.fillMonths();
      var prevMonth = UTCDate(year, month - 1, 28, 0, 0, 0, 0),
        day = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());
      prevMonth.setUTCDate(day);
      prevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.weekStart + 7) % 7);
      var nextMonth = new Date(prevMonth);
      nextMonth.setUTCDate(nextMonth.getUTCDate() + 42);
      nextMonth = nextMonth.valueOf();
      var html = [];
      var classes;
      while (prevMonth.valueOf() < nextMonth) {
        if (prevMonth.getUTCDay() === this.weekStart) {
          html.push('<tr>');
        }
        classes = this.onRenderDay(prevMonth);
        if (prevMonth.getUTCFullYear() < year || (prevMonth.getUTCFullYear() === year && prevMonth.getUTCMonth() < month)) {
          classes.push('old');
        } else if (prevMonth.getUTCFullYear() > year || (prevMonth.getUTCFullYear() === year && prevMonth.getUTCMonth() > month)) {
          classes.push('new');
        }
        // Compare internal UTC date with local today, not UTC today
        if (this.todayHighlight &&
          prevMonth.getUTCFullYear() === today.getFullYear() &&
          prevMonth.getUTCMonth() === today.getMonth() &&
          prevMonth.getUTCDate() === today.getDate()) {
          classes.push('today');
        }
        if (prevMonth.valueOf() === currentDate) {
          classes.push('active');
        }
        if ((prevMonth.valueOf() + 86400000) <= this.startDate || prevMonth.valueOf() > this.endDate ||
          $.inArray(prevMonth.getUTCDay(), this.daysOfWeekDisabled) !== -1 ||
          $.inArray(prevMonth.toDateString(), this.datesDisabled) !== -1) {
          classes.push('disabled');
        }
        html.push('<td class="' + classes.join(' ') + '">' + prevMonth.getUTCDate() + '</td>');
        if (prevMonth.getUTCDay() === this.weekEnd) {
          html.push('</tr>');
        }
        prevMonth.setUTCDate(prevMonth.getUTCDate() + 1);
      }
      this.picker.find('.datetimepicker-days tbody').empty().append(html.join(''));

      html = [];
      var txt = '', meridian = '', meridianOld = '';
      var hoursDisabled = this.hoursDisabled || [];
      d = new Date(this.viewDate)
      for (var i = 0; i < 24; i++) {
        d.setUTCHours(i);
        classes = this.onRenderHour(d);
        if (hoursDisabled.indexOf(i) !== -1) {
          classes.push('disabled');
        }
        var actual = UTCDate(year, month, dayMonth, i);
        // We want the previous hour for the startDate
        if ((actual.valueOf() + 3600000) <= this.startDate || actual.valueOf() > this.endDate) {
          classes.push('disabled');
        } else if (hours === i) {
          classes.push('active');
        }
        if (this.showMeridian && dates[this.language].meridiem.length === 2) {
          meridian = (i < 12 ? dates[this.language].meridiem[0] : dates[this.language].meridiem[1]);
          if (meridian !== meridianOld) {
            if (meridianOld !== '') {
              html.push('</fieldset>');
            }
            html.push('<fieldset class="hour"><legend>' + meridian.toUpperCase() + '</legend>');
          }
          meridianOld = meridian;
          txt = (i % 12 ? i % 12 : 12);
          if (i < 12) {
            classes.push('hour_am');
          } else {
            classes.push('hour_pm');
          }
          html.push('<span class="' + classes.join(' ') + '">' + txt + '</span>');
          if (i === 23) {
            html.push('</fieldset>');
          }
        } else {
          txt = i + ':00';
          html.push('<span class="' + classes.join(' ') + '">' + txt + '</span>');
        }
      }
      this.picker.find('.datetimepicker-hours td').html(html.join(''));

      html = [];
      txt = '';
      meridian = '';
      meridianOld = '';
      var minutesDisabled = this.minutesDisabled || [];
      d = new Date(this.viewDate);
      for (var i = 0; i < 60; i += this.minuteStep) {
        if (minutesDisabled.indexOf(i) !== -1) continue;
        d.setUTCMinutes(i);
        d.setUTCSeconds(0);
        classes = this.onRenderMinute(d);
        if (this.showMeridian && dates[this.language].meridiem.length === 2) {
          meridian = (hours < 12 ? dates[this.language].meridiem[0] : dates[this.language].meridiem[1]);
          if (meridian !== meridianOld) {
            if (meridianOld !== '') {
              html.push('</fieldset>');
            }
            html.push('<fieldset class="minute"><legend>' + meridian.toUpperCase() + '</legend>');
          }
          meridianOld = meridian;
          txt = (hours % 12 ? hours % 12 : 12);
          html.push('<span class="' + classes.join(' ') + '">' + txt + ':' + (i < 10 ? '0' + i : i) + '</span>');
          if (i === 59) {
            html.push('</fieldset>');
          }
        } else {
          txt = i + ':00';
          html.push('<span class="' + classes.join(' ') + '">' + hours + ':' + (i < 10 ? '0' + i : i) + '</span>');
        }
      }
      this.picker.find('.datetimepicker-minutes td').html(html.join(''));

      var currentYear = this.date.getUTCFullYear();
      var months = this.setTitle('.datetimepicker-months', year)
        .end()
        .find('.month').removeClass('active');
      if (currentYear === year) {
        // getUTCMonths() returns 0 based, and we need to select the next one
        // To cater bootstrap 2 we don't need to select the next one
        months.eq(this.date.getUTCMonth()).addClass('active');
      }
      if (year < startYear || year > endYear) {
        months.addClass('disabled');
      }
      if (year === startYear) {
        months.slice(0, startMonth).addClass('disabled');
      }
      if (year === endYear) {
        months.slice(endMonth).addClass('disabled');
      }

      html = '';
      year = parseInt(year / 10, 10) * 10;
      var yearCont = this.setTitle('.datetimepicker-years', year + '-' + (year + 9))
        .end()
        .find('td');
      year -= 1;
      d = new Date(this.viewDate);
      for (var i = -1; i < 11; i++) {
        d.setUTCFullYear(year);
        classes = this.onRenderYear(d);
        if (i === -1 || i === 10) {
          classes.push(old);
        }
        html += '<span class="' + classes.join(' ') + '">' + year + '</span>';
        year += 1;
      }
      yearCont.html(html);
      this.place();
    },

    updateNavArrows: function () {
      var d = new Date(this.viewDate),
        year = d.getUTCFullYear(),
        month = d.getUTCMonth(),
        day = d.getUTCDate(),
        hour = d.getUTCHours();
      switch (this.viewMode) {
        case 0:
          if (year <= this.startDate.getUTCFullYear()
            && month <= this.startDate.getUTCMonth()
            && day <= this.startDate.getUTCDate()
            && hour <= this.startDate.getUTCHours()) {
            this.picker.find('.prev').css({visibility: 'hidden'});
          } else {
            this.picker.find('.prev').css({visibility: 'visible'});
          }
          if (year >= this.endDate.getUTCFullYear()
            && month >= this.endDate.getUTCMonth()
            && day >= this.endDate.getUTCDate()
            && hour >= this.endDate.getUTCHours()) {
            this.picker.find('.next').css({visibility: 'hidden'});
          } else {
            this.picker.find('.next').css({visibility: 'visible'});
          }
          break;
        case 1:
          if (year <= this.startDate.getUTCFullYear()
            && month <= this.startDate.getUTCMonth()
            && day <= this.startDate.getUTCDate()) {
            this.picker.find('.prev').css({visibility: 'hidden'});
          } else {
            this.picker.find('.prev').css({visibility: 'visible'});
          }
          if (year >= this.endDate.getUTCFullYear()
            && month >= this.endDate.getUTCMonth()
            && day >= this.endDate.getUTCDate()) {
            this.picker.find('.next').css({visibility: 'hidden'});
          } else {
            this.picker.find('.next').css({visibility: 'visible'});
          }
          break;
        case 2:
          if (year <= this.startDate.getUTCFullYear()
            && month <= this.startDate.getUTCMonth()) {
            this.picker.find('.prev').css({visibility: 'hidden'});
          } else {
            this.picker.find('.prev').css({visibility: 'visible'});
          }
          if (year >= this.endDate.getUTCFullYear()
            && month >= this.endDate.getUTCMonth()) {
            this.picker.find('.next').css({visibility: 'hidden'});
          } else {
            this.picker.find('.next').css({visibility: 'visible'});
          }
          break;
        case 3:
        case 4:
          if (year <= this.startDate.getUTCFullYear()) {
            this.picker.find('.prev').css({visibility: 'hidden'});
          } else {
            this.picker.find('.prev').css({visibility: 'visible'});
          }
          if (year >= this.endDate.getUTCFullYear()) {
            this.picker.find('.next').css({visibility: 'hidden'});
          } else {
            this.picker.find('.next').css({visibility: 'visible'});
          }
          break;
      }
    },

    mousewheel: function (e) {

      e.preventDefault();
      e.stopPropagation();

      if (this.wheelPause) {
        return;
      }

      this.wheelPause = true;

      var originalEvent = e.originalEvent;

      var delta = originalEvent.wheelDelta;

      var mode = delta > 0 ? 1 : (delta === 0) ? 0 : -1;

      if (this.wheelViewModeNavigationInverseDirection) {
        mode = -mode;
      }

      this.showMode(mode);

      setTimeout($.proxy(function () {

        this.wheelPause = false

      }, this), this.wheelViewModeNavigationDelay);

    },

    click: function (e) {
      e.stopPropagation();
      e.preventDefault();
      var target = $(e.target).closest('span, td, th, legend');
      if (target.is('.' + this.icontype)) {
        target = $(target).parent().closest('span, td, th, legend');
      }
      if (target.length === 1) {
        if (target.is('.disabled')) {
          this.element.trigger({
            type:      'outOfRange',
            date:      this.viewDate,
            startDate: this.startDate,
            endDate:   this.endDate
          });
          return;
        }
        switch (target[0].nodeName.toLowerCase()) {
          case 'th':
            switch (target[0].className) {
              case 'switch':
                this.showMode(1);
                break;
              case 'prev':
              case 'next':
                var dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className === 'prev' ? -1 : 1);
                switch (this.viewMode) {
                  case 0:
                    this.viewDate = this.moveHour(this.viewDate, dir);
                    break;
                  case 1:
                    this.viewDate = this.moveDate(this.viewDate, dir);
                    break;
                  case 2:
                    this.viewDate = this.moveMonth(this.viewDate, dir);
                    break;
                  case 3:
                  case 4:
                    this.viewDate = this.moveYear(this.viewDate, dir);
                    break;
                }
                this.fill();
                this.element.trigger({
                  type:      target[0].className + ':' + this.convertViewModeText(this.viewMode),
                  date:      this.viewDate,
                  startDate: this.startDate,
                  endDate:   this.endDate
                });
                break;
              case 'clear':
                this.reset();
                if (this.autoclose) {
                  this.hide();
                }
                break;
              case 'today':
                var date = new Date();
                date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), 0);

                // Respect startDate and endDate.
                if (date < this.startDate) date = this.startDate;
                else if (date > this.endDate) date = this.endDate;

                this.viewMode = this.startViewMode;
                this.showMode(0);
                this._setDate(date);
                this.fill();
                if (this.autoclose) {
                  this.hide();
                }
                break;
            }
            break;
          case 'span':
            if (!target.is('.disabled')) {
              var year = this.viewDate.getUTCFullYear(),
                month = this.viewDate.getUTCMonth(),
                day = this.viewDate.getUTCDate(),
                hours = this.viewDate.getUTCHours(),
                minutes = this.viewDate.getUTCMinutes(),
                seconds = this.viewDate.getUTCSeconds();

              if (target.is('.month')) {
                this.viewDate.setUTCDate(1);
                month = target.parent().find('span').index(target);
                day = this.viewDate.getUTCDate();
                this.viewDate.setUTCMonth(month);
                this.element.trigger({
                  type: 'changeMonth',
                  date: this.viewDate
                });
                if (this.viewSelect >= 3) {
                  this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));
                }
              } else if (target.is('.year')) {
                this.viewDate.setUTCDate(1);
                year = parseInt(target.text(), 10) || 0;
                this.viewDate.setUTCFullYear(year);
                this.element.trigger({
                  type: 'changeYear',
                  date: this.viewDate
                });
                if (this.viewSelect >= 4) {
                  this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));
                }
              } else if (target.is('.hour')) {
                hours = parseInt(target.text(), 10) || 0;
                if (target.hasClass('hour_am') || target.hasClass('hour_pm')) {
                  if (hours === 12 && target.hasClass('hour_am')) {
                    hours = 0;
                  } else if (hours !== 12 && target.hasClass('hour_pm')) {
                    hours += 12;
                  }
                }
                this.viewDate.setUTCHours(hours);
                this.element.trigger({
                  type: 'changeHour',
                  date: this.viewDate
                });
                if (this.viewSelect >= 1) {
                  this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));
                }
              } else if (target.is('.minute')) {
                minutes = parseInt(target.text().substr(target.text().indexOf(':') + 1), 10) || 0;
                this.viewDate.setUTCMinutes(minutes);
                this.element.trigger({
                  type: 'changeMinute',
                  date: this.viewDate
                });
                if (this.viewSelect >= 0) {
                  this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));
                }
              }
              if (this.viewMode !== 0) {
                var oldViewMode = this.viewMode;
                this.showMode(-1);
                this.fill();
                if (oldViewMode === this.viewMode && this.autoclose) {
                  this.hide();
                }
              } else {
                this.fill();
                if (this.autoclose) {
                  this.hide();
                }
              }
            }
            break;
          case 'td':
            if (target.is('.day') && !target.is('.disabled')) {
              var day = parseInt(target.text(), 10) || 1;
              var year = this.viewDate.getUTCFullYear(),
                month = this.viewDate.getUTCMonth(),
                hours = this.viewDate.getUTCHours(),
                minutes = this.viewDate.getUTCMinutes(),
                seconds = this.viewDate.getUTCSeconds();
              if (target.is('.old')) {
                if (month === 0) {
                  month = 11;
                  year -= 1;
                } else {
                  month -= 1;
                }
              } else if (target.is('.new')) {
                if (month === 11) {
                  month = 0;
                  year += 1;
                } else {
                  month += 1;
                }
              }
              this.viewDate.setUTCFullYear(year);
              this.viewDate.setUTCMonth(month, day);
              this.element.trigger({
                type: 'changeDay',
                date: this.viewDate
              });
              if (this.viewSelect >= 2) {
                this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));
              }
            }
            var oldViewMode = this.viewMode;
            this.showMode(-1);
            this.fill();
            if (oldViewMode === this.viewMode && this.autoclose) {
              this.hide();
            }
            break;
        }
      }
    },

    _setDate: function (date, which) {
      if (!which || which === 'date')
        this.date = date;
      if (!which || which === 'view')
        this.viewDate = date;
      this.fill();
      this.setValue();
      var element;
      if (this.isInput) {
        element = this.element;
      } else if (this.component) {
        element = this.element.find('input');
      }
      if (element) {
        element.change();
      }
      this.element.trigger({
        type: 'changeDate',
        date: this.getDate()
      });
      if(date === null)
        this.date = this.viewDate;
    },

    moveMinute: function (date, dir) {
      if (!dir) return date;
      var new_date = new Date(date.valueOf());
      //dir = dir > 0 ? 1 : -1;
      new_date.setUTCMinutes(new_date.getUTCMinutes() + (dir * this.minuteStep));
      return new_date;
    },

    moveHour: function (date, dir) {
      if (!dir) return date;
      var new_date = new Date(date.valueOf());
      //dir = dir > 0 ? 1 : -1;
      new_date.setUTCHours(new_date.getUTCHours() + dir);
      return new_date;
    },

    moveDate: function (date, dir) {
      if (!dir) return date;
      var new_date = new Date(date.valueOf());
      //dir = dir > 0 ? 1 : -1;
      new_date.setUTCDate(new_date.getUTCDate() + dir);
      return new_date;
    },

    moveMonth: function (date, dir) {
      if (!dir) return date;
      var new_date = new Date(date.valueOf()),
        day = new_date.getUTCDate(),
        month = new_date.getUTCMonth(),
        mag = Math.abs(dir),
        new_month, test;
      dir = dir > 0 ? 1 : -1;
      if (mag === 1) {
        test = dir === -1
          // If going back one month, make sure month is not current month
          // (eg, Mar 31 -> Feb 31 === Feb 28, not Mar 02)
          ? function () {
          return new_date.getUTCMonth() === month;
        }
          // If going forward one month, make sure month is as expected
          // (eg, Jan 31 -> Feb 31 === Feb 28, not Mar 02)
          : function () {
          return new_date.getUTCMonth() !== new_month;
        };
        new_month = month + dir;
        new_date.setUTCMonth(new_month);
        // Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11
        if (new_month < 0 || new_month > 11)
          new_month = (new_month + 12) % 12;
      } else {
        // For magnitudes >1, move one month at a time...
        for (var i = 0; i < mag; i++)
          // ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...
          new_date = this.moveMonth(new_date, dir);
        // ...then reset the day, keeping it in the new month
        new_month = new_date.getUTCMonth();
        new_date.setUTCDate(day);
        test = function () {
          return new_month !== new_date.getUTCMonth();
        };
      }
      // Common date-resetting loop -- if date is beyond end of month, make it
      // end of month
      while (test()) {
        new_date.setUTCDate(--day);
        new_date.setUTCMonth(new_month);
      }
      return new_date;
    },

    moveYear: function (date, dir) {
      return this.moveMonth(date, dir * 12);
    },

    dateWithinRange: function (date) {
      return date >= this.startDate && date <= this.endDate;
    },

    keydown: function (e) {
      if (this.picker.is(':not(:visible)')) {
        if (e.keyCode === 27) // allow escape to hide and re-show picker
          this.show();
        return;
      }
      var dateChanged = false,
        dir, newDate, newViewDate;
      switch (e.keyCode) {
        case 27: // escape
          this.hide();
          e.preventDefault();
          break;
        case 37: // left
        case 39: // right
          if (!this.keyboardNavigation) break;
          dir = e.keyCode === 37 ? -1 : 1;
          var viewMode = this.viewMode;
          if (e.ctrlKey) {
            viewMode += 2;
          } else if (e.shiftKey) {
            viewMode += 1;
          }
          if (viewMode === 4) {
            newDate = this.moveYear(this.date, dir);
            newViewDate = this.moveYear(this.viewDate, dir);
          } else if (viewMode === 3) {
            newDate = this.moveMonth(this.date, dir);
            newViewDate = this.moveMonth(this.viewDate, dir);
          } else if (viewMode === 2) {
            newDate = this.moveDate(this.date, dir);
            newViewDate = this.moveDate(this.viewDate, dir);
          } else if (viewMode === 1) {
            newDate = this.moveHour(this.date, dir);
            newViewDate = this.moveHour(this.viewDate, dir);
          } else if (viewMode === 0) {
            newDate = this.moveMinute(this.date, dir);
            newViewDate = this.moveMinute(this.viewDate, dir);
          }
          if (this.dateWithinRange(newDate)) {
            this.date = newDate;
            this.viewDate = newViewDate;
            this.setValue();
            this.update();
            e.preventDefault();
            dateChanged = true;
          }
          break;
        case 38: // up
        case 40: // down
          if (!this.keyboardNavigation) break;
          dir = e.keyCode === 38 ? -1 : 1;
          viewMode = this.viewMode;
          if (e.ctrlKey) {
            viewMode += 2;
          } else if (e.shiftKey) {
            viewMode += 1;
          }
          if (viewMode === 4) {
            newDate = this.moveYear(this.date, dir);
            newViewDate = this.moveYear(this.viewDate, dir);
          } else if (viewMode === 3) {
            newDate = this.moveMonth(this.date, dir);
            newViewDate = this.moveMonth(this.viewDate, dir);
          } else if (viewMode === 2) {
            newDate = this.moveDate(this.date, dir * 7);
            newViewDate = this.moveDate(this.viewDate, dir * 7);
          } else if (viewMode === 1) {
            if (this.showMeridian) {
              newDate = this.moveHour(this.date, dir * 6);
              newViewDate = this.moveHour(this.viewDate, dir * 6);
            } else {
              newDate = this.moveHour(this.date, dir * 4);
              newViewDate = this.moveHour(this.viewDate, dir * 4);
            }
          } else if (viewMode === 0) {
            newDate = this.moveMinute(this.date, dir * 4);
            newViewDate = this.moveMinute(this.viewDate, dir * 4);
          }
          if (this.dateWithinRange(newDate)) {
            this.date = newDate;
            this.viewDate = newViewDate;
            this.setValue();
            this.update();
            e.preventDefault();
            dateChanged = true;
          }
          break;
        case 13: // enter
          if (this.viewMode !== 0) {
            var oldViewMode = this.viewMode;
            this.showMode(-1);
            this.fill();
            if (oldViewMode === this.viewMode && this.autoclose) {
              this.hide();
            }
          } else {
            this.fill();
            if (this.autoclose) {
              this.hide();
            }
          }
          e.preventDefault();
          break;
        case 9: // tab
          this.hide();
          break;
      }
      if (dateChanged) {
        var element;
        if (this.isInput) {
          element = this.element;
        } else if (this.component) {
          element = this.element.find('input');
        }
        if (element) {
          element.change();
        }
        this.element.trigger({
          type: 'changeDate',
          date: this.getDate()
        });
      }
    },

    showMode: function (dir) {
      if (dir) {
        var newViewMode = Math.max(0, Math.min(DPGlobal.modes.length - 1, this.viewMode + dir));
        if (newViewMode >= this.minView && newViewMode <= this.maxView) {
          this.element.trigger({
            type:        'changeMode',
            date:        this.viewDate,
            oldViewMode: this.viewMode,
            newViewMode: newViewMode
          });

          this.viewMode = newViewMode;
        }
      }
      /*
       vitalets: fixing bug of very special conditions:
       jquery 1.7.1 + webkit + show inline datetimepicker in bootstrap popover.
       Method show() does not set display css correctly and datetimepicker is not shown.
       Changed to .css('display', 'block') solve the problem.
       See https://github.com/vitalets/x-editable/issues/37

       In jquery 1.7.2+ everything works fine.
       */
      //this.picker.find('>div').hide().filter('.datetimepicker-'+DPGlobal.modes[this.viewMode].clsName).show();
      this.picker.find('>div').hide().filter('.datetimepicker-' + DPGlobal.modes[this.viewMode].clsName).css('display', 'block');
      this.updateNavArrows();
    },

    reset: function () {
      this._setDate(null, 'date');
    },

    convertViewModeText:  function (viewMode) {
      switch (viewMode) {
        case 4:
          return 'decade';
        case 3:
          return 'year';
        case 2:
          return 'month';
        case 1:
          return 'day';
        case 0:
          return 'hour';
      }
    }
  };

  var old = $.fn.datetimepicker;
  $.fn.datetimepicker = function (option) {
    var args = Array.apply(null, arguments);
    args.shift();
    var internal_return;
    this.each(function () {
      var $this = $(this),
        data = $this.data('datetimepicker'),
        options = typeof option === 'object' && option;
      if (!data) {
        $this.data('datetimepicker', (data = new Datetimepicker(this, $.extend({}, $.fn.datetimepicker.defaults, options))));
      }
      if (typeof option === 'string' && typeof data[option] === 'function') {
        internal_return = data[option].apply(data, args);
        if (internal_return !== undefined) {
          return false;
        }
      }
    });
    if (internal_return !== undefined)
      return internal_return;
    else
      return this;
  };

  $.fn.datetimepicker.defaults = {
  };
  $.fn.datetimepicker.Constructor = Datetimepicker;
  var dates = $.fn.datetimepicker.dates = {
    en: {
      days:        ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
      daysShort:   ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
      daysMin:     ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa', 'Su'],
      months:      ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
      monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
      meridiem:    ['am', 'pm'],
      suffix:      ['st', 'nd', 'rd', 'th'],
      today:       'Today',
      clear:       'Clear'
    }
  };

  var DPGlobal = {
    modes:            [
      {
        clsName: 'minutes',
        navFnc:  'Hours',
        navStep: 1
      },
      {
        clsName: 'hours',
        navFnc:  'Date',
        navStep: 1
      },
      {
        clsName: 'days',
        navFnc:  'Month',
        navStep: 1
      },
      {
        clsName: 'months',
        navFnc:  'FullYear',
        navStep: 1
      },
      {
        clsName: 'years',
        navFnc:  'FullYear',
        navStep: 10
      }
    ],
    isLeapYear:       function (year) {
      return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0))
    },
    getDaysInMonth:   function (year, month) {
      return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month]
    },
    getDefaultFormat: function (type, field) {
      if (type === 'standard') {
        if (field === 'input')
          return 'yyyy-mm-dd hh:ii';
        else
          return 'yyyy-mm-dd hh:ii:ss';
      } else if (type === 'php') {
        if (field === 'input')
          return 'Y-m-d H:i';
        else
          return 'Y-m-d H:i:s';
      } else {
        throw new Error('Invalid format type.');
      }
    },
    validParts: function (type) {
      if (type === 'standard') {
        return /t|hh?|HH?|p|P|z|Z|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;
      } else if (type === 'php') {
        return /[dDjlNwzFmMnStyYaABgGhHis]/g;
      } else {
        throw new Error('Invalid format type.');
      }
    },
    nonpunctuation: /[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,
    parseFormat: function (format, type) {
      // IE treats \0 as a string end in inputs (truncating the value),
      // so it's a bad format delimiter, anyway
      var separators = format.replace(this.validParts(type), '\0').split('\0'),
        parts = format.match(this.validParts(type));
      if (!separators || !separators.length || !parts || parts.length === 0) {
        throw new Error('Invalid date format.');
      }
      return {separators: separators, parts: parts};
    },
    parseDate: function (date, format, language, type, timezone) {
      if (date instanceof Date) {
        var dateUTC = new Date(date.valueOf() - date.getTimezoneOffset() * 60000);
        dateUTC.setMilliseconds(0);
        return dateUTC;
      }
      if (/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(date)) {
        format = this.parseFormat('yyyy-mm-dd', type);
      }
      if (/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(date)) {
        format = this.parseFormat('yyyy-mm-dd hh:ii', type);
      }
      if (/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(date)) {
        format = this.parseFormat('yyyy-mm-dd hh:ii:ss', type);
      }
      if (/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(date)) {
        var part_re = /([-+]\d+)([dmwy])/,
          parts = date.match(/([-+]\d+)([dmwy])/g),
          part, dir;
        date = new Date();
        for (var i = 0; i < parts.length; i++) {
          part = part_re.exec(parts[i]);
          dir = parseInt(part[1]);
          switch (part[2]) {
            case 'd':
              date.setUTCDate(date.getUTCDate() + dir);
              break;
            case 'm':
              date = Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype, date, dir);
              break;
            case 'w':
              date.setUTCDate(date.getUTCDate() + dir * 7);
              break;
            case 'y':
              date = Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype, date, dir);
              break;
          }
        }
        return UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), 0);
      }
      var parts = date && date.toString().match(this.nonpunctuation) || [],
        date = new Date(0, 0, 0, 0, 0, 0, 0),
        parsed = {},
        setters_order = ['hh', 'h', 'ii', 'i', 'ss', 's', 'yyyy', 'yy', 'M', 'MM', 'm', 'mm', 'D', 'DD', 'd', 'dd', 'H', 'HH', 'p', 'P', 'z', 'Z'],
        setters_map = {
          hh:   function (d, v) {
            return d.setUTCHours(v);
          },
          h:    function (d, v) {
            return d.setUTCHours(v);
          },
          HH:   function (d, v) {
            return d.setUTCHours(v === 12 ? 0 : v);
          },
          H:    function (d, v) {
            return d.setUTCHours(v === 12 ? 0 : v);
          },
          ii:   function (d, v) {
            return d.setUTCMinutes(v);
          },
          i:    function (d, v) {
            return d.setUTCMinutes(v);
          },
          ss:   function (d, v) {
            return d.setUTCSeconds(v);
          },
          s:    function (d, v) {
            return d.setUTCSeconds(v);
          },
          yyyy: function (d, v) {
            return d.setUTCFullYear(v);
          },
          yy:   function (d, v) {
            return d.setUTCFullYear(2000 + v);
          },
          m:    function (d, v) {
            v -= 1;
            while (v < 0) v += 12;
            v %= 12;
            d.setUTCMonth(v);
            while (d.getUTCMonth() !== v)
              if (isNaN(d.getUTCMonth()))
                return d;
              else
                d.setUTCDate(d.getUTCDate() - 1);
            return d;
          },
          d:    function (d, v) {
            return d.setUTCDate(v);
          },
          p:    function (d, v) {
            return d.setUTCHours(v === 1 ? d.getUTCHours() + 12 : d.getUTCHours());
          },
          z:    function () {
            return timezone
          }
        },
        val, filtered, part;
      setters_map['M'] = setters_map['MM'] = setters_map['mm'] = setters_map['m'];
      setters_map['dd'] = setters_map['d'];
      setters_map['P'] = setters_map['p'];
      setters_map['Z'] = setters_map['z'];
      date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());
      if (parts.length === format.parts.length) {
        for (var i = 0, cnt = format.parts.length; i < cnt; i++) {
          val = parseInt(parts[i], 10);
          part = format.parts[i];
          if (isNaN(val)) {
            switch (part) {
              case 'MM':
                filtered = $(dates[language].months).filter(function () {
                  var m = this.slice(0, parts[i].length),
                    p = parts[i].slice(0, m.length);
                  return m === p;
                });
                val = $.inArray(filtered[0], dates[language].months) + 1;
                break;
              case 'M':
                filtered = $(dates[language].monthsShort).filter(function () {
                  var m = this.slice(0, parts[i].length),
                    p = parts[i].slice(0, m.length);
                  return m.toLowerCase() === p.toLowerCase();
                });
                val = $.inArray(filtered[0], dates[language].monthsShort) + 1;
                break;
              case 'p':
              case 'P':
                val = $.inArray(parts[i].toLowerCase(), dates[language].meridiem);
                break;
              case 'z':
              case 'Z':
                timezone;
                break;

            }
          }
          parsed[part] = val;
        }
        for (var i = 0, s; i < setters_order.length; i++) {
          s = setters_order[i];
          if (s in parsed && !isNaN(parsed[s]))
            setters_map[s](date, parsed[s])
        }
      }
      return date;
    },
    formatDate:       function (date, format, language, type, timezone) {
      if (date === null) {
        return '';
      }
      var val;
      if (type === 'standard') {
        val = {
          t:    date.getTime(),
          // year
          yy:   date.getUTCFullYear().toString().substring(2),
          yyyy: date.getUTCFullYear(),
          // month
          m:    date.getUTCMonth() + 1,
          M:    dates[language].monthsShort[date.getUTCMonth()],
          MM:   dates[language].months[date.getUTCMonth()],
          // day
          d:    date.getUTCDate(),
          D:    dates[language].daysShort[date.getUTCDay()],
          DD:   dates[language].days[date.getUTCDay()],
          p:    (dates[language].meridiem.length === 2 ? dates[language].meridiem[date.getUTCHours() < 12 ? 0 : 1] : ''),
          // hour
          h:    date.getUTCHours(),
          // minute
          i:    date.getUTCMinutes(),
          // second
          s:    date.getUTCSeconds(),
          // timezone
          z:    timezone
        };

        if (dates[language].meridiem.length === 2) {
          val.H = (val.h % 12 === 0 ? 12 : val.h % 12);
        }
        else {
          val.H = val.h;
        }
        val.HH = (val.H < 10 ? '0' : '') + val.H;
        val.P = val.p.toUpperCase();
        val.Z = val.z;
        val.hh = (val.h < 10 ? '0' : '') + val.h;
        val.ii = (val.i < 10 ? '0' : '') + val.i;
        val.ss = (val.s < 10 ? '0' : '') + val.s;
        val.dd = (val.d < 10 ? '0' : '') + val.d;
        val.mm = (val.m < 10 ? '0' : '') + val.m;
      } else if (type === 'php') {
        // php format
        val = {
          // year
          y: date.getUTCFullYear().toString().substring(2),
          Y: date.getUTCFullYear(),
          // month
          F: dates[language].months[date.getUTCMonth()],
          M: dates[language].monthsShort[date.getUTCMonth()],
          n: date.getUTCMonth() + 1,
          t: DPGlobal.getDaysInMonth(date.getUTCFullYear(), date.getUTCMonth()),
          // day
          j: date.getUTCDate(),
          l: dates[language].days[date.getUTCDay()],
          D: dates[language].daysShort[date.getUTCDay()],
          w: date.getUTCDay(), // 0 -> 6
          N: (date.getUTCDay() === 0 ? 7 : date.getUTCDay()),       // 1 -> 7
          S: (date.getUTCDate() % 10 <= dates[language].suffix.length ? dates[language].suffix[date.getUTCDate() % 10 - 1] : ''),
          // hour
          a: (dates[language].meridiem.length === 2 ? dates[language].meridiem[date.getUTCHours() < 12 ? 0 : 1] : ''),
          g: (date.getUTCHours() % 12 === 0 ? 12 : date.getUTCHours() % 12),
          G: date.getUTCHours(),
          // minute
          i: date.getUTCMinutes(),
          // second
          s: date.getUTCSeconds()
        };
        val.m = (val.n < 10 ? '0' : '') + val.n;
        val.d = (val.j < 10 ? '0' : '') + val.j;
        val.A = val.a.toString().toUpperCase();
        val.h = (val.g < 10 ? '0' : '') + val.g;
        val.H = (val.G < 10 ? '0' : '') + val.G;
        val.i = (val.i < 10 ? '0' : '') + val.i;
        val.s = (val.s < 10 ? '0' : '') + val.s;
      } else {
        throw new Error('Invalid format type.');
      }
      var date = [],
        seps = $.extend([], format.separators);
      for (var i = 0, cnt = format.parts.length; i < cnt; i++) {
        if (seps.length) {
          date.push(seps.shift());
        }
        date.push(val[format.parts[i]]);
      }
      if (seps.length) {
        date.push(seps.shift());
      }
      return date.join('');
    },
    convertViewMode:  function (viewMode) {
      switch (viewMode) {
        case 4:
        case 'decade':
          viewMode = 4;
          break;
        case 3:
        case 'year':
          viewMode = 3;
          break;
        case 2:
        case 'month':
          viewMode = 2;
          break;
        case 1:
        case 'day':
          viewMode = 1;
          break;
        case 0:
        case 'hour':
          viewMode = 0;
          break;
      }

      return viewMode;
    },
    headTemplate: '<thead>' +
                '<tr>' +
                '<th class="prev"><i class="{iconType} {leftArrow}"/></th>' +
                '<th colspan="5" class="switch"></th>' +
                '<th class="next"><i class="{iconType} {rightArrow}"/></th>' +
                '</tr>' +
      '</thead>',
    headTemplateV3: '<thead>' +
                '<tr>' +
                '<th class="prev"><span class="{iconType} {leftArrow}"></span> </th>' +
                '<th colspan="5" class="switch"></th>' +
                '<th class="next"><span class="{iconType} {rightArrow}"></span> </th>' +
                '</tr>' +
      '</thead>',
    contTemplate: '<tbody><tr><td colspan="7"></td></tr></tbody>',
    footTemplate: '<tfoot>' + 
                    '<tr><th colspan="7" class="today"></th></tr>' +
                    '<tr><th colspan="7" class="clear"></th></tr>' +
                  '</tfoot>'
  };
  DPGlobal.template = '<div class="datetimepicker">' +
    '<div class="datetimepicker-minutes">' +
    '<table class=" table-condensed">' +
    DPGlobal.headTemplate +
    DPGlobal.contTemplate +
    DPGlobal.footTemplate +
    '</table>' +
    '</div>' +
    '<div class="datetimepicker-hours">' +
    '<table class=" table-condensed">' +
    DPGlobal.headTemplate +
    DPGlobal.contTemplate +
    DPGlobal.footTemplate +
    '</table>' +
    '</div>' +
    '<div class="datetimepicker-days">' +
    '<table class=" table-condensed">' +
    DPGlobal.headTemplate +
    '<tbody></tbody>' +
    DPGlobal.footTemplate +
    '</table>' +
    '</div>' +
    '<div class="datetimepicker-months">' +
    '<table class="table-condensed">' +
    DPGlobal.headTemplate +
    DPGlobal.contTemplate +
    DPGlobal.footTemplate +
    '</table>' +
    '</div>' +
    '<div class="datetimepicker-years">' +
    '<table class="table-condensed">' +
    DPGlobal.headTemplate +
    DPGlobal.contTemplate +
    DPGlobal.footTemplate +
    '</table>' +
    '</div>' +
    '</div>';
  DPGlobal.templateV3 = '<div class="datetimepicker">' +
    '<div class="datetimepicker-minutes">' +
    '<table class=" table-condensed">' +
    DPGlobal.headTemplateV3 +
    DPGlobal.contTemplate +
    DPGlobal.footTemplate +
    '</table>' +
    '</div>' +
    '<div class="datetimepicker-hours">' +
    '<table class=" table-condensed">' +
    DPGlobal.headTemplateV3 +
    DPGlobal.contTemplate +
    DPGlobal.footTemplate +
    '</table>' +
    '</div>' +
    '<div class="datetimepicker-days">' +
    '<table class=" table-condensed">' +
    DPGlobal.headTemplateV3 +
    '<tbody></tbody>' +
    DPGlobal.footTemplate +
    '</table>' +
    '</div>' +
    '<div class="datetimepicker-months">' +
    '<table class="table-condensed">' +
    DPGlobal.headTemplateV3 +
    DPGlobal.contTemplate +
    DPGlobal.footTemplate +
    '</table>' +
    '</div>' +
    '<div class="datetimepicker-years">' +
    '<table class="table-condensed">' +
    DPGlobal.headTemplateV3 +
    DPGlobal.contTemplate +
    DPGlobal.footTemplate +
    '</table>' +
    '</div>' +
    '</div>';
  $.fn.datetimepicker.DPGlobal = DPGlobal;

  /* DATETIMEPICKER NO CONFLICT
   * =================== */

  $.fn.datetimepicker.noConflict = function () {
    $.fn.datetimepicker = old;
    return this;
  };

  /* DATETIMEPICKER DATA-API
   * ================== */

  $(document).on(
    'focus.datetimepicker.data-api click.datetimepicker.data-api',
    '[data-provide="datetimepicker"]',
    function (e) {
      var $this = $(this);
      if ($this.data('datetimepicker')) return;
      e.preventDefault();
      // component click requires us to explicitly show it
      $this.datetimepicker('show');
    }
  );
  $(function () {
    $('[data-provide="datetimepicker-inline"]').datetimepicker();
  });

}));

/**
 * Simplified Chinese translation for bootstrap-datetimepicker
 * Yuan Cheung <advanimal@gmail.com>
 */
;(function($){
	$.fn.datetimepicker.dates['zh-CN'] = {
			days: ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六", "星期日"],
			daysShort: ["周日", "周一", "周二", "周三", "周四", "周五", "周六", "周日"],
			daysMin:  ["日", "一", "二", "三", "四", "五", "六", "日"],
			months: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
			monthsShort: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
			today: "今天",
			suffix: [],
			meridiem: ["上午", "下午"]
	};
}(jQuery));

//正式服务器

//book url

const indexUrl = "http://10.167.35.186:8080/findBook/All";
const addPostUrl = "http://10.167.35.186:8080/findBook/insert";
const modifyPostUrl = "http://10.167.35.186:8080/findBook/update";

//staff url
const staffGetUrl = "http://10.167.35.186:8080/user/People";   //现有员工
const singleStaffInfoUrl = "http://10.167.35.186:8080/user/selectbyParam"; //单个员工信息
const voluntaryDemissionGetUrl = "http://10.167.35.186:8080/user/selectbyParam?state=离职";  //离职员工
const addPeopleUrl = "http://10.167.35.186:8080/user/addStaff";  //添加员工
const modifyPeopleUrl = "http://10.167.35.186:8080/user/modifyStaff";  //修改员工
const deletePeopleUrl = "http://10.167.35.186:8080/user/deleteStaff";  //删除员工

//patent url

const patentGetUrl = "http://10.167.35.186:8080/Patent/userPatent"; // 专利主页搜索页面信息生成
const addPatentUrl = "http://10.167.35.186:8080/Patent/addPatent";// 添加专利页面信息生成
const patentGetAllUrl = "http://10.167.35.186:8080/Patent/allPatent";// 修改专利页面信息生成
const patentModifyUrl = "http://10.167.35.186:8080/Patent/modifyPatent";// 修改专利页面提交信息


// thesis url

const thesisGetUrl = "http://10.167.35.186:8080/mainThesis"; // 论文主页面搜索页面信息
const thesisAddPostUrl = "http://10.167.35.186:8080/addThesis";// 添加论文页面提交信息
const thesisPostModifyUrl = "http://10.167.35.186:8080/updateThesis";// 修改论文页面提交信息
const uploadThesisFile = "http://10.167.35.186:8080/uploadFile"; //上传文件地址
const downloadFileUrl = "http://10.167.35.186:8080/downloadfile/";// 文件下载地址
const previewFileUrl = "http://10.167.35.186:8080/viewer/";// 文件预览地址

// photo url
const photoGetUrl = "http://10.167.35.186:8080/mainPhoto";
const addPhotoPostUrl = "http://10.167.35.186:8080/uploadPhoto";
const photoTitleCheckUrl = "http://10.167.35.186:8080/checkTitle";
const photoDetailsUrl = "http://10.167.35.186:8080/selectPhoto";
const deletePhotoUrl = "http://10.167.35.106:8080/deletePhoto";
const modifyPhotoPostUrl = "http://10.167.35.106:8080/insertActivityPhoto";

window.onpageshow = function(event) {  //强制页面刷新
　　if (event.persisted) {
　　　　window.location.reload();
　　}
};

﻿//正式服务器

//book url
var indexUrl = "http://10.167.35.171:8888/findBook/All";
var addPostUrl = "http://10.167.35.171:8888/findBook/insert";
var modifyPostUrl = "http://10.167.35.171:8888/findBook/update";

//staff url
var staffGetUrl = "http://10.167.35.171:8888/user/People";   //现有员工
var singleStaffInfoUrl = "http://10.167.35.171:8888/user/selectbyParam"; //单个员工信息
var voluntaryDemissionGetUrl = encodeURI("http://10.167.35.171:8888/user/selectbyParam?state=离职");  //离职员工
var addPeopleUrl = "http://10.167.35.171:8888/user/addStaff";  //添加员工
var modifyPeopleUrl = "http://10.167.35.171:8888/user/modifyStaff";  //修改员工
var deletePeopleUrl = "http://10.167.35.171:8888/user/deleteStaff";  //删除员工

//patent url

var patentGetUrl = "http://10.167.35.171:8888/Patent/userPatent"; // 专利主页搜索页面信息生成
var addPatentUrl = "http://10.167.35.171:8888/Patent/addPatent";// 添加专利页面信息生成
var patentGetAllUrl = "http://10.167.35.171:8888/Patent/allPatent";// 修改专利页面信息生成
var patentModifyUrl = "http://10.167.35.171:8888/Patent/modifyPatent";// 修改专利页面提交信息

//thesis url
const thesisGetUrl = "http://10.167.35.171:8888/mainThesis"; // 论文主页面搜索页面信息
const thesisAddPostUrl = "http://10.167.35.171:8888/addThesis";// 添加论文页面提交信息
const thesisPostModifyUrl = "http://10.167.35.171:8888/updateThesis";// 修改论文页面提交信息
const uploadThesisFile = "http://10.167.35.171:8888/uploadFile"; //上传文件地址
const downloadFileUrl = "http://10.167.35.171:8888/downloadfile/";// 文件下载地址
const previewFileUrl = "http://10.167.35.171:8888/viewer/";// 文件预览地址



window.onpageshow = function(event) {  // refresh 

　　if (event.persisted) {

　　　　window.location.reload();

　　}

};
$(function(){
  $(".form-inline input").val("")
  $(".form-inline select").val("在录")
  var url = indexUrl;
  var getparams = {};
      getparams.selectSort = "在录";
      getparams.searchBuyer = $("#searchName").val();
      getparams.searchBook = $("#searchBook").val();
  indexGetData(url,getparams,$("#book-table"),'indexPage','indexLocation'); //初始化加载图书信息
  $("#search").on("click",function(){

    getparams.selectSort = $("#selectSort").val();
    getparams.searchBuyer = $("#searchName").val();
    getparams.searchBook = $("#searchBook").val();
    $("#book-table tr td").remove();
    //console.log(JSON.stringify(getparams))
    //sessionStorage.clear();
  	indexGetData(url,getparams,$("#book-table"),'searchPage','searchLocation');
  })

})
function indexGetData(url,getparams,$elem,pageName,pageLocation){  //get方式获取数据
    loading($elem)
    $.ajax({
         type:"GET",
         url:url,
         data:getparams,
         success:function(data){

         //  sessionStorage.clear();
           $("#ant-site-loading").remove();
           var bookData,
               messageData="";
           if(typeof(data) == "string"){
               bookData = JSON.parse(data);
           }else if(typeof(data) == "object"){
               bookData = data;
           }
           messageData = bookData.message;

           if(messageData == "操作成功"){
             var bookData = bookData.data;
             //引用table插件

             $("#book-table").createTable({tableData:bookData,choiceContent:'index',pageId:"#page",totalPageId:'#total-page',skipPageId:"#skip-click",tableId:'#book-table',sessionPage:pageName,sessionLocation:pageLocation})

           }else{
             alert(messageData)
             return false;
           }


        },
        error:function(error){
          console.log(error)
        }
      });
}

/*! jQuery v3.1.1 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.1.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=r.isArray(d)))?(e?(e=!1,f=c&&r.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];e=b.getElementsByName(a),d=0;while(f=e[d++])if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b)return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type])break;if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a)return G.apply(c,e),c;break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,C=/^.[^:#\[\.,]*$/;function D(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):C.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(D(this,a||[],!1))},not:function(a){return this.pushStack(D(this,a||[],!0))},is:function(a){return!!D(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var E,F=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,G=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||E,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:F.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),B.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};G.prototype=r.fn,E=r(d);var H=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function J(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return J(a,"nextSibling")},prev:function(a){return J(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return a.contentDocument||r.merge([],a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(I[a]||r.uniqueSort(e),H.test(a)&&e.reverse()),this.pushStack(e)}});var K=/[^\x20\t\r\n\f]+/g;function L(a){var b={};return r.each(a.match(K)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?L(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function M(a){return a}function N(a){throw a}function O(a,b,c){var d;try{a&&r.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&r.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,M,e),g(f,c,N,e)):(f++,j.call(a,g(f,c,M,e),g(f,c,N,e),g(f,c,M,c.notifyWith))):(d!==M&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==N&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:M,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:M)),c[2][3].add(g(0,a,r.isFunction(d)?d:N))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(O(a,g.done(h(c)).resolve,g.reject),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)O(e[c],h(c),g.reject);return g.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&P.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var Q=r.Deferred();r.fn.ready=function(a){return Q.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,holdReady:function(a){a?r.readyWait++:r.ready(!0)},ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||Q.resolveWith(d,[r]))}}),r.ready.then=Q.then;function R(){d.removeEventListener("DOMContentLoaded",R),
a.removeEventListener("load",R),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",R),a.addEventListener("load",R));var S=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)S(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},T=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function U(){this.expando=r.expando+U.uid++}U.uid=1,U.prototype={cache:function(a){var b=a[this.expando];return b||(b={},T(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){r.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(K)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var V=new U,W=new U,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function Z(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:X.test(a)?JSON.parse(a):a)}function $(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Y,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=Z(c)}catch(e){}W.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return W.hasData(a)||V.hasData(a)},data:function(a,b,c){return W.access(a,b,c)},removeData:function(a,b){W.remove(a,b)},_data:function(a,b,c){return V.access(a,b,c)},_removeData:function(a,b){V.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=W.get(f),1===f.nodeType&&!V.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),$(f,d,e[d])));V.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){W.set(this,a)}):S(this,function(b){var c;if(f&&void 0===b){if(c=W.get(f,a),void 0!==c)return c;if(c=$(f,a),void 0!==c)return c}else this.each(function(){W.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){W.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=V.get(a,b),c&&(!d||r.isArray(c)?d=V.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return V.get(a,c)||V.access(a,c,{empty:r.Callbacks("once memory").add(function(){V.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=V.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var _=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,aa=new RegExp("^(?:([+-])=|)("+_+")([a-z%]*)$","i"),ba=["Top","Right","Bottom","Left"],ca=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function ea(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&aa.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var fa={};function ga(a){var b,c=a.ownerDocument,d=a.nodeName,e=fa[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),fa[d]=e,e)}function ha(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=V.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&ca(d)&&(e[f]=ga(d))):"none"!==c&&(e[f]="none",V.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ha(this,!0)},hide:function(){return ha(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){ca(this)?r(this).show():r(this).hide()})}});var ia=/^(?:checkbox|radio)$/i,ja=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ka=/^$|\/(?:java|ecma)script/i,la={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};la.optgroup=la.option,la.tbody=la.tfoot=la.colgroup=la.caption=la.thead,la.th=la.td;function ma(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&r.nodeName(a,b)?r.merge([a],c):c}function na(a,b){for(var c=0,d=a.length;c<d;c++)V.set(a[c],"globalEval",!b||V.get(b[c],"globalEval"))}var oa=/<|&#?\w+;/;function pa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(oa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ja.exec(f)||["",""])[1].toLowerCase(),i=la[h]||la._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=ma(l.appendChild(f),"script"),j&&na(g),c){k=0;while(f=g[k++])ka.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var qa=d.documentElement,ra=/^key/,sa=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ta=/^([^.]*)(?:\.(.+)|)/;function ua(){return!0}function va(){return!1}function wa(){try{return d.activeElement}catch(a){}}function xa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)xa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=va;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(qa,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(K)||[""],j=b.length;while(j--)h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.hasData(a)&&V.get(a);if(q&&(i=q.events)){b=(b||"").match(K)||[""],j=b.length;while(j--)if(h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&V.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(V.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==wa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===wa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r.nodeName(this,"input"))return this.click(),!1},_default:function(a){return r.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ua:va,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:va,isPropagationStopped:va,isImmediatePropagationStopped:va,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ua,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ua,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ua,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&ra.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&sa.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return xa(this,a,b,c,d)},one:function(a,b,c,d){return xa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=va),this.each(function(){r.event.remove(this,a,c,b)})}});var ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,za=/<script|<style|<link/i,Aa=/checked\s*(?:[^=]|=\s*.checked.)/i,Ba=/^true\/(.*)/,Ca=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Da(a,b){return r.nodeName(a,"table")&&r.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function Ea(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Fa(a){var b=Ba.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ga(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(V.hasData(a)&&(f=V.access(a),g=V.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}W.hasData(a)&&(h=W.access(a),i=r.extend({},h),W.set(b,i))}}function Ha(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ia.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ia(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Aa.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ia(f,b,c,d)});if(m&&(e=pa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(ma(e,"script"),Ea),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,ma(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Fa),l=0;l<i;l++)j=h[l],ka.test(j.type||"")&&!V.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Ca,""),k))}return a}function Ja(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(ma(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&na(ma(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(ya,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=ma(h),f=ma(a),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);if(b)if(c)for(f=f||ma(a),g=g||ma(h),d=0,e=f.length;d<e;d++)Ga(f[d],g[d]);else Ga(a,h);return g=ma(h,"script"),g.length>0&&na(g,!i&&ma(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(T(c)){if(b=c[V.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[V.expando]=void 0}c[W.expando]&&(c[W.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ja(this,a,!0)},remove:function(a){return Ja(this,a)},text:function(a){return S(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.appendChild(a)}})},prepend:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(ma(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return S(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!za.test(a)&&!la[(ja.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(ma(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ia(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(ma(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var Ka=/^margin/,La=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),Ma=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",qa.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,qa.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Na(a,b,c){var d,e,f,g,h=a.style;return c=c||Ma(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&La.test(g)&&Ka.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Oa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Pa=/^(none|table(?!-c[ea]).+)/,Qa={position:"absolute",visibility:"hidden",display:"block"},Ra={letterSpacing:"0",fontWeight:"400"},Sa=["Webkit","Moz","ms"],Ta=d.createElement("div").style;function Ua(a){if(a in Ta)return a;var b=a[0].toUpperCase()+a.slice(1),c=Sa.length;while(c--)if(a=Sa[c]+b,a in Ta)return a}function Va(a,b,c){var d=aa.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Wa(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ba[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ba[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ba[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ba[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ba[f]+"Width",!0,e)));return g}function Xa(a,b,c){var d,e=!0,f=Ma(a),g="border-box"===r.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=Na(a,b,f),(d<0||null==d)&&(d=a.style[b]),La.test(d))return d;e=g&&(o.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+Wa(a,b,c||(g?"border":"content"),e,f)+"px"}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Na(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=a.style;return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=aa.exec(c))&&e[1]&&(c=ea(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b);return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Na(a,b,d)),"normal"===e&&b in Ra&&(e=Ra[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Pa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?Xa(a,b,d):da(a,Qa,function(){return Xa(a,b,d)})},set:function(a,c,d){var e,f=d&&Ma(a),g=d&&Wa(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=aa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Va(a,c,g)}}}),r.cssHooks.marginLeft=Oa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Na(a,"marginLeft"))||a.getBoundingClientRect().left-da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ba[d]+b]=f[d]||f[d-2]||f[0];return e}},Ka.test(a)||(r.cssHooks[a+b].set=Va)}),r.fn.extend({css:function(a,b){return S(this,function(a,b,c){var d,e,f={},g=0;if(r.isArray(b)){for(d=Ma(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function Ya(a,b,c,d,e){return new Ya.prototype.init(a,b,c,d,e)}r.Tween=Ya,Ya.prototype={constructor:Ya,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=Ya.propHooks[this.prop];return a&&a.get?a.get(this):Ya.propHooks._default.get(this)},run:function(a){var b,c=Ya.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ya.propHooks._default.set(this),this}},Ya.prototype.init.prototype=Ya.prototype,Ya.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},Ya.propHooks.scrollTop=Ya.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=Ya.prototype.init,r.fx.step={};var Za,$a,_a=/^(?:toggle|show|hide)$/,ab=/queueHooks$/;function bb(){$a&&(a.requestAnimationFrame(bb),r.fx.tick())}function cb(){return a.setTimeout(function(){Za=void 0}),Za=r.now()}function db(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ba[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function eb(a,b,c){for(var d,e=(hb.tweeners[b]||[]).concat(hb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function fb(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&ca(a),q=V.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],_a.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=V.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ha([a],!0),j=a.style.display||j,k=r.css(a,"display"),ha([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=V.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ha([a],!0),m.done(function(){p||ha([a]),V.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=eb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function gb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],r.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function hb(a,b,c){var d,e,f=0,g=hb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Za||cb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:Za||cb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(gb(k,j.opts.specialEasing);f<g;f++)if(d=hb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,eb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}r.Animation=r.extend(hb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return ea(c.elem,a,aa.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(K);for(var c,d=0,e=a.length;d<e;d++)c=a[d],hb.tweeners[c]=hb.tweeners[c]||[],hb.tweeners[c].unshift(b)},prefilters:[fb],prefilter:function(a,b){b?hb.prefilters.unshift(a):hb.prefilters.push(a)}}),r.speed=function(a,b,c){var e=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off||d.hidden?e.duration=0:"number"!=typeof e.duration&&(e.duration in r.fx.speeds?e.duration=r.fx.speeds[e.duration]:e.duration=r.fx.speeds._default),null!=e.queue&&e.queue!==!0||(e.queue="fx"),e.old=e.complete,e.complete=function(){r.isFunction(e.old)&&e.old.call(this),e.queue&&r.dequeue(this,e.queue)},e},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=hb(this,r.extend({},a),f);(e||V.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=V.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=V.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(db(b,!0),a,d,e)}}),r.each({slideDown:db("show"),slideUp:db("hide"),slideToggle:db("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(Za=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),Za=void 0},r.fx.timer=function(a){r.timers.push(a),a()?r.fx.start():r.timers.pop()},r.fx.interval=13,r.fx.start=function(){$a||($a=a.requestAnimationFrame?a.requestAnimationFrame(bb):a.setInterval(r.fx.tick,r.fx.interval))},r.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame($a):a.clearInterval($a),$a=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var ib,jb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return S(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?ib:void 0)),
void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(K);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),ib={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=jb[b]||r.find.attr;jb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=jb[g],jb[g]=e,e=null!=c(a,b,d)?g:null,jb[g]=f),e}});var kb=/^(?:input|select|textarea|button)$/i,lb=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return S(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):kb.test(a.nodeName)||lb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function mb(a){var b=a.match(K)||[];return b.join(" ")}function nb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,nb(this)))});if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=mb(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,nb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=mb(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,nb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(K)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=nb(this),b&&V.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":V.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+mb(nb(c))+" ").indexOf(b)>-1)return!0;return!1}});var ob=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":r.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ob,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:mb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!r.nodeName(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(r.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!pb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,pb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(V.get(h,"events")||{})[b.type]&&V.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&T(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!T(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=V.access(d,b);e||d.addEventListener(a,c,!0),V.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=V.access(d,b)-1;e?V.access(d,b,e):(d.removeEventListener(a,c,!0),V.remove(d,b))}}});var qb=a.location,rb=r.now(),sb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var tb=/\[\]$/,ub=/\r?\n/g,vb=/^(?:submit|button|image|reset|file)$/i,wb=/^(?:input|select|textarea|keygen)/i;function xb(a,b,c,d){var e;if(r.isArray(b))r.each(b,function(b,e){c||tb.test(a)?d(a,e):xb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)xb(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(r.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)xb(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&wb.test(this.nodeName)&&!vb.test(a)&&(this.checked||!ia.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(ub,"\r\n")}}):{name:b.name,value:c.replace(ub,"\r\n")}}).get()}});var yb=/%20/g,zb=/#.*$/,Ab=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Cb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb={},Gb={},Hb="*/".concat("*"),Ib=d.createElement("a");Ib.href=qb.href;function Jb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(K)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Kb(a,b,c,d){var e={},f=a===Gb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Lb(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Mb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Nb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:Cb.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Lb(Lb(a,r.ajaxSettings),b):Lb(r.ajaxSettings,a)},ajaxPrefilter:Jb(Fb),ajaxTransport:Jb(Gb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Bb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||qb.href)+"").replace(Eb,qb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(K)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ib.protocol+"//"+Ib.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Kb(Fb,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Db.test(o.type),f=o.url.replace(zb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(yb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(sb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Ab,"$1"),n=(sb.test(f)?"&":"?")+"_="+rb++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Hb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Kb(Gb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Mb(o,y,d)),v=Nb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ob={0:200,1223:204},Pb=r.ajaxSettings.xhr();o.cors=!!Pb&&"withCredentials"in Pb,o.ajax=Pb=!!Pb,r.ajaxTransport(function(b){var c,d;if(o.cors||Pb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ob[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Qb=[],Rb=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Qb.pop()||r.expando+"_"+rb++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Rb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Rb,"$1"+e):b.jsonp!==!1&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Qb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=B.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=pa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=mb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length};function Sb(a){return r.isWindow(a)?a:9===a.nodeType&&a.defaultView}r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Sb(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),r.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||qa})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return S(this,function(a,d,e){var f=Sb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Oa(o.pixelPosition,function(a,c){if(c)return c=Na(a,b),La.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return S(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Tb=a.jQuery,Ub=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Ub),b&&a.jQuery===r&&(a.jQuery=Tb),r},b||(a.jQuery=a.$=r),r});

/*! jquery.cookie v1.4.1 | MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?a(require("jquery")):a(jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});
;(function($,window,document,undefined){
	sessionStorage.clear()
	var createTable = function(element,options){
		this.$element = element;
		this.options = $.extend(true,{
						tableData: [],
						choiceContent:'index',
						pageId:'',
						totalPageId:'',
						tableId:'',
						skipPageId:'',
						sessionPage: '',
						sessionLocation: '',
						previewUrl:'',
						downloadUrl:''
		},options);
	};
	createTable.prototype = {

		init:function(){
			this.bookData = this.options.tableData.reverse(),
			this.bookDataLen = this.bookData.length,
			this.sessionPage = this.options.sessionPage,
			this.sessionLocation = this.options.sessionLocation,
			this.bookDataPageLen = '',
			this.sessionDataLen = '',
			this.bookStrHtml = '',
			this.totalStrHtml = '',   //页数的html
			this.prevPage = '',
			this.nextPage = '',
			this.totalPageMin = 10; // 可在页面显示最大页数为10页
			this.totalPage = '',
			this.currentPage = 1,     //默认当前页数为1
			this.currPage = '',       //点击获取当前页数变量
			this.sizePage = 10,   //每页10条数据
			this.startPage ='',
			this.startCurrent = '',
			this.endPage = '',    //当前的实际结束页数
			this.totalStr = '',
			this.sessionValue = '',
			this.sessionCurrentLocationValue = '',
			this.pageId = this.options.pageId,
			this.totalPageId = this.options.totalPageId,
			this.skipPageId = this.options.skipPageId,
			this.tableId = this.options.tableId,
			this.download = this.options.downloadUrl,
			this.preview = this.options.previewUrl;

			this.initTable();

		},
		initTable:function(){
			this.totalPage = Math.ceil(this.bookDataLen/this.sizePage);  //计算总共页数
			this.bookDataPageLen = this.sizePage;



			if(this.bookDataLen !== 0){   //初始默认加载table内容

				this.sessionDataLen =  Number(sessionStorage.getItem("sessionDataLen"))

				// if(this.sessionDataLen !== 0){
				// 	alert("fd")
				// 	if(	this.sessionDataLen !== this.bookDataLen){
				// 		sessionStorage.clear();
				// 	}
				// }

				var getSessionPage = Number(sessionStorage.getItem(this.sessionPage));
				var getSessionLocation = Number(sessionStorage.getItem(this.sessionLocation));
				this.sessionValue = getSessionPage;
				this.sessionCurrentLocationValue = getSessionLocation;

				var i = '';
				// if(this.sessionValue !== 0){                     //判断是否刷新，有storage数据产生
				//   i = (this.sessionValue-1) * this.sizePage;
				//   this.bookDataPageLen = this.sessionValue * this.sizePage
				// }else{
				  i = 0;
				// }



				$(this.tableId + " tr:not(:first-child)").remove();
				if(this.bookDataPageLen > this.bookDataLen){
						$(this.tableId + " tr:not(:first-child)").remove();
					if(this.options.choiceContent == "index"){
						for(i;i < this.bookDataLen;i++){
							this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["bookName"] + '</td><td>' + this.bookData[i]["bookVolume"] + '</td><td>' + this.bookData[i]["bookBuyer"] + '</td><td>' + this.bookData[i]["bookBorrower"] + '</td><td>' +  this.bookData[i]["buyTime"] + '</td></tr>';
						}
					}
					if(this.options.choiceContent == "modify"){
						for(i;i < this.bookDataLen;i++){
							this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["bookId"] +'">' + this.bookData[i]["bookName"] + '</td><td>' + this.bookData[i]["bookVolume"] + '</td><td>' + this.bookData[i]["bookBuyer"] + '</td><td>' + this.bookData[i]["bookBorrower"] + '</td><td>' +  this.bookData[i]["buyTime"] + '</td><td><button class="btn btn-edit2 table-edit" type="button">编辑</button></td></tr>';
						}
					}
					if(this.options.choiceContent == "modifyStaff"){
						for(i;i < this.bookDataLen;i++){
							this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["staffId"] +'">' + this.bookData[i]["staffDepartment"] + '</td><td>' + this.bookData[i]["staffName"] + '</td><td>' + this.bookData[i]["staffEmail"] + '</td><td>' + this.bookData[i]["staffExtension"] + '</td><td>' +  this.bookData[i]["staffNumber"] + '</td><td><a href="###" class="edit-people-info">编辑</a>|<a href="###" class="delete-people-info">删除</a></td></tr>';
						}
					}
					if(this.options.choiceContent == "indexPatent"){
						for(i;i < this.bookDataLen;i++){
							this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["patentTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["orderNumber"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td></tr>';
						}
					}
					if(this.options.choiceContent == "modifyPatent"){
						for(i;i < this.bookDataLen;i++){
							this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["patentId"] +'">' + this.bookData[i]["patentName"] + '</td><td>' + this.bookData[i]["firstInventor"] + '</td><td>' + this.bookData[i]["sortCode"] + '</td><td>' + this.bookData[i]["acceptDate"] + '</td><td><button type="button" class="btn btn-edit2 table-edit" data-toggle="modal" data-target=".bs-example-modal-lg">编辑</button></td></tr>';
						}
					}
					if(this.options.choiceContent == "indexThesis"){
						for(i;i < this.bookDataLen;i++){
							this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["paperTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td><td><a href="'+ this.download + encodeURI(this.bookData[i]["fileName"]) +'" target="_blank">下载</a> | <a href="'+ this.preview + encodeURI(this.bookData[i]["fileName"]) +'" target="_blank">预览</a></td></tr>';
						}
					}
					if(this.options.choiceContent == "modifyThesis"){
						for(i;i < this.bookDataLen;i++){
							this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["paperId"] +'">' + this.bookData[i]["paperTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td><td><a href="'+ this.preview + encodeURI(this.bookData[i]["fileName"]) +'" target="_blank">预览</a></td><td><button type="button" class="btn btn-edit2 table-edit" data-toggle="modal" data-target=".bs-example-modal-lg">编辑</button></td></tr>';
						}
					}
				}else{
					if(this.options.choiceContent == "index"){
						for(i;i < this.bookDataPageLen;i++){
							this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["bookName"] + '</td><td>' + this.bookData[i]["bookVolume"] + '</td><td>' + this.bookData[i]["bookBuyer"] + '</td><td>' + this.bookData[i]["bookBorrower"] + '</td><td>' +  this.bookData[i]["buyTime"] + '</td></tr>';
						}
					}
					if(this.options.choiceContent == "modify"){
						for(i;i < this.bookDataPageLen;i++){
							this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["bookId"] +'">' + this.bookData[i]["bookName"] + '</td><td>' + this.bookData[i]["bookVolume"] + '</td><td>' + this.bookData[i]["bookBuyer"] + '</td><td>' + this.bookData[i]["bookBorrower"] + '</td><td>' +  this.bookData[i]["buyTime"] + '</td><td><button class="btn btn-edit2 table-edit" type="button">编辑</button></td></tr>';
						}
					}
					if(this.options.choiceContent == "modifyStaff"){
						for(i;i < this.bookDataPageLen;i++){
							this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["staffId"] +'">' + this.bookData[i]["staffDepartment"] + '</td><td>' + this.bookData[i]["staffName"] + '</td><td>' + this.bookData[i]["staffEmail"] + '</td><td>' + this.bookData[i]["staffExtension"] + '</td><td>' +  this.bookData[i]["staffNumber"] + '</td><td><a href="###" class="edit-people-info">编辑</a>|<a href="###" class="delete-people-info">删除</a></td></tr>';
						}
					}
					if(this.options.choiceContent == "indexPatent"){
						for(i;i < this.bookDataPageLen;i++){
							this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["patentTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["orderNumber"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td></tr>';
						}
					}
					if(this.options.choiceContent == "modifyPatent"){
						for(i;i < this.bookDataPageLen;i++){
							this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["patentId"] +'">' + this.bookData[i]["patentName"] + '</td><td>' + this.bookData[i]["firstInventor"] + '</td><td>' + this.bookData[i]["sortCode"] + '</td><td>' + this.bookData[i]["acceptDate"] + '</td><td><button type="button" class="btn btn-edit2 table-edit" data-toggle="modal" data-target=".bs-example-modal-lg">编辑</button></td></tr>';
						}
					}
					if(this.options.choiceContent == "indexThesis"){
						for(i;i < this.bookDataPageLen;i++){
							this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["paperTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td><td><a href="'+ this.download + encodeURI(this.bookData[i]["fileName"]) +'" target="_blank">下载</a> | <a href="'+ this.preview + encodeURI(this.bookData[i]["fileName"])  +'" target="_blank">预览</a></td></tr>';
						}
					}
					if(this.options.choiceContent == "modifyThesis"){
						for(i;i < this.bookDataPageLen;i++){
							this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["paperId"] +'">' + this.bookData[i]["paperTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td><td><a href="'+ this.preview + encodeURI(this.bookData[i]["fileName"]) +'" target="_blank">预览</a></td><td><button type="button" class="btn btn-edit2 table-edit" data-toggle="modal" data-target=".bs-example-modal-lg">编辑</button></td></tr>';
						}
					}

				}
				// if(this.options.choiceContent == "index"){
				// 	for(i;i < this.bookDataPageLen;i++){
				// 		this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["bookName"] + '</td><td>' + this.bookData[i]["bookVolume"] + '</td><td>' + this.bookData[i]["bookBuyer"] + '</td><td>' + this.bookData[i]["bookBorrower"] + '</td><td>' +  this.bookData[i]["buyTime"] + '</td></tr>';
				// 	}
				// }
				// if(this.options.choiceContent == "modify"){
				// 	for(i;i < this.bookDataPageLen;i++){
				// 		this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["bookId"] +'">' + this.bookData[i]["bookName"] + '</td><td>' + this.bookData[i]["bookVolume"] + '</td><td>' + this.bookData[i]["bookBuyer"] + '</td><td>' + this.bookData[i]["bookBorrower"] + '</td><td>' +  this.bookData[i]["buyTime"] + '</td><td><button class="btn btn-edit2 table-edit" type="button">编辑</button></td></tr>';
				// 	}
				// }
				this.$element.append(this.bookStrHtml);
			}else{

				$(this.tableId + " tr:not(:first-child)").remove();
				if(this.options.choiceContent == "index" ){
					this.$element.append('<tr><td class="text-center" colspan="6">暂无相关数据...</td></tr>')
				}
				if(this.options.choiceContent == "modify"){
					this.$element.append('<tr><td class="text-center" colspan="7">暂无相关数据...</td></tr>')
				}
				if(this.options.choiceContent == "modifyStaff" ){
					this.$element.append('<tr><td class="text-center" colspan="7">暂无相关数据...</td></tr>')
				}
				if(this.options.choiceContent == "indexPatent"){
					this.$element.append('<tr><td class="text-center" colspan="5">暂无相关数据...</td></tr>')
				}
				if(this.options.choiceContent == "modifyPatent" ){
					this.$element.append('<tr><td class="text-center" colspan="6">暂无相关数据...</td></tr>')
				}
				if(this.options.choiceContent == "idnexThesis" ){
					this.$element.append('<tr><td class="text-center" colspan="5">暂无相关数据...</td></tr>')
				}
				if(this.options.choiceContent == "modifyThesis" ){
					this.$element.append('<tr><td class="text-center" colspan="6">暂无相关数据...</td></tr>')
				}
			}
			this.initPage();

		},
		initPage:function(){

			$(this.pageId + ">li:not('.prev-page,.next-page,.nextAddPage5-page,.prevReducePage5-page')").remove();     //页数

			if(this.totalPage<=1){         //当前内容不足10条，显示一页

				$(this.pageId +" .next-page").addClass("disalbed");
				$(this.pageId).children().eq(1).after('<li class="active"><a href="###">1</a></li>');
				$(this.totalPageId).text("1")


			}

		  if( this.totalPage > 1 && this.totalPage < 11){           //当前页面大于10条

				for(var i=0;i<this.totalPage;i++){
				  this.totalStrHtml += '<li><a href="###">'+ (i+1) +'</a></li>'; // 动态生成页数
				}
				$(this.totalPageId).text(this.totalPage)         //共计页数的数量

				$(this.pageId).children().eq(1).after(this.totalStrHtml);

			//    var sessionValue = sessionStorage.getItem('page')
				// if(this.sessionValue !== 1 && this.sessionValue !== 0){
				//
				//   $(this.pageId).children().eq(this.sessionCurrentLocationValue).addClass("active");
				// }else{
				  $(this.pageId).children().eq(2).addClass("active");
				// }
				if(this.sessionCurrentLocationValue == 2){
					if(!$(this.pageId + " .prev-page").hasClass("disabled")){
						$(this.pageId + " .prev-page").addClass("disabled")
					}
					if($(this.pageId + " .next-page").hasClass("disabled")){
						$(this.pageId + " .next-page").removeClass("disabled")
					}
				}
				if(this.sessionCurrentLocationValue == 11){
					if(!$(this.pageId + " .next-page").hasClass("disabled")){
						$(this.pageId + " .next-page").addClass("disabled")
					}
					if($(this.pageId + " .prev-page").hasClass("disabled")){
						$(this.pageId + " .prev-page").removeClass("disabled")
					}
				}
				if(this.sessionCurrentLocationValue > 2 && this.sessionCurrentLocationValue < 11){
					$(this.pageId + " .prev-page,"+ this.pageId +" .next-page").removeClass("disabled")
				}

			}
		  if(this.totalPage > 10){

					for(var i=0;i<10;i++){
					  this.totalStrHtml += '<li><a href="###">'+ (i+1) +'</a></li>';  // 动态生成页数
					}

					$(this.pageId).children().eq(1).after(this.totalStrHtml);

					$(this.pageId).children().eq(2).addClass("active");
				// }



				// if(!$(this.pageId + " .prev-page").hasClass("disabled")){
				//   $(this.pageId + " .prev-page").addClass("disabled")
				// }
				// if($(this.pageId + " .next-page").hasClass("disabled")){
				//   $(this.pageId + " .next-page").removeClass("disabled")
				// }
				$(this.totalPageId).text(this.totalPage)
			}



				this.clickPage();
				this.clickPrevPage();
				this.clickNextPage();
				this.clickSkipPage();

		},
		clickPage:function(){


			var self = this;

			var bookDataLen = self.bookDataLen;
 			$(this.pageId).off("click").on("click","li:not('.prev-page,.next-page,.nextAddPage5-page,.prevReducePage5-page')",function(){
				$(self.skipPageId).val("")

				if(bookDataLen == 0) return false;

			  $(this).addClass("active").siblings().removeClass("active");

			  $(self.tableId + " tr:not(:first-child)").remove();
			  self.currPage = $(this).text()

			  //sessionStorage['page'] = currPage;

				sessionStorage.setItem("sessionDataLen",self.bookDataLen)
			  sessionStorage.setItem(self.sessionPage,self.currPage)
			  sessionStorage.setItem(self.sessionLocation,$(self.pageId + ">li.active").index())

			  self.pageTableContent();

			 return false;
			})
		},
		clickPrevPage:function(){

			var self = this;

			$(self.pageId + " .prev-page").off("click").on("click",function(){
				$(self.skipPageId).val("")
				sessionStorage.setItem("sessionDataLen",self.bookDataLen)

				self.currPage = Number($(self.pageId + " .active>a").text());

				self.startCurrent = self.currPage - 1;


				if( self.currPage == 1){
						return false;
					}
				sessionStorage.setItem(self.sessionPage,self.startCurrent)
				sessionStorage.setItem(self.sessionLocation,$(self.pageId + ">li.active").index())

				self.sessionValue = Number(sessionStorage.getItem(self.sessionPage))
				self.sessionCurrentLocationValue = Number(sessionStorage.getItem(self.sessionLocation))
				if( self.currPage == 2){
						$(self.pageId + " .next-page").removeClass("disabled")
						$(self.pageId + " .prev-page").addClass("disabled")
				}
				if( self.currPage > 2){
						$(self.pageId + " .next-page").removeClass("disabled")
						$(self.pageId + " .prev-page").removeClass("disabled")
				}

				if(self.currPage !== 1){

					if(self.sessionCurrentLocationValue !== 2){

						$(this).siblings().removeClass("active");

						$(self.pageId + " li").eq(self.sessionCurrentLocationValue-1).addClass("active")

					}
					if(self.sessionCurrentLocationValue == 2){

						$(self.pageId + ">li:not('.prev-page,.next-page,.nextAddPage5-page,.prevReducePage5-page')").remove();     //页数
						$(self.pageId + " .next-page," + self.pageId + " .nextAddPage5-page," + self.pageId + " .prev-page," + self.pageId + " .prevReducePage5-page").removeClass("disabled");
						var startCurr = self.startCurrent;

						self.totalStrHtml = "";
						var i = startCurr-10;
						if(i>0){
							for(i ;i<startCurr;i++){

								self.totalStrHtml += '<li><a href="###">'+ (i+1) +'</a></li>'; // 动态生成页数
							}
							$(self.pageId + ">li.prev-page").after(self.totalStrHtml);

							$(self.pageId + ">li").eq(11).addClass("active");
						}else{

							for(i=0 ;i<10;i++){
								self.totalStrHtml += '<li><a href="###">'+ (i+1) +'</a></li>'; // 动态生成页数
							}
							$(self.pageId + ">li.prev-page").after(self.totalStrHtml);

							$(self.pageId + ">li").eq(startCurr+1).addClass("active");
						}

					}

				}


				sessionStorage.setItem(self.sessionLocation,$(self.pageId + ">li.active").index())





			  //this.sessionPage   this.sessionLocation['page'] = startCurrent;
				self.pagePrevOrNext()

			  return false;
			})
		},
		clickPrevReducePage5:function(){

		},
		clickNextPage:function(){


			var self = this;
			$(self.pageId + " .next-page").off("click").on("click",function(){
				$(self.skipPageId).val("")
				sessionStorage.setItem("sessionDataLen",self.bookDataLen)

				self.currPage = Number($(self.pageId + " .active>a").text());

				self.startCurrent = self.currPage + 1;

				if( self.currPage == self.totalPage ){
					return false;
				}
				if( self.currPage == (self.totalPage-1)){
					$(self.pageId + " .next-page").addClass("disabled")

				}
				sessionStorage.setItem(self.sessionPage,self.startCurrent)
				sessionStorage.setItem(self.sessionLocation,$(self.pageId + ">li.active").index())

				self.sessionValue = Number(sessionStorage.getItem(self.sessionPage))
				self.sessionCurrentLocationValue = Number(sessionStorage.getItem(self.sessionLocation))

				if(self.currPage !== self.totalPage){
					$(self.pageId + " .prev-page").removeClass("disabled")
				//	$(self.pageId + " .next-page," + self.pageId + " .nextAddPage5-page," + self.pageId + " .prev-page," + self.pageId + " .prevReducePage5-page").removeClass("disabled");

					if(self.sessionCurrentLocationValue !== 11){

						$(this).siblings().removeClass("active");

						$(self.pageId + " li").eq(self.sessionCurrentLocationValue+1).addClass("active")

					}
					if(self.sessionCurrentLocationValue == 11){

						$(self.pageId + ">li:not('.prev-page,.next-page,.nextAddPage5-page,.prevReducePage5-page')").remove();     //页数

						var startCurr = self.startCurrent;

						self.totalStrHtml = "";
						var i = startCurr-10;

						for(i ;i<startCurr;i++){

							self.totalStrHtml += '<li><a href="###">'+ (i+1) +'</a></li>'; // 动态生成页数
						}

						$(self.pageId + ">li.prev-page").after(self.totalStrHtml);

						$(self.pageId + ">li").eq(self.sessionCurrentLocationValue).addClass("active");
					}

				}


				sessionStorage.setItem(self.sessionLocation,$(self.pageId + ">li.active").index())

				//sessionStorage['page'] = startCurrent;

				self.pagePrevOrNext()

			  return false;

			})
		},
		clcikNextAddPage5:function(){

		},
		clickSkipPage:function(){ //跳转页面
			var totalPage = this.totalPage,
			    self = this;

			$(this.skipPageId).on("keyup",function(e){

				var regNum = /^[1-9][0-9]*$/,   //输入框验证
						skipPage = Number($(this).val()),
						pageBoolean = true;
				if (e.which == 13) {
					if(!regNum.test(skipPage)){
						alert("请填数字")
						pageBoolean = false;
					}
					if(skipPage > totalPage){
						alert("请填小于总页数的数字")
						pageBoolean = false;
					}
					if(!pageBoolean) return pageBoolean;  //验证结束

					$(self.tableId + " tr:not(:first-child)").remove();
					self.currentPage = skipPage,
					self.bookStrHtml = '';
					self.startPage = (self.currentPage-1) * self.sizePage;
					self.endPage = self.currentPage * self.sizePage;
					self.bookDataPageLen = self.endPage;

					if(self.currentPage !== 1 || self.currentPage !== self.totalPage){
						$(self.pageId + " li").removeClass("disabled")
					}
					if(self.currentPage == 1){
						$(self.pageId + " .prev-page").addClass("disabled")
					}
					if(self.currentPage == self.totalPage){
						$(self.pageId + " .next-page").addClass("disabled")
					}

					$(self.pageId + ">li:not('.prev-page,.next-page,.nextAddPage5-page,.prevReducePage5-page')").remove();     //页数
					$(self.pageId + " .next-page," + self.pageId + " .nextAddPage5-page," + self.pageId + " .prev-page," + self.pageId + " .prevReducePage5-page").removeClass("disabled");
					self.totalStrHtml = "";

					var skipStartPage = skipPage - 5,skipEndPage = skipPage + 4;

					if( skipStartPage <= 0 ){  // 跳转减去5,页面的开始小于0时
						var i = 0,iend;
						if(self.totalPage >= skipEndPage){  //当总页数大于skipEndPage
							for(i;i<10;i++){
								self.totalStrHtml += '<li><a href="###">'+ (i+1) +'</a></li>'; // 动态生成页数
							}
							$(self.pageId + ">li.prev-page").after(self.totalStrHtml);

							$(self.pageId + ">li").eq(skipPage+1).addClass("active");
						}
						if(self.totalPage < skipEndPage){ //当总页数小于skipEndPage
							iend = self.totalPage;
							for(i;i<iend;i++){
								self.totalStrHtml += '<li><a href="###">'+ (i+1) +'</a></li>'; // 动态生成页数
							}
							$(self.pageId + ">li.prev-page").after(self.totalStrHtml);

							$(self.pageId + ">li").eq(skipPage+1).addClass("active");
						}


					}
					if( skipStartPage > 0 ){ // 跳转减去5,页面的开始大于0时

						var i = skipStartPage,iend;
						if(self.totalPage >= skipEndPage){  //当总页数大于跳转页数
							iend = skipEndPage + 1;
							for(i;i < iend; i++){
								self.totalStrHtml += '<li><a href="###">'+ i +'</a></li>'; // 动态生成页数
							}
							$(self.pageId + ">li.prev-page").after(self.totalStrHtml);

							$(self.pageId + ">li").eq(7).addClass("active");
						}
						if(self.totalPage < skipEndPage){  //当总页数小于跳转页数
							i = self.totalPage-10;
							iend = self.totalPage;

							for(i;i < iend; i++){
								self.totalStrHtml += '<li><a href="###">'+ (i+1) +'</a></li>'; // 动态生成页数
							}
							$(self.pageId + ">li.prev-page").after(self.totalStrHtml);

							$(self.pageId + ">li").eq(11-(self.totalPage-skipPage)).addClass("active");
						}

					}
					//
					// if((skipPage + 4) > self.totalPage){
					// alert((skipPage + 4))
					// 	var i = self.totalPage-10;
					// 	for(i;i < self.totalPage; i++){
					// 		self.totalStrHtml += '<li><a href="###">'+ (i+1) +'</a></li>'; // 动态生成页数
					// 	}
					// 	$(self.pageId + ">li.prev-page").after(self.totalStrHtml);
					//
					// 	$(self.pageId + ">li").eq(11-(self.totalPage - skipPage)).addClass("active");
					//
					// }


				  self.pageChangeTableCreate()

				}
			})
		},
		pageTableContent:function(){

			$(this.tableId + " tr:not(:first-child)").remove();
			this.currentPage = this.currPage,
			this.bookStrHtml = '';
			this.startPage = (this.currentPage-1) * this.sizePage;
			this.endPage = this.currentPage * this.sizePage;
			this.bookDataPageLen = this.endPage;

			if(this.currentPage !== 1 || this.currentPage !== this.totalPage){
				$(this.pageId + " li").removeClass("disabled")
			}
			if(this.currentPage == 1){
				$(this.pageId + " .prev-page").addClass("disabled")
			}
			if(this.currentPage == this.totalPage){
				$(this.pageId + " .next-page").addClass("disabled")
			}

		  this.pageChangeTableCreate()
		},
		pagePrevOrNext:function(){
			$(this.tableId + " tr:not(:first-child)").remove();

			this.currentPage = this.startCurrent,
			this.bookStrHtml = '';
			this.startPage = (this.currentPage-1) * this.sizePage;
			this.endPage = this.currentPage * this.sizePage;
			this.bookDataPageLen = this.endPage;

			this.pageChangeTableCreate()
		},
		pageChangeTableCreate:function(){

				if(this.bookDataLen !== 0){
					var i = this.startPage;
					if(this.totalPage == this.currentPage){  //当前页数和页数总和相同
						if(this.endPage >= this.bookDataLen){
								$(this.tableId + " tr:not(:first-child)").remove();
							if(this.options.choiceContent == "index"){
								for(i;i < this.bookDataLen;i++){
									this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["bookName"] + '</td><td>' + this.bookData[i]["bookVolume"] + '</td><td>' + this.bookData[i]["bookBuyer"] + '</td><td>' + this.bookData[i]["bookBorrower"] + '</td><td>' +  this.bookData[i]["buyTime"] + '</td></tr>';
								}
							}
							if(this.options.choiceContent == "modify"){
								for(i;i < this.bookDataLen;i++){
									this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td data-idnum="'+ this.bookData[i]["bookId"] +'">' + this.bookData[i]["bookName"] + '</td><td>' + this.bookData[i]["bookVolume"] + '</td><td>' + this.bookData[i]["bookBuyer"] + '</td><td>' + this.bookData[i]["bookBorrower"] + '</td><td>' +  this.bookData[i]["buyTime"] + '</td><td><button class="btn btn-edit2 table-edit" type="button">编辑</button></td></tr>';
								}
							}
							if(this.options.choiceContent == "modifyStaff"){
								for(i;i < this.bookDataLen;i++){
									this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["staffId"] +'">' + this.bookData[i]["staffDepartment"] + '</td><td>' + this.bookData[i]["staffName"] + '</td><td>' + this.bookData[i]["staffEmail"] + '</td><td>' + this.bookData[i]["staffExtension"] + '</td><td>' +  this.bookData[i]["staffNumber"] + '</td><td><a href="###" class="edit-people-info">编辑</a>|<a href="###" class="delete-people-info">删除</a></td></tr>';
								}
							}
							if(this.options.choiceContent == "indexPatent"){
								for(i;i < this.bookDataLen;i++){
									this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["patentTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["orderNumber"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td></tr>';
								}
							}
							if(this.options.choiceContent == "modifyPatent"){
								for(i;i < this.bookDataLen;i++){
									this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["patentId"] +'">' + this.bookData[i]["patentName"] + '</td><td>' + this.bookData[i]["firstInventor"] + '</td><td>' + this.bookData[i]["sortCode"] + '</td><td>' + this.bookData[i]["acceptDate"] + '</td><td><button type="button" class="btn btn-edit2 table-edit" data-toggle="modal" data-target=".bs-example-modal-lg">编辑</button></td></tr>';
								}
							}
							if(this.options.choiceContent == "indexThesis"){
								for(i;i < this.bookDataLen;i++){
									this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["paperTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td><td><a href="'+ this.download + encodeURI(this.bookData[i]["fileName"]) +'" target="_blank">下载</a> | <a href="'+ this.preview + encodeURI(this.bookData[i]["fileName"])  +'" target="_blank">预览</a></td></tr>';
								}
							}
							if(this.options.choiceContent == "modifyThesis"){
								for(i;i < this.bookDataLen;i++){
									this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["paperId"] +'">' + this.bookData[i]["paperTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td><td><a href="'+ this.preview + encodeURI(this.bookData[i]["fileName"]) +'" target="_blank">预览</a></td><td><button type="button" class="btn btn-edit2 table-edit" data-toggle="modal" data-target=".bs-example-modal-lg">编辑</button></td></tr>';
								}
							}
						}

					}else{
						$(this.tableId + " tr:not(:first-child)").remove();
						if(this.options.choiceContent == "index"){
							for(i;i < this.bookDataPageLen;i++){
								this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["bookName"] + '</td><td>' + this.bookData[i]["bookVolume"] + '</td><td>' + this.bookData[i]["bookBuyer"] + '</td><td>' + this.bookData[i]["bookBorrower"] + '</td><td>' +  this.bookData[i]["buyTime"] + '</td></tr>';
							}
						}
						if(this.options.choiceContent == "modify"){
							for(i;i < this.bookDataPageLen;i++){
								this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td data-idnum="'+ this.bookData[i]["bookId"] +'">' + this.bookData[i]["bookName"] + '</td><td>' + this.bookData[i]["bookVolume"] + '</td><td>' + this.bookData[i]["bookBuyer"] + '</td><td>' + this.bookData[i]["bookBorrower"] + '</td><td>' +  this.bookData[i]["buyTime"] + '</td><td><button class="btn btn-edit2 table-edit" type="button">编辑</button></td></tr>';
							}
						}
						if(this.options.choiceContent == "modifyStaff"){
							for(i;i < this.bookDataPageLen;i++){
								this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["staffId"] +'">' + this.bookData[i]["staffDepartment"] + '</td><td>' + this.bookData[i]["staffName"] + '</td><td>' + this.bookData[i]["staffEmail"] + '</td><td>' + this.bookData[i]["staffExtension"] + '</td><td>' +  this.bookData[i]["staffNumber"] + '</td><td><a href="###" class="edit-people-info">编辑</a>|<a href="###" class="delete-people-info">删除</a></td></tr>';
							}
						}
						if(this.options.choiceContent == "indexPatent"){
							for(i;i < this.bookDataPageLen;i++){
								this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["patentTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["orderNumber"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td></tr>';
							}
						}
						if(this.options.choiceContent == "modifyPatent"){
							for(i;i < this.bookDataPageLen;i++){
								this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["patentId"] +'">' + this.bookData[i]["patentName"] + '</td><td>' + this.bookData[i]["firstInventor"] + '</td><td>' + this.bookData[i]["sortCode"] + '</td><td>' + this.bookData[i]["acceptDate"] + '</td><td><button type="button" class="btn btn-edit2 table-edit" data-toggle="modal" data-target=".bs-example-modal-lg">编辑</button></td></tr>';
							}
						}
						if(this.options.choiceContent == "indexThesis"){
							for(i;i < this.bookDataPageLen;i++){
								this.bookStrHtml += '<tr><td>'+ (i+1) +'</td><td>' + this.bookData[i]["paperTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td><td><a href="'+ this.download + encodeURI(this.bookData[i]["fileName"]) +'" target="_blank">下载</a> | <a href="'+ this.preview + encodeURI(this.bookData[i]["fileName"]) +'" target="_blank">预览</a></td></tr>';
							}
						}
						if(this.options.choiceContent == "modifyThesis"){
							for(i;i < this.bookDataPageLen;i++){
								this.bookStrHtml += '<tr><td>' + (i+1) + '</td><td data-idnum="'+ this.bookData[i]["paperId"] +'">' + this.bookData[i]["paperTitle"] + '</td><td>' + this.bookData[i]["proposer"] + '</td><td>' + this.bookData[i]["applicationDate"] + '</td><td><a href="'+ this.preview + encodeURI(this.bookData[i]["fileName"]) +'" target="_blank">预览</a></td><td><button type="button" class="btn btn-edit2 table-edit" data-toggle="modal" data-target=".bs-example-modal-lg">编辑</button></td></tr>';
							}
						}
					}
					this.$element.append(this.bookStrHtml);
				}



		/*	  console.log(i +"page")
			  console.log(this.totalPage +"totalPage")
			  console.log(this.currentPage +"currentPage")
			  console.log(this.bookData +"bookData")
			  console.log(this.endPage + "endPage")
			   console.log(this.bookDataLen +"bookDataLen")
			  console.log(this.bookDataPageLen +"bookDataPageLen")*/


		}

	};
	$.fn.createTable = function(options){

	var obj = new createTable(this,options);

		obj.init();

		return this;
	};




})(jQuery,window,document);

$(function(){
  $("#add-thesis input").val("");
  var peopleParam = location.search,
      peopleName = "";

  if(peopleParam !== ""){
    if(peopleParam.indexOf("&") !== -1){
       peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),(peopleParam.indexOf("&"))));
       peopleId = decodeURI(peopleParam.slice((peopleParam.indexOf("staffid")+8),(peopleParam.length+1)));
    }else{
       peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),peopleParam.length));
    }

    $("#people-name").text("/"+ decodeURI(peopleName))
    $("#proposer-name").val(decodeURI(peopleName))
  }else{
    $("#people-name").text("")
  }

  calendar();

  $(".add-li li a:eq(1)").on("click",function(){      //tab选项 点击切换事件
    if(peopleParam !== ""){
      var getparams = {};
          getparams.patentName = peopleName;
      getPatent(getparams)
    }else{
      getPatent()
    }


  })

  $("#add-patent-module").on("click",function(){  //添加模块
    $("#add-patent").append('<ul class="edit-people-bg edit-patent list-unstyled"><li><button type="button" class="close delete-patent-module" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></li><li><div class="li1">类别</div><div class="li2"><input class="form-control" type="text" name="patentSort" placeholder="类别(必填)"></div></li><li><div class="li1">部门管理情报</div><div class="li2"><input class="form-control" type="text" name="patentDepartment" placeholder="部门管理情报(必填)"></div></li><li><div class="li1">依頼元発信</div><div class="li2"><input class="form-control" type="text" name="patentRely" placeholder="依頼元発信(必填)"></div></li><li><div class="li1">研究製番</div><div class="li2"><input class="form-control" type="text" name="patentResearch" placeholder="研究製番(必填)"></div></li><li><div class="li1">第一发明人</div><div class="li2"><input class="form-control" type="text" name="proposer" placeholder="申请人(必填)"></div></li><li><div class="li1">发明名称</div><div class="li2"><input class="form-control" type="text" name="thesisTitle" placeholder="发明名称(必填)"></div></li><li><div class="li1">受付日</div><div class="li2"><input class="form-control datetimepicker" type="text" autocomplete="off" name="applicationDate" placeholder="受付日(必填)"></div></li><li><div class="li1">整理番号</div><div class="li2"><input class="form-control" type="text" name="thesisId" placeholder="整理番号(必填)"></div></li><li><div class="li1">摘要</div><div class="li2"><textarea class="form-control" name="name" rows="8" cols="80"></textarea></div></li></ul>')
    calendar();
  })
  $("#add-patent").on("click",".delete-patent-module",function(){
    $(this).parent().parent().remove();
  })

  $("#patent-save").on("click",function(){  //数据提交保存

      var ruleaddPatent = ruleAddVerify();  //表单验证
      if(!ruleaddPatent) return false;

      postPatent(ruleaddPatent,addPatentUrl)

      return false;
  })

  $("#patent-modify-save").on("click",function(){  //数据提交保存
      //表单验证
      var ruleModifyPatent = ruleModifyVerify();
      if(!ruleModifyPatent) return false;
      postModifyPatentFun(ruleModifyPatent,patentModifyUrl,peopleName)
    //  postPatent()
      return false;
  })


})

function postPatent(data,url){    //添加论文提交
  $.ajax({
       type:"POST",
       url:url,
       contentType:'application/json;charset=UTF-8',
       dataType:"json",  // 预期服务器返回的数据类型。如果不指定，jQuery 将自动根据 HTTP 包 MIME 信息来智能判断，比如XML MIME类型就被识别为XML。
       data: JSON.stringify(data),
       success:function(data){
         var patentData;
         if(typeof(data) == "string"){
             patentData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             patentData = data;
         }
         if(data.message == "添加成功"){
           alert("添加成功!");
           $("#add-patent .edit-people-bg .form-control,#modify-patent .form-control").val("")
           $("#add-patent .edit-people-bg:not(:first-child)").remove();
           return false;
         }else{
           alert(data.message)
           return false;
         }

       },
       error:function(error){
        console.log(error)
       }
  });
}
function postModifyPatentFun(data,url,getUrlParam){ //修改论文提交
  $.ajax({
       type:"POST",
       url:url,
       contentType:'application/json;charset=UTF-8',
       dataType:"json",  // 预期服务器返回的数据类型。如果不指定，jQuery 将自动根据 HTTP 包 MIME 信息来智能判断，比如XML MIME类型就被识别为XML。
       data: JSON.stringify(data),
       success:function(data){

         var patentData;
         if(typeof(data) == "string"){
             patentData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             patentData = data;
         }

         if(patentData.code == "0"){
           alert(patentData.message)
           $(".modal-header .close").click();
           if(getUrlParam !== ""){
             var postParam = {};
             postParam.patentName = getUrlParam;
             getPatent(postParam)
           }else{
             getPatent()
           }
         }else{
           alert(patentData.message)
         }

       },
       error:function(error){
        console.log(error)
       }
  });
}

function getPatent(dataparam){ //获取专利信息

  loading($("#modify-patent-table"))
  $.ajax({       //get 获取数据
       type:"GET",
       url:patentGetAllUrl,
       data: dataparam,
       contentType:'application/json;charset=UTF-8',
       success:function(data){
         $("#modify-patent-table tr:not(:first-child)").remove();
         $("#ant-site-loading").remove();
         var patentData,patentHtml = "",patentDataLen = "";
         if(typeof(data) == "string"){
             patentData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             patentData = data;
         }

         $("#modify-patent-table").createTable({tableData:patentData,choiceContent:'modifyPatent',pageId:"#page",totalPageId:'#total-page',tableId:'#modify-patent-table',sessionPage:'patentModifyPage',sessionLocation:'patentModifyLocation'})

         patentData = patentData.reverse();

         $("#modify-patent-table").off("click").on("click",".table-edit",function(){  //点击"编辑"，弹出框修改信息
            var $patentId = $(this).parent().parent().children().eq(0).text()-1,
                modifyPatent = patentData[$patentId];

            $("#modify-patent input").val("")
            $("#patent-id").val(modifyPatent.patentId)
            $("#modify-patent-sort").val(modifyPatent.patentSort)
            $("#modify-patent-department").val(modifyPatent.departmentInformation)
            $("#modify-patent-rely").val(modifyPatent.requestSource)
            $("#modify-patent-research").val(modifyPatent.productNumber)
            $("#modify-patent-proposer").val(modifyPatent.firstInventor)
            $("#modify-patent-title").val(modifyPatent.patentName)

            $("#modify-application-date").val(modifyPatent.acceptDate)
            $("#modify-patent-id").val(modifyPatent.sortCode)
            $("#summary").val(modifyPatent.summary)

         })
       },
       error:function(error){
        console.log(error)
       }
  });
}
function ruleAddVerify(){  // 添加验证
  var thesisAdd = true,
      postPatentParams = [];

  $("#add-patent .edit-people-bg").each(function(index){//第一层循环，有几个模块

      var selfIndex = index;
          postPatentParams[selfIndex] = {};
      $(this).find(".form-control").each(function(index2){  //第二层循环，每个模块的数据有哪些
        var $inputVal = $(this).val().replace(/(^\s+)|(\s+$)/g,"");
        if(index2 !== 8){
          if($inputVal == ""){
            alert("内容不为空！")
            thesisAdd = false;
          }
        }
        if(!thesisAdd) return false;

        switch (index2) {
          case 0:
            postPatentParams[selfIndex].patentSort = $inputVal;
            break;
          case 1:
            postPatentParams[selfIndex].patentDepartment = $inputVal;
            break;
          case 2:
            postPatentParams[selfIndex].patentRely = $inputVal;
            break;
          case 3:
            postPatentParams[selfIndex].patentResearch = $inputVal;
            break;
          case 4:
            postPatentParams[selfIndex].proposer = $inputVal;
            break;
          case 5:
            postPatentParams[selfIndex].patentTitle = $inputVal;
            break;
          case 6:
            postPatentParams[selfIndex].applicationDate = $inputVal;
            break;
          case 7:
            postPatentParams[selfIndex].orderNumber = $inputVal;
            break;
          case 8:
            postPatentParams[selfIndex].summary = $inputVal;
            break;
          default:
            alert("error")
        }
      })

    if(!thesisAdd) return false;  //验证失败
  })
  if(!thesisAdd){
    return false;
  }else{
    return postPatentParams;
  }
}
function ruleModifyVerify(){  //修改验证
  var thesisAdd = true,postModifyPatent = {};

  $("#modify-patent .form-control").each(function(index){
    var $inputVal = $(this).val().replace(/(^\s+)|(\s+$)/g,"")
    if(index !== 9){

      if($inputVal == ""){
        alert("内容不为空！")
        thesisAdd = false;
      }
    }
    if(!thesisAdd) return false;
    switch (index) {
      case 0:
        postModifyPatent.patentId = $inputVal
        break;
      case 1:
        postModifyPatent.patentSort = $inputVal
        break;
      case 2:
        postModifyPatent.patentDepartment = $inputVal
        break;
      case 3:
        postModifyPatent.patentRely = $inputVal
        break;
      case 4:
        postModifyPatent.patentResearch = $inputVal
        break;
      case 5:
        postModifyPatent.proposer = $inputVal
        break;
      case 6:
        postModifyPatent.patentTitle = $inputVal
        break;
      case 7:
        postModifyPatent.applicationDate = $inputVal
        break;
      case 8:
        postModifyPatent.orderNumber = $inputVal
        break;
      case 9:
        postModifyPatent.summary = $inputVal
        break;
      default:
        alert("error")
    }

  })
  if(!thesisAdd){
    return false;  //验证失败
  }else{
    return postModifyPatent;
  }
}
function calendar(){
  $('#add-patent .datetimepicker,#modify-patent .datetimepicker').datetimepicker({
    format:'yyyy/mm/dd',
    autoclose:true,//自动关闭
    minView:2,//最精准的时间选择为日期0-分 1-时 2-日 3-月
    weekStart:0,
    language:'zh-CN'
  });
}
function loading($elem){
  $elem.parent().append('<div class="ant-site-loading" id="ant-site-loading"><div id="loading-text"><span class="undefined">L</span><span class="yoyo-x-1">O</span><span class="yoyo-x-2">A</span><span class="yoyo-x-3">D</span><span class="yoyo-x-5">I</span><span class="yoyo-x-0">N</span><span class="undefined">G</span></div></div>')
}

$(function(){
  $("#patent-search input").val("");

  var peopleParam = location.search,getParams = "",peopleName="";
  if(peopleParam !== ""){  //获取url传递的参数

    if(peopleParam.indexOf("&") !== -1){
       peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),(peopleParam.indexOf("&")))); //获取url 的参数内容
       peopleId = decodeURI(peopleParam.slice((peopleParam.indexOf("staffid")+8),(peopleParam.length+1)));
    }else{
       peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),peopleParam.length));
    }

    $("#search-name").val(peopleName)
    getParams = $("#patent-search").serialize();
  }else{
    $("#search-name").val("")
  }

  $('#start-time').datetimepicker({
     format:'yyyy/mm/dd',
     autoclose:true,//自动关闭
     endDate:new Date(), //当前时间后面日期不可选
     minView:2,//最精准的时间选择为日期0-分 1-时 2-日 3-月
     weekStart:0,
     language:'zh-CN'
   }).on('changeDate',function(ev){
      var starttime=$("#start-time").val();
      $("#end-time ").datetimepicker('setStartDate',starttime);
      $("#start-time").datetimepicker('hide');
   });
  $('#end-time').datetimepicker({
      format:'yyyy/mm/dd',
      autoclose:true,//自动关闭
      endDate:new Date(),//当前时间后面日期不可选
      minView:2,//最精准的时间选择为日期0-分 1-时 2-日 3-月
      weekStart:0,
      language:'zh-CN'
    }).on('changeDate',function(ev){
       var starttime=$("#start-time").val();
       var endtime=$("#end-time").val();
       $("#start-time").datetimepicker('setEndDate',endtime);
       $("#end-time").datetimepicker('hide')
    });
    getPatent(getParams);
  $("#patent-search-btn").on("click",function(){
      // 搜索框时间认证
      var regVal = /(^\s+)|(\s+$)/g;
      // var selectSortVal = $("#select-sort").val().replace(regVal,""),
      //     patentWordVal = $("#patent-word").val().replace(regVal,""),
      //     patentNameVal = $("#search-name").val().replace(regVal,""),
      //     designationWordVal = $("#designation-word").val().replace(regVal,""),
      var startTimeVal = $("#start-time").val().replace(regVal,""),
          endTimeVal = $("#end-time").val().replace(regVal,""),
          timeBoolean = true,
          patentData = {};
      if(startTimeVal !== "" || endTimeVal !== "" ){
        if(startTimeVal == "" || endTimeVal == "" ){
          timeBoolean = false;
        }
        if(!timeBoolean) {
          alert("请选好起始时间")
          return timeBoolean;
        }
      }

     patentData = $("#patent-search").serialize();

     getPatent(patentData)
    })

})
function getPatent(data){ //获取专利信息
  loading($("#patent-table"))
  $.ajax({       //get 获取数据
       type:"GET",
       url:patentGetUrl,
       contentType:'application/json;charset=UTF-8',
       data:data,
       success:function(data){

         $("#ant-site-loading").remove()
         $("#patent-table tr:not(:first-child)").remove();
         var patentData,patentHtml = "",patentDataLen = "";
         if(typeof(data) == "string"){
             patentData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             patentData = data;
         }
         $("#patent-table").createTable({tableData:patentData,choiceContent:'indexPatent',pageId:"#page",totalPageId:'#total-page',skipPageId:"#skip-click",tableId:'#patent-table',sessionPage:'patentPage',sessionLocation:'patentLocation'})

       },
       error:function(error){
        console.log(error)
       }
  });
}

 loading($(".bg-gray"))
  $.ajax({       //员工信息展示
       type:"GET",
       url:photoGetUrl,
       success:function(data){
       //  sessionStorage.clear();
      //   $("#ant-site-loading").remove();
         var photoData,photoLen = "",strHtml = "",hoverClass = "";
         if(typeof(data) == "string"){
             photoData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             photoData = data;
         }

         photoLen = photoData.length
         for(var i=0;i < photoLen;i++){

           if(i%6 == 0){
             hoverClass = "ef-slide-bottom"
           }
           if(i%6 == 1){
             hoverClass = "ef-zoom-in"
           }
           if(i%6 == 2){
             hoverClass = "ef-slide-right"
           }
           if(i%6 == 3){
             hoverClass = "ef-zoom-in"
           }
           if(i%6 == 4){
             hoverClass = "ef-move-top"
           }
           if(i%6 == 5){
             hoverClass = "ef-move-bottom"
           }

           strHtml += '<div class="grid-item"><div class="grid-item__inner"><div class="grid-item__content-wrapper"><div class="work"><a href="photoDetails.html?title='+ encodeURI(photoData[i]["activityTitle"]) +'"><div class="hoverbox '+ hoverClass +' light"><div class="hb_front"><img src="'+ photoData[i]["photoLocal"] +'" alt="photo"></div><div class="hb_back"><h2 class="work__title">'+ photoData[i]["activityTitle"] +'</h2><span class="work__text">'+ photoData[i]["date"] +'</span></div></div></a></div></div></div></div>';

         }
         $("#photoGallery").append(strHtml)


      },
      error:function(error){
        console.log(error)
      }
    });
    function loading($elem){  //加载图标
      $elem.append('<div class="ant-site-loading" id="ant-site-loading"><div id="loading-text"><span class="undefined">L</span><span class="yoyo-x-1">O</span><span class="yoyo-x-2">A</span><span class="yoyo-x-3">D</span><span class="yoyo-x-5">I</span><span class="yoyo-x-0">N</span><span class="undefined">G</span></div></div>')
    }

$(function(){
  var photoParam = location.search,
      photoName = "",
      photoData = {};

  if(photoParam !== ""){
    pphotoName = decodeURI(photoParam.slice((photoParam.indexOf("=")+1),photoParam.length));
  }
  photoData.activityTitle = photoName;

  loading($("#photo-details-ajax"))
  $.ajax({       //员工信息展示
       type:"GET",
       url:photoDetailsUrl,
       data:photoData,
       success:function(data){
       //  sessionStorage.clear();
      //   $("#ant-site-loading").remove();
         var photoData,photoLen = "",strHtml = "",hoverClass = "";
         if(typeof(data) == "string"){
             photoData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             photoData = data;
         }
         $("#photo-title").text(photoData[0]["activityTitle"])
         $("#photo-time").text(photoData[0]["date"])
         photoLen = photoData.length
         for(var i=0;i < photoLen;i++){
           strHtml += '<li class="masonry-item grid"><img src="'+ photoData[i]["photoLocal"] +'" alt="photo" /></li>'
         }
         $("#photo-details").append(strHtml)


      },
      error:function(error){
        console.log(error)
      }
    });
})
function calendar(){
  $('#add-thesis .datetimepicker,#thesis-content .datetimepicker').datetimepicker({
    format:'yyyy/mm/dd',
    autoclose:true,//自动关闭
    minView:2,//最精准的时间选择为日期0-分 1-时 2-日 3-月
    weekStart:0,
    language:'zh-CN'
  });
}
function loading($elem){  //加载图标
  $elem.append('<div class="ant-site-loading" id="ant-site-loading"><div id="loading-text"><span class="undefined">L</span><span class="yoyo-x-1">O</span><span class="yoyo-x-2">A</span><span class="yoyo-x-3">D</span><span class="yoyo-x-5">I</span><span class="yoyo-x-0">N</span><span class="undefined">G</span></div></div>')
}

$(function(){
  var photoParam = location.search,
      photoName = "",
      photoData = {};


  if(photoParam !== ""){
    photoName = decodeURI(photoParam.slice((photoParam.indexOf("=")+1),photoParam.length));

  }
  // photoParam = photoParam.slice(1,photoParam.length)
  // var arr = photoParam.split("&"),newObj = {};
  // for(var i=0;i<arr.length;i++){
  //   var arrObj = arr[i].split("=");
  //   console.log(arrObj)
  //
  //   for(var j=0;j<arrObj.length;j++){
  //       newObj[arrObj[0]] = arrObj[1]
  //         console.log(arrObj[j])
  //   }
  // }
  // console.log(newObj)

  photoData.activityTitle = photoName;
  console.log(photoName)
  loading($("#photo-details-ajax"))
 var modifyForm = new FormData($('#add-photo-form')[0])

  $.ajax({
       type:"POST",
       url:modifyPhotoPostUrl,
       contentType:'application/json;charset=UTF-8',
       dataType:"json",  // 预期服务器返回的数据类型。如果不指定，jQuery 将自动根据 HTTP 包 MIME 信息来智能判断，比如XML MIME类型就被识别为XML。
       data: JSON.stringify(modifyForm),
       success:function(data){
         var patentData;
         if(typeof(data) == "string"){
             patentData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             patentData = data;
         }
         if(data.message == "添加成功"){
           alert("添加成功!");
           $("#add-patent .edit-people-bg .form-control,#modify-patent .form-control").val("")
           $("#add-patent .edit-people-bg:not(:first-child)").remove();
           return false;
         }else{
           alert(data.message)
           return false;
         }

       },
       error:function(error){
        console.log(error)
       }
  });
  $.ajax({       //员工信息展示
       type:"GET",
       url:photoDetailsUrl,
       data:photoData,
       success:function(data){
       //  sessionStorage.clear();
      //   $("#ant-site-loading").remove();
         var photoData,photoLen = "",strHtml = "",hoverClass = "";
         if(typeof(data) == "string"){
             photoData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             photoData = data;
         }
         $("#photo-title").text(photoData[0]["activityTitle"])
         $("#photo-time").text(photoData[0]["date"])

         for(var i=0;i < photoLen;i++){
           strHtml += '<li><img src="'+ photoData[i]["photoLocal"] +'" alt="photo" data-photoId="'+  photoData[i]["photoId"] +'"/> <span class="delete-photo"> X </span></li>'
         }
         $("#delete-li").append(strHtml)


      },
      error:function(error){
        console.log(error)
      }
    });
    $("#delete-li").on("click",".delete-photo",function(){
      var photoPostId = $(this).prev().attr("data-photoId"),photoObj = {};
      photoObj.photoId = photoPostId;
      $.ajax({
           type:"POST",
           url:modifyPhotoPostUrl,
           contentType:'application/json;charset=UTF-8',
           dataType:"json",  // 预期服务器返回的数据类型。如果不指定，jQuery 将自动根据 HTTP 包 MIME 信息来智能判断，比如XML MIME类型就被识别为XML。
           data: photoObj,
           success:function(data){
             var patentData;
             if(typeof(data) == "string"){
                 patentData = JSON.parse(data);
             }else if(typeof(data) == "object"){
                 patentData = data;
             }
             alert(data.message);
             return false;
           },
           error:function(error){
            console.log(error)
           }
      });

    })

})

function loading($elem){  //加载图标
  $elem.append('<div class="ant-site-loading" id="ant-site-loading"><div id="loading-text"><span class="undefined">L</span><span class="yoyo-x-1">O</span><span class="yoyo-x-2">A</span><span class="yoyo-x-3">D</span><span class="yoyo-x-5">I</span><span class="yoyo-x-0">N</span><span class="undefined">G</span></div></div>')
}

$(".add-li li a").on("click",function(){      //tab选项 点击切换事件
  var tabtxt = $(this).text();
  if( tabtxt == "添加"){
    $("#add-content").removeClass("display-none");
    $("#modify-content").addClass("display-none");
  }else if( tabtxt == "修改"){
    $("#add-content").addClass("display-none");
    $("#modify-content").removeClass("display-none");
  }
  $(this).addClass("tab-active").parent().siblings().children().removeClass("tab-active")
})
function loading($elem){  //加载图标
  $elem.parent().append('<div class="ant-site-loading" id="ant-site-loading"><div id="loading-text"><span class="undefined">L</span><span class="yoyo-x-1">O</span><span class="yoyo-x-2">A</span><span class="yoyo-x-3">D</span><span class="yoyo-x-5">I</span><span class="yoyo-x-0">N</span><span class="undefined">G</span></div></div>')
}


$(function(){
    staffGetData("staff-table",staffGetUrl); //现有员工get信息
    staffGetData("voluntary-demission-table",voluntaryDemissionGetUrl);// 离职员工get信息

})

function staffGetData($elemTable,url){
  $("#"+ $elemTable +" tr td").remove();
  loading($("#"+ $elemTable))
  $.ajax({       //员工信息展示
       type:"GET",
       url:url,
       success:function(data){
       //  sessionStorage.clear();
         $("#ant-site-loading").remove();
         var staffData,
             messageData="",
			       staffDataArr=[];
         if(typeof(data) == "string"){
             staffData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             staffData = data;
         }
         messageData = staffData.message;

         staffDataArr = staffData.data;
           //引用table插件

         var staffDataLen = staffDataArr.length,
             staffHtml = "",staffRDHtml = "",staffZWHtml = "",staffPTHtml = "";
         if(staffDataLen == 0){
             staffHtml +=  '<tr><td class="text-center" colspan="5">暂无人员数据...</td></tr>'
         }else{
             for(var i = 0;i < staffDataLen;i++){
               if(staffDataArr[i].staffDepartment == "RD"){
                 staffRDHtml +=  '<tr><td>'+ staffDataArr[i].staffDepartment + '</td><td><a href="peopleDetails.html?staffname='+ encodeURI(staffDataArr[i].staffName) +'" target="_blank">'+ staffDataArr[i].staffName +'</a></td><td>'+ staffDataArr[i].staffEmail +'</td><td>'+ staffDataArr[i].staffExtension +'</td><td>'+ staffDataArr[i].staffNumber +'</td></tr>'
               }
               if(staffDataArr[i].staffDepartment == "总务"){
                 staffZWHtml +=  '<tr><td>'+ staffDataArr[i].staffDepartment + '</td><td><span>'+ staffDataArr[i].staffName +'</span></td><td>'+ staffDataArr[i].staffEmail +'</td><td>'+ staffDataArr[i].staffExtension +'</td><td>'+ staffDataArr[i].staffNumber +'</td></tr>'
               }
               if(staffDataArr[i].staffDepartment == "PT"){
                 staffPTHtml +=  '<tr><td>'+ staffDataArr[i].staffDepartment + '</td><td><span>'+ staffDataArr[i].staffName +'</span></td><td>'+ staffDataArr[i].staffEmail +'</td><td>'+ staffDataArr[i].staffExtension +'</td><td>'+ staffDataArr[i].staffNumber +'</td></tr>'
               }
             }
         }
         staffHtml = staffRDHtml + staffZWHtml + staffPTHtml;
         $("#"+ $elemTable).append(staffHtml)

      },
      error:function(error){
        console.log(error)
      }
    });
}


$(function(){
var peopleParam = location.search,
      peopleName = "null",
      morePatentUrl = "patentSearch.html" + decodeURI(encodeURI(peopleParam)),
      moreThesieUrl = "thesisSearch.html" + decodeURI(encodeURI(peopleParam));
  if(peopleParam !== ""){
      peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),peopleParam.length));  //获取url 的参数内容
      getSingleStaffData(peopleName,singleStaffInfoUrl)  // 获取简介和工作经验

  }
  staffDetailGetData("staff-thesis","thesis-link",thesisGetUrl,moreThesieUrl,peopleName,"paperTitle")  //员工个人论文
  staffDetailGetData("staff-patent","patent-link",patentGetUrl,morePatentUrl,peopleName,"patentTitle")   //员工个人专利

})

function getSingleStaffData(peopleName,url){  //获取员工的简介和经历 （经历信息写在staffDetailsStorage.js中）

    var singleStaffInfo = {};
    singleStaffInfo.staffName = peopleName

    $.ajax({       //员工信息展示
     type:"GET",
     url: url,
     data:singleStaffInfo,
     success:function(data){
     //  sessionStorage.clear();
    //  $("#staff-brief").empty();
       $("#ant-site-loading").remove();
       var staffData,staffDataLen="",staffHtml="";
       if(typeof(data) == "string"){
           staffData = JSON.parse(data);
       }else if(typeof(data) == "object"){
           staffData = data;
       }

       if(staffData !== null && staffData !== undefined){
         var singleInfo = staffData.data;
         if(singleInfo.length !== 0){
           if(peopleDetails[peopleName] == undefined){
             $("#staff-brief").append("<div>空缺</div>")
             $("#staff-experience").append("<div>空缺</div>")
           }else{
             var staffExperience = peopleDetails[peopleName]["experience"], // staff 经历
                 staffHobby = peopleDetails[peopleName]["brefContent"], // staff Hobbey
                 staffExImg = peopleDetails[peopleName]["img"], // staff 图片
                 staffChineseName =  peopleDetails[peopleName]["name"]["chineseName"],
                 staffEnglishName =  peopleDetails[peopleName]["name"]["englishName"],
                 strBriefHtml ="",
                 strExperienceHtml ="",
                 index = 1;

             $(".banner-img").css({"background":"url(img/"+ staffExImg +".jpg) no-repeat 50% 50%","background-size":"cover"})
             $("#chineseName").text(staffChineseName)
             $("#englishName").text(staffEnglishName)


             strBriefHtml += '<li><div class="li1">邮箱</div><div class="li2">:</div><div class="li3">'+ singleInfo[0]["staffEmail"] +'</div><div class="clearfix"></div></li>'
             strBriefHtml += '<li><div class="li1">分机</div><div class="li2">:</div><div class="li3">'+ singleInfo[0]["staffExtension"] +'</div><div class="clearfix"></div></li>'
             strBriefHtml += '<li><div class="li1">手机</div><div class="li2">:</div><div class="li3">'+ singleInfo[0]["staffNumber"] +'</div><div class="clearfix"></div></li>'
             if(staffHobby !== "暂无"){
               strBriefHtml += '<li><div class="li1">兴趣</div><div class="li2">:</div><div class="li3">'+ staffHobby["兴趣"]+'</div><div class="clearfix"></div></li>'
             }


             if(staffExperience == "空缺"){
               strExperienceHtml += "<div>空缺</div>"
             }else{
               for(var key in staffExperience){
                   if(index % 2 == 0){
                     strExperienceHtml += '<div class="staff-experience"><div class="col-md-6 experience-left text-right"><h5>'+ staffExperience[key] +'</h5></div><div class="col-md-6 experience-right"><h4>'+ key +'</h4></div></div>'
                   }else{
                     strExperienceHtml += '<div class="staff-experience"><div class="col-md-6 experience-left text-right"><h4>'+ key +'</h4></div><div class="col-md-6 experience-right"><h5>'+ staffExperience[key] +'</h5></div></div>'
                   }
                   index++;
               }
             }

             $("#staff-brief").append(strBriefHtml)
             $("#staff-experience").append(strExperienceHtml)
           }


         }

       }

    },
    error:function(XMLHttpRequest, textStatus, errorThrown){
      console.log(XMLHttpRequest.status)
    }
    });
}
function staffDetailGetData($elem,$link,url,moreUrl,staffName,dataParam){ // 获取专利或者论文

  var staffPatent = {};

  if($elem == "staff-patent"){
    staffPatent.patentSort = "";
    staffPatent.patentWord = "";
    staffPatent.patentName = staffName;
    staffPatent.designationWord = "";
    staffPatent.startTime = "";
    staffPatent.endTime = "";
  }
  if($elem == "staff-thesis"){
    staffPatent.thesisWord = "";
    staffPatent.thesisName = staffName;
  }

  $("#"+ $elem +" li").remove();
  loading($("#"+ $elem))
  $.ajax({       //员工信息展示
       type:"GET",
       url: url,
       data:staffPatent,
       success:function(data){

       //  sessionStorage.clear();
         $("#ant-site-loading").remove();
         var staffData,staffDataLen="",staffHtml="";
         if(typeof(data) == "string"){
             staffData = JSON.parse(data);
         }else if(typeof(data) == "object"){
            staffData = data;
         }
         if($elem == "staff-thesis"){
           staffData = staffData.data;
           if(staffData == null ){  //无数据
             $("#" + $elem).append("<div>暂无相关数据...</div>")
             $("#"+ $link).addClass("display-none")
             return false;
           }
            staffDataLen = staffData.length;
         }
         if($elem == "staff-patent"){
           staffDataLen = staffData.length ;
           if(staffDataLen == 0 ){  //无数据
             $("#" + $elem).append("<div>暂无相关数据...</div>")
             $("#"+ $link).addClass("display-none")
              return false;
           }
         }

         if(staffDataLen > 5){
           for(var i = 0;i < 5;i++){

             staffHtml += '<li>'+ staffData[i][dataParam] +'</li>';
           }
           $("#" + $elem).append(staffHtml)
           $("#"+ $link).prop("href",moreUrl)
         }
         if(staffDataLen < 6){
           for(var i=0;i<staffDataLen;i++){

             staffHtml += '<li>'+ staffData[i][dataParam] +'</li>';
           }
           $("#" + $elem).append(staffHtml)
           $("#"+ $link).prop("href",moreUrl)

         }

      },
      error:function(error){
        console.log(error)
      }
    });
}
function loading($elem){

  $elem.parent().append('<div class="ant-site-loading" id="ant-site-loading"><div id="loading-text"><span class="undefined">L</span><span class="yoyo-x-1">O</span><span class="yoyo-x-2">A</span><span class="yoyo-x-3">D</span><span class="yoyo-x-5">I</span><span class="yoyo-x-0">N</span><span class="undefined">G</span></div></div>')
}


$(function(){
  var peopleParam = location.search,
      peopleName = "null",
      morePatentUrl = "patentSearch.html" + decodeURI(peopleParam);

  if(peopleParam !== ""){

      peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),peopleParam.length));  //获取url 的参数内容
      getSingleStaffData(peopleName,singleStaffInfoUrl)  // 获取简介和工作经验

  }
  staffDetailGetData("staff-patent","patent-link",patentGetUrl,morePatentUrl,peopleName)   //员工个人专利



})

function getSingleStaffData(peopleName,url){  //获取员工的简介和经历 （经历信息写在staffDetailsStorage.js中）

    var singleStaffInfo = {};
    singleStaffInfo.staffName = encodeURI(encodeURI(peopleName))
    $.ajax({       //员工信息展示
     type:"GET",
     url: url,
     data:singleStaffInfo,
     success:function(data){
     //  sessionStorage.clear();
    //  $("#staff-brief").empty();
       $("#ant-site-loading").remove();
       var staffData,staffDataLen="",staffHtml="";
       if(typeof(data) == "string"){
           staffData = JSON.parse(data);
       }else if(typeof(data) == "object"){
           staffData = data;
       }

       if(staffData !== null && staffData !== undefined){
         var singleInfo = staffData.data;
         if(singleInfo.length !== 0){
           if(peopleDetails[peopleName] == undefined){
             $("#staff-brief").append("<div>空缺</div>")
             $("#staff-experience").append("<div>空缺</div>")
           }else{
             var staffExperience = peopleDetails[peopleName]["experience"], // staff 经历
                 staffHobby = peopleDetails[peopleName]["brefContent"], // staff Hobbey
                 staffExImg = peopleDetails[peopleName]["img"], // staff 图片
                 staffChineseName =  peopleDetails[peopleName]["name"]["chineseName"],
                 staffEnglishName =  peopleDetails[peopleName]["name"]["englishName"],
                 strBriefHtml ="",
                 strExperienceHtml ="",
                 index = 1;

             $(".banner-img").css({"background":"url(img/"+ staffExImg +".jpg) no-repeat 50% 50%","background-size":"cover"})
             $("#chineseName").prop({"src":"img/"+ staffExImg +"a.png","alt":staffChineseName})
             $("#englishName").prop({"src":"img/"+ staffExImg +"b.png","alt":staffEnglishName})


             strBriefHtml += '<li><div class="li1">邮箱</div><div class="li2">:</div><div class="li3">'+ singleInfo[0]["staffEmail"] +'</div><div class="clearfix"></div></li>'
             strBriefHtml += '<li><div class="li1">分机</div><div class="li2">:</div><div class="li3">'+ singleInfo[0]["staffExtension"] +'</div><div class="clearfix"></div></li>'
             strBriefHtml += '<li><div class="li1">手机</div><div class="li2">:</div><div class="li3">'+ singleInfo[0]["staffNumber"] +'</div><div class="clearfix"></div></li>'
             if(staffHobby !== "暂无"){
               strBriefHtml += '<li><div class="li1">兴趣</div><div class="li2">:</div><div class="li3">'+ staffHobby["兴趣"]+'</div><div class="clearfix"></div></li>'
             }


             if(staffExperience == "空缺"){
               strExperienceHtml += "<div>空缺</div>"
             }else{
               for(var key in staffExperience){
                   if(index % 2 == 0){
                     strExperienceHtml += '<div class="staff-experience"><div class="col-md-6 experience-left text-right"><h5>'+ staffExperience[key] +'</h5></div><div class="col-md-6 experience-right"><h4>'+ key +'</h4></div></div>'
                   }else{
                     strExperienceHtml += '<div class="staff-experience"><div class="col-md-6 experience-left text-right"><h4>'+ key +'</h4></div><div class="col-md-6 experience-right"><h5>'+ staffExperience[key] +'</h5></div></div>'
                   }
                   index++;
               }
             }

             $("#staff-brief").append(strBriefHtml)
             $("#staff-experience").append(strExperienceHtml)
           }


         }

       }

    },
    error:function(XMLHttpRequest, textStatus, errorThrown){
      console.log(XMLHttpRequest.status)
    }
    });
}
function staffDetailGetData($elem,$link,url,moreUrl,staffName){ // 获取专利或者论文

  var staffPatent = {};
      staffPatent.patentSort = "";
      staffPatent.patentWord = "";
      staffPatent.patentName = staffName;
      staffPatent.designationWord = "";
      staffPatent.startTime = "";
      staffPatent.endTime = "";


  $("#"+ $elem +" li").remove();
  loading($("#"+ $elem))
  $.ajax({       //员工信息展示
       type:"GET",
       url: url,
       data:staffPatent,
       success:function(data){
       //  sessionStorage.clear();
         $("#ant-site-loading").remove();
         var staffData,staffDataLen="",staffHtml="";
         if(typeof(data) == "string"){
             staffData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             staffData = data;
         }

         staffDataLen = staffData.length;
         if(staffDataLen == 0){
           $("#" + $elem).append("<div>暂无相关数据...</div>")
           $("#"+ $link).addClass("display-none")
         }
         if(staffDataLen > 5){
           for(var i = 0;i < 5;i++){

             staffHtml += '<li>'+ staffData[i].patentTitle +'</li>';
           }
           $("#" + $elem).append(staffHtml)
           $("#"+ $link).prop("href",moreUrl)
         }
         if(staffDataLen < 6){
           for(var i=0;i<staffDataLen;i++){
             staffHtml += '<li>'+ staffData[i].patentTitle +'</li>';
           }
           $("#" + $elem).append(staffHtml)
           $("#"+ $link).prop("href",moreUrl)

         }

      },
      error:function(error){
        console.log(error)
      }
    });
}
function loading($elem){

  $elem.parent().append('<div class="ant-site-loading" id="ant-site-loading"><div id="loading-text"><span class="undefined">L</span><span class="yoyo-x-1">O</span><span class="yoyo-x-2">A</span><span class="yoyo-x-3">D</span><span class="yoyo-x-5">I</span><span class="yoyo-x-0">N</span><span class="undefined">G</span></div></div>')
}


const peopleDetails = {"皮冰锋":{"name":{"chineseName":"皮冰锋","englishName":"winter Pi"},"img":"pi","brefContent":{"兴趣":"hadoop，nutch等开源项目，羽毛球"},"experience":{"2004/9-2007/3":"华中科技大学毕业","2007/4-2010/5":"儒豹手机搜索引擎","2010/5-现在":"富士通研究开发中心有限公司苏州分公司"}},"周恩策":{"name":{"chineseName":"周恩策","englishName":"Ence Zhou"},"img":"zhou","brefContent":{"兴趣":"实在太多，但无一精通"},"experience":{"2004/9-2008/6":"宁波大学 计算机科学与技术","2008-2011":" 苏州大学 图像处理与模式识别"}},"张沈斌":{"name":{"chineseName":"张沈斌","englishName":"Shenbin Zhang"},"img":"zhang","brefContent":"暂无","experience":{"2004-2008":"浙江工业大学 软件工程","2008-2011":" 苏州大学 智能化信息处理"}},"华松":{"name":{"chineseName":"华松","englishName":"Song Hua"},"img":"hua","brefContent":"暂无","experience":{"2005-2009":"苏州大学 软件工程","2009-2012":"苏州大学 计算机科学与应用-信息检索 "}},"孙昊立":{"name":{"chineseName":"孙昊立","englishName":"Haoli Sun"},"img":"sun","brefContent":"暂无","experience":"空缺"}}

$(function(){
   $("#add-thesis input").val("");

   var peopleParam = location.search,peopleName = "";
   if(peopleParam !== ""){
     if(peopleParam.indexOf("&") !== -1){
        peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),(peopleParam.indexOf("&"))));
        peopleId = decodeURI(peopleParam.slice((peopleParam.indexOf("staffid")+8),(peopleParam.length+1)));
     }else{
        peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),peopleParam.length));
     }

     $("#people-name").text("/"+ decodeURI(peopleName))
     $("#proposer-name").val(decodeURI(peopleName))
   }else{
     $("#people-name").text("")
   }

   // if(peopleParam !== ""){
   //
   //    peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),(peopleParam.indexOf("&"))));
   //   $("#people-name").text("/"+ decodeURI(peopleName))
   // }else{
   //   $("#people-name").text("")
   // }
  calendar();

  $(".add-li li a").on("click",function(){      //tab选项 点击切换事件
    var tabtxt = $(this).text();
    if( tabtxt == "添加"){
      $("#add-content").removeClass("display-none");
      $("#modify-content").addClass("display-none");
    }else if( tabtxt == "修改"){
      var getparams = {};
          getparams.thesisName = peopleName;

      $("#add-content").addClass("display-none");
      $("#modify-content").removeClass("display-none");
      getThesisData(thesisGetUrl,getparams)
    }
    $(this).addClass("tab-active").parent().siblings().children().removeClass("tab-active")
  })


  $("#fileTxt").on("click",function(){//添加-文件上传控件
    $("#fileUpload").click();
  })
  $("#fileUpload").on("change",function(){
    var $thisVal = $(this).val();
    $("#fileTxt").val($thisVal.slice($thisVal.lastIndexOf('\\')+1,$thisVal.length))
    $("#file-uploaded,#file-uploaded-name,#file-uploaded-dir").val("")
  })

  $("#thesis-content").on("click","#fileModifyTxt",function(){  //修改-文件上传控件
    $("#fileModifyUpload").click();
  })
  $("#fileModifyUpload").on("change",function(){
    var $thisVal = $(this).val();
    $("#fileModifyTxt").val($thisVal.slice($thisVal.lastIndexOf('\\')+1,$thisVal.length))
    $("#file-modify-uploaded,#file-modify-uploaded-name,#file-modify-uploaded-dir").val("")
  })


  $("#file-upload-btn,#file-modify-upload-btn").on("click",function(){   //上传文件

    var fileVal = "",self = this;
    if($(this).attr("id") == "file-upload-btn"){
      fileVal = $("#fileUpload").val()
    }
    if($(this).attr("id") == "file-modify-upload-btn"){
      fileVal = $("#fileModifyUpload").val()
    }
    var fileSuffix = fileVal.slice(fileVal.lastIndexOf(".")+1,fileVal.length),
        fileProgressHtml = "";
        fileSuffix = fileSuffix.toLowerCase();

    if(fileVal == ""){
        alert("先选文件！")
        return false;
    }
    if(fileSuffix !== "pdf"){
        alert("请选择PDF文件")
        return false;
    }
    fileProgressHtml = '<div class="file-progress"><div class="progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%"><span class="sr-only"></span></div></div></div>'
    $(this).parent().parent().append(fileProgressHtml)

    var postFileValue;
    if($(this).attr("id") == "file-upload-btn"){
      postFileValue = new FormData($('#thesis-file-upload')[0])
    }
    if($(this).attr("id") == "file-modify-upload-btn"){
      postFileValue = new FormData($('#thesis-modify-file-upload')[0])
    }

    //表单内容
    $.ajax({       //post 提交数据
          url: uploadThesisFile,
          type: 'POST',
          cache: false,
          data: postFileValue,
          processData: false,
          contentType: false,
          success:function(data){
            $(".file-progress").remove();
            var thesisFileData = data;
            if(typeof(data) == "string"){
                thesisFileData = JSON.parse(data);
            }else if(typeof(data) == "object"){
                thesisFileData = data;
            }
            if($(self).attr("id") == "file-upload-btn"){
              $("#file-uploaded").val(thesisFileData.id)
              $("#file-uploaded-name").val(thesisFileData.fileName)
              $("#file-uploaded-dir").val(thesisFileData.fileDownloadUri)
            }
            if($(self).attr("id") == "file-modify-upload-btn"){
              alert("fd")
              $("#file-modify-uploaded").val(thesisFileData.id)
              $("#file-modify-uploaded-name").val(thesisFileData.fileName)
              $("#file-modify-uploaded-dir").val(thesisFileData.fileDownloadUri)
            }
            alert("文件上传成功")
         },
         error:function(error){
          console.log(error)
         }
    });
  })
  $("#thesis-save").on("click",function(){  //提交添加论文数据
      //表单验证

      var ruleResult = verifyRules('add-thesis',"3")
      if(!ruleResult) return false;
      var postAddValue = new FormData($('#add-thesis-form')[0])


      //表单内容
      $.ajax({       //post 提交数据
            url: thesisAddPostUrl,
            type: 'POST',
            cache: false,
            data: postAddValue,
            processData: false,
            contentType: false,
            success:function(data){
              var thesisPostData = data;
              if(typeof(data) == "string"){
                  thesisPostData = JSON.parse(data);
              }else if(typeof(data) == "object"){
                  thesisPostData = data;
              }
              if(thesisPostData.code == 0){
                alert("添加成功")
              }
              $("#add-thesis input").val("")

           },
           error:function(error){
            console.log(error)
           }
      });

    })
  $("#thesis-modify-save").on("click",function(){  //保存论文修改数据
        //表单验证

       var ruleResult = verifyRules('thesis-content',"4")
       if(!ruleResult) return false;
       var postModifyValue = new FormData($('#modify-thesis-form')[0])  //表单内容

        $.ajax({        //post 提交数据
              url: thesisPostModifyUrl,
              type: 'POST',
              cache: false,
              data: postModifyValue,
              processData: false,
              contentType: false,
              success:function(data){
                var thesisModifyData = data;
                if(typeof(data) == "string"){
                    thesisModifyData = JSON.parse(data);
                }else if(typeof(data) == "object"){
                    thesisModifyData = data;
                }
                if(thesisModifyData.code = "0"){
                  alert("修改成功")
                  $(".close").click();
                  $("#edit-thesis-table").createTable({tableData:thesisModifyData.data,choiceContent:'modifyThesis',pageId:"#page",totalPageId:'#total-page',skipPageId:"#skip-click",tableId:'#edit-thesis-table',sessionPage:'thesisModifyPage',sessionLocation:'thesisModifyLocation',previewUrl:previewFileUrl,downloadUrl:downloadFileUrl})
                }else{
                  alert("有异常")
                }
              },
              error:function(error){
               console.log(error)
               console.log(error.status)
              }
        });
      })
})
function calendar(){
  $('#add-thesis .datetimepicker,#thesis-content .datetimepicker,#edit-thesis-table .datetimepicker').datetimepicker({
    format:'yyyy/mm/dd',
    autoclose:true,//自动关闭
    minView:2,//最精准的时间选择为日期0-分 1-时 2-日 3-月
    weekStart:0,
    language:'zh-CN'
  });
}
function getThesisData(url,data){

  loading($("#edit-thesis-table"))

  $.ajax({       //get 获取数据
       type:"GET",
       url:url,
       contentType:'application/json;charset=UTF-8',
       data:data,
       success:function(data){
         $("#ant-site-loading").remove();
         var thesisGetData = data;
         if(typeof(data) == "string"){
             thesisGetData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             thesisGetData = data;
         }

         if(thesisGetData.code == "0"){
           var thesisData = thesisGetData.data;
           $("#edit-thesis-table").createTable({tableData:thesisData,choiceContent:'modifyThesis',pageId:"#page",totalPageId:'#total-page',skipPageId:"#skip-click",tableId:'#edit-thesis-table',sessionPage:'thesisModifyPage',sessionLocation:'thesisModifyLocation',previewUrl:previewFileUrl,downloadUrl:downloadFileUrl})

           $("#edit-thesis-table").off("click").on("click",".table-edit",function(){        //编辑  点击事件
             $("#thesis-content input").val("") //清除所有input值
             thesisData.reverse()
             var $this = $(this),
                 $tdTxt = $(this).parent().parent().children("td").eq(0).text()-1;

             $("#thesis-content input").eq(0).val(thesisData[$tdTxt].paperId)
             $("#thesis-content input").eq(1).val(thesisData[$tdTxt].paperTitle)
             $("#thesis-content input").eq(2).val(thesisData[$tdTxt].proposer)
             $("#thesis-content input").eq(3).val(thesisData[$tdTxt].applicationDate)
             $("#thesis-content input").eq(4).val(thesisData[$tdTxt].fileName)
             $("#thesis-content input").eq(5).val(thesisData[$tdTxt].fileId)
             $("#thesis-content input").eq(6).val(thesisData[$tdTxt].fileName)
             $("#thesis-content input").eq(7).val(thesisData[$tdTxt].fileDownloadUri)
             console.log(thesisData[$tdTxt].fileId)
             // $("#thesis-content .form-control").eq(4).val($tdTxt.eq(4).text())
             // $("#thesis-content .form-control").eq(5).val($tdTxt.eq(4).text())
           })

         }else if(thesisGetData.code == "9000001"){

            $("edit-thesis-table tr:not(:first-child)").remove()
            $("#edit-thesis-table").createTable({tableData:thesisData,choiceContent:'modifyThesis',pageId:"#page",totalPageId:'#total-page',skipPageId:"#skip-click",tableId:'#edit-thesis-table',sessionPage:'thesisModifyPage',sessionLocation:'thesisModifyLocation',previewUrl:previewFileUrl,downloadUrl:downloadFileUrl})

         }else{
           alert("服务器有异常!")
         }
       },
       error:function(error){
        console.log(error)
       }
  });
}

function verifyRules(inputContentId,changeIndex){  //表单验证
  var thesisAdd = true,
      changeIndexParam = Number(changeIndex);
  $("#"+ inputContentId +" input").each(function(index){
    console.log(index)
    var inputVal = $(this).val().replace(/(^\s+)|(\s+$)/g,"")
    if(index == changeIndexParam){
      if(inputVal == ""){
        alert("先选择文件上传！")
        thesisAdd = false;

      }
      if(!thesisAdd) return false;
    }
    if(index == (changeIndexParam + 1)){
      if(inputVal == ""){
        alert("将文件上传！")
        thesisAdd = false;

      }
      if(!thesisAdd) return false;
    }
    if(inputVal == ""){
      alert("内容不为空！")
      thesisAdd = false;
      if(!thesisAdd) return false;
    }

  })

  if(!thesisAdd) return thesisAdd;  //验证失败

  return thesisAdd;
}

$(function(){
  $("#thesis-search input").val("");

  var peopleParam = location.search,getParams = "";

  // if(peopleParam !== ""){
  //   var peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),(peopleParam.indexOf("&"))));
  //   $("#search-name").val(decodeURI(peopleName))
  // }else{
  //   $("#search-name").val("")
  // }

  if(peopleParam !== ""){ //获取url传递的参数
    var peopleName = "",thesisData = {};
    if(peopleParam.indexOf("&") !== -1){
       peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),(peopleParam.indexOf("&")))); //获取url 的参数内容
       peopleId = decodeURI(peopleParam.slice((peopleParam.indexOf("staffid")+8),(peopleParam.length+1)));
    }else{
       peopleName = decodeURI(peopleParam.slice((peopleParam.indexOf("=")+1),peopleParam.length));
    }

    thesisData.thesisWord = "";
    thesisData.thesisName = peopleName;
    $("#search-name").val(peopleName)
    getParams = thesisData;
  }else{
    $("#search-name").val("")
  }
  //

  getThesisData(thesisGetUrl,getParams)

  $('#start-time').datetimepicker({
     format:'yyyy/mm/dd',
     autoclose:true,//自动关闭
     endDate:new Date(), //当前时间后面日期不可选
     minView:2,//最精准的时间选择为日期0-分 1-时 2-日 3-月
     weekStart:0,
     language:'zh-CN'
   }).on('changeDate',function(ev){
      var starttime=$("#start-time").val();
      $("#end-time ").datetimepicker('setStartDate',starttime);
      $("#start-time").datetimepicker('hide');
   });
  $('#end-time').datetimepicker({
      format:'yyyy/mm/dd',
      autoclose:true,//自动关闭
      endDate:new Date(),//当前时间后面日期不可选
      minView:2,//最精准的时间选择为日期0-分 1-时 2-日 3-月
      weekStart:0,
      language:'zh-CN'
    }).on('changeDate',function(ev){
       var starttime=$("#start-time").val();
       var endtime=$("#end-time").val();
       $("#start-time").datetimepicker('setEndDate',endtime);
       $("#end-time").datetimepicker('hide')
    });

  $("#thesis-search-btn").on("click",function(){
      // 搜索框时间认证
      var reg = /(^\s+)|(\s+$)/g;
      var thesisWordVal = $("#thesis-word").val().replace(reg,""),
          nameVal = $("#search-name").val().replace(reg,""),
          startTimeVal = $("#start-time").val().replace(reg,""),
          endTimeVal = $("#end-time").val().replace(reg,""),
          timeBoolean = true,
          thesisData = {};
          thesisData.thesisWord = thesisWordVal
          thesisData.thesisName = nameVal

      if(startTimeVal !== "" || endTimeVal !== "" ){
        if(startTimeVal == "" || endTimeVal == "" ){
          timeBoolean = false;
        }else{
          thesisData.startTime = startTimeVal
          thesisData.endTime = endTimeVal
        }
        if(!timeBoolean) {
          alert("请选好起始时间")
          return timeBoolean;
        }
      }

      getThesisData(thesisGetUrl,thesisData)

    })


})
function getThesisData(url,data){
  loading($("#thesis-table"))
  $.ajax({       //get 获取数据
       type:"GET",
       url:url,
       contentType:'application/json;charset=UTF-8',
       dataType:"json",  // 预期服务器返回的数据类型。如果不指定，jQuery 将自动根据 HTTP 包 MIME 信息来智能判断，比如XML MIME类型就被识别为XML。
       data:data,
       success:function(data){
        $("#ant-site-loading").remove();
         var thesisGetData = data;
         if(typeof(data) == "string"){
             thesisGetData = JSON.parse(data);
         }else if(typeof(data) == "object"){
             thesisGetData = data;
         }

         if(thesisGetData.code == "0"){
           var thesisData = thesisGetData.data;
           $("#thesis-table").createTable({tableData:thesisData,choiceContent:'indexThesis',pageId:"#page",totalPageId:'#total-page',skipPageId:"#skip-click",tableId:'#thesis-table',sessionPage:'thesisPage',sessionLocation:'thesisLocation',previewUrl:previewFileUrl,downloadUrl:downloadFileUrl})

         }else if(thesisGetData.code == "9000001"){
            $("#thesis-table tr:not(:first-child)").remove()
            $("#thesis-table ").append('<tr><td class="text-center" colspan="5">暂无相关数据...</td></tr>');
         }else{
           alert("服务器有异常!")
         }
       },
       error:function(error){
        console.log(error)
       }
  });

}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZHBlb3BsZS5qcyIsImFkZFBob3RvLmpzIiwiYm9vay5qcyIsImJvb3RzdHJhcC1kYXRldGltZXBpY2tlci5mci5qcyIsImJvb3RzdHJhcC1kYXRldGltZXBpY2tlci5qcyIsImJvb3RzdHJhcC1kYXRldGltZXBpY2tlci56aC1DTi5qcyIsImNvbmZpZy5qcyIsImNvbmZpZzIuanMiLCJpbmRleC5qcyIsImpxdWVyeS0zLjEuMS5taW4uanMiLCJqcXVlcnkuY29va2llLm1pbi5qcyIsImpxdWVyeS5jcmVhdGVUYWJsZS5qcyIsInBhdGVudEFkZC5qcyIsInBhdGVudFNlYXJjaC5qcyIsInBob3RvLmpzIiwicGhvdG9EZXRhaWxzLmpzIiwicGhvdG9EZXRhaWxzTW9kaWZ5LmpzIiwicHVibGljSnMuanMiLCJzdGFmZi5qcyIsInN0YWZmRGV0YWlscy5qcyIsInN0YWZmRGV0YWlsc2QuanMiLCJzdGFmZkRldGFpbHNTdG9yYWdlLmpzIiwidGhlc2lzQWRkLmpzIiwidGhlc2lzU2VhcmNoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25VQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM3U0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDLzZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6SkE7QUFDQTtBQUNBO0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM1NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uKCl7XG4gICQoXCIuYWRkLWxpIGxpIGE6ZXEoMSlcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7ICAgICAgLy90YWLpgInpobkg54K55Ye75YiH5o2i5LqL5Lu2XG4gICAgc3RhZmZHZXREYXRhKFwibW9kaWZ5LXBlb3BsZS10YWJsZVwiLHN0YWZmR2V0VXJsLFwicGVvcGxlUGFnZVwiLFwicGVvcGxlTG9jYXRpb25cIilcbiAgfSlcblxuXG4gICQoXCIjYWRkLXBlb3BsZS1tb2R1bGVcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7IC8vIOa3u+WKoOS6uuWRmOaooeWdl1xuICAgICQoXCIjYWRkLXBlb3BsZS10YWJsZVwiKS5hcHBlbmQoJzx0cj48dGQ+PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgbmFtZT1cInN0YWZmRGVwYXJ0bWVudFwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCLpg6jpl6go5b+F5aGrKVwiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIG5hbWU9XCJzdGFmZk5hbWVcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwi5aeT5ZCNKOW/heWhqylcIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwic3RhZmZFbWFpbFwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCLlhazlj7jpgq7nrrEo6YCJ5aGrKVwiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIG5hbWU9XCJzdGFmZkV4dGVuc2lvblwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCLliIbmnLoo6YCJ5aGrKVwiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIG5hbWU9XCJzdGFmZk51bWJlclwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCLmiYvmnLoo6YCJ5aGrKVwiPjwvdGQ+PHRkPjxkaXYgY2xhc3M9XCJkZWxldGUgdGV4dC1jZW50ZXJcIj7DlzwvZGl2PjwvdGQ+PC90cj4nKTtcbiAgfSlcblxuICAkKFwiI2FkZC1wZW9wbGUtdGFibGVcIikub24oXCJjbGlja1wiLFwiLmRlbGV0ZVwiLGZ1bmN0aW9uKCl7IC8v5Yig6Zmk5aSa5L2Z6KGM5pWwXG4gICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgfSlcblxuICAkKFwiI21vZGlmeS1wZW9wbGUtdGFibGVcIikub24oXCJjbGlja1wiLFwiLmVkaXQtcGVvcGxlLWluZm9cIixmdW5jdGlvbigpeyAvL+eCueWHu+KAmOe8lui+kSfmjInpkq5cbiAgICB2YXIgJHRkVHh0ID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5jaGlsZHJlbihcInRkXCIpLFxuICAgICAgICAkdGhpc1R4dCA9ICQodGhpcykudGV4dCgpO1xuXG4gICAgaWYoJHRoaXNUeHQ9PSBcIue8lui+kVwiKXtcbiAgICAgICQodGhpcykudGV4dChcIuWPlua2iFwiKVxuICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImJ0bi1jYW5jZWxcIilcbiAgICAgICR0ZFR4dC5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgICAgdmFyIHR4dCA9ICQodGhpcykudGV4dCgpO1xuICAgICAgICBpZihpbmRleCAhPT0gMCAmJiBpbmRleCAhPT0gNiApe1xuICAgICAgICAgICAgJCh0aGlzKS5lbXB0eSgpO1xuICAgICAgICAgICAgJCh0aGlzKS5hcHBlbmQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdmFsdWU9XCInICsgdHh0ICsgJ1wiPicpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgICBpZigkdGhpc1R4dCA9PSBcIuWPlua2iFwiKXtcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJidG4tY2FuY2VsXCIpXG4gICAgICAkKHRoaXMpLnRleHQoXCLnvJbovpFcIilcbiAgICAgICR0ZFR4dC5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgICAgdmFyIHR4dCA9ICQodGhpcykuY2hpbGRyZW4oXCIuZm9ybS1jb250cm9sXCIpLmF0dHIoXCJ2YWx1ZVwiKTtcbiAgICAgICAgaWYodHh0ICE9PSB1bmRlZmluZWQpe1xuICAgICAgICAgICQodGhpcykuZW1wdHkoKS50ZXh0KHR4dCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9KVxuXG4gICQoXCIjbW9kaWZ5LXBlb3BsZS10YWJsZVwiKS5vbihcImNsaWNrXCIsXCIuZGVsZXRlLXBlb3BsZS1pbmZvXCIsZnVuY3Rpb24oKXsgIC8v54K55Ye74oCc5Yig6Zmk4oCdIOaMiemSrlxuICAgIGlmKCQoXCIuYnRuLWNhbmNlbFwiKS5sZW5ndGggIT09IDApe1xuICAgICAgYWxlcnQoXCLkuI3opoHlnKjnvJbovpHnmoTmg4XlhrXkuIvvvIzkvb/nlKjliKDpmaTlip/og73vvIFcIilcbiAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgc3RhZmZEZWxldGVJZCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuY2hpbGRyZW4oKS5lcSgxKS5hdHRyKFwiZGF0YS1pZG51bVwiKSxcbiAgICAgICAgc3RhZmZEZWxldGVPYmogPSB7fTtcbiAgICAgICAgc3RhZmZEZWxldGVPYmouc3RhZmZJZCA9IHN0YWZmRGVsZXRlSWQ7XG5cbiAgICAkLmFqYXgoe1xuICAgICAgICAgdHlwZTpcIlBPU1RcIixcbiAgICAgICAgIHVybDpkZWxldGVQZW9wbGVVcmwsXG4gICAgICAgICBjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICAgICAgIGRhdGFUeXBlOlwianNvblwiLCAgLy8g6aKE5pyf5pyN5Yqh5Zmo6L+U5Zue55qE5pWw5o2u57G75Z6L44CC5aaC5p6c5LiN5oyH5a6a77yMalF1ZXJ5IOWwhuiHquWKqOagueaNriBIVFRQIOWMhSBNSU1FIOS/oeaBr+adpeaZuuiDveWIpOaWre+8jOavlOWmglhNTCBNSU1F57G75Z6L5bCx6KKr6K+G5Yir5Li6WE1M44CCXG4gICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHN0YWZmRGVsZXRlT2JqKSxcbiAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XG5cbiAgICAgICAgICAgdmFyIGRlbGV0ZVBlb3BsZURhdGE7XG4gICAgICAgICAgIGlmKHR5cGVvZihkYXRhKSA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgICAgIGRlbGV0ZVBlb3BsZURhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICB9ZWxzZSBpZih0eXBlb2YoZGF0YSkgPT0gXCJvYmplY3RcIil7XG4gICAgICAgICAgICAgICBkZWxldGVQZW9wbGVEYXRhID0gZGF0YTtcbiAgICAgICAgICAgfVxuXG4gICAgICAgICAgIGlmKGRlbGV0ZVBlb3BsZURhdGEuY29kZSA9PSBcIjBcIil7XG4gICAgICAgICAgICAgZGVsZXRlUGVvcGxlRGF0YSA9IGRlbGV0ZVBlb3BsZURhdGEuZGF0YTtcblxuICAgICAgICAgICAgICQoXCIjbW9kaWZ5LXBlb3BsZS10YWJsZVwiKS5jcmVhdGVUYWJsZSh7dGFibGVEYXRhOmRlbGV0ZVBlb3BsZURhdGEsY2hvaWNlQ29udGVudDonbW9kaWZ5U3RhZmYnLHBhZ2VJZDpcIiNwYWdlXCIsdG90YWxQYWdlSWQ6JyN0b3RhbC1wYWdlJyxza2lwUGFnZUlkOlwiI3NraXAtY2xpY2tcIix0YWJsZUlkOicjbW9kaWZ5LXBlb3BsZS10YWJsZScsc2Vzc2lvblBhZ2U6J2RlbGV0ZVBlb3BsZVBhZ2UnLHNlc3Npb25Mb2NhdGlvbjonZGVsZXRlUGVvcGxlTG9jYXRpb24nfSlcbiAgICAgICAgICAgICBhbGVydChcIuWIoOmZpOaIkOWKnyFcIik7XG4gICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIGlmKGRlbGV0ZVBlb3BsZURhdGEuY29kZSA9PSBcIjkwMDAwMDFcIil7XG4gICAgICAgICAgICAgYWxlcnQoZGVsZXRlUGVvcGxlRGF0YS5tZXNzYWdlKVxuICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgfVxuXG4gICAgICAgICB9LFxuICAgICAgICAgZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgICAgfVxuICAgICAgfSk7XG4gIH0pXG5cblxuICAkKFwiI3Blb3BsZS1zYXZlXCIpLm9mZihcImNsaWNrXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpeyAgLy/mt7vliqBzdGFmZlxuICAgIHZhciAkZWxlbSA9ICQoXCIjYWRkLXBlb3BsZS10YWJsZSB0cjpub3QoJzpmaXJzdC1jaGlsZCcpXCIpLFxuICAgICAgICBwZW9wbGVEYXRhID0gdmFsaWRhdGVQZW9wbGVEYXRhKCRlbGVtLFwiYWRkXCIpOyAgLy/ooajljZXpqozor4FcbiAgICBpZighcGVvcGxlRGF0YSkgcmV0dXJuIGZhbHNlO1xuICAgIC8v5re75Yqg5ZGY5belIHBvc3Qg6K+35rGCXG5cbiAgICAkLmFqYXgoe1xuICAgICAgICAgdHlwZTpcIlBPU1RcIixcbiAgICAgICAgIHVybDphZGRQZW9wbGVVcmwsXG4gICAgICAgICBjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICAgICAgIGRhdGFUeXBlOlwianNvblwiLCAgLy8g6aKE5pyf5pyN5Yqh5Zmo6L+U5Zue55qE5pWw5o2u57G75Z6L44CC5aaC5p6c5LiN5oyH5a6a77yMalF1ZXJ5IOWwhuiHquWKqOagueaNriBIVFRQIOWMhSBNSU1FIOS/oeaBr+adpeaZuuiDveWIpOaWre+8jOavlOWmglhNTCBNSU1F57G75Z6L5bCx6KKr6K+G5Yir5Li6WE1M44CCXG4gICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHBlb3BsZURhdGEpLFxuICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcblxuICAgICAgICAgICB2YXIgYWRkUGVvcGxlRGF0YTtcbiAgICAgICAgICAgaWYodHlwZW9mKGRhdGEpID09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgICAgYWRkUGVvcGxlRGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgIH1lbHNlIGlmKHR5cGVvZihkYXRhKSA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAgICAgIGFkZFBlb3BsZURhdGEgPSBkYXRhO1xuICAgICAgICAgICB9XG5cbiAgICAgICAgICAgaWYoYWRkUGVvcGxlRGF0YS5tZXNzYWdlID09IFwi5pON5L2c5oiQ5YqfXCIpe1xuICAgICAgICAgICAgIGFsZXJ0KFwi5re75Yqg5oiQ5YqfISFcIik7XG4gICAgICAgICAgICAgJChcIiNhZGQtcGVvcGxlLXRhYmxlIGlucHV0XCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICAkKFwiI2FkZC1wZW9wbGUtdGFibGUgdHI6bm90KCcudGFibGUtY29udGVudCcpXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgfVxuICAgICAgICAgICBpZihhZGRQZW9wbGVEYXRhLmNvZGUgPT0gXCI5MDAwMDAxXCIpe1xuICAgICAgICAgICAgIGFsZXJ0KGFkZFBlb3BsZURhdGEubWVzc2FnZSlcbiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgIH1cblxuICAgICAgICAgfSxcbiAgICAgICAgIGVycm9yOmZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgIH1cbiAgICAgIH0pO1xuXG4gIH0pXG4gICQoXCIjcGVvcGxlLW1vZGlmeS1zYXZlXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpeyAgLy/kv67mlLlzdGFmZlxuXG4gICAgLy/ooajljZXpqozor4FcbiAgICBpZigkKFwiLmJ0bi1jYW5jZWxcIikubGVuZ3RoID09IDApe1xuICAgICAgYWxlcnQoXCLlhYjnvJbovpHvvIzlho3mj5DkuqRcIilcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyICRlbGVtID0gJChcIiNtb2RpZnktcGVvcGxlLXRhYmxlIHRyIHRkIC5idG4tY2FuY2VsXCIpLFxuICAgICAgICBwZW9wbGVEYXRhID0gdmFsaWRhdGVQZW9wbGVEYXRhKCRlbGVtLFwibW9kaWZ5XCIpO1xuICAgIGlmKCFwZW9wbGVEYXRhKSByZXR1cm4gZmFsc2U7XG4gICAgJC5hamF4KHtcbiAgICAgICAgIHR5cGU6XCJQT1NUXCIsXG4gICAgICAgICB1cmw6bW9kaWZ5UGVvcGxlVXJsLFxuICAgICAgICAgY29udGVudFR5cGU6J2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCcsXG4gICAgICAgICBkYXRhVHlwZTpcImpzb25cIiwgIC8vIOmihOacn+acjeWKoeWZqOi/lOWbnueahOaVsOaNruexu+Wei+OAguWmguaenOS4jeaMh+Wumu+8jGpRdWVyeSDlsIboh6rliqjmoLnmja4gSFRUUCDljIUgTUlNRSDkv6Hmga/mnaXmmbrog73liKTmlq3vvIzmr5TlpoJYTUwgTUlNReexu+Wei+Wwseiiq+ivhuWIq+S4ulhNTOOAglxuICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeShwZW9wbGVEYXRhKSxcbiAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XG5cbiAgICAgICAgICAgdmFyIGFkZFBlb3BsZURhdGE7XG4gICAgICAgICAgIGlmKHR5cGVvZihkYXRhKSA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgICAgIGFkZFBlb3BsZURhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICB9ZWxzZSBpZih0eXBlb2YoZGF0YSkgPT0gXCJvYmplY3RcIil7XG4gICAgICAgICAgICAgICBhZGRQZW9wbGVEYXRhID0gZGF0YTtcbiAgICAgICAgICAgfVxuICAgICAgICAgICBpZihhZGRQZW9wbGVEYXRhLm1lc3NhZ2UgPT0gXCLmk43kvZzmiJDlip9cIil7XG4gICAgICAgICAgICAgYWRkUGVvcGxlRGF0YSA9IGFkZFBlb3BsZURhdGEuZGF0YTtcbiAgICAgICAgICAgIGFsZXJ0KFwi5L+u5pS55oiQ5YqfISFcIik7XG5cblxuICAgICAgICAgICAgICQoXCIjbW9kaWZ5LXBlb3BsZS10YWJsZVwiKS5jcmVhdGVUYWJsZSh7dGFibGVEYXRhOmFkZFBlb3BsZURhdGEsY2hvaWNlQ29udGVudDonbW9kaWZ5U3RhZmYnLHBhZ2VJZDpcIiNwYWdlXCIsdG90YWxQYWdlSWQ6JyN0b3RhbC1wYWdlJyxza2lwUGFnZUlkOlwiI3NraXAtY2xpY2tcIix0YWJsZUlkOicjbW9kaWZ5LXBlb3BsZS10YWJsZScsc2Vzc2lvblBhZ2U6J21vZGlmeVBlb3BsZVBhZ2UnLHNlc3Npb25Mb2NhdGlvbjonbW9kaWZ5UGVvcGxlTG9jYXRpb24nfSlcblxuICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgYWxlcnQoXCLmnInlvILluLjpl67popjvvIzor5Xor5XliLfmlrDpobXpnaLvvIFcIilcbiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgIH1cblxuICAgICAgICAgfSxcbiAgICAgICAgIGVycm9yOmZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgLy/kv67mlLnlkZjlt6UgcG9zdCDor7fmsYJcblxuXG4gIH0pXG5cbn0pXG5mdW5jdGlvbiB2YWxpZGF0ZVBlb3BsZURhdGEoJGVsZW0sY29udGVudCl7IC8v6KGo5Y2V6aqM6K+BXG4gIHZhciBwZW9wbGVCb29sZWFuID0gdHJ1ZSxwZW9wbGVGb3JtRGF0YSA9IFtdLHB1YmxpY0lkID1cIlwiO1xuICAkZWxlbS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcbiAgICB2YXIgc2VsZkluZGV4ID0gaW5kZXg7XG4gICAgICAgIHBlb3BsZUZvcm1EYXRhW2luZGV4XSA9IHt9LFxuICAgICAgICAkcHJldkVsZW1lbnQgPSAkKHRoaXMpLmNoaWxkcmVuKCk7XG5cbiAgICBpZihjb250ZW50ID09IFwibW9kaWZ5XCIpe1xuICAgICAgJHByZXZFbGVtZW50ID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5jaGlsZHJlbigpO1xuICAgICAgICBwZW9wbGVGb3JtRGF0YVtpbmRleF0gPSB7fTtcbiAgICAgICAgcGVvcGxlRm9ybURhdGFbaW5kZXhdLnN0YWZmSWQgPSAkcHJldkVsZW1lbnQuZXEoMSkuYXR0cihcImRhdGEtaWRudW1cIilcbiAgICAgIC8vIC8vIHZhbGlkYXRlRGF0YVtzZWxmSW5kZXhdLmJvb2tJZCA9ICRwcmV2RWxlbWVudC5lcSgxKS5hdHRyKFwiZGF0YS1pZG51bVwiKTtcbiAgICB9XG5cbiAgICAkcHJldkVsZW1lbnQuZmluZChcIi5mb3JtLWNvbnRyb2xcIikuZWFjaChmdW5jdGlvbihpbmRleDIpe1xuXG5cbiAgICAgIHZhciAkdGhpc1ZhbCA9ICQodGhpcykudmFsKCkucmVwbGFjZSgvKF5cXHMrKXwoXFxzKyQpL2csXCJcIik7XG5cbiAgICAgIGlmKGluZGV4MiA9PSAwIHx8IGluZGV4MiA9PSAxKXtcbiAgICAgICAgaWYoJHRoaXNWYWwgPT0gXCJcIil7XG4gICAgICAgICAgYWxlcnQoXCLor7fku5Tnu4bmn6XnnIvmmK/lkKbloavlrozlv4XloavpgInpoblcIilcbiAgICAgICAgICBwZW9wbGVCb29sZWFuID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYoIXBlb3BsZUJvb2xlYW4pIHJldHVybiBmYWxzZTtcblxuICAgICAgc3dpdGNoIChpbmRleDIpIHsgICAvL+aVtOeQhuaVsOaNrlxuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcGVvcGxlRm9ybURhdGFbc2VsZkluZGV4XS5zdGFmZkRlcGFydG1lbnQgPSAkdGhpc1ZhbFxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgcGVvcGxlRm9ybURhdGFbc2VsZkluZGV4XS5zdGFmZk5hbWUgPSAkdGhpc1ZhbFxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgcGVvcGxlRm9ybURhdGFbc2VsZkluZGV4XS5zdGFmZkVtYWlsID0gJHRoaXNWYWxcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHBlb3BsZUZvcm1EYXRhW3NlbGZJbmRleF0uc3RhZmZFeHRlbnNpb24gPSAkdGhpc1ZhbFxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgcGVvcGxlRm9ybURhdGFbc2VsZkluZGV4XS5zdGFmZk51bWJlciA9ICR0aGlzVmFsXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYWxlcnQoXCJlcnJvclwiKVxuICAgICAgfVxuICAgICAgcmV0dXJuIHBlb3BsZUJvb2xlYW5cbiAgICB9KVxuXG4gICAgaWYoIXBlb3BsZUJvb2xlYW4pIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gcGVvcGxlQm9vbGVhbjtcbiAgfSlcblxuICBpZighcGVvcGxlQm9vbGVhbikgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBwZXBvbGVEYXRhTGVuID0gcGVvcGxlRm9ybURhdGEubGVuZ3RoLFxuICAgICAgZW1haWxSZWcgPSAvXlthLXowLTlBLVpdK1stIHwgYS16MC05QS1aIC4gX10rQGNuLmZ1aml0c3UuY29tJC8sXG4gICAgICBleHRlbnNpb25SZWcgPSAvXlswLTldKlsxLTldWzAtOV0qJC8sXG4gICAgICBtb2JpbGVSZWcgPSAvXlsxXVxcZHsxMH0kLztcblxuICBmb3IodmFyIGk9MDtpPHBlcG9sZURhdGFMZW47aSsrKXtcblxuICAgIHZhciBzdGFmZkVtYWlsID0gcGVvcGxlRm9ybURhdGFbaV1bXCJzdGFmZkVtYWlsXCJdLFxuICAgICAgICBzdGFmZkV4dGVuc2lvbiA9IHBlb3BsZUZvcm1EYXRhW2ldW1wic3RhZmZFeHRlbnNpb25cIl0sXG4gICAgICAgc3RhZmZOdW1iZXIgPSBwZW9wbGVGb3JtRGF0YVtpXVtcInN0YWZmTnVtYmVyXCJdO1xuXG4gICAgaWYoc3RhZmZFbWFpbCAhPT0gXCJcIil7ICAgLy/pqozor4Hpgq7nrrFcbiAgICAgICAgaWYoIShlbWFpbFJlZy50ZXN0KHN0YWZmRW1haWwpKSl7XG4gICAgICAgICAgIGFsZXJ0KFwi6YKu566x5qC85byP6ZSZ6K+vIVxcbuato+ehruagvOW8j++8mlhYWEBjbi5mdWppdHN1LmNvbVwiKVxuICAgICAgICAgICBwZW9wbGVCb29sZWFuID0gZmFsc2U7XG4gICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmKHN0YWZmRXh0ZW5zaW9uICE9PSBcIlwiICYmIHN0YWZmRXh0ZW5zaW9uICE9PSBcIuaXoFwiKXsgICAvL+mqjOivgemCrueusVxuICAgICAgICBpZighKGV4dGVuc2lvblJlZy50ZXN0KHN0YWZmRXh0ZW5zaW9uKSkpe1xuICAgICAgICAgICBhbGVydChcIuWIhuacuuS4uumdnui0n+aVsFwiKVxuICAgICAgICAgICBwZW9wbGVCb29sZWFuID0gZmFsc2U7XG4gICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmKHN0YWZmTnVtYmVyICE9PSBcIlwiICYmIHN0YWZmTnVtYmVyICE9PSBcIuaXoFwiKXsvL+mqjOivgeaJi+aculxuICAgICAgaWYoIShtb2JpbGVSZWcudGVzdChzdGFmZk51bWJlcikpKXtcbiAgICAgICAgYWxlcnQoXCLmiYvmnLrmoLzlvI/plJnor69cXG7mraPnoa7moLzlvI/vvJoxMeS9jeaJi+acuuWPt+eggVwiKVxuICAgICAgICBwZW9wbGVCb29sZWFuID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZighcGVvcGxlQm9vbGVhbikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfWVsc2V7XG4gICAgcmV0dXJuIHBlb3BsZUZvcm1EYXRhO1xuICB9XG5cbn1cblxuXG5mdW5jdGlvbiBjYWxlbmRhcigpeyAgLy/ml6XljoZcbiAgJCgnI2FkZC1wYXRlbnQgLmRhdGV0aW1lcGlja2VyLCNtb2RpZnktcGF0ZW50IC5kYXRldGltZXBpY2tlcicpLmRhdGV0aW1lcGlja2VyKHtcbiAgICBmb3JtYXQ6J3l5eXkvbW0vZGQnLFxuICAgIGF1dG9jbG9zZTp0cnVlLC8v6Ieq5Yqo5YWz6ZetXG4gICAgbWluVmlldzoyLC8v5pyA57K+5YeG55qE5pe26Ze06YCJ5oup5Li65pel5pyfMC3liIYgMS3ml7YgMi3ml6UgMy3mnIhcbiAgICB3ZWVrU3RhcnQ6MCxcbiAgICBsYW5ndWFnZTonemgtQ04nXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzdGFmZkdldERhdGEoJGVsZW1UYWJsZSx1cmwscGFnZU5hbWUscGFnZUxvY2F0aW9uKXsgIC8vZ2V0IOivt+axguaVsOaNrlxuICAkKFwiI1wiKyAkZWxlbVRhYmxlICtcIiB0ciB0ZFwiKS5yZW1vdmUoKTtcbiAgbG9hZGluZygkKFwiI1wiKyAkZWxlbVRhYmxlKSlcblxuICAkLmFqYXgoeyAgICAgICAvL+WRmOW3peS/oeaBr+WxleekulxuICAgICAgIHR5cGU6XCJHRVRcIixcbiAgICAgICB1cmw6dXJsLFxuICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgLy8gIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgICAkKFwiI2FudC1zaXRlLWxvYWRpbmdcIikucmVtb3ZlKCk7XG4gICAgICAgICB2YXIgc3RhZmZEYXRhLFxuICAgICAgICAgICAgIFx0bWVzc2FnZURhdGE9XCJcIixcblx0ICAgICAgICAgICAgIHN0YWZmRGF0YUFyciA9W107XG4gICAgICAgICBpZih0eXBlb2YoZGF0YSkgPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgc3RhZmZEYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgIH1lbHNlIGlmKHR5cGVvZihkYXRhKSA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAgICBzdGFmZkRhdGEgPSBkYXRhO1xuICAgICAgICAgfVxuICAgICAgICAgbWVzc2FnZURhdGEgPSBzdGFmZkRhdGEubWVzc2FnZTtcbiAgICAgICAgIHN0YWZmRGF0YUFyciA9IHN0YWZmRGF0YS5kYXRhO1xuICAgICAgICBpZihtZXNzYWdlRGF0YSAgPT0gXCLmk43kvZzmiJDlip9cIil7XG5cbiAgICAgICAgICAgLy/lvJXnlKh0YWJsZeaPkuS7tlxuXG4gICAgICAgICAgICQoXCIjbW9kaWZ5LXBlb3BsZS10YWJsZVwiKS5jcmVhdGVUYWJsZSh7dGFibGVEYXRhOnN0YWZmRGF0YUFycixjaG9pY2VDb250ZW50Oidtb2RpZnlTdGFmZicscGFnZUlkOlwiI3BhZ2VcIix0b3RhbFBhZ2VJZDonI3RvdGFsLXBhZ2UnLHNraXBQYWdlSWQ6XCIjc2tpcC1jbGlja1wiLHRhYmxlSWQ6JyNtb2RpZnktcGVvcGxlLXRhYmxlJyxzZXNzaW9uUGFnZTpwYWdlTmFtZSxzZXNzaW9uTG9jYXRpb246cGFnZUxvY2F0aW9ufSlcblxuICAgICAgIH1cbiAgICAgIGlmKG1lc3NhZ2VEYXRhICA9PSBcIuaTjeS9nOWksei0pVwiKXtcblxuICAgICAgICAgICAvL+W8leeUqHRhYmxl5o+S5Lu2XG5cbiAgICAgICAgICAgJChcIiNtb2RpZnktcGVvcGxlLXRhYmxlXCIpLmNyZWF0ZVRhYmxlKHt0YWJsZURhdGE6c3RhZmZEYXRhQXJyLGNob2ljZUNvbnRlbnQ6J21vZGlmeVN0YWZmJyxwYWdlSWQ6XCIjcGFnZVwiLHRvdGFsUGFnZUlkOicjdG90YWwtcGFnZScsc2tpcFBhZ2VJZDpcIiNza2lwLWNsaWNrXCIsdGFibGVJZDonI21vZGlmeS1wZW9wbGUtdGFibGUnLHNlc3Npb25QYWdlOnBhZ2VOYW1lLHNlc3Npb25Mb2NhdGlvbjpwYWdlTG9jYXRpb259KVxuXG4gICAgICAgfVxuXG5cbiAgICAgIH0sXG4gICAgICBlcnJvcjpmdW5jdGlvbihlcnJvcil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgfVxuICAgIH0pO1xufVxuIiwiJChmdW5jdGlvbigpe1xuICBjYWxlbmRhcigpO1xuICAkKFwiI3Bob3RvLXRpdGxlXCIpLm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7XG4gICAgdmFyIHBvc3RUaXRsZSA9IHt9LHNlbGYgPSB0aGlzO1xuICAgIHBvc3RUaXRsZS5waG90b1RpdGxlID0gJCh0aGlzKS52YWwoKS5yZXBsYWNlKC8oXlxccyspfChcXHMrJCkvZyxcIlwiKTtcbiAgICAkLmFqYXgoeyAgICAgICAvL+WRmOW3peS/oeaBr+WxleekulxuICAgICAgICB1cmw6IHBob3RvVGl0bGVDaGVja1VybCxcbiAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICBkYXRhOiBwb3N0VGl0bGUsXG4gICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAvLyAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgLy8gICAkKFwiI2FudC1zaXRlLWxvYWRpbmdcIikucmVtb3ZlKCk7XG4gICAgICAgICAgIHZhciBwaG90b1RpdGxlRGF0YTtcbiAgICAgICAgICAgaWYodHlwZW9mKGRhdGEpID09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgICAgcGhvdG9UaXRsZURhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICB9ZWxzZSBpZih0eXBlb2YoZGF0YSkgPT0gXCJvYmplY3RcIil7XG4gICAgICAgICAgICAgICBwaG90b1RpdGxlRGF0YSA9IGRhdGE7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgaWYocGhvdG9UaXRsZURhdGEubWVzc2FnZSA9PSBcIuagh+mimOmHjeWkjVwiKXtcbiAgICAgICAgICAgICAkKFwiI2Vycm9yLWluZm9cIikucmVtb3ZlKCk7XG4gICAgICAgICAgICAgJChzZWxmKS5hZnRlcignPHNwYW4gaWQ9XCJlcnJvci1pbmZvXCIgc3R5bGU9XCJjb2xvcjpyZWQ7XCI+5qCH6aKY6YeN5aSNPC9zcGFuPicpXG4gICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICB9ZWxzZSBpZihwaG90b1RpdGxlRGF0YS5tZXNzYWdlID09IFwi5pyq6YeN5aSNXCIpe1xuICAgICAgICAgICAgICQoXCIjZXJyb3ItaW5mb1wiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOmZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH0pXG4gICQoXCIjcGhvdG8tc2F2ZVwiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtcbiAgICAgdmFyIHBob3RvQm9vbGVhbiA9IHRydWU7XG4gICAgIGlmKCQoXCIjZXJyb3ItaW5mb1wiKS5sZW5ndGggPT0gMSl7XG4gICAgICAgYWxlcnQoXCLkv67mlLnmoIfpophcIilcbiAgICAgICBwaG90b0Jvb2xlYW4gPSBmYWxzZTtcbiAgICAgICByZXR1cm4gcGhvdG9Cb29sZWFuO1xuICAgICB9XG4gICAgICQoXCIjYWRkLXBob3RvIGlucHV0XCIpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICB2YXIgaW5wdXRWYWwgPSAkKHRoaXMpLnZhbCgpLnJlcGxhY2UoLyheXFxzKyl8KFxccyskKS9nLFwiXCIpXG4gICAgICAgaWYoaW5wdXRWYWwgPT0gXCJcIil7XG4gICAgICAgICBhbGVydChcIuWGheWuueS4jeiDveS4uuepuiFcIilcbiAgICAgICAgIHBob3RvQm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICAgcmV0dXJuIHBob3RvQm9vbGVhbjtcbiAgICAgICB9XG4gICAgIH0pXG4gICAgIGlmKCAhcGhvdG9Cb29sZWFuKSByZXR1cm4gcGhvdG9Cb29sZWFuO1xuICAgICBhZGRQaG90byhhZGRQaG90b1Bvc3RVcmwpXG4gIH0pXG59KVxuXG5cbmZ1bmN0aW9uIGFkZFBob3RvKHVybCl7XG5cbiAgdmFyIHBob3RvR2FsbGVyeSA9IG5ldyBGb3JtRGF0YSgkKFwiI2FkZC1waG90by1mb3JtXCIpWzBdKTtcblxuICAkLmFqYXgoeyAgICAgICAvL+WRmOW3peS/oeaBr+WxleekulxuICAgICAgdXJsOiB1cmwsXG4gICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICBjYWNoZTogZmFsc2UsXG4gICAgICBkYXRhOiBwaG90b0dhbGxlcnksXG4gICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXG4gICAgICBjb250ZW50VHlwZTogZmFsc2UsXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAkKFwiI2FkZC1waG90byBpbnB1dFwiKS52YWwoXCJcIik7XG4gICAgICAgIGFsZXJ0KGRhdGEubWVzc2FnZSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjpmdW5jdGlvbihlcnJvcil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gY2FsZW5kYXIoKXtcbiAgJCgnI2FkZC1waG90byAuZGF0ZXRpbWVwaWNrZXInKS5kYXRldGltZXBpY2tlcih7XG4gICAgZm9ybWF0Oid5eXl5L21tL2RkJyxcbiAgICBhdXRvY2xvc2U6dHJ1ZSwvL+iHquWKqOWFs+mXrVxuICAgIG1pblZpZXc6MiwvL+acgOeyvuWHhueahOaXtumXtOmAieaLqeS4uuaXpeacnzAt5YiGIDEt5pe2IDIt5pelIDMt5pyIXG4gICAgd2Vla1N0YXJ0OjAsXG4gICAgbGFuZ3VhZ2U6J3poLUNOJ1xuICB9KTtcbn1cbiIsIiQoZnVuY3Rpb24oKXtcclxuXHJcbiAgJChcIiNhZGQtdGFibGUgaW5wdXRcIikudmFsKFwiXCIpXHJcbiAgJChcIiNhZGQtdGFibGUgaW5wdXRcIikuZXEoMSkudmFsKFwiMVwiKVxyXG4gIGFkZENhbGVuZGFyKCk7ICAvL+aXpeWOhuaOp+S7tuiwg+eUqFxyXG5cclxuICAkKFwiLmFkZC1saSBsaSBhOmVxKDEpXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpeyAgICAgIC8v54K55Ye757yW6L6R5Yqg6L295pWw5o2uXHJcbiAgICB2YXIgZ2V0cGFyYW1zID0ge307XHJcbiAgICAgICAgZ2V0cGFyYW1zLnNlbGVjdFNvcnQgPSBcIuWcqOW9lVwiO1xyXG4gICAgICAgIGdldHBhcmFtcy5zZWFyY2hCdXllciA9ICQoXCIjc2VhcmNoTmFtZVwiKS52YWwoKTtcclxuICAgICAgICBnZXRwYXJhbXMuc2VhcmNoQm9vayA9ICQoXCIjc2VhcmNoQm9va1wiKS52YWwoKTtcclxuICAgIGluZGV4R2V0RGF0YShpbmRleFVybCxnZXRwYXJhbXMsJChcIiNtb2RpZnktdGFibGVcIikpXHJcbiAgfSlcclxuXHJcbiAgJChcIiNhZGQtdGFibGUsI21vZGlmeS10YWJsZVwiKS5vbihcImNsaWNrXCIsXCIuaW5wdXQtc2VsZWN0PmlucHV0LmZvcm0tY29udHJvbFwiLGZ1bmN0aW9uKCl7ICAvL+S4i+aLieahhueahOeCueWHu+S6i+S7tlxyXG4gICAgdmFyICRlbGVOZXh0ID0gJCh0aGlzKS5uZXh0KCk7XHJcbiAgICBpZigkZWxlTmV4dC5oYXNDbGFzcyhcImRpc3BsYXktbm9uZVwiKSl7XHJcbiAgICAgICRlbGVOZXh0LnJlbW92ZUNsYXNzKFwiZGlzcGxheS1ub25lXCIpXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcblxyXG4gICQoXCIjYWRkLXRhYmxlLCNtb2RpZnktdGFibGVcIikub24oXCJjbGlja1wiLFwiLmlucHV0LXNlbGVjdD51bC5saXN0LXVuc3R5bGVkPmxpXCIsZnVuY3Rpb24oKXsgLy/kuIvmi4nmoYbnmoTngrnlh7vkuovku7ZcclxuICAgIHZhciAkZWxlUGFyZW50ID0gJCh0aGlzKS5wYXJlbnQoKSxcclxuICAgICAgICAkZWxlVHh0ID0gJCh0aGlzKS50ZXh0KCk7XHJcbiAgICAgICQodGhpcykucGFyZW50KCkucHJldigpLnZhbCgkZWxlVHh0KVxyXG5cclxuICAgICQodGhpcykuYWRkQ2xhc3MoXCJpbnB1dC1zZWxlY3QtbGlcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImlucHV0LXNlbGVjdC1saVwiKVxyXG4gICAgaWYoISRlbGVQYXJlbnQuaGFzQ2xhc3MoXCJkaXNwbGF5LW5vbmVcIikpe1xyXG4gICAgICAkZWxlUGFyZW50LmFkZENsYXNzKFwiZGlzcGxheS1ub25lXCIpXHJcbiAgICB9XHJcblxyXG4gIH0pXHJcblxyXG4gICQoXCIjYWRkLWxpbmVcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7ICAgICAgICAgLy/mt7vliqDooYzmlbAg54K55Ye75LqL5Lu2XHJcbiAgICAkKFwiI2FkZC10YWJsZVwiKS5hcHBlbmQoJzx0cj48dGQ+PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgbmFtZT1cImJvb2tOYW1lXCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIuS5puWQjSjlv4XloaspXCIgLz48L3RkPjx0ZD48aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwiYm9va1ZvbHVtZVwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIxXCIgcGxhY2Vob2xkZXI9XCLlhozmlbAo5b+F5aGrKVwiLz48L3RkPjx0ZD48ZGl2IGNsYXNzPVwiaW5wdXQtc2VsZWN0XCI+PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgbmFtZT1cImJvb2tCdXllclwiIHJlYWRvbmx5PVwicmVhZG9ubHlcIiBhdXRvY29tcGxldGU9XCJvZmZcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwi6LSt5Lmw6ICFKOW/heWhqylcIiAvPjx1bCBjbGFzcz1cImxpc3QtdW5zdHlsZWQgZGlzcGxheS1ub25lXCI+PGxpPuearuWGsOmUizwvbGk+PGxpPuWRqOaBqeetljwvbGk+PGxpPuW8oOayiOaWjDwvbGk+PGxpPuWNjuadvjwvbGk+PGxpPuWtmeaYiuerizwvbGk+PC91bD48ZGl2PjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIG5hbWU9XCJib29rQm9ycm93ZXJcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwi5YCf6K6w5Lq6KOWPr+mAiSlcIiAvPjwvdGQ+PHRkPjxpbnB1dCAgY2xhc3M9XCJmb3JtLWNvbnRyb2wgZGF0ZXRpbWVwaWNrZXJcIiBuYW1lPVwiYnV5VGltZVwiIHR5cGU9XCJ0ZXh0XCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgcGxhY2Vob2xkZXI9XCLotK3kubDml6XmnJ8o5b+F5aGrKVwiIC8+PC90ZD48dGQ+PGRpdiBjbGFzcz1cImRlbGV0ZSB0ZXh0LWNlbnRlclwiPsOXPC9kaXY+PC90ZD48L3RyPicpXHJcblxyXG4gIC8vICAkKFwiI2FkZC10YWJsZVwiKS5hcHBlbmQoJzx0cj48dGQ+PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIuS5puWQjSjlv4XloaspXCIgLz48L3RkPjx0ZD48aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIHZhbHVlPVwiMVwiIHBsYWNlaG9sZGVyPVwi5YaM5pWwKOW/heWhqylcIi8+PC90ZD48dGQ+PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIui0reS5sOiAhSjlv4XloaspXCIgLz48L3RkPjx0ZD48aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwi5YCf6K6w5Lq6KOWPr+mAiSlcIiAvPjwvdGQ+PHRkPjxpbnB1dCAgY2xhc3M9XCJmb3JtLWNvbnRyb2wgZGF0ZXRpbWVwaWNrZXJcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwi6LSt5Lmw5pel5pyfKOW/heWhqylcIiAvPjwvdGQ+PHRkPjxkaXYgY2xhc3M9XCJkZWxldGUgdGV4dC1jZW50ZXJcIj7DlzwvZGl2PjwvdGQ+PC90cj4nKVxyXG4gICAgYWRkQ2FsZW5kYXIoKTtcclxuICB9KVxyXG5cclxuICAkKFwiI2FkZC10YWJsZVwiKS5vbihcImNsaWNrXCIsXCIuZGVsZXRlXCIsZnVuY3Rpb24oKXtcclxuICAgICQodGhpcykucGFyZW50KCkucGFyZW50KCkucmVtb3ZlKCk7XHJcbiAgfSlcclxuXHJcbiAgJChcIiNtb2RpZnktdGFibGVcIikub24oXCJjbGlja1wiLFwiLnRhYmxlLWVkaXRcIixmdW5jdGlvbigpeyAgICAgICAgLy/nvJbovpEgIOeCueWHu+S6i+S7tlxyXG4gICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgIGlmKCR0aGlzLnRleHQoKSA9PSBcIue8lui+kVwiKXtcclxuICAgICAgICAkdGhpcy5wYXJlbnQoKS5wYXJlbnQoKS5jaGlsZHJlbihcInRkXCIpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgICAgdmFyIHR4dCA9ICQodGhpcykudGV4dCgpO1xyXG4gICAgICAgICAgaWYodHh0ICE9PSBcIue8lui+kVwiICYmIGluZGV4ICE9PSAwKXtcclxuICAgICAgICAgICAgaWYoaW5kZXggIT09IDUpe1xyXG4gICAgICAgICAgICAgICQodGhpcykuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB2YWx1ZT1cIicgKyB0eHQgKyAnXCI+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoaW5kZXggPT0gMyl7XHJcbiAgICAgICAgICAgICAgJCh0aGlzKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiaW5wdXQtc2VsZWN0XCI+PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgbmFtZT1cImJvb2tCdXllclwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCInKyB0eHQgKydcIiBwbGFjZWhvbGRlcj1cIui0reS5sOiAhSjlv4XloaspXCIgLz48dWwgY2xhc3M9XCJsaXN0LXVuc3R5bGVkIGRpc3BsYXktbm9uZVwiPjxsaT7nmq7lhrDplIs8L2xpPjxsaT7lkajmgannrZY8L2xpPjxsaT7lvKDmsojmlow8L2xpPjxsaT7ljY7mnb48L2xpPjxsaT7lrZnmmIrnq4s8L2xpPjwvdWw+PC9kaXY+JylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihpbmRleCA9PSA1KXtcclxuICAgICAgICAgICAgICAkKHRoaXMpLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgJCh0aGlzKS5hcHBlbmQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sIGRhdGV0aW1lcGlja2VyXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgdmFsdWU9XCInICsgdHh0ICsgJ1wiPicpO1xyXG4gICAgICAgICAgICAgIG1vZGlmeUNhbGVuZGFyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICR0aGlzLnRleHQoXCLlj5bmtohcIikuYWRkQ2xhc3MoXCJidG4tY2FuY2VsXCIpLnJlbW92ZUNsYXNzKFwiYnRuLWVkaXQyXCIpXHJcbiAgICB9ZWxzZSBpZigkdGhpcy50ZXh0KCkgPT0gXCLlj5bmtohcIil7XHJcbiAgICAgICAgJHRoaXMucGFyZW50KCkucGFyZW50KCkuY2hpbGRyZW4oXCJ0ZFwiKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICB2YXIgdHh0ID0gJCh0aGlzKS5maW5kKFwiaW5wdXRcIikuYXR0cihcInZhbHVlXCIpO1xyXG4gICAgICAgICAgaWYodHh0ICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLmVtcHR5KCkudGV4dCh0eHQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgJHRoaXMudGV4dChcIue8lui+kVwiKS5yZW1vdmVDbGFzcyhcImJ0bi1jYW5jZWxcIikuYWRkQ2xhc3MoXCJidG4tZWRpdDJcIilcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9KVxyXG5cclxuICAkKFwiI2FkZC1zYXZlXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpeyAgIC8v5re75Yqg5Lmm57GNIOS6i+S7tlxyXG4gICAgIHZhciAkZWxlbSA9ICQoXCIjYWRkLXRhYmxlIHRyOm5vdCg6Zmlyc3QtY2hpbGQpXCIpO1xyXG5cclxuICAgICB2YXIgYWRkRGF0YSA9IHZhbGlkYXRlUnVsZXMoJGVsZW0sXCLmt7vliqBcIik7XHJcblx0Ly9cdGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGFkZERhdGEpKVxyXG4gICAgIGlmKGFkZERhdGEgPT0gZmFsc2Upe1xyXG4gICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgIH1cclxuXHJcbiAgICAvKiDmt7vliqDkuabnsY0gcG9zdCDor7fmsYIqL1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICAgdHlwZTpcIlBPU1RcIixcclxuICAgICAgICAgdXJsOmFkZFBvc3RVcmwsXHJcbiAgICAgICAgIGNvbnRlbnRUeXBlOidhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnLFxyXG4gICAgICAgICBkYXRhVHlwZTpcImpzb25cIiwgIC8vIOmihOacn+acjeWKoeWZqOi/lOWbnueahOaVsOaNruexu+Wei+OAguWmguaenOS4jeaMh+Wumu+8jGpRdWVyeSDlsIboh6rliqjmoLnmja4gSFRUUCDljIUgTUlNRSDkv6Hmga/mnaXmmbrog73liKTmlq3vvIzmr5TlpoJYTUwgTUlNReexu+Wei+Wwseiiq+ivhuWIq+S4ulhNTOOAglxyXG4gICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KGFkZERhdGEpLFxyXG4gICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xyXG5cclxuICAgICAgICAgICB2YXIgYm9va0FkZERhdGE7XHJcbiAgICAgICAgICAgaWYodHlwZW9mKGRhdGEpID09IFwic3RyaW5nXCIpe1xyXG4gICAgICAgICAgICAgICBib29rQWRkRGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICAgICAgICAgfWVsc2UgaWYodHlwZW9mKGRhdGEpID09IFwib2JqZWN0XCIpe1xyXG4gICAgICAgICAgICAgICBib29rQWRkRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIGlmKGJvb2tBZGREYXRhLm1lc3NhZ2UgPT0gXCLmk43kvZzmiJDlip9cIil7XHJcbiAgICAgICAgICAgICBhbGVydChcIua3u+WKoOaIkOWKnyEhXCIpO1xyXG4gICAgICAgICAgICAgJChcIiNhZGQtdGFibGUgaW5wdXRcIikudmFsKFwiXCIpO1xyXG5cdFx0XHQgICAgICAgJChcIiNhZGQtdGFibGUgaW5wdXRcIikuZXEoMSkudmFsKFwiMVwiKTtcclxuICAgICAgICAgICAgICQoXCIjYWRkLXRhYmxlIHRyOm5vdCgnLnRhYmxlLWNvbnRlbnQnKVwiKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgaWYoYm9va0FkZERhdGEuY29kZSA9PSBcIjkwMDAwMDFcIil7XHJcbiAgICAgICAgICAgICBhbGVydChcIuWQjuWPsOezu+e7n+mUmeivrzpcIisgYm9va0FkZERhdGEubWVzc2FnZSArIFwi77yM6K+36YeN5paw5o+Q5LqkIVwiKTtcclxuICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgaWYoYm9va0FkZERhdGEuY29kZSA9PSBcIjkwMDAwMDJcIil7XHJcbiAgICAgICAgICAgICBhbGVydChcIuWPguaVsOe8uuWksTpcIiArIGJvb2tBZGREYXRhLm1lc3NhZ2UgKyBcIi7or7fph43mlrDmj5DkuqQhXCIpO1xyXG4gICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgfSxcclxuICAgICAgICAgZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0pXHJcblxyXG4gICQoXCIjbW9kaWZ5LXNhdmVcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7ICAgICAvL+S/ruaUueaVsOaNruaPkOS6pOS6i+S7tlxyXG4gICAgaWYoJChcIiNtb2RpZnktdGFibGUgLmJ0bi1jYW5jZWxcIikubGVuZ3RoID09IDApe1xyXG4gICAgICBhbGVydChcIuWFiOe8lui+ke+8jOWGjeaPkOS6pFwiKVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB2YXIgbW9kaWZ5RGF0YSA9IHZhbGlkYXRlUnVsZXMoJChcIiNtb2RpZnktdGFibGUgLmJ0bi1jYW5jZWxcIiksXCLkv67mlLlcIik7IC8v6LCD55So6aqM6K+B5Ye95pWwXHJcblxyXG4gICAgaWYobW9kaWZ5RGF0YSA9PSBmYWxzZSkgcmV0dXJuIGZhbHNlOyAvL+mqjOivgeWksei0pVxyXG5cclxuICAgIC8qIOS/ruaUueS5puexjSBwb3N0IOivt+axgiovXHJcblxyXG4gICAgJC5hamF4KHtcclxuICAgICAgICAgdHlwZTpcIlBPU1RcIixcclxuICAgICAgICAgdXJsOiBtb2RpZnlQb3N0VXJsLFxyXG4gICAgICAgICBjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgIGRhdGFUeXBlOlwianNvblwiLFxyXG4gICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KG1vZGlmeURhdGEpLFxyXG4gICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgLy9zZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xyXG4gICAgICAgICAgdmFyIGJvb2tNb2RpZnlEYXRhLGNvZGVTdGF0ZTtcclxuICAgICAgICAgIGlmKHR5cGVvZihkYXRhKSA9PSBcInN0cmluZ1wiKXtcclxuICAgICAgICAgICAgICBib29rTW9kaWZ5RGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICAgICAgICB9ZWxzZSBpZih0eXBlb2YoZGF0YSkgPT0gXCJvYmplY3RcIil7XHJcbiAgICAgICAgICAgICAgYm9va01vZGlmeURhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29kZVN0YXRlID0gYm9va01vZGlmeURhdGEuY29kZTtcclxuICAgICAgICAgIGlmKGNvZGVTdGF0ZSA9PSBcIjBcIil7XHJcbiAgICAgICAgICAgICQoXCIjbW9kaWZ5LXRhYmxlIHRyIHRkXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB2YXIgYm9va0RhdGEgPSBib29rTW9kaWZ5RGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAvL3RhYmxlIOaPkuS7tuW8leeUqFxyXG4gICAgICAgICAgICAgJChcIiNtb2RpZnktdGFibGVcIikuY3JlYXRlVGFibGUoe3RhYmxlRGF0YTpib29rRGF0YSxjaG9pY2VDb250ZW50Oidtb2RpZnknLHBhZ2VJZDpcIiNwYWdlXCIsdG90YWxQYWdlSWQ6JyN0b3RhbC1wYWdlJyxza2lwUGFnZUlkOlwiI3NraXAtY2xpY2tcIix0YWJsZUlkOicjbW9kaWZ5LXRhYmxlJyxzZXNzaW9uUGFnZTonYWRkUGFnZScsc2Vzc2lvbkxvY2F0aW9uOidhZGRMb2NhdGlvbid9KVxyXG4gICAgICAgICAgICAgYWxlcnQoXCLkv67mlLnmiJDlip9cIilcclxuICAgICAgICAgIH1lbHNlIGlmKGNvZGVTdGF0ZSA9PSBcIjkwMDAwMDJcIil7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwi6ZSZ6K+v77yaXCIgKyBib29rTW9kaWZ5RGF0YS5tZXNzYWdlKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9ZWxzZSBpZihjb2RlU3RhdGUgPT0gXCI5MDAwMDAxXCIpe1xyXG4gICAgICAgICAgICBhbGVydChcIumUmeivr++8mlwiICsgYm9va01vZGlmeURhdGEubWVzc2FnZSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9KVxyXG4gIGZ1bmN0aW9uIGFkZENhbGVuZGFyKCl7ICAgLy8g5pel5Y6G5o6n5Lu25Yid5aeL5YyWXHJcbiAgICAkKCcjYWRkLXRhYmxlIC5kYXRldGltZXBpY2tlcicpLmRhdGV0aW1lcGlja2VyKHtcclxuICAgICAgZm9ybWF0Oid5eXl5L21tL2RkJyxcclxuICAgICAgYXV0b2Nsb3NlOnRydWUsLy/oh6rliqjlhbPpl61cclxuICAgICAgbWluVmlldzoyLC8v5pyA57K+5YeG55qE5pe26Ze06YCJ5oup5Li65pel5pyfMC3liIYgMS3ml7YgMi3ml6UgMy3mnIhcclxuICAgICAgd2Vla1N0YXJ0OjAsXHJcbiAgICAgIGxhbmd1YWdlOid6aC1DTidcclxuICAgIH0pO1xyXG4gIH1cclxuICBmdW5jdGlvbiBtb2RpZnlDYWxlbmRhcigpeyAgLy8g5pel5Y6G5o6n5Lu25Yid5aeL5YyWXHJcbiAgICAkKCcjbW9kaWZ5LXRhYmxlIC5kYXRldGltZXBpY2tlcicpLmRhdGV0aW1lcGlja2VyKHtcclxuICAgICAgZm9ybWF0Oid5eXl5L21tL2RkJyxcclxuICAgICAgYXV0b2Nsb3NlOnRydWUsLy/oh6rliqjlhbPpl61cclxuICAgICAgbWluVmlldzoyLC8v5pyA57K+5YeG55qE5pe26Ze06YCJ5oup5Li65pel5pyfMC3liIYgMS3ml7YgMi3ml6UgMy3mnIhcclxuICAgICAgd2Vla1N0YXJ0OjAsXHJcbiAgICAgIGxhbmd1YWdlOid6aC1DTidcclxuICAgIH0pO1xyXG4gIH1cclxufSlcclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlUnVsZXMoJHZhbGlkYXRlLHRhYmNvbnRlbnQpeyAgLy/ooajljZXpqozor4FcclxuICB2YXIgdmFsaWRhdGVEYXRhID0gW10sdmFsaWRhdGVib29sZWFuID0gdHJ1ZTtcclxuICAkdmFsaWRhdGUuZWFjaChmdW5jdGlvbihpbmRleCl7ICAgLy9kb21cclxuICAgIHZhciBzZWxmSW5kZXggPSBpbmRleCxcclxuICAgICAgICAkcHJldkVsZW1lbnQgPSAkKHRoaXMpLmNoaWxkcmVuKCk7XHJcbiAgICAgICAgdmFsaWRhdGVEYXRhW3NlbGZJbmRleF0gPSB7fTtcclxuICAgIGlmKHRhYmNvbnRlbnQgPT0gXCLkv67mlLlcIil7XHJcbiAgICAgICRwcmV2RWxlbWVudCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuY2hpbGRyZW4oKTtcclxuICAgICAgdmFsaWRhdGVEYXRhW3NlbGZJbmRleF0gPSB7fTtcclxuICAgICAgdmFsaWRhdGVEYXRhW3NlbGZJbmRleF0uYm9va0lkID0gJHByZXZFbGVtZW50LmVxKDEpLmF0dHIoXCJkYXRhLWlkbnVtXCIpO1xyXG4gICAgfVxyXG4gICAgJHByZXZFbGVtZW50LmZpbmQoXCJpbnB1dFwiKS5lYWNoKGZ1bmN0aW9uKGluZGV4Mil7IC8v5b6q546vaW5wdXTnmoTlhoXlrrlcclxuICAgICAgICB2YXIgJHRoaXNWYWwgPSAkKHRoaXMpLnZhbCgpO1xyXG5cclxuICAgICAgICBpZihpbmRleDIgIT09IDMpeyAgIC8v5o6S6Zmk4oCc5YCf6ZiF6ICF4oCd5qOA6aqMXHJcbiAgICAgICAgICBpZigkdGhpc1ZhbC50cmltKCkgIT09IFwiXCIpe1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGluZGV4Mikge1xyXG4gICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlRGF0YVtzZWxmSW5kZXhdLmJvb2tOYW1lID0gJHRoaXNWYWxcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlRGF0YVtzZWxmSW5kZXhdLmJvb2tWb2x1bWUgPSAkdGhpc1ZhbFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVEYXRhW3NlbGZJbmRleF0uYm9va0J1eWVyID0gJHRoaXNWYWxcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlRGF0YVtzZWxmSW5kZXhdLmJ1eVRpbWUgPSAkdGhpc1ZhbFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiZXJyb3JcIilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwi6K+35aGr5aW95YaF5a655oiW6ICF5Yig6Zmk5L2g5re75Yqg55qE56m655m96KGMXCIpXHJcbiAgICAgICAgICAgIHZhbGlkYXRlYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihpbmRleDIgPT0gMyl7XHJcbiAgICAgICAgICBpZigkdGhpc1ZhbC50cmltKCkgPT0gXCJcIil7XHJcbiAgICAgICAgICAgdmFsaWRhdGVEYXRhW3NlbGZJbmRleF0uYm9va0JvcnJvd2VyID0gXCLml6BcIjtcclxuICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgIHZhbGlkYXRlRGF0YVtzZWxmSW5kZXhdLmJvb2tCb3Jyb3dlciA9ICR0aGlzVmFsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsaWRhdGVib29sZWFuO1xyXG4gICAgfSlcclxuICAgIHJldHVybiB2YWxpZGF0ZWJvb2xlYW47XHJcbiAgfSlcclxuXHJcbiAgaWYoIXZhbGlkYXRlYm9vbGVhbikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICB2YXIgdmFsaWRhdGVMZW5ndGggPSB2YWxpZGF0ZURhdGEubGVuZ3RoO1xyXG5cclxuICB2YXIgcmVnTnVtID0gL15bMS05XVxcZCokLyxcclxuICAgIHJlZ0RhdGUgPSAvXihcXGR7NH0pXFwvKFxcZHsyfSlcXC8oXFxkezJ9KSQvO1xyXG4gIGZvcih2YXIgaT0wO2k8dmFsaWRhdGVMZW5ndGg7aSsrKXsgICAgICAgIC8v5Yik5pat5YaM5pWw77yM6LSt5Lmw5pel5pyf5LiA5qCP5piv5ZCm5Li65pWw5a2XXHJcbiAgICB2YXIgcmVzdWx0TnVtQm9vbGVhbiA9IHJlZ051bS50ZXN0KHZhbGlkYXRlRGF0YVtpXVsnYm9va1ZvbHVtZSddKSxcclxuICAgICAgICByZXN1bHREYXRlQm9vbGVhbiA9IHJlZ0RhdGUudGVzdCh2YWxpZGF0ZURhdGFbaV1bJ2J1eVRpbWUnXSkgO1xyXG4gICAgaWYoIShyZXN1bHROdW1Cb29sZWFuICYmIHJlc3VsdERhdGVCb29sZWFuKSl7XHJcbiAgICAgIHZhbGlkYXRlYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICBhbGVydChcIuWGjOaVsOOAgei0reS5sOaXpeacn+S4gOagj+ivt+ajgOafpeagvOW8j+aYr+WQpuato+ehrlwiKVxyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbiAgaWYoIXZhbGlkYXRlYm9vbGVhbikgcmV0dXJuIGZhbHNlO1xyXG4gIGlmKHZhbGlkYXRlYm9vbGVhbil7XHJcbiAgICByZXR1cm4gdmFsaWRhdGVEYXRhO1xyXG4gIH1lbHNle1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbi8vICByZXR1cm4gdmFsaWRhdGVEYXRhO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbmRleEdldERhdGEodXJsLGdldHBhcmFtcywkZWxlbSl7ICAvL2dldOaWueW8j+iOt+WPluaVsOaNrlxyXG4gICAgJChcIiNtb2RpZnktdGFibGUgdHIgdGRcIikucmVtb3ZlKCk7XHJcbiAgICBsb2FkaW5nKCRlbGVtKVxyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgIHR5cGU6XCJHRVRcIixcclxuICAgICAgICAgdXJsOnVybCxcclxuICAgICAgICAgZGF0YTpnZXRwYXJhbXMsXHJcbiAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAvLyBzZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xyXG4gICAgICAgICAgJChcIiNhbnQtc2l0ZS1sb2FkaW5nXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgIHZhciBib29rRGF0YSxcclxuICAgICAgICAgICAgICAgbWVzc2FnZURhdGE9XCJcIjtcclxuICAgICAgICAgICBpZih0eXBlb2YoZGF0YSkgPT0gXCJzdHJpbmdcIil7XHJcbiAgICAgICAgICAgICAgIGJvb2tEYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgICAgICB9ZWxzZSBpZih0eXBlb2YoZGF0YSkgPT0gXCJvYmplY3RcIil7XHJcbiAgICAgICAgICAgICAgIGJvb2tEYXRhID0gZGF0YTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgbWVzc2FnZURhdGEgPSBib29rRGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgIGlmKG1lc3NhZ2VEYXRhID09IFwi5pON5L2c5oiQ5YqfXCIpe1xyXG4gICAgICAgICAgICAgdmFyIGJvb2tEYXRhID0gYm9va0RhdGEuZGF0YTtcclxuXHJcbiAgICAgICAgICAgICAkKFwiI21vZGlmeS10YWJsZVwiKS5jcmVhdGVUYWJsZSh7dGFibGVEYXRhOmJvb2tEYXRhLGNob2ljZUNvbnRlbnQ6J21vZGlmeScscGFnZUlkOlwiI3BhZ2VcIixza2lwUGFnZUlkOlwiI3NraXAtY2xpY2tcIix0b3RhbFBhZ2VJZDonI3RvdGFsLXBhZ2UnLHRhYmxlSWQ6JyNtb2RpZnktdGFibGUnLHNlc3Npb25QYWdlOidhZGRQYWdlJyxzZXNzaW9uTG9jYXRpb246J2FkZExvY2F0aW9uJ30pXHJcblxyXG4gICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgYWxlcnQobWVzc2FnZURhdGEpXHJcbiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxufVxyXG4iLCIvKipcbiAqIEZyZW5jaCB0cmFuc2xhdGlvbiBmb3IgYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyXG4gKiBOaWNvIE1vbGxldCA8bmljby5tb2xsZXRAZ21haWwuY29tPlxuICovXG47KGZ1bmN0aW9uKCQpe1xuXHQkLmZuLmRhdGV0aW1lcGlja2VyLmRhdGVzWydmciddID0ge1xuXHRcdGRheXM6IFtcIkRpbWFuY2hlXCIsIFwiTHVuZGlcIiwgXCJNYXJkaVwiLCBcIk1lcmNyZWRpXCIsIFwiSmV1ZGlcIiwgXCJWZW5kcmVkaVwiLCBcIlNhbWVkaVwiLCBcIkRpbWFuY2hlXCJdLFxuXHRcdGRheXNTaG9ydDogW1wiRGltXCIsIFwiTHVuXCIsIFwiTWFyXCIsIFwiTWVyXCIsIFwiSmV1XCIsIFwiVmVuXCIsIFwiU2FtXCIsIFwiRGltXCJdLFxuXHRcdGRheXNNaW46IFtcIkRcIiwgXCJMXCIsIFwiTWFcIiwgXCJNZVwiLCBcIkpcIiwgXCJWXCIsIFwiU1wiLCBcIkRcIl0sXG5cdFx0bW9udGhzOiBbXCJKYW52aWVyXCIsIFwiRsOpdnJpZXJcIiwgXCJNYXJzXCIsIFwiQXZyaWxcIiwgXCJNYWlcIiwgXCJKdWluXCIsIFwiSnVpbGxldFwiLCBcIkFvw7t0XCIsIFwiU2VwdGVtYnJlXCIsIFwiT2N0b2JyZVwiLCBcIk5vdmVtYnJlXCIsIFwiRMOpY2VtYnJlXCJdLFxuXHRcdG1vbnRoc1Nob3J0OiBbXCJKYW5cIiwgXCJGZXZcIiwgXCJNYXJcIiwgXCJBdnJcIiwgXCJNYWlcIiwgXCJKdWlcIiwgXCJKdWxcIiwgXCJBb3VcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl0sXG5cdFx0dG9kYXk6IFwiQXVqb3VyZCdodWlcIixcblx0XHRzdWZmaXg6IFtdLFxuXHRcdG1lcmlkaWVtOiBbXCJhbVwiLCBcInBtXCJdLFxuXHRcdHdlZWtTdGFydDogMSxcblx0XHRmb3JtYXQ6IFwiZGQvbW0veXl5eSBoaDppaVwiXG5cdH07XG59KGpRdWVyeSkpO1xuIiwiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBib290c3RyYXAtZGF0ZXRpbWVwaWNrZXIuanNcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IDIwMTIgU3RlZmFuIFBldHJlXG4gKlxuICogSW1wcm92ZW1lbnRzIGJ5IEFuZHJldyBSb3dsc1xuICogSW1wcm92ZW1lbnRzIGJ5IFPDqWJhc3RpZW4gTWFsb3RcbiAqIEltcHJvdmVtZW50cyBieSBZdW4gTGFpXG4gKiBJbXByb3ZlbWVudHMgYnkgS2VubmV0aCBIZW5kZXJpY2tcbiAqIEltcHJvdmVtZW50cyBieSBDdUdCYWJ5QmVhUlxuICogSW1wcm92ZW1lbnRzIGJ5IENocmlzdGlhbiBWYWFzIDxhdXNwZXhAYXVzcGV4LmV1PlxuICpcbiAqIFByb2plY3QgVVJMIDogaHR0cDovL3d3dy5tYWxvdC5mci9ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXJcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG4oZnVuY3Rpb24oZmFjdG9yeSl7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcbiAgICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcbiAgICBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG4gICAgICBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcbiAgICBlbHNlXG4gICAgICBmYWN0b3J5KGpRdWVyeSk7XG5cbn0oZnVuY3Rpb24oJCwgdW5kZWZpbmVkKXtcblxuICAvLyBBZGQgRUNNQTI2Mi01IEFycmF5IG1ldGhvZHMgaWYgbm90IHN1cHBvcnRlZCBuYXRpdmVseSAoSUU4KVxuICBpZiAoISgnaW5kZXhPZicgaW4gQXJyYXkucHJvdG90eXBlKSkge1xuICAgIEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKGZpbmQsIGkpIHtcbiAgICAgIGlmIChpID09PSB1bmRlZmluZWQpIGkgPSAwO1xuICAgICAgaWYgKGkgPCAwKSBpICs9IHRoaXMubGVuZ3RoO1xuICAgICAgaWYgKGkgPCAwKSBpID0gMDtcbiAgICAgIGZvciAodmFyIG4gPSB0aGlzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGZpbmQpIHtcbiAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFkZCB0aW1lem9uZSBhYmJyZXZpYXRpb24gc3VwcG9ydCBmb3IgaWU2KywgQ2hyb21lLCBGaXJlZm94XG4gIGZ1bmN0aW9uIHRpbWVab25lQWJicmV2aWF0aW9uKCkge1xuICAgIHZhciBhYmJyZXZpYXRpb24sIGRhdGUsIGZvcm1hdHRlZFN0ciwgaSwgbGVuLCBtYXRjaGVkU3RyaW5ncywgcmVmLCBzdHI7XG4gICAgZGF0ZSA9IChuZXcgRGF0ZSgpKS50b1N0cmluZygpO1xuICAgIGZvcm1hdHRlZFN0ciA9ICgocmVmID0gZGF0ZS5zcGxpdCgnKCcpWzFdKSAhPSBudWxsID8gcmVmLnNsaWNlKDAsIC0xKSA6IDApIHx8IGRhdGUuc3BsaXQoJyAnKTtcbiAgICBpZiAoZm9ybWF0dGVkU3RyIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIG1hdGNoZWRTdHJpbmdzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZm9ybWF0dGVkU3RyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdHRlZFN0cltpXTtcbiAgICAgICAgaWYgKChhYmJyZXZpYXRpb24gPSAocmVmID0gc3RyLm1hdGNoKC9cXGJbQS1aXStcXGIvKSkgIT09IG51bGwpID8gcmVmWzBdIDogMCkge1xuICAgICAgICAgIG1hdGNoZWRTdHJpbmdzLnB1c2goYWJicmV2aWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9ybWF0dGVkU3RyID0gbWF0Y2hlZFN0cmluZ3MucG9wKCk7XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXR0ZWRTdHI7XG4gIH1cblxuICBmdW5jdGlvbiBVVENEYXRlKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLlVUQy5hcHBseShEYXRlLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIC8vIFBpY2tlciBvYmplY3RcbiAgdmFyIERhdGV0aW1lcGlja2VyID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICB0aGlzLmVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuXG4gICAgLy8gYWRkIGNvbnRhaW5lciBmb3Igc2luZ2xlIHBhZ2UgYXBwbGljYXRpb25cbiAgICAvLyB3aGVuIHBhZ2Ugc3dpdGNoIHRoZSBkYXRldGltZXBpY2tlciBkaXYgd2lsbCBiZSByZW1vdmVkIGFsc28uXG4gICAgdGhpcy5jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lciB8fCAnYm9keSc7XG5cbiAgICB0aGlzLmxhbmd1YWdlID0gb3B0aW9ucy5sYW5ndWFnZSB8fCB0aGlzLmVsZW1lbnQuZGF0YSgnZGF0ZS1sYW5ndWFnZScpIHx8ICdlbic7XG4gICAgdGhpcy5sYW5ndWFnZSA9IHRoaXMubGFuZ3VhZ2UgaW4gZGF0ZXMgPyB0aGlzLmxhbmd1YWdlIDogdGhpcy5sYW5ndWFnZS5zcGxpdCgnLScpWzBdOyAvLyBmci1DQSBmYWxsYmFjayB0byBmclxuICAgIHRoaXMubGFuZ3VhZ2UgPSB0aGlzLmxhbmd1YWdlIGluIGRhdGVzID8gdGhpcy5sYW5ndWFnZSA6ICdlbic7XG4gICAgdGhpcy5pc1JUTCA9IGRhdGVzW3RoaXMubGFuZ3VhZ2VdLnJ0bCB8fCBmYWxzZTtcbiAgICB0aGlzLmZvcm1hdFR5cGUgPSBvcHRpb25zLmZvcm1hdFR5cGUgfHwgdGhpcy5lbGVtZW50LmRhdGEoJ2Zvcm1hdC10eXBlJykgfHwgJ3N0YW5kYXJkJztcbiAgICB0aGlzLmZvcm1hdCA9IERQR2xvYmFsLnBhcnNlRm9ybWF0KG9wdGlvbnMuZm9ybWF0IHx8IHRoaXMuZWxlbWVudC5kYXRhKCdkYXRlLWZvcm1hdCcpIHx8IGRhdGVzW3RoaXMubGFuZ3VhZ2VdLmZvcm1hdCB8fCBEUEdsb2JhbC5nZXREZWZhdWx0Rm9ybWF0KHRoaXMuZm9ybWF0VHlwZSwgJ2lucHV0JyksIHRoaXMuZm9ybWF0VHlwZSk7XG4gICAgdGhpcy5pc0lubGluZSA9IGZhbHNlO1xuICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgdGhpcy5pc0lucHV0ID0gdGhpcy5lbGVtZW50LmlzKCdpbnB1dCcpO1xuICAgIHRoaXMuZm9udEF3ZXNvbWUgPSBvcHRpb25zLmZvbnRBd2Vzb21lIHx8IHRoaXMuZWxlbWVudC5kYXRhKCdmb250LWF3ZXNvbWUnKSB8fCBmYWxzZTtcblxuICAgIHRoaXMuYm9vdGNzc1ZlciA9IG9wdGlvbnMuYm9vdGNzc1ZlciB8fCAodGhpcy5pc0lucHV0ID8gKHRoaXMuZWxlbWVudC5pcygnLmZvcm0tY29udHJvbCcpID8gMyA6IDIpIDogKCB0aGlzLmJvb3Rjc3NWZXIgPSB0aGlzLmVsZW1lbnQuaXMoJy5pbnB1dC1ncm91cCcpID8gMyA6IDIgKSk7XG5cbiAgICB0aGlzLmNvbXBvbmVudCA9IHRoaXMuZWxlbWVudC5pcygnLmRhdGUnKSA/ICggdGhpcy5ib290Y3NzVmVyID09PSAzID8gdGhpcy5lbGVtZW50LmZpbmQoJy5pbnB1dC1ncm91cC1hZGRvbiAuZ2x5cGhpY29uLXRoLCAuaW5wdXQtZ3JvdXAtYWRkb24gLmdseXBoaWNvbi10aW1lLCAuaW5wdXQtZ3JvdXAtYWRkb24gLmdseXBoaWNvbi1yZW1vdmUsIC5pbnB1dC1ncm91cC1hZGRvbiAuZ2x5cGhpY29uLWNhbGVuZGFyLCAuaW5wdXQtZ3JvdXAtYWRkb24gLmZhLWNhbGVuZGFyLCAuaW5wdXQtZ3JvdXAtYWRkb24gLmZhLWNsb2NrLW8nKS5wYXJlbnQoKSA6IHRoaXMuZWxlbWVudC5maW5kKCcuYWRkLW9uIC5pY29uLXRoLCAuYWRkLW9uIC5pY29uLXRpbWUsIC5hZGQtb24gLmljb24tY2FsZW5kYXIsIC5hZGQtb24gLmZhLWNhbGVuZGFyLCAuYWRkLW9uIC5mYS1jbG9jay1vJykucGFyZW50KCkpIDogZmFsc2U7XG4gICAgdGhpcy5jb21wb25lbnRSZXNldCA9IHRoaXMuZWxlbWVudC5pcygnLmRhdGUnKSA/ICggdGhpcy5ib290Y3NzVmVyID09PSAzID8gdGhpcy5lbGVtZW50LmZpbmQoJy5pbnB1dC1ncm91cC1hZGRvbiAuZ2x5cGhpY29uLXJlbW92ZSwgLmlucHV0LWdyb3VwLWFkZG9uIC5mYS10aW1lcycpLnBhcmVudCgpOnRoaXMuZWxlbWVudC5maW5kKCcuYWRkLW9uIC5pY29uLXJlbW92ZSwgLmFkZC1vbiAuZmEtdGltZXMnKS5wYXJlbnQoKSkgOiBmYWxzZTtcbiAgICB0aGlzLmhhc0lucHV0ID0gdGhpcy5jb21wb25lbnQgJiYgdGhpcy5lbGVtZW50LmZpbmQoJ2lucHV0JykubGVuZ3RoO1xuICAgIGlmICh0aGlzLmNvbXBvbmVudCAmJiB0aGlzLmNvbXBvbmVudC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuY29tcG9uZW50ID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMubGlua0ZpZWxkID0gb3B0aW9ucy5saW5rRmllbGQgfHwgdGhpcy5lbGVtZW50LmRhdGEoJ2xpbmstZmllbGQnKSB8fCBmYWxzZTtcbiAgICB0aGlzLmxpbmtGb3JtYXQgPSBEUEdsb2JhbC5wYXJzZUZvcm1hdChvcHRpb25zLmxpbmtGb3JtYXQgfHwgdGhpcy5lbGVtZW50LmRhdGEoJ2xpbmstZm9ybWF0JykgfHwgRFBHbG9iYWwuZ2V0RGVmYXVsdEZvcm1hdCh0aGlzLmZvcm1hdFR5cGUsICdsaW5rJyksIHRoaXMuZm9ybWF0VHlwZSk7XG4gICAgdGhpcy5taW51dGVTdGVwID0gb3B0aW9ucy5taW51dGVTdGVwIHx8IHRoaXMuZWxlbWVudC5kYXRhKCdtaW51dGUtc3RlcCcpIHx8IDU7XG4gICAgdGhpcy5waWNrZXJQb3NpdGlvbiA9IG9wdGlvbnMucGlja2VyUG9zaXRpb24gfHwgdGhpcy5lbGVtZW50LmRhdGEoJ3BpY2tlci1wb3NpdGlvbicpIHx8ICdib3R0b20tcmlnaHQnO1xuICAgIHRoaXMuc2hvd01lcmlkaWFuID0gb3B0aW9ucy5zaG93TWVyaWRpYW4gfHwgdGhpcy5lbGVtZW50LmRhdGEoJ3Nob3ctbWVyaWRpYW4nKSB8fCBmYWxzZTtcbiAgICB0aGlzLmluaXRpYWxEYXRlID0gb3B0aW9ucy5pbml0aWFsRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuICAgIHRoaXMuekluZGV4ID0gb3B0aW9ucy56SW5kZXggfHwgdGhpcy5lbGVtZW50LmRhdGEoJ3otaW5kZXgnKSB8fCB1bmRlZmluZWQ7XG4gICAgdGhpcy50aXRsZSA9IHR5cGVvZiBvcHRpb25zLnRpdGxlID09PSAndW5kZWZpbmVkJyA/IGZhbHNlIDogb3B0aW9ucy50aXRsZTtcbiAgICB0aGlzLnRpbWV6b25lID0gb3B0aW9ucy50aW1lem9uZSB8fCB0aW1lWm9uZUFiYnJldmlhdGlvbigpO1xuXG4gICAgdGhpcy5pY29ucyA9IHtcbiAgICAgIGxlZnRBcnJvdzogdGhpcy5mb250QXdlc29tZSA/ICdmYS1hcnJvdy1sZWZ0JyA6ICh0aGlzLmJvb3Rjc3NWZXIgPT09IDMgPyAnZ2x5cGhpY29uLWFycm93LWxlZnQnIDogJ2ljb24tYXJyb3ctbGVmdCcpLFxuICAgICAgcmlnaHRBcnJvdzogdGhpcy5mb250QXdlc29tZSA/ICdmYS1hcnJvdy1yaWdodCcgOiAodGhpcy5ib290Y3NzVmVyID09PSAzID8gJ2dseXBoaWNvbi1hcnJvdy1yaWdodCcgOiAnaWNvbi1hcnJvdy1yaWdodCcpXG4gICAgfVxuICAgIHRoaXMuaWNvbnR5cGUgPSB0aGlzLmZvbnRBd2Vzb21lID8gJ2ZhJyA6ICdnbHlwaGljb24nO1xuXG4gICAgdGhpcy5fYXR0YWNoRXZlbnRzKCk7XG5cbiAgICB0aGlzLmNsaWNrZWRPdXRzaWRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgLy8gQ2xpY2tlZCBvdXRzaWRlIHRoZSBkYXRldGltZXBpY2tlciwgaGlkZSBpdFxuICAgICAgICBpZiAoJChlLnRhcmdldCkuY2xvc2VzdCgnLmRhdGV0aW1lcGlja2VyJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGF0LmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZm9ybWF0Vmlld1R5cGUgPSAnZGF0ZXRpbWUnO1xuICAgIGlmICgnZm9ybWF0Vmlld1R5cGUnIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuZm9ybWF0Vmlld1R5cGUgPSBvcHRpb25zLmZvcm1hdFZpZXdUeXBlO1xuICAgIH0gZWxzZSBpZiAoJ2Zvcm1hdFZpZXdUeXBlJyBpbiB0aGlzLmVsZW1lbnQuZGF0YSgpKSB7XG4gICAgICB0aGlzLmZvcm1hdFZpZXdUeXBlID0gdGhpcy5lbGVtZW50LmRhdGEoJ2Zvcm1hdFZpZXdUeXBlJyk7XG4gICAgfVxuXG4gICAgdGhpcy5taW5WaWV3ID0gMDtcbiAgICBpZiAoJ21pblZpZXcnIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMubWluVmlldyA9IG9wdGlvbnMubWluVmlldztcbiAgICB9IGVsc2UgaWYgKCdtaW5WaWV3JyBpbiB0aGlzLmVsZW1lbnQuZGF0YSgpKSB7XG4gICAgICB0aGlzLm1pblZpZXcgPSB0aGlzLmVsZW1lbnQuZGF0YSgnbWluLXZpZXcnKTtcbiAgICB9XG4gICAgdGhpcy5taW5WaWV3ID0gRFBHbG9iYWwuY29udmVydFZpZXdNb2RlKHRoaXMubWluVmlldyk7XG5cbiAgICB0aGlzLm1heFZpZXcgPSBEUEdsb2JhbC5tb2Rlcy5sZW5ndGggLSAxO1xuICAgIGlmICgnbWF4VmlldycgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5tYXhWaWV3ID0gb3B0aW9ucy5tYXhWaWV3O1xuICAgIH0gZWxzZSBpZiAoJ21heFZpZXcnIGluIHRoaXMuZWxlbWVudC5kYXRhKCkpIHtcbiAgICAgIHRoaXMubWF4VmlldyA9IHRoaXMuZWxlbWVudC5kYXRhKCdtYXgtdmlldycpO1xuICAgIH1cbiAgICB0aGlzLm1heFZpZXcgPSBEUEdsb2JhbC5jb252ZXJ0Vmlld01vZGUodGhpcy5tYXhWaWV3KTtcblxuICAgIHRoaXMud2hlZWxWaWV3TW9kZU5hdmlnYXRpb24gPSBmYWxzZTtcbiAgICBpZiAoJ3doZWVsVmlld01vZGVOYXZpZ2F0aW9uJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLndoZWVsVmlld01vZGVOYXZpZ2F0aW9uID0gb3B0aW9ucy53aGVlbFZpZXdNb2RlTmF2aWdhdGlvbjtcbiAgICB9IGVsc2UgaWYgKCd3aGVlbFZpZXdNb2RlTmF2aWdhdGlvbicgaW4gdGhpcy5lbGVtZW50LmRhdGEoKSkge1xuICAgICAgdGhpcy53aGVlbFZpZXdNb2RlTmF2aWdhdGlvbiA9IHRoaXMuZWxlbWVudC5kYXRhKCd2aWV3LW1vZGUtd2hlZWwtbmF2aWdhdGlvbicpO1xuICAgIH1cblxuICAgIHRoaXMud2hlZWxWaWV3TW9kZU5hdmlnYXRpb25JbnZlcnNlRGlyZWN0aW9uID0gZmFsc2U7XG5cbiAgICBpZiAoJ3doZWVsVmlld01vZGVOYXZpZ2F0aW9uSW52ZXJzZURpcmVjdGlvbicgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy53aGVlbFZpZXdNb2RlTmF2aWdhdGlvbkludmVyc2VEaXJlY3Rpb24gPSBvcHRpb25zLndoZWVsVmlld01vZGVOYXZpZ2F0aW9uSW52ZXJzZURpcmVjdGlvbjtcbiAgICB9IGVsc2UgaWYgKCd3aGVlbFZpZXdNb2RlTmF2aWdhdGlvbkludmVyc2VEaXJlY3Rpb24nIGluIHRoaXMuZWxlbWVudC5kYXRhKCkpIHtcbiAgICAgIHRoaXMud2hlZWxWaWV3TW9kZU5hdmlnYXRpb25JbnZlcnNlRGlyZWN0aW9uID0gdGhpcy5lbGVtZW50LmRhdGEoJ3ZpZXctbW9kZS13aGVlbC1uYXZpZ2F0aW9uLWludmVyc2UtZGlyJyk7XG4gICAgfVxuXG4gICAgdGhpcy53aGVlbFZpZXdNb2RlTmF2aWdhdGlvbkRlbGF5ID0gMTAwO1xuICAgIGlmICgnd2hlZWxWaWV3TW9kZU5hdmlnYXRpb25EZWxheScgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy53aGVlbFZpZXdNb2RlTmF2aWdhdGlvbkRlbGF5ID0gb3B0aW9ucy53aGVlbFZpZXdNb2RlTmF2aWdhdGlvbkRlbGF5O1xuICAgIH0gZWxzZSBpZiAoJ3doZWVsVmlld01vZGVOYXZpZ2F0aW9uRGVsYXknIGluIHRoaXMuZWxlbWVudC5kYXRhKCkpIHtcbiAgICAgIHRoaXMud2hlZWxWaWV3TW9kZU5hdmlnYXRpb25EZWxheSA9IHRoaXMuZWxlbWVudC5kYXRhKCd2aWV3LW1vZGUtd2hlZWwtbmF2aWdhdGlvbi1kZWxheScpO1xuICAgIH1cblxuICAgIHRoaXMuc3RhcnRWaWV3TW9kZSA9IDI7XG4gICAgaWYgKCdzdGFydFZpZXcnIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuc3RhcnRWaWV3TW9kZSA9IG9wdGlvbnMuc3RhcnRWaWV3O1xuICAgIH0gZWxzZSBpZiAoJ3N0YXJ0VmlldycgaW4gdGhpcy5lbGVtZW50LmRhdGEoKSkge1xuICAgICAgdGhpcy5zdGFydFZpZXdNb2RlID0gdGhpcy5lbGVtZW50LmRhdGEoJ3N0YXJ0LXZpZXcnKTtcbiAgICB9XG4gICAgdGhpcy5zdGFydFZpZXdNb2RlID0gRFBHbG9iYWwuY29udmVydFZpZXdNb2RlKHRoaXMuc3RhcnRWaWV3TW9kZSk7XG4gICAgdGhpcy52aWV3TW9kZSA9IHRoaXMuc3RhcnRWaWV3TW9kZTtcblxuICAgIHRoaXMudmlld1NlbGVjdCA9IHRoaXMubWluVmlldztcbiAgICBpZiAoJ3ZpZXdTZWxlY3QnIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMudmlld1NlbGVjdCA9IG9wdGlvbnMudmlld1NlbGVjdDtcbiAgICB9IGVsc2UgaWYgKCd2aWV3U2VsZWN0JyBpbiB0aGlzLmVsZW1lbnQuZGF0YSgpKSB7XG4gICAgICB0aGlzLnZpZXdTZWxlY3QgPSB0aGlzLmVsZW1lbnQuZGF0YSgndmlldy1zZWxlY3QnKTtcbiAgICB9XG4gICAgdGhpcy52aWV3U2VsZWN0ID0gRFBHbG9iYWwuY29udmVydFZpZXdNb2RlKHRoaXMudmlld1NlbGVjdCk7XG5cbiAgICB0aGlzLmZvcmNlUGFyc2UgPSB0cnVlO1xuICAgIGlmICgnZm9yY2VQYXJzZScgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5mb3JjZVBhcnNlID0gb3B0aW9ucy5mb3JjZVBhcnNlO1xuICAgIH0gZWxzZSBpZiAoJ2RhdGVGb3JjZVBhcnNlJyBpbiB0aGlzLmVsZW1lbnQuZGF0YSgpKSB7XG4gICAgICB0aGlzLmZvcmNlUGFyc2UgPSB0aGlzLmVsZW1lbnQuZGF0YSgnZGF0ZS1mb3JjZS1wYXJzZScpO1xuICAgIH1cbiAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLmJvb3Rjc3NWZXIgPT09IDMgPyBEUEdsb2JhbC50ZW1wbGF0ZVYzIDogRFBHbG9iYWwudGVtcGxhdGU7XG4gICAgd2hpbGUgKHRlbXBsYXRlLmluZGV4T2YoJ3tpY29uVHlwZX0nKSAhPT0gLTEpIHtcbiAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgne2ljb25UeXBlfScsIHRoaXMuaWNvbnR5cGUpO1xuICAgIH1cbiAgICB3aGlsZSAodGVtcGxhdGUuaW5kZXhPZigne2xlZnRBcnJvd30nKSAhPT0gLTEpIHtcbiAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgne2xlZnRBcnJvd30nLCB0aGlzLmljb25zLmxlZnRBcnJvdyk7XG4gICAgfVxuICAgIHdoaWxlICh0ZW1wbGF0ZS5pbmRleE9mKCd7cmlnaHRBcnJvd30nKSAhPT0gLTEpIHtcbiAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgne3JpZ2h0QXJyb3d9JywgdGhpcy5pY29ucy5yaWdodEFycm93KTtcbiAgICB9XG4gICAgdGhpcy5waWNrZXIgPSAkKHRlbXBsYXRlKVxuICAgICAgLmFwcGVuZFRvKHRoaXMuaXNJbmxpbmUgPyB0aGlzLmVsZW1lbnQgOiB0aGlzLmNvbnRhaW5lcikgLy8gJ2JvZHknKVxuICAgICAgLm9uKHtcbiAgICAgICAgY2xpY2s6ICAgICAkLnByb3h5KHRoaXMuY2xpY2ssIHRoaXMpLFxuICAgICAgICBtb3VzZWRvd246ICQucHJveHkodGhpcy5tb3VzZWRvd24sIHRoaXMpXG4gICAgICB9KTtcblxuICAgIGlmICh0aGlzLndoZWVsVmlld01vZGVOYXZpZ2F0aW9uKSB7XG4gICAgICBpZiAoJC5mbi5tb3VzZXdoZWVsKSB7XG4gICAgICAgIHRoaXMucGlja2VyLm9uKHttb3VzZXdoZWVsOiAkLnByb3h5KHRoaXMubW91c2V3aGVlbCwgdGhpcyl9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb3VzZSBXaGVlbCBldmVudCBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgaW5jbHVkZSB0aGUgalF1ZXJ5IE1vdXNlIFdoZWVsIHBsdWdpbiBiZWZvcmUgZW5hYmxpbmcgdGhpcyBvcHRpb24nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0lubGluZSkge1xuICAgICAgdGhpcy5waWNrZXIuYWRkQ2xhc3MoJ2RhdGV0aW1lcGlja2VyLWlubGluZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBpY2tlci5hZGRDbGFzcygnZGF0ZXRpbWVwaWNrZXItZHJvcGRvd24tJyArIHRoaXMucGlja2VyUG9zaXRpb24gKyAnIGRyb3Bkb3duLW1lbnUnKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNSVEwpIHtcbiAgICAgIHRoaXMucGlja2VyLmFkZENsYXNzKCdkYXRldGltZXBpY2tlci1ydGwnKTtcbiAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuYm9vdGNzc1ZlciA9PT0gMyA/ICcucHJldiBzcGFuLCAubmV4dCBzcGFuJyA6ICcucHJldiBpLCAubmV4dCBpJztcbiAgICAgIHRoaXMucGlja2VyLmZpbmQoc2VsZWN0b3IpLnRvZ2dsZUNsYXNzKHRoaXMuaWNvbnMubGVmdEFycm93ICsgJyAnICsgdGhpcy5pY29ucy5yaWdodEFycm93KTtcbiAgICB9XG5cbiAgICAkKGRvY3VtZW50KS5vbignbW91c2Vkb3duIHRvdWNoZW5kJywgdGhpcy5jbGlja2VkT3V0c2lkZSk7XG5cbiAgICB0aGlzLmF1dG9jbG9zZSA9IGZhbHNlO1xuICAgIGlmICgnYXV0b2Nsb3NlJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLmF1dG9jbG9zZSA9IG9wdGlvbnMuYXV0b2Nsb3NlO1xuICAgIH0gZWxzZSBpZiAoJ2RhdGVBdXRvY2xvc2UnIGluIHRoaXMuZWxlbWVudC5kYXRhKCkpIHtcbiAgICAgIHRoaXMuYXV0b2Nsb3NlID0gdGhpcy5lbGVtZW50LmRhdGEoJ2RhdGUtYXV0b2Nsb3NlJyk7XG4gICAgfVxuXG4gICAgdGhpcy5rZXlib2FyZE5hdmlnYXRpb24gPSB0cnVlO1xuICAgIGlmICgna2V5Ym9hcmROYXZpZ2F0aW9uJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLmtleWJvYXJkTmF2aWdhdGlvbiA9IG9wdGlvbnMua2V5Ym9hcmROYXZpZ2F0aW9uO1xuICAgIH0gZWxzZSBpZiAoJ2RhdGVLZXlib2FyZE5hdmlnYXRpb24nIGluIHRoaXMuZWxlbWVudC5kYXRhKCkpIHtcbiAgICAgIHRoaXMua2V5Ym9hcmROYXZpZ2F0aW9uID0gdGhpcy5lbGVtZW50LmRhdGEoJ2RhdGUta2V5Ym9hcmQtbmF2aWdhdGlvbicpO1xuICAgIH1cblxuICAgIHRoaXMudG9kYXlCdG4gPSAob3B0aW9ucy50b2RheUJ0biB8fCB0aGlzLmVsZW1lbnQuZGF0YSgnZGF0ZS10b2RheS1idG4nKSB8fCBmYWxzZSk7XG4gICAgdGhpcy5jbGVhckJ0biA9IChvcHRpb25zLmNsZWFyQnRuIHx8IHRoaXMuZWxlbWVudC5kYXRhKCdkYXRlLWNsZWFyLWJ0bicpIHx8IGZhbHNlKTtcbiAgICB0aGlzLnRvZGF5SGlnaGxpZ2h0ID0gKG9wdGlvbnMudG9kYXlIaWdobGlnaHQgfHwgdGhpcy5lbGVtZW50LmRhdGEoJ2RhdGUtdG9kYXktaGlnaGxpZ2h0JykgfHwgZmFsc2UpO1xuXG4gICAgdGhpcy53ZWVrU3RhcnQgPSAwO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53ZWVrU3RhcnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLndlZWtTdGFydCA9IG9wdGlvbnMud2Vla1N0YXJ0O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuZWxlbWVudC5kYXRhKCdkYXRlLXdlZWtzdGFydCcpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy53ZWVrU3RhcnQgPSB0aGlzLmVsZW1lbnQuZGF0YSgnZGF0ZS13ZWVrc3RhcnQnKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRlc1t0aGlzLmxhbmd1YWdlXS53ZWVrU3RhcnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLndlZWtTdGFydCA9IGRhdGVzW3RoaXMubGFuZ3VhZ2VdLndlZWtTdGFydDtcbiAgICB9XG4gICAgdGhpcy53ZWVrU3RhcnQgPSB0aGlzLndlZWtTdGFydCAlIDc7XG4gICAgdGhpcy53ZWVrRW5kID0gKCh0aGlzLndlZWtTdGFydCArIDYpICUgNyk7XG4gICAgdGhpcy5vblJlbmRlckRheSA9IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICB2YXIgcmVuZGVyID0gKG9wdGlvbnMub25SZW5kZXJEYXkgfHwgZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH0pKGRhdGUpO1xuICAgICAgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJlbmRlciA9IFtyZW5kZXJdO1xuICAgICAgfVxuICAgICAgdmFyIHJlcyA9IFsnZGF5J107XG4gICAgICByZXR1cm4gcmVzLmNvbmNhdCgocmVuZGVyID8gcmVuZGVyIDogW10pKTtcbiAgICB9O1xuICAgIHRoaXMub25SZW5kZXJIb3VyID0gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgIHZhciByZW5kZXIgPSAob3B0aW9ucy5vblJlbmRlckhvdXIgfHwgZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH0pKGRhdGUpO1xuICAgICAgdmFyIHJlcyA9IFsnaG91ciddO1xuICAgICAgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJlbmRlciA9IFtyZW5kZXJdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcy5jb25jYXQoKHJlbmRlciA/IHJlbmRlciA6IFtdKSk7XG4gICAgfTtcbiAgICB0aGlzLm9uUmVuZGVyTWludXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgIHZhciByZW5kZXIgPSAob3B0aW9ucy5vblJlbmRlck1pbnV0ZSB8fCBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfSkoZGF0ZSk7XG4gICAgICB2YXIgcmVzID0gWydtaW51dGUnXTtcbiAgICAgIGlmICh0eXBlb2YgcmVuZGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICByZW5kZXIgPSBbcmVuZGVyXTtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRlIDwgdGhpcy5zdGFydERhdGUgfHwgZGF0ZSA+IHRoaXMuZW5kRGF0ZSkge1xuICAgICAgICByZXMucHVzaCgnZGlzYWJsZWQnKTtcbiAgICAgIH0gZWxzZSBpZiAoTWF0aC5mbG9vcih0aGlzLmRhdGUuZ2V0VVRDTWludXRlcygpIC8gdGhpcy5taW51dGVTdGVwKSA9PT0gTWF0aC5mbG9vcihkYXRlLmdldFVUQ01pbnV0ZXMoKSAvIHRoaXMubWludXRlU3RlcCkpIHtcbiAgICAgICAgcmVzLnB1c2goJ2FjdGl2ZScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcy5jb25jYXQoKHJlbmRlciA/IHJlbmRlciA6IFtdKSk7XG4gICAgfTtcbiAgICB0aGlzLm9uUmVuZGVyWWVhciA9IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICB2YXIgcmVuZGVyID0gKG9wdGlvbnMub25SZW5kZXJZZWFyIHx8IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtdOyB9KShkYXRlKTtcbiAgICAgIHZhciByZXMgPSBbJ3llYXInXTtcbiAgICAgIGlmICh0eXBlb2YgcmVuZGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICByZW5kZXIgPSBbcmVuZGVyXTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRhdGUuZ2V0VVRDRnVsbFllYXIoKSA9PT0gZGF0ZS5nZXRVVENGdWxsWWVhcigpKSB7XG4gICAgICAgIHJlcy5wdXNoKCdhY3RpdmUnKTtcbiAgICAgIH1cbiAgICAgIHZhciBjdXJyZW50WWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICAgIHZhciBlbmRZZWFyID0gdGhpcy5lbmREYXRlLmdldFVUQ0Z1bGxZZWFyKCk7XG4gICAgICBpZiAoZGF0ZSA8IHRoaXMuc3RhcnREYXRlIHx8IGN1cnJlbnRZZWFyID4gZW5kWWVhcikge1xuICAgICAgICByZXMucHVzaCgnZGlzYWJsZWQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXMuY29uY2F0KChyZW5kZXIgPyByZW5kZXIgOiBbXSkpO1xuICAgIH1cbiAgICB0aGlzLm9uUmVuZGVyTW9udGggPSBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgdmFyIHJlbmRlciA9IChvcHRpb25zLm9uUmVuZGVyTW9udGggfHwgZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH0pKGRhdGUpO1xuICAgICAgdmFyIHJlcyA9IFsnbW9udGgnXTtcbiAgICAgIGlmICh0eXBlb2YgcmVuZGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICByZW5kZXIgPSBbcmVuZGVyXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXMuY29uY2F0KChyZW5kZXIgPyByZW5kZXIgOiBbXSkpO1xuICAgIH1cbiAgICB0aGlzLnN0YXJ0RGF0ZSA9IG5ldyBEYXRlKC04NjM5OTY4NDQzMDQ4MDAwKTtcbiAgICB0aGlzLmVuZERhdGUgPSBuZXcgRGF0ZSg4NjM5OTY4NDQzMDQ4MDAwKTtcbiAgICB0aGlzLmRhdGVzRGlzYWJsZWQgPSBbXTtcbiAgICB0aGlzLmRheXNPZldlZWtEaXNhYmxlZCA9IFtdO1xuICAgIHRoaXMuc2V0U3RhcnREYXRlKG9wdGlvbnMuc3RhcnREYXRlIHx8IHRoaXMuZWxlbWVudC5kYXRhKCdkYXRlLXN0YXJ0ZGF0ZScpKTtcbiAgICB0aGlzLnNldEVuZERhdGUob3B0aW9ucy5lbmREYXRlIHx8IHRoaXMuZWxlbWVudC5kYXRhKCdkYXRlLWVuZGRhdGUnKSk7XG4gICAgdGhpcy5zZXREYXRlc0Rpc2FibGVkKG9wdGlvbnMuZGF0ZXNEaXNhYmxlZCB8fCB0aGlzLmVsZW1lbnQuZGF0YSgnZGF0ZS1kYXRlcy1kaXNhYmxlZCcpKTtcbiAgICB0aGlzLnNldERheXNPZldlZWtEaXNhYmxlZChvcHRpb25zLmRheXNPZldlZWtEaXNhYmxlZCB8fCB0aGlzLmVsZW1lbnQuZGF0YSgnZGF0ZS1kYXlzLW9mLXdlZWstZGlzYWJsZWQnKSk7XG4gICAgdGhpcy5zZXRNaW51dGVzRGlzYWJsZWQob3B0aW9ucy5taW51dGVzRGlzYWJsZWQgfHwgdGhpcy5lbGVtZW50LmRhdGEoJ2RhdGUtbWludXRlLWRpc2FibGVkJykpO1xuICAgIHRoaXMuc2V0SG91cnNEaXNhYmxlZChvcHRpb25zLmhvdXJzRGlzYWJsZWQgfHwgdGhpcy5lbGVtZW50LmRhdGEoJ2RhdGUtaG91ci1kaXNhYmxlZCcpKTtcbiAgICB0aGlzLmZpbGxEb3coKTtcbiAgICB0aGlzLmZpbGxNb250aHMoKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIHRoaXMuc2hvd01vZGUoKTtcblxuICAgIGlmICh0aGlzLmlzSW5saW5lKSB7XG4gICAgICB0aGlzLnNob3coKTtcbiAgICB9XG4gIH07XG5cbiAgRGF0ZXRpbWVwaWNrZXIucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBEYXRldGltZXBpY2tlcixcblxuICAgIF9ldmVudHM6ICAgICAgIFtdLFxuICAgIF9hdHRhY2hFdmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX2RldGFjaEV2ZW50cygpO1xuICAgICAgaWYgKHRoaXMuaXNJbnB1dCkgeyAvLyBzaW5nbGUgaW5wdXRcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gW1xuICAgICAgICAgIFt0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgIGZvY3VzOiAgICQucHJveHkodGhpcy5zaG93LCB0aGlzKSxcbiAgICAgICAgICAgIGtleXVwOiAgICQucHJveHkodGhpcy51cGRhdGUsIHRoaXMpLFxuICAgICAgICAgICAga2V5ZG93bjogJC5wcm94eSh0aGlzLmtleWRvd24sIHRoaXMpXG4gICAgICAgICAgfV1cbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHRoaXMuY29tcG9uZW50ICYmIHRoaXMuaGFzSW5wdXQpIHsgLy8gY29tcG9uZW50OiBpbnB1dCArIGJ1dHRvblxuICAgICAgICB0aGlzLl9ldmVudHMgPSBbXG4gICAgICAgICAgLy8gRm9yIGNvbXBvbmVudHMgdGhhdCBhcmUgbm90IHJlYWRvbmx5LCBhbGxvdyBrZXlib2FyZCBuYXZcbiAgICAgICAgICBbdGhpcy5lbGVtZW50LmZpbmQoJ2lucHV0JyksIHtcbiAgICAgICAgICAgIGZvY3VzOiAgICQucHJveHkodGhpcy5zaG93LCB0aGlzKSxcbiAgICAgICAgICAgIGtleXVwOiAgICQucHJveHkodGhpcy51cGRhdGUsIHRoaXMpLFxuICAgICAgICAgICAga2V5ZG93bjogJC5wcm94eSh0aGlzLmtleWRvd24sIHRoaXMpXG4gICAgICAgICAgfV0sXG4gICAgICAgICAgW3RoaXMuY29tcG9uZW50LCB7XG4gICAgICAgICAgICBjbGljazogJC5wcm94eSh0aGlzLnNob3csIHRoaXMpXG4gICAgICAgICAgfV1cbiAgICAgICAgXTtcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50UmVzZXQpIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHMucHVzaChbXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlc2V0LFxuICAgICAgICAgICAge2NsaWNrOiAkLnByb3h5KHRoaXMucmVzZXQsIHRoaXMpfVxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0aGlzLmVsZW1lbnQuaXMoJ2RpdicpKSB7ICAvLyBpbmxpbmUgZGF0ZXRpbWVwaWNrZXJcbiAgICAgICAgdGhpcy5pc0lubGluZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gW1xuICAgICAgICAgIFt0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgIGNsaWNrOiAkLnByb3h5KHRoaXMuc2hvdywgdGhpcylcbiAgICAgICAgICB9XVxuICAgICAgICBdO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGVsLCBldjsgaSA8IHRoaXMuX2V2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbCA9IHRoaXMuX2V2ZW50c1tpXVswXTtcbiAgICAgICAgZXYgPSB0aGlzLl9ldmVudHNbaV1bMV07XG4gICAgICAgIGVsLm9uKGV2KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgX2RldGFjaEV2ZW50czogZnVuY3Rpb24gKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGVsLCBldjsgaSA8IHRoaXMuX2V2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbCA9IHRoaXMuX2V2ZW50c1tpXVswXTtcbiAgICAgICAgZXYgPSB0aGlzLl9ldmVudHNbaV1bMV07XG4gICAgICAgIGVsLm9mZihldik7XG4gICAgICB9XG4gICAgICB0aGlzLl9ldmVudHMgPSBbXTtcbiAgICB9LFxuXG4gICAgc2hvdzogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMucGlja2VyLnNob3coKTtcbiAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5jb21wb25lbnQgPyB0aGlzLmNvbXBvbmVudC5vdXRlckhlaWdodCgpIDogdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCk7XG4gICAgICBpZiAodGhpcy5mb3JjZVBhcnNlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnBsYWNlKCk7XG4gICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsICQucHJveHkodGhpcy5wbGFjZSwgdGhpcykpO1xuICAgICAgaWYgKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAnc2hvdycsXG4gICAgICAgIGRhdGU6IHRoaXMuZGF0ZVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGhpZGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5pc1Zpc2libGUpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLmlzSW5saW5lKSByZXR1cm47XG4gICAgICB0aGlzLnBpY2tlci5oaWRlKCk7XG4gICAgICAkKHdpbmRvdykub2ZmKCdyZXNpemUnLCB0aGlzLnBsYWNlKTtcbiAgICAgIHRoaXMudmlld01vZGUgPSB0aGlzLnN0YXJ0Vmlld01vZGU7XG4gICAgICB0aGlzLnNob3dNb2RlKCk7XG4gICAgICBpZiAoIXRoaXMuaXNJbnB1dCkge1xuICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ21vdXNlZG93bicsIHRoaXMuaGlkZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5mb3JjZVBhcnNlICYmXG4gICAgICAgICAgKFxuICAgICAgICAgICAgdGhpcy5pc0lucHV0ICYmIHRoaXMuZWxlbWVudC52YWwoKSB8fFxuICAgICAgICAgICAgICB0aGlzLmhhc0lucHV0ICYmIHRoaXMuZWxlbWVudC5maW5kKCdpbnB1dCcpLnZhbCgpXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5zZXRWYWx1ZSgpO1xuICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKHtcbiAgICAgICAgdHlwZTogJ2hpZGUnLFxuICAgICAgICBkYXRlOiB0aGlzLmRhdGVcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX2RldGFjaEV2ZW50cygpO1xuICAgICAgJChkb2N1bWVudCkub2ZmKCdtb3VzZWRvd24nLCB0aGlzLmNsaWNrZWRPdXRzaWRlKTtcbiAgICAgIHRoaXMucGlja2VyLnJlbW92ZSgpO1xuICAgICAgZGVsZXRlIHRoaXMucGlja2VyO1xuICAgICAgZGVsZXRlIHRoaXMuZWxlbWVudC5kYXRhKCkuZGF0ZXRpbWVwaWNrZXI7XG4gICAgfSxcblxuICAgIGdldERhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBkID0gdGhpcy5nZXRVVENEYXRlKCk7XG4gICAgICBpZiAoZCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgRGF0ZShkLmdldFRpbWUoKSArIChkLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCkpO1xuICAgIH0sXG5cbiAgICBnZXRVVENEYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRlO1xuICAgIH0sXG5cbiAgICBnZXRJbml0aWFsRGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbERhdGVcbiAgICB9LFxuXG4gICAgc2V0SW5pdGlhbERhdGU6IGZ1bmN0aW9uIChpbml0aWFsRGF0ZSkge1xuICAgICAgdGhpcy5pbml0aWFsRGF0ZSA9IGluaXRpYWxEYXRlO1xuICAgIH0sXG5cbiAgICBzZXREYXRlOiBmdW5jdGlvbiAoZCkge1xuICAgICAgdGhpcy5zZXRVVENEYXRlKG5ldyBEYXRlKGQuZ2V0VGltZSgpIC0gKGQuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwKSkpO1xuICAgIH0sXG5cbiAgICBzZXRVVENEYXRlOiBmdW5jdGlvbiAoZCkge1xuICAgICAgaWYgKGQgPj0gdGhpcy5zdGFydERhdGUgJiYgZCA8PSB0aGlzLmVuZERhdGUpIHtcbiAgICAgICAgdGhpcy5kYXRlID0gZDtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZSgpO1xuICAgICAgICB0aGlzLnZpZXdEYXRlID0gdGhpcy5kYXRlO1xuICAgICAgICB0aGlzLmZpbGwoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKHtcbiAgICAgICAgICB0eXBlOiAgICAgICdvdXRPZlJhbmdlJyxcbiAgICAgICAgICBkYXRlOiAgICAgIGQsXG4gICAgICAgICAgc3RhcnREYXRlOiB0aGlzLnN0YXJ0RGF0ZSxcbiAgICAgICAgICBlbmREYXRlOiAgIHRoaXMuZW5kRGF0ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0Rm9ybWF0OiBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICB0aGlzLmZvcm1hdCA9IERQR2xvYmFsLnBhcnNlRm9ybWF0KGZvcm1hdCwgdGhpcy5mb3JtYXRUeXBlKTtcbiAgICAgIHZhciBlbGVtZW50O1xuICAgICAgaWYgKHRoaXMuaXNJbnB1dCkge1xuICAgICAgICBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbXBvbmVudCkge1xuICAgICAgICBlbGVtZW50ID0gdGhpcy5lbGVtZW50LmZpbmQoJ2lucHV0Jyk7XG4gICAgICB9XG4gICAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnZhbCgpKSB7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0VmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBmb3JtYXR0ZWQgPSB0aGlzLmdldEZvcm1hdHRlZERhdGUoKTtcbiAgICAgIGlmICghdGhpcy5pc0lucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xuICAgICAgICAgIHRoaXMuZWxlbWVudC5maW5kKCdpbnB1dCcpLnZhbChmb3JtYXR0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxlbWVudC5kYXRhKCdkYXRlJywgZm9ybWF0dGVkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC52YWwoZm9ybWF0dGVkKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmxpbmtGaWVsZCkge1xuICAgICAgICAkKCcjJyArIHRoaXMubGlua0ZpZWxkKS52YWwodGhpcy5nZXRGb3JtYXR0ZWREYXRlKHRoaXMubGlua0Zvcm1hdCkpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRGb3JtYXR0ZWREYXRlOiBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICBmb3JtYXQgPSBmb3JtYXQgfHwgdGhpcy5mb3JtYXQ7XG4gICAgICByZXR1cm4gRFBHbG9iYWwuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsIGZvcm1hdCwgdGhpcy5sYW5ndWFnZSwgdGhpcy5mb3JtYXRUeXBlLCB0aGlzLnRpbWV6b25lKTtcbiAgICB9LFxuXG4gICAgc2V0U3RhcnREYXRlOiBmdW5jdGlvbiAoc3RhcnREYXRlKSB7XG4gICAgICB0aGlzLnN0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZSB8fCB0aGlzLnN0YXJ0RGF0ZTtcbiAgICAgIGlmICh0aGlzLnN0YXJ0RGF0ZS52YWx1ZU9mKCkgIT09IDg2Mzk5Njg0NDMwNDgwMDApIHtcbiAgICAgICAgdGhpcy5zdGFydERhdGUgPSBEUEdsb2JhbC5wYXJzZURhdGUodGhpcy5zdGFydERhdGUsIHRoaXMuZm9ybWF0LCB0aGlzLmxhbmd1YWdlLCB0aGlzLmZvcm1hdFR5cGUsIHRoaXMudGltZXpvbmUpO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIHRoaXMudXBkYXRlTmF2QXJyb3dzKCk7XG4gICAgfSxcblxuICAgIHNldEVuZERhdGU6IGZ1bmN0aW9uIChlbmREYXRlKSB7XG4gICAgICB0aGlzLmVuZERhdGUgPSBlbmREYXRlIHx8IHRoaXMuZW5kRGF0ZTtcbiAgICAgIGlmICh0aGlzLmVuZERhdGUudmFsdWVPZigpICE9PSA4NjM5OTY4NDQzMDQ4MDAwKSB7XG4gICAgICAgIHRoaXMuZW5kRGF0ZSA9IERQR2xvYmFsLnBhcnNlRGF0ZSh0aGlzLmVuZERhdGUsIHRoaXMuZm9ybWF0LCB0aGlzLmxhbmd1YWdlLCB0aGlzLmZvcm1hdFR5cGUsIHRoaXMudGltZXpvbmUpO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIHRoaXMudXBkYXRlTmF2QXJyb3dzKCk7XG4gICAgfSxcblxuICAgIHNldERhdGVzRGlzYWJsZWQ6IGZ1bmN0aW9uIChkYXRlc0Rpc2FibGVkKSB7XG4gICAgICB0aGlzLmRhdGVzRGlzYWJsZWQgPSBkYXRlc0Rpc2FibGVkIHx8IFtdO1xuICAgICAgaWYgKCEkLmlzQXJyYXkodGhpcy5kYXRlc0Rpc2FibGVkKSkge1xuICAgICAgICB0aGlzLmRhdGVzRGlzYWJsZWQgPSB0aGlzLmRhdGVzRGlzYWJsZWQuc3BsaXQoLyxcXHMqLyk7XG4gICAgICB9XG4gICAgICB2YXIgbVRoaXMgPSB0aGlzO1xuICAgICAgdGhpcy5kYXRlc0Rpc2FibGVkID0gJC5tYXAodGhpcy5kYXRlc0Rpc2FibGVkLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gRFBHbG9iYWwucGFyc2VEYXRlKGQsIG1UaGlzLmZvcm1hdCwgbVRoaXMubGFuZ3VhZ2UsIG1UaGlzLmZvcm1hdFR5cGUsIG1UaGlzLnRpbWV6b25lKS50b0RhdGVTdHJpbmcoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIHRoaXMudXBkYXRlTmF2QXJyb3dzKCk7XG4gICAgfSxcblxuICAgIHNldFRpdGxlOiBmdW5jdGlvbiAoc2VsZWN0b3IsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5waWNrZXIuZmluZChzZWxlY3RvcilcbiAgICAgICAgLmZpbmQoJ3RoOmVxKDEpJylcbiAgICAgICAgLnRleHQodGhpcy50aXRsZSA9PT0gZmFsc2UgPyB2YWx1ZSA6IHRoaXMudGl0bGUpO1xuICAgIH0sXG5cbiAgICBzZXREYXlzT2ZXZWVrRGlzYWJsZWQ6IGZ1bmN0aW9uIChkYXlzT2ZXZWVrRGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuZGF5c09mV2Vla0Rpc2FibGVkID0gZGF5c09mV2Vla0Rpc2FibGVkIHx8IFtdO1xuICAgICAgaWYgKCEkLmlzQXJyYXkodGhpcy5kYXlzT2ZXZWVrRGlzYWJsZWQpKSB7XG4gICAgICAgIHRoaXMuZGF5c09mV2Vla0Rpc2FibGVkID0gdGhpcy5kYXlzT2ZXZWVrRGlzYWJsZWQuc3BsaXQoLyxcXHMqLyk7XG4gICAgICB9XG4gICAgICB0aGlzLmRheXNPZldlZWtEaXNhYmxlZCA9ICQubWFwKHRoaXMuZGF5c09mV2Vla0Rpc2FibGVkLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoZCwgMTApO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgdGhpcy51cGRhdGVOYXZBcnJvd3MoKTtcbiAgICB9LFxuXG4gICAgc2V0TWludXRlc0Rpc2FibGVkOiBmdW5jdGlvbiAobWludXRlc0Rpc2FibGVkKSB7XG4gICAgICB0aGlzLm1pbnV0ZXNEaXNhYmxlZCA9IG1pbnV0ZXNEaXNhYmxlZCB8fCBbXTtcbiAgICAgIGlmICghJC5pc0FycmF5KHRoaXMubWludXRlc0Rpc2FibGVkKSkge1xuICAgICAgICB0aGlzLm1pbnV0ZXNEaXNhYmxlZCA9IHRoaXMubWludXRlc0Rpc2FibGVkLnNwbGl0KC8sXFxzKi8pO1xuICAgICAgfVxuICAgICAgdGhpcy5taW51dGVzRGlzYWJsZWQgPSAkLm1hcCh0aGlzLm1pbnV0ZXNEaXNhYmxlZCwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KGQsIDEwKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIHRoaXMudXBkYXRlTmF2QXJyb3dzKCk7XG4gICAgfSxcblxuICAgIHNldEhvdXJzRGlzYWJsZWQ6IGZ1bmN0aW9uIChob3Vyc0Rpc2FibGVkKSB7XG4gICAgICB0aGlzLmhvdXJzRGlzYWJsZWQgPSBob3Vyc0Rpc2FibGVkIHx8IFtdO1xuICAgICAgaWYgKCEkLmlzQXJyYXkodGhpcy5ob3Vyc0Rpc2FibGVkKSkge1xuICAgICAgICB0aGlzLmhvdXJzRGlzYWJsZWQgPSB0aGlzLmhvdXJzRGlzYWJsZWQuc3BsaXQoLyxcXHMqLyk7XG4gICAgICB9XG4gICAgICB0aGlzLmhvdXJzRGlzYWJsZWQgPSAkLm1hcCh0aGlzLmhvdXJzRGlzYWJsZWQsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChkLCAxMCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB0aGlzLnVwZGF0ZU5hdkFycm93cygpO1xuICAgIH0sXG5cbiAgICBwbGFjZTogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuaXNJbmxpbmUpIHJldHVybjtcblxuICAgICAgaWYgKCF0aGlzLnpJbmRleCkge1xuICAgICAgICB2YXIgaW5kZXhfaGlnaGVzdCA9IDA7XG4gICAgICAgICQoJ2RpdicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBpbmRleF9jdXJyZW50ID0gcGFyc2VJbnQoJCh0aGlzKS5jc3MoJ3pJbmRleCcpLCAxMCk7XG4gICAgICAgICAgaWYgKGluZGV4X2N1cnJlbnQgPiBpbmRleF9oaWdoZXN0KSB7XG4gICAgICAgICAgICBpbmRleF9oaWdoZXN0ID0gaW5kZXhfY3VycmVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnpJbmRleCA9IGluZGV4X2hpZ2hlc3QgKyAxMDtcbiAgICAgIH1cblxuICAgICAgdmFyIG9mZnNldCwgdG9wLCBsZWZ0LCBjb250YWluZXJPZmZzZXQ7XG4gICAgICBpZiAodGhpcy5jb250YWluZXIgaW5zdGFuY2VvZiAkKSB7XG4gICAgICAgIGNvbnRhaW5lck9mZnNldCA9IHRoaXMuY29udGFpbmVyLm9mZnNldCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyT2Zmc2V0ID0gJCh0aGlzLmNvbnRhaW5lcikub2Zmc2V0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xuICAgICAgICBvZmZzZXQgPSB0aGlzLmNvbXBvbmVudC5vZmZzZXQoKTtcbiAgICAgICAgbGVmdCA9IG9mZnNldC5sZWZ0O1xuICAgICAgICBpZiAodGhpcy5waWNrZXJQb3NpdGlvbiA9PT0gJ2JvdHRvbS1sZWZ0JyB8fCB0aGlzLnBpY2tlclBvc2l0aW9uID09PSAndG9wLWxlZnQnKSB7XG4gICAgICAgICAgbGVmdCArPSB0aGlzLmNvbXBvbmVudC5vdXRlcldpZHRoKCkgLSB0aGlzLnBpY2tlci5vdXRlcldpZHRoKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9mZnNldCA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKTtcbiAgICAgICAgbGVmdCA9IG9mZnNldC5sZWZ0O1xuICAgICAgICBpZiAodGhpcy5waWNrZXJQb3NpdGlvbiA9PT0gJ2JvdHRvbS1sZWZ0JyB8fCB0aGlzLnBpY2tlclBvc2l0aW9uID09PSAndG9wLWxlZnQnKSB7XG4gICAgICAgICAgbGVmdCArPSB0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpIC0gdGhpcy5waWNrZXIub3V0ZXJXaWR0aCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBib2R5V2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIHx8IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgaWYgKGxlZnQgKyAyMjAgPiBib2R5V2lkdGgpIHtcbiAgICAgICAgbGVmdCA9IGJvZHlXaWR0aCAtIDIyMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucGlja2VyUG9zaXRpb24gPT09ICd0b3AtbGVmdCcgfHwgdGhpcy5waWNrZXJQb3NpdGlvbiA9PT0gJ3RvcC1yaWdodCcpIHtcbiAgICAgICAgdG9wID0gb2Zmc2V0LnRvcCAtIHRoaXMucGlja2VyLm91dGVySGVpZ2h0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b3AgPSBvZmZzZXQudG9wICsgdGhpcy5oZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIHRvcCA9IHRvcCAtIGNvbnRhaW5lck9mZnNldC50b3A7XG4gICAgICBsZWZ0ID0gbGVmdCAtIGNvbnRhaW5lck9mZnNldC5sZWZ0O1xuXG4gICAgICB0aGlzLnBpY2tlci5jc3Moe1xuICAgICAgICB0b3A6ICAgIHRvcCxcbiAgICAgICAgbGVmdDogICBsZWZ0LFxuICAgICAgICB6SW5kZXg6IHRoaXMuekluZGV4XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgaG91cl9taW51dGU6IFwiXihbMC05XXwwWzAtOV18MVswLTldfDJbMC0zXSk6WzAtNV1bMC05XVwiLFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZGF0ZSwgZnJvbUFyZ3MgPSBmYWxzZTtcbiAgICAgIGlmIChhcmd1bWVudHMgJiYgYXJndW1lbnRzLmxlbmd0aCAmJiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycgfHwgYXJndW1lbnRzWzBdIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICAgICAgZGF0ZSA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgZnJvbUFyZ3MgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0ZSA9ICh0aGlzLmlzSW5wdXQgPyB0aGlzLmVsZW1lbnQudmFsKCkgOiB0aGlzLmVsZW1lbnQuZmluZCgnaW5wdXQnKS52YWwoKSkgfHwgdGhpcy5lbGVtZW50LmRhdGEoJ2RhdGUnKSB8fCB0aGlzLmluaXRpYWxEYXRlO1xuICAgICAgICBpZiAodHlwZW9mIGRhdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZGF0ZSA9IGRhdGUucmVwbGFjZSgvXlxccyt8XFxzKyQvZywnJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRlKSB7XG4gICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBmcm9tQXJncyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKG5ldyBSZWdFeHAodGhpcy5ob3VyX21pbnV0ZSkudGVzdChkYXRlKSB8fCBuZXcgUmVnRXhwKHRoaXMuaG91cl9taW51dGUgKyBcIjpbMC01XVswLTldXCIpLnRlc3QoZGF0ZSkpIHtcbiAgICAgICAgICBkYXRlID0gdGhpcy5nZXREYXRlKClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmRhdGUgPSBEUEdsb2JhbC5wYXJzZURhdGUoZGF0ZSwgdGhpcy5mb3JtYXQsIHRoaXMubGFuZ3VhZ2UsIHRoaXMuZm9ybWF0VHlwZSwgdGhpcy50aW1lem9uZSk7XG5cbiAgICAgIGlmIChmcm9tQXJncykgdGhpcy5zZXRWYWx1ZSgpO1xuXG4gICAgICBpZiAodGhpcy5kYXRlIDwgdGhpcy5zdGFydERhdGUpIHtcbiAgICAgICAgdGhpcy52aWV3RGF0ZSA9IG5ldyBEYXRlKHRoaXMuc3RhcnREYXRlKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRlID4gdGhpcy5lbmREYXRlKSB7XG4gICAgICAgIHRoaXMudmlld0RhdGUgPSBuZXcgRGF0ZSh0aGlzLmVuZERhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy52aWV3RGF0ZSA9IG5ldyBEYXRlKHRoaXMuZGF0ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLmZpbGwoKTtcbiAgICB9LFxuXG4gICAgZmlsbERvdzogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGRvd0NudCA9IHRoaXMud2Vla1N0YXJ0LFxuICAgICAgICBodG1sID0gJzx0cj4nO1xuICAgICAgd2hpbGUgKGRvd0NudCA8IHRoaXMud2Vla1N0YXJ0ICsgNykge1xuICAgICAgICBodG1sICs9ICc8dGggY2xhc3M9XCJkb3dcIj4nICsgZGF0ZXNbdGhpcy5sYW5ndWFnZV0uZGF5c01pblsoZG93Q250KyspICUgN10gKyAnPC90aD4nO1xuICAgICAgfVxuICAgICAgaHRtbCArPSAnPC90cj4nO1xuICAgICAgdGhpcy5waWNrZXIuZmluZCgnLmRhdGV0aW1lcGlja2VyLWRheXMgdGhlYWQnKS5hcHBlbmQoaHRtbCk7XG4gICAgfSxcblxuICAgIGZpbGxNb250aHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBodG1sID0gJyc7XG4gICAgICB2YXIgZCA9IG5ldyBEYXRlKHRoaXMudmlld0RhdGUpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgICAgIGQuc2V0VVRDTW9udGgoaSk7XG4gICAgICAgIHZhciBjbGFzc2VzID0gdGhpcy5vblJlbmRlck1vbnRoKGQpO1xuICAgICAgICBodG1sICs9ICc8c3BhbiBjbGFzcz1cIicgKyBjbGFzc2VzLmpvaW4oJyAnKSArICdcIj4nICsgZGF0ZXNbdGhpcy5sYW5ndWFnZV0ubW9udGhzU2hvcnRbaV0gKyAnPC9zcGFuPic7XG4gICAgICB9XG4gICAgICB0aGlzLnBpY2tlci5maW5kKCcuZGF0ZXRpbWVwaWNrZXItbW9udGhzIHRkJykuaHRtbChodG1sKTtcbiAgICB9LFxuXG4gICAgZmlsbDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmRhdGUgfHwgIXRoaXMudmlld0RhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGQgPSBuZXcgRGF0ZSh0aGlzLnZpZXdEYXRlKSxcbiAgICAgICAgeWVhciA9IGQuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgICAgbW9udGggPSBkLmdldFVUQ01vbnRoKCksXG4gICAgICAgIGRheU1vbnRoID0gZC5nZXRVVENEYXRlKCksXG4gICAgICAgIGhvdXJzID0gZC5nZXRVVENIb3VycygpLFxuICAgICAgICBzdGFydFllYXIgPSB0aGlzLnN0YXJ0RGF0ZS5nZXRVVENGdWxsWWVhcigpLFxuICAgICAgICBzdGFydE1vbnRoID0gdGhpcy5zdGFydERhdGUuZ2V0VVRDTW9udGgoKSxcbiAgICAgICAgZW5kWWVhciA9IHRoaXMuZW5kRGF0ZS5nZXRVVENGdWxsWWVhcigpLFxuICAgICAgICBlbmRNb250aCA9IHRoaXMuZW5kRGF0ZS5nZXRVVENNb250aCgpICsgMSxcbiAgICAgICAgY3VycmVudERhdGUgPSAobmV3IFVUQ0RhdGUodGhpcy5kYXRlLmdldFVUQ0Z1bGxZZWFyKCksIHRoaXMuZGF0ZS5nZXRVVENNb250aCgpLCB0aGlzLmRhdGUuZ2V0VVRDRGF0ZSgpKSkudmFsdWVPZigpLFxuICAgICAgICB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICB0aGlzLnNldFRpdGxlKCcuZGF0ZXRpbWVwaWNrZXItZGF5cycsIGRhdGVzW3RoaXMubGFuZ3VhZ2VdLm1vbnRoc1ttb250aF0gKyAnICcgKyB5ZWFyKVxuICAgICAgaWYgKHRoaXMuZm9ybWF0Vmlld1R5cGUgPT09ICd0aW1lJykge1xuICAgICAgICB2YXIgZm9ybWF0dGVkID0gdGhpcy5nZXRGb3JtYXR0ZWREYXRlKCk7XG4gICAgICAgIHRoaXMuc2V0VGl0bGUoJy5kYXRldGltZXBpY2tlci1ob3VycycsIGZvcm1hdHRlZCk7XG4gICAgICAgIHRoaXMuc2V0VGl0bGUoJy5kYXRldGltZXBpY2tlci1taW51dGVzJywgZm9ybWF0dGVkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0VGl0bGUoJy5kYXRldGltZXBpY2tlci1ob3VycycsIGRheU1vbnRoICsgJyAnICsgZGF0ZXNbdGhpcy5sYW5ndWFnZV0ubW9udGhzW21vbnRoXSArICcgJyArIHllYXIpO1xuICAgICAgICB0aGlzLnNldFRpdGxlKCcuZGF0ZXRpbWVwaWNrZXItbWludXRlcycsIGRheU1vbnRoICsgJyAnICsgZGF0ZXNbdGhpcy5sYW5ndWFnZV0ubW9udGhzW21vbnRoXSArICcgJyArIHllYXIpO1xuICAgICAgfVxuICAgICAgdGhpcy5waWNrZXIuZmluZCgndGZvb3QgdGgudG9kYXknKVxuICAgICAgICAudGV4dChkYXRlc1t0aGlzLmxhbmd1YWdlXS50b2RheSB8fCBkYXRlc1snZW4nXS50b2RheSlcbiAgICAgICAgLnRvZ2dsZSh0aGlzLnRvZGF5QnRuICE9PSBmYWxzZSk7XG4gICAgICB0aGlzLnBpY2tlci5maW5kKCd0Zm9vdCB0aC5jbGVhcicpXG4gICAgICAgIC50ZXh0KGRhdGVzW3RoaXMubGFuZ3VhZ2VdLmNsZWFyIHx8IGRhdGVzWydlbiddLmNsZWFyKVxuICAgICAgICAudG9nZ2xlKHRoaXMuY2xlYXJCdG4gIT09IGZhbHNlKTtcbiAgICAgIHRoaXMudXBkYXRlTmF2QXJyb3dzKCk7XG4gICAgICB0aGlzLmZpbGxNb250aHMoKTtcbiAgICAgIHZhciBwcmV2TW9udGggPSBVVENEYXRlKHllYXIsIG1vbnRoIC0gMSwgMjgsIDAsIDAsIDAsIDApLFxuICAgICAgICBkYXkgPSBEUEdsb2JhbC5nZXREYXlzSW5Nb250aChwcmV2TW9udGguZ2V0VVRDRnVsbFllYXIoKSwgcHJldk1vbnRoLmdldFVUQ01vbnRoKCkpO1xuICAgICAgcHJldk1vbnRoLnNldFVUQ0RhdGUoZGF5KTtcbiAgICAgIHByZXZNb250aC5zZXRVVENEYXRlKGRheSAtIChwcmV2TW9udGguZ2V0VVRDRGF5KCkgLSB0aGlzLndlZWtTdGFydCArIDcpICUgNyk7XG4gICAgICB2YXIgbmV4dE1vbnRoID0gbmV3IERhdGUocHJldk1vbnRoKTtcbiAgICAgIG5leHRNb250aC5zZXRVVENEYXRlKG5leHRNb250aC5nZXRVVENEYXRlKCkgKyA0Mik7XG4gICAgICBuZXh0TW9udGggPSBuZXh0TW9udGgudmFsdWVPZigpO1xuICAgICAgdmFyIGh0bWwgPSBbXTtcbiAgICAgIHZhciBjbGFzc2VzO1xuICAgICAgd2hpbGUgKHByZXZNb250aC52YWx1ZU9mKCkgPCBuZXh0TW9udGgpIHtcbiAgICAgICAgaWYgKHByZXZNb250aC5nZXRVVENEYXkoKSA9PT0gdGhpcy53ZWVrU3RhcnQpIHtcbiAgICAgICAgICBodG1sLnB1c2goJzx0cj4nKTtcbiAgICAgICAgfVxuICAgICAgICBjbGFzc2VzID0gdGhpcy5vblJlbmRlckRheShwcmV2TW9udGgpO1xuICAgICAgICBpZiAocHJldk1vbnRoLmdldFVUQ0Z1bGxZZWFyKCkgPCB5ZWFyIHx8IChwcmV2TW9udGguZ2V0VVRDRnVsbFllYXIoKSA9PT0geWVhciAmJiBwcmV2TW9udGguZ2V0VVRDTW9udGgoKSA8IG1vbnRoKSkge1xuICAgICAgICAgIGNsYXNzZXMucHVzaCgnb2xkJyk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJldk1vbnRoLmdldFVUQ0Z1bGxZZWFyKCkgPiB5ZWFyIHx8IChwcmV2TW9udGguZ2V0VVRDRnVsbFllYXIoKSA9PT0geWVhciAmJiBwcmV2TW9udGguZ2V0VVRDTW9udGgoKSA+IG1vbnRoKSkge1xuICAgICAgICAgIGNsYXNzZXMucHVzaCgnbmV3Jyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29tcGFyZSBpbnRlcm5hbCBVVEMgZGF0ZSB3aXRoIGxvY2FsIHRvZGF5LCBub3QgVVRDIHRvZGF5XG4gICAgICAgIGlmICh0aGlzLnRvZGF5SGlnaGxpZ2h0ICYmXG4gICAgICAgICAgcHJldk1vbnRoLmdldFVUQ0Z1bGxZZWFyKCkgPT09IHRvZGF5LmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgICAgICBwcmV2TW9udGguZ2V0VVRDTW9udGgoKSA9PT0gdG9kYXkuZ2V0TW9udGgoKSAmJlxuICAgICAgICAgIHByZXZNb250aC5nZXRVVENEYXRlKCkgPT09IHRvZGF5LmdldERhdGUoKSkge1xuICAgICAgICAgIGNsYXNzZXMucHVzaCgndG9kYXknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJldk1vbnRoLnZhbHVlT2YoKSA9PT0gY3VycmVudERhdGUpIHtcbiAgICAgICAgICBjbGFzc2VzLnB1c2goJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgocHJldk1vbnRoLnZhbHVlT2YoKSArIDg2NDAwMDAwKSA8PSB0aGlzLnN0YXJ0RGF0ZSB8fCBwcmV2TW9udGgudmFsdWVPZigpID4gdGhpcy5lbmREYXRlIHx8XG4gICAgICAgICAgJC5pbkFycmF5KHByZXZNb250aC5nZXRVVENEYXkoKSwgdGhpcy5kYXlzT2ZXZWVrRGlzYWJsZWQpICE9PSAtMSB8fFxuICAgICAgICAgICQuaW5BcnJheShwcmV2TW9udGgudG9EYXRlU3RyaW5nKCksIHRoaXMuZGF0ZXNEaXNhYmxlZCkgIT09IC0xKSB7XG4gICAgICAgICAgY2xhc3Nlcy5wdXNoKCdkaXNhYmxlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGh0bWwucHVzaCgnPHRkIGNsYXNzPVwiJyArIGNsYXNzZXMuam9pbignICcpICsgJ1wiPicgKyBwcmV2TW9udGguZ2V0VVRDRGF0ZSgpICsgJzwvdGQ+Jyk7XG4gICAgICAgIGlmIChwcmV2TW9udGguZ2V0VVRDRGF5KCkgPT09IHRoaXMud2Vla0VuZCkge1xuICAgICAgICAgIGh0bWwucHVzaCgnPC90cj4nKTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2TW9udGguc2V0VVRDRGF0ZShwcmV2TW9udGguZ2V0VVRDRGF0ZSgpICsgMSk7XG4gICAgICB9XG4gICAgICB0aGlzLnBpY2tlci5maW5kKCcuZGF0ZXRpbWVwaWNrZXItZGF5cyB0Ym9keScpLmVtcHR5KCkuYXBwZW5kKGh0bWwuam9pbignJykpO1xuXG4gICAgICBodG1sID0gW107XG4gICAgICB2YXIgdHh0ID0gJycsIG1lcmlkaWFuID0gJycsIG1lcmlkaWFuT2xkID0gJyc7XG4gICAgICB2YXIgaG91cnNEaXNhYmxlZCA9IHRoaXMuaG91cnNEaXNhYmxlZCB8fCBbXTtcbiAgICAgIGQgPSBuZXcgRGF0ZSh0aGlzLnZpZXdEYXRlKVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNDsgaSsrKSB7XG4gICAgICAgIGQuc2V0VVRDSG91cnMoaSk7XG4gICAgICAgIGNsYXNzZXMgPSB0aGlzLm9uUmVuZGVySG91cihkKTtcbiAgICAgICAgaWYgKGhvdXJzRGlzYWJsZWQuaW5kZXhPZihpKSAhPT0gLTEpIHtcbiAgICAgICAgICBjbGFzc2VzLnB1c2goJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFjdHVhbCA9IFVUQ0RhdGUoeWVhciwgbW9udGgsIGRheU1vbnRoLCBpKTtcbiAgICAgICAgLy8gV2Ugd2FudCB0aGUgcHJldmlvdXMgaG91ciBmb3IgdGhlIHN0YXJ0RGF0ZVxuICAgICAgICBpZiAoKGFjdHVhbC52YWx1ZU9mKCkgKyAzNjAwMDAwKSA8PSB0aGlzLnN0YXJ0RGF0ZSB8fCBhY3R1YWwudmFsdWVPZigpID4gdGhpcy5lbmREYXRlKSB7XG4gICAgICAgICAgY2xhc3Nlcy5wdXNoKCdkaXNhYmxlZCcpO1xuICAgICAgICB9IGVsc2UgaWYgKGhvdXJzID09PSBpKSB7XG4gICAgICAgICAgY2xhc3Nlcy5wdXNoKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zaG93TWVyaWRpYW4gJiYgZGF0ZXNbdGhpcy5sYW5ndWFnZV0ubWVyaWRpZW0ubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgbWVyaWRpYW4gPSAoaSA8IDEyID8gZGF0ZXNbdGhpcy5sYW5ndWFnZV0ubWVyaWRpZW1bMF0gOiBkYXRlc1t0aGlzLmxhbmd1YWdlXS5tZXJpZGllbVsxXSk7XG4gICAgICAgICAgaWYgKG1lcmlkaWFuICE9PSBtZXJpZGlhbk9sZCkge1xuICAgICAgICAgICAgaWYgKG1lcmlkaWFuT2xkICE9PSAnJykge1xuICAgICAgICAgICAgICBodG1sLnB1c2goJzwvZmllbGRzZXQ+Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBodG1sLnB1c2goJzxmaWVsZHNldCBjbGFzcz1cImhvdXJcIj48bGVnZW5kPicgKyBtZXJpZGlhbi50b1VwcGVyQ2FzZSgpICsgJzwvbGVnZW5kPicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXJpZGlhbk9sZCA9IG1lcmlkaWFuO1xuICAgICAgICAgIHR4dCA9IChpICUgMTIgPyBpICUgMTIgOiAxMik7XG4gICAgICAgICAgaWYgKGkgPCAxMikge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdob3VyX2FtJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnaG91cl9wbScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBodG1sLnB1c2goJzxzcGFuIGNsYXNzPVwiJyArIGNsYXNzZXMuam9pbignICcpICsgJ1wiPicgKyB0eHQgKyAnPC9zcGFuPicpO1xuICAgICAgICAgIGlmIChpID09PSAyMykge1xuICAgICAgICAgICAgaHRtbC5wdXNoKCc8L2ZpZWxkc2V0PicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0eHQgPSBpICsgJzowMCc7XG4gICAgICAgICAgaHRtbC5wdXNoKCc8c3BhbiBjbGFzcz1cIicgKyBjbGFzc2VzLmpvaW4oJyAnKSArICdcIj4nICsgdHh0ICsgJzwvc3Bhbj4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5waWNrZXIuZmluZCgnLmRhdGV0aW1lcGlja2VyLWhvdXJzIHRkJykuaHRtbChodG1sLmpvaW4oJycpKTtcblxuICAgICAgaHRtbCA9IFtdO1xuICAgICAgdHh0ID0gJyc7XG4gICAgICBtZXJpZGlhbiA9ICcnO1xuICAgICAgbWVyaWRpYW5PbGQgPSAnJztcbiAgICAgIHZhciBtaW51dGVzRGlzYWJsZWQgPSB0aGlzLm1pbnV0ZXNEaXNhYmxlZCB8fCBbXTtcbiAgICAgIGQgPSBuZXcgRGF0ZSh0aGlzLnZpZXdEYXRlKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjA7IGkgKz0gdGhpcy5taW51dGVTdGVwKSB7XG4gICAgICAgIGlmIChtaW51dGVzRGlzYWJsZWQuaW5kZXhPZihpKSAhPT0gLTEpIGNvbnRpbnVlO1xuICAgICAgICBkLnNldFVUQ01pbnV0ZXMoaSk7XG4gICAgICAgIGQuc2V0VVRDU2Vjb25kcygwKTtcbiAgICAgICAgY2xhc3NlcyA9IHRoaXMub25SZW5kZXJNaW51dGUoZCk7XG4gICAgICAgIGlmICh0aGlzLnNob3dNZXJpZGlhbiAmJiBkYXRlc1t0aGlzLmxhbmd1YWdlXS5tZXJpZGllbS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICBtZXJpZGlhbiA9IChob3VycyA8IDEyID8gZGF0ZXNbdGhpcy5sYW5ndWFnZV0ubWVyaWRpZW1bMF0gOiBkYXRlc1t0aGlzLmxhbmd1YWdlXS5tZXJpZGllbVsxXSk7XG4gICAgICAgICAgaWYgKG1lcmlkaWFuICE9PSBtZXJpZGlhbk9sZCkge1xuICAgICAgICAgICAgaWYgKG1lcmlkaWFuT2xkICE9PSAnJykge1xuICAgICAgICAgICAgICBodG1sLnB1c2goJzwvZmllbGRzZXQ+Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBodG1sLnB1c2goJzxmaWVsZHNldCBjbGFzcz1cIm1pbnV0ZVwiPjxsZWdlbmQ+JyArIG1lcmlkaWFuLnRvVXBwZXJDYXNlKCkgKyAnPC9sZWdlbmQ+Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lcmlkaWFuT2xkID0gbWVyaWRpYW47XG4gICAgICAgICAgdHh0ID0gKGhvdXJzICUgMTIgPyBob3VycyAlIDEyIDogMTIpO1xuICAgICAgICAgIGh0bWwucHVzaCgnPHNwYW4gY2xhc3M9XCInICsgY2xhc3Nlcy5qb2luKCcgJykgKyAnXCI+JyArIHR4dCArICc6JyArIChpIDwgMTAgPyAnMCcgKyBpIDogaSkgKyAnPC9zcGFuPicpO1xuICAgICAgICAgIGlmIChpID09PSA1OSkge1xuICAgICAgICAgICAgaHRtbC5wdXNoKCc8L2ZpZWxkc2V0PicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0eHQgPSBpICsgJzowMCc7XG4gICAgICAgICAgaHRtbC5wdXNoKCc8c3BhbiBjbGFzcz1cIicgKyBjbGFzc2VzLmpvaW4oJyAnKSArICdcIj4nICsgaG91cnMgKyAnOicgKyAoaSA8IDEwID8gJzAnICsgaSA6IGkpICsgJzwvc3Bhbj4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5waWNrZXIuZmluZCgnLmRhdGV0aW1lcGlja2VyLW1pbnV0ZXMgdGQnKS5odG1sKGh0bWwuam9pbignJykpO1xuXG4gICAgICB2YXIgY3VycmVudFllYXIgPSB0aGlzLmRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICAgIHZhciBtb250aHMgPSB0aGlzLnNldFRpdGxlKCcuZGF0ZXRpbWVwaWNrZXItbW9udGhzJywgeWVhcilcbiAgICAgICAgLmVuZCgpXG4gICAgICAgIC5maW5kKCcubW9udGgnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICBpZiAoY3VycmVudFllYXIgPT09IHllYXIpIHtcbiAgICAgICAgLy8gZ2V0VVRDTW9udGhzKCkgcmV0dXJucyAwIGJhc2VkLCBhbmQgd2UgbmVlZCB0byBzZWxlY3QgdGhlIG5leHQgb25lXG4gICAgICAgIC8vIFRvIGNhdGVyIGJvb3RzdHJhcCAyIHdlIGRvbid0IG5lZWQgdG8gc2VsZWN0IHRoZSBuZXh0IG9uZVxuICAgICAgICBtb250aHMuZXEodGhpcy5kYXRlLmdldFVUQ01vbnRoKCkpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH1cbiAgICAgIGlmICh5ZWFyIDwgc3RhcnRZZWFyIHx8IHllYXIgPiBlbmRZZWFyKSB7XG4gICAgICAgIG1vbnRocy5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIH1cbiAgICAgIGlmICh5ZWFyID09PSBzdGFydFllYXIpIHtcbiAgICAgICAgbW9udGhzLnNsaWNlKDAsIHN0YXJ0TW9udGgpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgfVxuICAgICAgaWYgKHllYXIgPT09IGVuZFllYXIpIHtcbiAgICAgICAgbW9udGhzLnNsaWNlKGVuZE1vbnRoKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIH1cblxuICAgICAgaHRtbCA9ICcnO1xuICAgICAgeWVhciA9IHBhcnNlSW50KHllYXIgLyAxMCwgMTApICogMTA7XG4gICAgICB2YXIgeWVhckNvbnQgPSB0aGlzLnNldFRpdGxlKCcuZGF0ZXRpbWVwaWNrZXIteWVhcnMnLCB5ZWFyICsgJy0nICsgKHllYXIgKyA5KSlcbiAgICAgICAgLmVuZCgpXG4gICAgICAgIC5maW5kKCd0ZCcpO1xuICAgICAgeWVhciAtPSAxO1xuICAgICAgZCA9IG5ldyBEYXRlKHRoaXMudmlld0RhdGUpO1xuICAgICAgZm9yICh2YXIgaSA9IC0xOyBpIDwgMTE7IGkrKykge1xuICAgICAgICBkLnNldFVUQ0Z1bGxZZWFyKHllYXIpO1xuICAgICAgICBjbGFzc2VzID0gdGhpcy5vblJlbmRlclllYXIoZCk7XG4gICAgICAgIGlmIChpID09PSAtMSB8fCBpID09PSAxMCkge1xuICAgICAgICAgIGNsYXNzZXMucHVzaChvbGQpO1xuICAgICAgICB9XG4gICAgICAgIGh0bWwgKz0gJzxzcGFuIGNsYXNzPVwiJyArIGNsYXNzZXMuam9pbignICcpICsgJ1wiPicgKyB5ZWFyICsgJzwvc3Bhbj4nO1xuICAgICAgICB5ZWFyICs9IDE7XG4gICAgICB9XG4gICAgICB5ZWFyQ29udC5odG1sKGh0bWwpO1xuICAgICAgdGhpcy5wbGFjZSgpO1xuICAgIH0sXG5cbiAgICB1cGRhdGVOYXZBcnJvd3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBkID0gbmV3IERhdGUodGhpcy52aWV3RGF0ZSksXG4gICAgICAgIHllYXIgPSBkLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgICAgIG1vbnRoID0gZC5nZXRVVENNb250aCgpLFxuICAgICAgICBkYXkgPSBkLmdldFVUQ0RhdGUoKSxcbiAgICAgICAgaG91ciA9IGQuZ2V0VVRDSG91cnMoKTtcbiAgICAgIHN3aXRjaCAodGhpcy52aWV3TW9kZSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgaWYgKHllYXIgPD0gdGhpcy5zdGFydERhdGUuZ2V0VVRDRnVsbFllYXIoKVxuICAgICAgICAgICAgJiYgbW9udGggPD0gdGhpcy5zdGFydERhdGUuZ2V0VVRDTW9udGgoKVxuICAgICAgICAgICAgJiYgZGF5IDw9IHRoaXMuc3RhcnREYXRlLmdldFVUQ0RhdGUoKVxuICAgICAgICAgICAgJiYgaG91ciA8PSB0aGlzLnN0YXJ0RGF0ZS5nZXRVVENIb3VycygpKSB7XG4gICAgICAgICAgICB0aGlzLnBpY2tlci5maW5kKCcucHJldicpLmNzcyh7dmlzaWJpbGl0eTogJ2hpZGRlbid9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5waWNrZXIuZmluZCgnLnByZXYnKS5jc3Moe3Zpc2liaWxpdHk6ICd2aXNpYmxlJ30pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoeWVhciA+PSB0aGlzLmVuZERhdGUuZ2V0VVRDRnVsbFllYXIoKVxuICAgICAgICAgICAgJiYgbW9udGggPj0gdGhpcy5lbmREYXRlLmdldFVUQ01vbnRoKClcbiAgICAgICAgICAgICYmIGRheSA+PSB0aGlzLmVuZERhdGUuZ2V0VVRDRGF0ZSgpXG4gICAgICAgICAgICAmJiBob3VyID49IHRoaXMuZW5kRGF0ZS5nZXRVVENIb3VycygpKSB7XG4gICAgICAgICAgICB0aGlzLnBpY2tlci5maW5kKCcubmV4dCcpLmNzcyh7dmlzaWJpbGl0eTogJ2hpZGRlbid9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5waWNrZXIuZmluZCgnLm5leHQnKS5jc3Moe3Zpc2liaWxpdHk6ICd2aXNpYmxlJ30pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmICh5ZWFyIDw9IHRoaXMuc3RhcnREYXRlLmdldFVUQ0Z1bGxZZWFyKClcbiAgICAgICAgICAgICYmIG1vbnRoIDw9IHRoaXMuc3RhcnREYXRlLmdldFVUQ01vbnRoKClcbiAgICAgICAgICAgICYmIGRheSA8PSB0aGlzLnN0YXJ0RGF0ZS5nZXRVVENEYXRlKCkpIHtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLmZpbmQoJy5wcmV2JykuY3NzKHt2aXNpYmlsaXR5OiAnaGlkZGVuJ30pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBpY2tlci5maW5kKCcucHJldicpLmNzcyh7dmlzaWJpbGl0eTogJ3Zpc2libGUnfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh5ZWFyID49IHRoaXMuZW5kRGF0ZS5nZXRVVENGdWxsWWVhcigpXG4gICAgICAgICAgICAmJiBtb250aCA+PSB0aGlzLmVuZERhdGUuZ2V0VVRDTW9udGgoKVxuICAgICAgICAgICAgJiYgZGF5ID49IHRoaXMuZW5kRGF0ZS5nZXRVVENEYXRlKCkpIHtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLmZpbmQoJy5uZXh0JykuY3NzKHt2aXNpYmlsaXR5OiAnaGlkZGVuJ30pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBpY2tlci5maW5kKCcubmV4dCcpLmNzcyh7dmlzaWJpbGl0eTogJ3Zpc2libGUnfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgaWYgKHllYXIgPD0gdGhpcy5zdGFydERhdGUuZ2V0VVRDRnVsbFllYXIoKVxuICAgICAgICAgICAgJiYgbW9udGggPD0gdGhpcy5zdGFydERhdGUuZ2V0VVRDTW9udGgoKSkge1xuICAgICAgICAgICAgdGhpcy5waWNrZXIuZmluZCgnLnByZXYnKS5jc3Moe3Zpc2liaWxpdHk6ICdoaWRkZW4nfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLmZpbmQoJy5wcmV2JykuY3NzKHt2aXNpYmlsaXR5OiAndmlzaWJsZSd9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHllYXIgPj0gdGhpcy5lbmREYXRlLmdldFVUQ0Z1bGxZZWFyKClcbiAgICAgICAgICAgICYmIG1vbnRoID49IHRoaXMuZW5kRGF0ZS5nZXRVVENNb250aCgpKSB7XG4gICAgICAgICAgICB0aGlzLnBpY2tlci5maW5kKCcubmV4dCcpLmNzcyh7dmlzaWJpbGl0eTogJ2hpZGRlbid9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5waWNrZXIuZmluZCgnLm5leHQnKS5jc3Moe3Zpc2liaWxpdHk6ICd2aXNpYmxlJ30pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgaWYgKHllYXIgPD0gdGhpcy5zdGFydERhdGUuZ2V0VVRDRnVsbFllYXIoKSkge1xuICAgICAgICAgICAgdGhpcy5waWNrZXIuZmluZCgnLnByZXYnKS5jc3Moe3Zpc2liaWxpdHk6ICdoaWRkZW4nfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLmZpbmQoJy5wcmV2JykuY3NzKHt2aXNpYmlsaXR5OiAndmlzaWJsZSd9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHllYXIgPj0gdGhpcy5lbmREYXRlLmdldFVUQ0Z1bGxZZWFyKCkpIHtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLmZpbmQoJy5uZXh0JykuY3NzKHt2aXNpYmlsaXR5OiAnaGlkZGVuJ30pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBpY2tlci5maW5kKCcubmV4dCcpLmNzcyh7dmlzaWJpbGl0eTogJ3Zpc2libGUnfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBtb3VzZXdoZWVsOiBmdW5jdGlvbiAoZSkge1xuXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICBpZiAodGhpcy53aGVlbFBhdXNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy53aGVlbFBhdXNlID0gdHJ1ZTtcblxuICAgICAgdmFyIG9yaWdpbmFsRXZlbnQgPSBlLm9yaWdpbmFsRXZlbnQ7XG5cbiAgICAgIHZhciBkZWx0YSA9IG9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YTtcblxuICAgICAgdmFyIG1vZGUgPSBkZWx0YSA+IDAgPyAxIDogKGRlbHRhID09PSAwKSA/IDAgOiAtMTtcblxuICAgICAgaWYgKHRoaXMud2hlZWxWaWV3TW9kZU5hdmlnYXRpb25JbnZlcnNlRGlyZWN0aW9uKSB7XG4gICAgICAgIG1vZGUgPSAtbW9kZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zaG93TW9kZShtb2RlKTtcblxuICAgICAgc2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB0aGlzLndoZWVsUGF1c2UgPSBmYWxzZVxuXG4gICAgICB9LCB0aGlzKSwgdGhpcy53aGVlbFZpZXdNb2RlTmF2aWdhdGlvbkRlbGF5KTtcblxuICAgIH0sXG5cbiAgICBjbGljazogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgdGFyZ2V0ID0gJChlLnRhcmdldCkuY2xvc2VzdCgnc3BhbiwgdGQsIHRoLCBsZWdlbmQnKTtcbiAgICAgIGlmICh0YXJnZXQuaXMoJy4nICsgdGhpcy5pY29udHlwZSkpIHtcbiAgICAgICAgdGFyZ2V0ID0gJCh0YXJnZXQpLnBhcmVudCgpLmNsb3Nlc3QoJ3NwYW4sIHRkLCB0aCwgbGVnZW5kJyk7XG4gICAgICB9XG4gICAgICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpZiAodGFyZ2V0LmlzKCcuZGlzYWJsZWQnKSkge1xuICAgICAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKHtcbiAgICAgICAgICAgIHR5cGU6ICAgICAgJ291dE9mUmFuZ2UnLFxuICAgICAgICAgICAgZGF0ZTogICAgICB0aGlzLnZpZXdEYXRlLFxuICAgICAgICAgICAgc3RhcnREYXRlOiB0aGlzLnN0YXJ0RGF0ZSxcbiAgICAgICAgICAgIGVuZERhdGU6ICAgdGhpcy5lbmREYXRlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodGFyZ2V0WzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICBjYXNlICd0aCc6XG4gICAgICAgICAgICBzd2l0Y2ggKHRhcmdldFswXS5jbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgY2FzZSAnc3dpdGNoJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNb2RlKDEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlICdwcmV2JzpcbiAgICAgICAgICAgICAgY2FzZSAnbmV4dCc6XG4gICAgICAgICAgICAgICAgdmFyIGRpciA9IERQR2xvYmFsLm1vZGVzW3RoaXMudmlld01vZGVdLm5hdlN0ZXAgKiAodGFyZ2V0WzBdLmNsYXNzTmFtZSA9PT0gJ3ByZXYnID8gLTEgOiAxKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMudmlld01vZGUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3RGF0ZSA9IHRoaXMubW92ZUhvdXIodGhpcy52aWV3RGF0ZSwgZGlyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlld0RhdGUgPSB0aGlzLm1vdmVEYXRlKHRoaXMudmlld0RhdGUsIGRpcik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdEYXRlID0gdGhpcy5tb3ZlTW9udGgodGhpcy52aWV3RGF0ZSwgZGlyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlld0RhdGUgPSB0aGlzLm1vdmVZZWFyKHRoaXMudmlld0RhdGUsIGRpcik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmZpbGwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudHJpZ2dlcih7XG4gICAgICAgICAgICAgICAgICB0eXBlOiAgICAgIHRhcmdldFswXS5jbGFzc05hbWUgKyAnOicgKyB0aGlzLmNvbnZlcnRWaWV3TW9kZVRleHQodGhpcy52aWV3TW9kZSksXG4gICAgICAgICAgICAgICAgICBkYXRlOiAgICAgIHRoaXMudmlld0RhdGUsXG4gICAgICAgICAgICAgICAgICBzdGFydERhdGU6IHRoaXMuc3RhcnREYXRlLFxuICAgICAgICAgICAgICAgICAgZW5kRGF0ZTogICB0aGlzLmVuZERhdGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAnY2xlYXInOlxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvY2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAndG9kYXknOlxuICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICBkYXRlID0gVVRDRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCksIGRhdGUuZ2V0SG91cnMoKSwgZGF0ZS5nZXRNaW51dGVzKCksIGRhdGUuZ2V0U2Vjb25kcygpLCAwKTtcblxuICAgICAgICAgICAgICAgIC8vIFJlc3BlY3Qgc3RhcnREYXRlIGFuZCBlbmREYXRlLlxuICAgICAgICAgICAgICAgIGlmIChkYXRlIDwgdGhpcy5zdGFydERhdGUpIGRhdGUgPSB0aGlzLnN0YXJ0RGF0ZTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRlID4gdGhpcy5lbmREYXRlKSBkYXRlID0gdGhpcy5lbmREYXRlO1xuXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZSA9IHRoaXMuc3RhcnRWaWV3TW9kZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNb2RlKDApO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldERhdGUoZGF0ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0b2Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdzcGFuJzpcbiAgICAgICAgICAgIGlmICghdGFyZ2V0LmlzKCcuZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICB2YXIgeWVhciA9IHRoaXMudmlld0RhdGUuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgICAgICAgICAgICBtb250aCA9IHRoaXMudmlld0RhdGUuZ2V0VVRDTW9udGgoKSxcbiAgICAgICAgICAgICAgICBkYXkgPSB0aGlzLnZpZXdEYXRlLmdldFVUQ0RhdGUoKSxcbiAgICAgICAgICAgICAgICBob3VycyA9IHRoaXMudmlld0RhdGUuZ2V0VVRDSG91cnMoKSxcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gdGhpcy52aWV3RGF0ZS5nZXRVVENNaW51dGVzKCksXG4gICAgICAgICAgICAgICAgc2Vjb25kcyA9IHRoaXMudmlld0RhdGUuZ2V0VVRDU2Vjb25kcygpO1xuXG4gICAgICAgICAgICAgIGlmICh0YXJnZXQuaXMoJy5tb250aCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3RGF0ZS5zZXRVVENEYXRlKDEpO1xuICAgICAgICAgICAgICAgIG1vbnRoID0gdGFyZ2V0LnBhcmVudCgpLmZpbmQoJ3NwYW4nKS5pbmRleCh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGRheSA9IHRoaXMudmlld0RhdGUuZ2V0VVRDRGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudmlld0RhdGUuc2V0VVRDTW9udGgobW9udGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGFuZ2VNb250aCcsXG4gICAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLnZpZXdEYXRlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld1NlbGVjdCA+PSAzKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9zZXREYXRlKFVUQ0RhdGUoeWVhciwgbW9udGgsIGRheSwgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIDApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LmlzKCcueWVhcicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3RGF0ZS5zZXRVVENEYXRlKDEpO1xuICAgICAgICAgICAgICAgIHllYXIgPSBwYXJzZUludCh0YXJnZXQudGV4dCgpLCAxMCkgfHwgMDtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdEYXRlLnNldFVUQ0Z1bGxZZWFyKHllYXIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGFuZ2VZZWFyJyxcbiAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMudmlld0RhdGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3U2VsZWN0ID49IDQpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX3NldERhdGUoVVRDRGF0ZSh5ZWFyLCBtb250aCwgZGF5LCBob3VycywgbWludXRlcywgc2Vjb25kcywgMCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQuaXMoJy5ob3VyJykpIHtcbiAgICAgICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRhcmdldC50ZXh0KCksIDEwKSB8fCAwO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuaGFzQ2xhc3MoJ2hvdXJfYW0nKSB8fCB0YXJnZXQuaGFzQ2xhc3MoJ2hvdXJfcG0nKSkge1xuICAgICAgICAgICAgICAgICAgaWYgKGhvdXJzID09PSAxMiAmJiB0YXJnZXQuaGFzQ2xhc3MoJ2hvdXJfYW0nKSkge1xuICAgICAgICAgICAgICAgICAgICBob3VycyA9IDA7XG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhvdXJzICE9PSAxMiAmJiB0YXJnZXQuaGFzQ2xhc3MoJ2hvdXJfcG0nKSkge1xuICAgICAgICAgICAgICAgICAgICBob3VycyArPSAxMjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3RGF0ZS5zZXRVVENIb3Vycyhob3Vycyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoYW5nZUhvdXInLFxuICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy52aWV3RGF0ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdTZWxlY3QgPj0gMSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0RGF0ZShVVENEYXRlKHllYXIsIG1vbnRoLCBkYXksIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCAwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5pcygnLm1pbnV0ZScpKSB7XG4gICAgICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRhcmdldC50ZXh0KCkuc3Vic3RyKHRhcmdldC50ZXh0KCkuaW5kZXhPZignOicpICsgMSksIDEwKSB8fCAwO1xuICAgICAgICAgICAgICAgIHRoaXMudmlld0RhdGUuc2V0VVRDTWludXRlcyhtaW51dGVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudHJpZ2dlcih7XG4gICAgICAgICAgICAgICAgICB0eXBlOiAnY2hhbmdlTWludXRlJyxcbiAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMudmlld0RhdGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3U2VsZWN0ID49IDApIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX3NldERhdGUoVVRDRGF0ZSh5ZWFyLCBtb250aCwgZGF5LCBob3VycywgbWludXRlcywgc2Vjb25kcywgMCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodGhpcy52aWV3TW9kZSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBvbGRWaWV3TW9kZSA9IHRoaXMudmlld01vZGU7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TW9kZSgtMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsKCk7XG4gICAgICAgICAgICAgICAgaWYgKG9sZFZpZXdNb2RlID09PSB0aGlzLnZpZXdNb2RlICYmIHRoaXMuYXV0b2Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0b2Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3RkJzpcbiAgICAgICAgICAgIGlmICh0YXJnZXQuaXMoJy5kYXknKSAmJiAhdGFyZ2V0LmlzKCcuZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICB2YXIgZGF5ID0gcGFyc2VJbnQodGFyZ2V0LnRleHQoKSwgMTApIHx8IDE7XG4gICAgICAgICAgICAgIHZhciB5ZWFyID0gdGhpcy52aWV3RGF0ZS5nZXRVVENGdWxsWWVhcigpLFxuICAgICAgICAgICAgICAgIG1vbnRoID0gdGhpcy52aWV3RGF0ZS5nZXRVVENNb250aCgpLFxuICAgICAgICAgICAgICAgIGhvdXJzID0gdGhpcy52aWV3RGF0ZS5nZXRVVENIb3VycygpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSB0aGlzLnZpZXdEYXRlLmdldFVUQ01pbnV0ZXMoKSxcbiAgICAgICAgICAgICAgICBzZWNvbmRzID0gdGhpcy52aWV3RGF0ZS5nZXRVVENTZWNvbmRzKCk7XG4gICAgICAgICAgICAgIGlmICh0YXJnZXQuaXMoJy5vbGQnKSkge1xuICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgbW9udGggPSAxMTtcbiAgICAgICAgICAgICAgICAgIHllYXIgLT0gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgbW9udGggLT0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LmlzKCcubmV3JykpIHtcbiAgICAgICAgICAgICAgICBpZiAobW9udGggPT09IDExKSB7XG4gICAgICAgICAgICAgICAgICBtb250aCA9IDA7XG4gICAgICAgICAgICAgICAgICB5ZWFyICs9IDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG1vbnRoICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMudmlld0RhdGUuc2V0VVRDRnVsbFllYXIoeWVhcik7XG4gICAgICAgICAgICAgIHRoaXMudmlld0RhdGUuc2V0VVRDTW9udGgobW9udGgsIGRheSk7XG4gICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnY2hhbmdlRGF5JyxcbiAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLnZpZXdEYXRlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBpZiAodGhpcy52aWV3U2VsZWN0ID49IDIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXREYXRlKFVUQ0RhdGUoeWVhciwgbW9udGgsIGRheSwgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIDApKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9sZFZpZXdNb2RlID0gdGhpcy52aWV3TW9kZTtcbiAgICAgICAgICAgIHRoaXMuc2hvd01vZGUoLTEpO1xuICAgICAgICAgICAgdGhpcy5maWxsKCk7XG4gICAgICAgICAgICBpZiAob2xkVmlld01vZGUgPT09IHRoaXMudmlld01vZGUgJiYgdGhpcy5hdXRvY2xvc2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBfc2V0RGF0ZTogZnVuY3Rpb24gKGRhdGUsIHdoaWNoKSB7XG4gICAgICBpZiAoIXdoaWNoIHx8IHdoaWNoID09PSAnZGF0ZScpXG4gICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XG4gICAgICBpZiAoIXdoaWNoIHx8IHdoaWNoID09PSAndmlldycpXG4gICAgICAgIHRoaXMudmlld0RhdGUgPSBkYXRlO1xuICAgICAgdGhpcy5maWxsKCk7XG4gICAgICB0aGlzLnNldFZhbHVlKCk7XG4gICAgICB2YXIgZWxlbWVudDtcbiAgICAgIGlmICh0aGlzLmlzSW5wdXQpIHtcbiAgICAgICAgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgZWxlbWVudCA9IHRoaXMuZWxlbWVudC5maW5kKCdpbnB1dCcpO1xuICAgICAgfVxuICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5jaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKHtcbiAgICAgICAgdHlwZTogJ2NoYW5nZURhdGUnLFxuICAgICAgICBkYXRlOiB0aGlzLmdldERhdGUoKVxuICAgICAgfSk7XG4gICAgICBpZihkYXRlID09PSBudWxsKVxuICAgICAgICB0aGlzLmRhdGUgPSB0aGlzLnZpZXdEYXRlO1xuICAgIH0sXG5cbiAgICBtb3ZlTWludXRlOiBmdW5jdGlvbiAoZGF0ZSwgZGlyKSB7XG4gICAgICBpZiAoIWRpcikgcmV0dXJuIGRhdGU7XG4gICAgICB2YXIgbmV3X2RhdGUgPSBuZXcgRGF0ZShkYXRlLnZhbHVlT2YoKSk7XG4gICAgICAvL2RpciA9IGRpciA+IDAgPyAxIDogLTE7XG4gICAgICBuZXdfZGF0ZS5zZXRVVENNaW51dGVzKG5ld19kYXRlLmdldFVUQ01pbnV0ZXMoKSArIChkaXIgKiB0aGlzLm1pbnV0ZVN0ZXApKTtcbiAgICAgIHJldHVybiBuZXdfZGF0ZTtcbiAgICB9LFxuXG4gICAgbW92ZUhvdXI6IGZ1bmN0aW9uIChkYXRlLCBkaXIpIHtcbiAgICAgIGlmICghZGlyKSByZXR1cm4gZGF0ZTtcbiAgICAgIHZhciBuZXdfZGF0ZSA9IG5ldyBEYXRlKGRhdGUudmFsdWVPZigpKTtcbiAgICAgIC8vZGlyID0gZGlyID4gMCA/IDEgOiAtMTtcbiAgICAgIG5ld19kYXRlLnNldFVUQ0hvdXJzKG5ld19kYXRlLmdldFVUQ0hvdXJzKCkgKyBkaXIpO1xuICAgICAgcmV0dXJuIG5ld19kYXRlO1xuICAgIH0sXG5cbiAgICBtb3ZlRGF0ZTogZnVuY3Rpb24gKGRhdGUsIGRpcikge1xuICAgICAgaWYgKCFkaXIpIHJldHVybiBkYXRlO1xuICAgICAgdmFyIG5ld19kYXRlID0gbmV3IERhdGUoZGF0ZS52YWx1ZU9mKCkpO1xuICAgICAgLy9kaXIgPSBkaXIgPiAwID8gMSA6IC0xO1xuICAgICAgbmV3X2RhdGUuc2V0VVRDRGF0ZShuZXdfZGF0ZS5nZXRVVENEYXRlKCkgKyBkaXIpO1xuICAgICAgcmV0dXJuIG5ld19kYXRlO1xuICAgIH0sXG5cbiAgICBtb3ZlTW9udGg6IGZ1bmN0aW9uIChkYXRlLCBkaXIpIHtcbiAgICAgIGlmICghZGlyKSByZXR1cm4gZGF0ZTtcbiAgICAgIHZhciBuZXdfZGF0ZSA9IG5ldyBEYXRlKGRhdGUudmFsdWVPZigpKSxcbiAgICAgICAgZGF5ID0gbmV3X2RhdGUuZ2V0VVRDRGF0ZSgpLFxuICAgICAgICBtb250aCA9IG5ld19kYXRlLmdldFVUQ01vbnRoKCksXG4gICAgICAgIG1hZyA9IE1hdGguYWJzKGRpciksXG4gICAgICAgIG5ld19tb250aCwgdGVzdDtcbiAgICAgIGRpciA9IGRpciA+IDAgPyAxIDogLTE7XG4gICAgICBpZiAobWFnID09PSAxKSB7XG4gICAgICAgIHRlc3QgPSBkaXIgPT09IC0xXG4gICAgICAgICAgLy8gSWYgZ29pbmcgYmFjayBvbmUgbW9udGgsIG1ha2Ugc3VyZSBtb250aCBpcyBub3QgY3VycmVudCBtb250aFxuICAgICAgICAgIC8vIChlZywgTWFyIDMxIC0+IEZlYiAzMSA9PT0gRmViIDI4LCBub3QgTWFyIDAyKVxuICAgICAgICAgID8gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBuZXdfZGF0ZS5nZXRVVENNb250aCgpID09PSBtb250aDtcbiAgICAgICAgfVxuICAgICAgICAgIC8vIElmIGdvaW5nIGZvcndhcmQgb25lIG1vbnRoLCBtYWtlIHN1cmUgbW9udGggaXMgYXMgZXhwZWN0ZWRcbiAgICAgICAgICAvLyAoZWcsIEphbiAzMSAtPiBGZWIgMzEgPT09IEZlYiAyOCwgbm90IE1hciAwMilcbiAgICAgICAgICA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gbmV3X2RhdGUuZ2V0VVRDTW9udGgoKSAhPT0gbmV3X21vbnRoO1xuICAgICAgICB9O1xuICAgICAgICBuZXdfbW9udGggPSBtb250aCArIGRpcjtcbiAgICAgICAgbmV3X2RhdGUuc2V0VVRDTW9udGgobmV3X21vbnRoKTtcbiAgICAgICAgLy8gRGVjIC0+IEphbiAoMTIpIG9yIEphbiAtPiBEZWMgKC0xKSAtLSBsaW1pdCBleHBlY3RlZCBkYXRlIHRvIDAtMTFcbiAgICAgICAgaWYgKG5ld19tb250aCA8IDAgfHwgbmV3X21vbnRoID4gMTEpXG4gICAgICAgICAgbmV3X21vbnRoID0gKG5ld19tb250aCArIDEyKSAlIDEyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG1hZ25pdHVkZXMgPjEsIG1vdmUgb25lIG1vbnRoIGF0IGEgdGltZS4uLlxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hZzsgaSsrKVxuICAgICAgICAgIC8vIC4uLndoaWNoIG1pZ2h0IGRlY3JlYXNlIHRoZSBkYXkgKGVnLCBKYW4gMzEgdG8gRmViIDI4LCBldGMpLi4uXG4gICAgICAgICAgbmV3X2RhdGUgPSB0aGlzLm1vdmVNb250aChuZXdfZGF0ZSwgZGlyKTtcbiAgICAgICAgLy8gLi4udGhlbiByZXNldCB0aGUgZGF5LCBrZWVwaW5nIGl0IGluIHRoZSBuZXcgbW9udGhcbiAgICAgICAgbmV3X21vbnRoID0gbmV3X2RhdGUuZ2V0VVRDTW9udGgoKTtcbiAgICAgICAgbmV3X2RhdGUuc2V0VVRDRGF0ZShkYXkpO1xuICAgICAgICB0ZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBuZXdfbW9udGggIT09IG5ld19kYXRlLmdldFVUQ01vbnRoKCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICAvLyBDb21tb24gZGF0ZS1yZXNldHRpbmcgbG9vcCAtLSBpZiBkYXRlIGlzIGJleW9uZCBlbmQgb2YgbW9udGgsIG1ha2UgaXRcbiAgICAgIC8vIGVuZCBvZiBtb250aFxuICAgICAgd2hpbGUgKHRlc3QoKSkge1xuICAgICAgICBuZXdfZGF0ZS5zZXRVVENEYXRlKC0tZGF5KTtcbiAgICAgICAgbmV3X2RhdGUuc2V0VVRDTW9udGgobmV3X21vbnRoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdfZGF0ZTtcbiAgICB9LFxuXG4gICAgbW92ZVllYXI6IGZ1bmN0aW9uIChkYXRlLCBkaXIpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vdmVNb250aChkYXRlLCBkaXIgKiAxMik7XG4gICAgfSxcblxuICAgIGRhdGVXaXRoaW5SYW5nZTogZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgIHJldHVybiBkYXRlID49IHRoaXMuc3RhcnREYXRlICYmIGRhdGUgPD0gdGhpcy5lbmREYXRlO1xuICAgIH0sXG5cbiAgICBrZXlkb3duOiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKHRoaXMucGlja2VyLmlzKCc6bm90KDp2aXNpYmxlKScpKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSAvLyBhbGxvdyBlc2NhcGUgdG8gaGlkZSBhbmQgcmUtc2hvdyBwaWNrZXJcbiAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGRhdGVDaGFuZ2VkID0gZmFsc2UsXG4gICAgICAgIGRpciwgbmV3RGF0ZSwgbmV3Vmlld0RhdGU7XG4gICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICBjYXNlIDI3OiAvLyBlc2NhcGVcbiAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzc6IC8vIGxlZnRcbiAgICAgICAgY2FzZSAzOTogLy8gcmlnaHRcbiAgICAgICAgICBpZiAoIXRoaXMua2V5Ym9hcmROYXZpZ2F0aW9uKSBicmVhaztcbiAgICAgICAgICBkaXIgPSBlLmtleUNvZGUgPT09IDM3ID8gLTEgOiAxO1xuICAgICAgICAgIHZhciB2aWV3TW9kZSA9IHRoaXMudmlld01vZGU7XG4gICAgICAgICAgaWYgKGUuY3RybEtleSkge1xuICAgICAgICAgICAgdmlld01vZGUgKz0gMjtcbiAgICAgICAgICB9IGVsc2UgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIHZpZXdNb2RlICs9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh2aWV3TW9kZSA9PT0gNCkge1xuICAgICAgICAgICAgbmV3RGF0ZSA9IHRoaXMubW92ZVllYXIodGhpcy5kYXRlLCBkaXIpO1xuICAgICAgICAgICAgbmV3Vmlld0RhdGUgPSB0aGlzLm1vdmVZZWFyKHRoaXMudmlld0RhdGUsIGRpcik7XG4gICAgICAgICAgfSBlbHNlIGlmICh2aWV3TW9kZSA9PT0gMykge1xuICAgICAgICAgICAgbmV3RGF0ZSA9IHRoaXMubW92ZU1vbnRoKHRoaXMuZGF0ZSwgZGlyKTtcbiAgICAgICAgICAgIG5ld1ZpZXdEYXRlID0gdGhpcy5tb3ZlTW9udGgodGhpcy52aWV3RGF0ZSwgZGlyKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHZpZXdNb2RlID09PSAyKSB7XG4gICAgICAgICAgICBuZXdEYXRlID0gdGhpcy5tb3ZlRGF0ZSh0aGlzLmRhdGUsIGRpcik7XG4gICAgICAgICAgICBuZXdWaWV3RGF0ZSA9IHRoaXMubW92ZURhdGUodGhpcy52aWV3RGF0ZSwgZGlyKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHZpZXdNb2RlID09PSAxKSB7XG4gICAgICAgICAgICBuZXdEYXRlID0gdGhpcy5tb3ZlSG91cih0aGlzLmRhdGUsIGRpcik7XG4gICAgICAgICAgICBuZXdWaWV3RGF0ZSA9IHRoaXMubW92ZUhvdXIodGhpcy52aWV3RGF0ZSwgZGlyKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHZpZXdNb2RlID09PSAwKSB7XG4gICAgICAgICAgICBuZXdEYXRlID0gdGhpcy5tb3ZlTWludXRlKHRoaXMuZGF0ZSwgZGlyKTtcbiAgICAgICAgICAgIG5ld1ZpZXdEYXRlID0gdGhpcy5tb3ZlTWludXRlKHRoaXMudmlld0RhdGUsIGRpcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLmRhdGVXaXRoaW5SYW5nZShuZXdEYXRlKSkge1xuICAgICAgICAgICAgdGhpcy5kYXRlID0gbmV3RGF0ZTtcbiAgICAgICAgICAgIHRoaXMudmlld0RhdGUgPSBuZXdWaWV3RGF0ZTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBkYXRlQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM4OiAvLyB1cFxuICAgICAgICBjYXNlIDQwOiAvLyBkb3duXG4gICAgICAgICAgaWYgKCF0aGlzLmtleWJvYXJkTmF2aWdhdGlvbikgYnJlYWs7XG4gICAgICAgICAgZGlyID0gZS5rZXlDb2RlID09PSAzOCA/IC0xIDogMTtcbiAgICAgICAgICB2aWV3TW9kZSA9IHRoaXMudmlld01vZGU7XG4gICAgICAgICAgaWYgKGUuY3RybEtleSkge1xuICAgICAgICAgICAgdmlld01vZGUgKz0gMjtcbiAgICAgICAgICB9IGVsc2UgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIHZpZXdNb2RlICs9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh2aWV3TW9kZSA9PT0gNCkge1xuICAgICAgICAgICAgbmV3RGF0ZSA9IHRoaXMubW92ZVllYXIodGhpcy5kYXRlLCBkaXIpO1xuICAgICAgICAgICAgbmV3Vmlld0RhdGUgPSB0aGlzLm1vdmVZZWFyKHRoaXMudmlld0RhdGUsIGRpcik7XG4gICAgICAgICAgfSBlbHNlIGlmICh2aWV3TW9kZSA9PT0gMykge1xuICAgICAgICAgICAgbmV3RGF0ZSA9IHRoaXMubW92ZU1vbnRoKHRoaXMuZGF0ZSwgZGlyKTtcbiAgICAgICAgICAgIG5ld1ZpZXdEYXRlID0gdGhpcy5tb3ZlTW9udGgodGhpcy52aWV3RGF0ZSwgZGlyKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHZpZXdNb2RlID09PSAyKSB7XG4gICAgICAgICAgICBuZXdEYXRlID0gdGhpcy5tb3ZlRGF0ZSh0aGlzLmRhdGUsIGRpciAqIDcpO1xuICAgICAgICAgICAgbmV3Vmlld0RhdGUgPSB0aGlzLm1vdmVEYXRlKHRoaXMudmlld0RhdGUsIGRpciAqIDcpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodmlld01vZGUgPT09IDEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dNZXJpZGlhbikge1xuICAgICAgICAgICAgICBuZXdEYXRlID0gdGhpcy5tb3ZlSG91cih0aGlzLmRhdGUsIGRpciAqIDYpO1xuICAgICAgICAgICAgICBuZXdWaWV3RGF0ZSA9IHRoaXMubW92ZUhvdXIodGhpcy52aWV3RGF0ZSwgZGlyICogNik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuZXdEYXRlID0gdGhpcy5tb3ZlSG91cih0aGlzLmRhdGUsIGRpciAqIDQpO1xuICAgICAgICAgICAgICBuZXdWaWV3RGF0ZSA9IHRoaXMubW92ZUhvdXIodGhpcy52aWV3RGF0ZSwgZGlyICogNCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICh2aWV3TW9kZSA9PT0gMCkge1xuICAgICAgICAgICAgbmV3RGF0ZSA9IHRoaXMubW92ZU1pbnV0ZSh0aGlzLmRhdGUsIGRpciAqIDQpO1xuICAgICAgICAgICAgbmV3Vmlld0RhdGUgPSB0aGlzLm1vdmVNaW51dGUodGhpcy52aWV3RGF0ZSwgZGlyICogNCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLmRhdGVXaXRoaW5SYW5nZShuZXdEYXRlKSkge1xuICAgICAgICAgICAgdGhpcy5kYXRlID0gbmV3RGF0ZTtcbiAgICAgICAgICAgIHRoaXMudmlld0RhdGUgPSBuZXdWaWV3RGF0ZTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBkYXRlQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEzOiAvLyBlbnRlclxuICAgICAgICAgIGlmICh0aGlzLnZpZXdNb2RlICE9PSAwKSB7XG4gICAgICAgICAgICB2YXIgb2xkVmlld01vZGUgPSB0aGlzLnZpZXdNb2RlO1xuICAgICAgICAgICAgdGhpcy5zaG93TW9kZSgtMSk7XG4gICAgICAgICAgICB0aGlzLmZpbGwoKTtcbiAgICAgICAgICAgIGlmIChvbGRWaWV3TW9kZSA9PT0gdGhpcy52aWV3TW9kZSAmJiB0aGlzLmF1dG9jbG9zZSkge1xuICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5maWxsKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvY2xvc2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA5OiAvLyB0YWJcbiAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChkYXRlQ2hhbmdlZCkge1xuICAgICAgICB2YXIgZWxlbWVudDtcbiAgICAgICAgaWYgKHRoaXMuaXNJbnB1dCkge1xuICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgICBlbGVtZW50ID0gdGhpcy5lbGVtZW50LmZpbmQoJ2lucHV0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICBlbGVtZW50LmNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKHtcbiAgICAgICAgICB0eXBlOiAnY2hhbmdlRGF0ZScsXG4gICAgICAgICAgZGF0ZTogdGhpcy5nZXREYXRlKClcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHNob3dNb2RlOiBmdW5jdGlvbiAoZGlyKSB7XG4gICAgICBpZiAoZGlyKSB7XG4gICAgICAgIHZhciBuZXdWaWV3TW9kZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKERQR2xvYmFsLm1vZGVzLmxlbmd0aCAtIDEsIHRoaXMudmlld01vZGUgKyBkaXIpKTtcbiAgICAgICAgaWYgKG5ld1ZpZXdNb2RlID49IHRoaXMubWluVmlldyAmJiBuZXdWaWV3TW9kZSA8PSB0aGlzLm1heFZpZXcpIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQudHJpZ2dlcih7XG4gICAgICAgICAgICB0eXBlOiAgICAgICAgJ2NoYW5nZU1vZGUnLFxuICAgICAgICAgICAgZGF0ZTogICAgICAgIHRoaXMudmlld0RhdGUsXG4gICAgICAgICAgICBvbGRWaWV3TW9kZTogdGhpcy52aWV3TW9kZSxcbiAgICAgICAgICAgIG5ld1ZpZXdNb2RlOiBuZXdWaWV3TW9kZVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdGhpcy52aWV3TW9kZSA9IG5ld1ZpZXdNb2RlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKlxuICAgICAgIHZpdGFsZXRzOiBmaXhpbmcgYnVnIG9mIHZlcnkgc3BlY2lhbCBjb25kaXRpb25zOlxuICAgICAgIGpxdWVyeSAxLjcuMSArIHdlYmtpdCArIHNob3cgaW5saW5lIGRhdGV0aW1lcGlja2VyIGluIGJvb3RzdHJhcCBwb3BvdmVyLlxuICAgICAgIE1ldGhvZCBzaG93KCkgZG9lcyBub3Qgc2V0IGRpc3BsYXkgY3NzIGNvcnJlY3RseSBhbmQgZGF0ZXRpbWVwaWNrZXIgaXMgbm90IHNob3duLlxuICAgICAgIENoYW5nZWQgdG8gLmNzcygnZGlzcGxheScsICdibG9jaycpIHNvbHZlIHRoZSBwcm9ibGVtLlxuICAgICAgIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdml0YWxldHMveC1lZGl0YWJsZS9pc3N1ZXMvMzdcblxuICAgICAgIEluIGpxdWVyeSAxLjcuMisgZXZlcnl0aGluZyB3b3JrcyBmaW5lLlxuICAgICAgICovXG4gICAgICAvL3RoaXMucGlja2VyLmZpbmQoJz5kaXYnKS5oaWRlKCkuZmlsdGVyKCcuZGF0ZXRpbWVwaWNrZXItJytEUEdsb2JhbC5tb2Rlc1t0aGlzLnZpZXdNb2RlXS5jbHNOYW1lKS5zaG93KCk7XG4gICAgICB0aGlzLnBpY2tlci5maW5kKCc+ZGl2JykuaGlkZSgpLmZpbHRlcignLmRhdGV0aW1lcGlja2VyLScgKyBEUEdsb2JhbC5tb2Rlc1t0aGlzLnZpZXdNb2RlXS5jbHNOYW1lKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgICAgIHRoaXMudXBkYXRlTmF2QXJyb3dzKCk7XG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9zZXREYXRlKG51bGwsICdkYXRlJyk7XG4gICAgfSxcblxuICAgIGNvbnZlcnRWaWV3TW9kZVRleHQ6ICBmdW5jdGlvbiAodmlld01vZGUpIHtcbiAgICAgIHN3aXRjaCAodmlld01vZGUpIHtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHJldHVybiAnZGVjYWRlJztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAneWVhcic7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICByZXR1cm4gJ21vbnRoJztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHJldHVybiAnZGF5JztcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnaG91cic7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBvbGQgPSAkLmZuLmRhdGV0aW1lcGlja2VyO1xuICAkLmZuLmRhdGV0aW1lcGlja2VyID0gZnVuY3Rpb24gKG9wdGlvbikge1xuICAgIHZhciBhcmdzID0gQXJyYXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICBhcmdzLnNoaWZ0KCk7XG4gICAgdmFyIGludGVybmFsX3JldHVybjtcbiAgICB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgZGF0YSA9ICR0aGlzLmRhdGEoJ2RhdGV0aW1lcGlja2VyJyksXG4gICAgICAgIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09PSAnb2JqZWN0JyAmJiBvcHRpb247XG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgJHRoaXMuZGF0YSgnZGF0ZXRpbWVwaWNrZXInLCAoZGF0YSA9IG5ldyBEYXRldGltZXBpY2tlcih0aGlzLCAkLmV4dGVuZCh7fSwgJC5mbi5kYXRldGltZXBpY2tlci5kZWZhdWx0cywgb3B0aW9ucykpKSk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGRhdGFbb3B0aW9uXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpbnRlcm5hbF9yZXR1cm4gPSBkYXRhW29wdGlvbl0uYXBwbHkoZGF0YSwgYXJncyk7XG4gICAgICAgIGlmIChpbnRlcm5hbF9yZXR1cm4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChpbnRlcm5hbF9yZXR1cm4gIT09IHVuZGVmaW5lZClcbiAgICAgIHJldHVybiBpbnRlcm5hbF9yZXR1cm47XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgJC5mbi5kYXRldGltZXBpY2tlci5kZWZhdWx0cyA9IHtcbiAgfTtcbiAgJC5mbi5kYXRldGltZXBpY2tlci5Db25zdHJ1Y3RvciA9IERhdGV0aW1lcGlja2VyO1xuICB2YXIgZGF0ZXMgPSAkLmZuLmRhdGV0aW1lcGlja2VyLmRhdGVzID0ge1xuICAgIGVuOiB7XG4gICAgICBkYXlzOiAgICAgICAgWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheScsICdTdW5kYXknXSxcbiAgICAgIGRheXNTaG9ydDogICBbJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCcsICdTdW4nXSxcbiAgICAgIGRheXNNaW46ICAgICBbJ1N1JywgJ01vJywgJ1R1JywgJ1dlJywgJ1RoJywgJ0ZyJywgJ1NhJywgJ1N1J10sXG4gICAgICBtb250aHM6ICAgICAgWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ10sXG4gICAgICBtb250aHNTaG9ydDogWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddLFxuICAgICAgbWVyaWRpZW06ICAgIFsnYW0nLCAncG0nXSxcbiAgICAgIHN1ZmZpeDogICAgICBbJ3N0JywgJ25kJywgJ3JkJywgJ3RoJ10sXG4gICAgICB0b2RheTogICAgICAgJ1RvZGF5JyxcbiAgICAgIGNsZWFyOiAgICAgICAnQ2xlYXInXG4gICAgfVxuICB9O1xuXG4gIHZhciBEUEdsb2JhbCA9IHtcbiAgICBtb2RlczogICAgICAgICAgICBbXG4gICAgICB7XG4gICAgICAgIGNsc05hbWU6ICdtaW51dGVzJyxcbiAgICAgICAgbmF2Rm5jOiAgJ0hvdXJzJyxcbiAgICAgICAgbmF2U3RlcDogMVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xzTmFtZTogJ2hvdXJzJyxcbiAgICAgICAgbmF2Rm5jOiAgJ0RhdGUnLFxuICAgICAgICBuYXZTdGVwOiAxXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbHNOYW1lOiAnZGF5cycsXG4gICAgICAgIG5hdkZuYzogICdNb250aCcsXG4gICAgICAgIG5hdlN0ZXA6IDFcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsc05hbWU6ICdtb250aHMnLFxuICAgICAgICBuYXZGbmM6ICAnRnVsbFllYXInLFxuICAgICAgICBuYXZTdGVwOiAxXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbHNOYW1lOiAneWVhcnMnLFxuICAgICAgICBuYXZGbmM6ICAnRnVsbFllYXInLFxuICAgICAgICBuYXZTdGVwOiAxMFxuICAgICAgfVxuICAgIF0sXG4gICAgaXNMZWFwWWVhcjogICAgICAgZnVuY3Rpb24gKHllYXIpIHtcbiAgICAgIHJldHVybiAoKCh5ZWFyICUgNCA9PT0gMCkgJiYgKHllYXIgJSAxMDAgIT09IDApKSB8fCAoeWVhciAlIDQwMCA9PT0gMCkpXG4gICAgfSxcbiAgICBnZXREYXlzSW5Nb250aDogICBmdW5jdGlvbiAoeWVhciwgbW9udGgpIHtcbiAgICAgIHJldHVybiBbMzEsIChEUEdsb2JhbC5pc0xlYXBZZWFyKHllYXIpID8gMjkgOiAyOCksIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXVttb250aF1cbiAgICB9LFxuICAgIGdldERlZmF1bHRGb3JtYXQ6IGZ1bmN0aW9uICh0eXBlLCBmaWVsZCkge1xuICAgICAgaWYgKHR5cGUgPT09ICdzdGFuZGFyZCcpIHtcbiAgICAgICAgaWYgKGZpZWxkID09PSAnaW5wdXQnKVxuICAgICAgICAgIHJldHVybiAneXl5eS1tbS1kZCBoaDppaSc7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gJ3l5eXktbW0tZGQgaGg6aWk6c3MnO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncGhwJykge1xuICAgICAgICBpZiAoZmllbGQgPT09ICdpbnB1dCcpXG4gICAgICAgICAgcmV0dXJuICdZLW0tZCBIOmknO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgcmV0dXJuICdZLW0tZCBIOmk6cyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZm9ybWF0IHR5cGUuJyk7XG4gICAgICB9XG4gICAgfSxcbiAgICB2YWxpZFBhcnRzOiBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgaWYgKHR5cGUgPT09ICdzdGFuZGFyZCcpIHtcbiAgICAgICAgcmV0dXJuIC90fGhoP3xISD98cHxQfHp8WnxpaT98c3M/fGRkP3xERD98bW0/fE1NP3x5eSg/Onl5KT8vZztcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BocCcpIHtcbiAgICAgICAgcmV0dXJuIC9bZERqbE53ekZtTW5TdHlZYUFCZ0doSGlzXS9nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGZvcm1hdCB0eXBlLicpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbm9ucHVuY3R1YXRpb246IC9bXiAtXFwvOi1AXFxbLWB7LX5cXHRcXG5cXHJUWl0rL2csXG4gICAgcGFyc2VGb3JtYXQ6IGZ1bmN0aW9uIChmb3JtYXQsIHR5cGUpIHtcbiAgICAgIC8vIElFIHRyZWF0cyBcXDAgYXMgYSBzdHJpbmcgZW5kIGluIGlucHV0cyAodHJ1bmNhdGluZyB0aGUgdmFsdWUpLFxuICAgICAgLy8gc28gaXQncyBhIGJhZCBmb3JtYXQgZGVsaW1pdGVyLCBhbnl3YXlcbiAgICAgIHZhciBzZXBhcmF0b3JzID0gZm9ybWF0LnJlcGxhY2UodGhpcy52YWxpZFBhcnRzKHR5cGUpLCAnXFwwJykuc3BsaXQoJ1xcMCcpLFxuICAgICAgICBwYXJ0cyA9IGZvcm1hdC5tYXRjaCh0aGlzLnZhbGlkUGFydHModHlwZSkpO1xuICAgICAgaWYgKCFzZXBhcmF0b3JzIHx8ICFzZXBhcmF0b3JzLmxlbmd0aCB8fCAhcGFydHMgfHwgcGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBkYXRlIGZvcm1hdC4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7c2VwYXJhdG9yczogc2VwYXJhdG9ycywgcGFydHM6IHBhcnRzfTtcbiAgICB9LFxuICAgIHBhcnNlRGF0ZTogZnVuY3Rpb24gKGRhdGUsIGZvcm1hdCwgbGFuZ3VhZ2UsIHR5cGUsIHRpbWV6b25lKSB7XG4gICAgICBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgdmFyIGRhdGVVVEMgPSBuZXcgRGF0ZShkYXRlLnZhbHVlT2YoKSAtIGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwKTtcbiAgICAgICAgZGF0ZVVUQy5zZXRNaWxsaXNlY29uZHMoMCk7XG4gICAgICAgIHJldHVybiBkYXRlVVRDO1xuICAgICAgfVxuICAgICAgaWYgKC9eXFxkezR9XFwtXFxkezEsMn1cXC1cXGR7MSwyfSQvLnRlc3QoZGF0ZSkpIHtcbiAgICAgICAgZm9ybWF0ID0gdGhpcy5wYXJzZUZvcm1hdCgneXl5eS1tbS1kZCcsIHR5cGUpO1xuICAgICAgfVxuICAgICAgaWYgKC9eXFxkezR9XFwtXFxkezEsMn1cXC1cXGR7MSwyfVtUIF1cXGR7MSwyfVxcOlxcZHsxLDJ9JC8udGVzdChkYXRlKSkge1xuICAgICAgICBmb3JtYXQgPSB0aGlzLnBhcnNlRm9ybWF0KCd5eXl5LW1tLWRkIGhoOmlpJywgdHlwZSk7XG4gICAgICB9XG4gICAgICBpZiAoL15cXGR7NH1cXC1cXGR7MSwyfVxcLVxcZHsxLDJ9W1QgXVxcZHsxLDJ9XFw6XFxkezEsMn1cXDpcXGR7MSwyfVtaXXswLDF9JC8udGVzdChkYXRlKSkge1xuICAgICAgICBmb3JtYXQgPSB0aGlzLnBhcnNlRm9ybWF0KCd5eXl5LW1tLWRkIGhoOmlpOnNzJywgdHlwZSk7XG4gICAgICB9XG4gICAgICBpZiAoL15bLStdXFxkK1tkbXd5XShbXFxzLF0rWy0rXVxcZCtbZG13eV0pKiQvLnRlc3QoZGF0ZSkpIHtcbiAgICAgICAgdmFyIHBhcnRfcmUgPSAvKFstK11cXGQrKShbZG13eV0pLyxcbiAgICAgICAgICBwYXJ0cyA9IGRhdGUubWF0Y2goLyhbLStdXFxkKykoW2Rtd3ldKS9nKSxcbiAgICAgICAgICBwYXJ0LCBkaXI7XG4gICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgcGFydCA9IHBhcnRfcmUuZXhlYyhwYXJ0c1tpXSk7XG4gICAgICAgICAgZGlyID0gcGFyc2VJbnQocGFydFsxXSk7XG4gICAgICAgICAgc3dpdGNoIChwYXJ0WzJdKSB7XG4gICAgICAgICAgICBjYXNlICdkJzpcbiAgICAgICAgICAgICAgZGF0ZS5zZXRVVENEYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpICsgZGlyKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtJzpcbiAgICAgICAgICAgICAgZGF0ZSA9IERhdGV0aW1lcGlja2VyLnByb3RvdHlwZS5tb3ZlTW9udGguY2FsbChEYXRldGltZXBpY2tlci5wcm90b3R5cGUsIGRhdGUsIGRpcik7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndyc6XG4gICAgICAgICAgICAgIGRhdGUuc2V0VVRDRGF0ZShkYXRlLmdldFVUQ0RhdGUoKSArIGRpciAqIDcpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3knOlxuICAgICAgICAgICAgICBkYXRlID0gRGF0ZXRpbWVwaWNrZXIucHJvdG90eXBlLm1vdmVZZWFyLmNhbGwoRGF0ZXRpbWVwaWNrZXIucHJvdG90eXBlLCBkYXRlLCBkaXIpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFVUQ0RhdGUoZGF0ZS5nZXRVVENGdWxsWWVhcigpLCBkYXRlLmdldFVUQ01vbnRoKCksIGRhdGUuZ2V0VVRDRGF0ZSgpLCBkYXRlLmdldFVUQ0hvdXJzKCksIGRhdGUuZ2V0VVRDTWludXRlcygpLCBkYXRlLmdldFVUQ1NlY29uZHMoKSwgMCk7XG4gICAgICB9XG4gICAgICB2YXIgcGFydHMgPSBkYXRlICYmIGRhdGUudG9TdHJpbmcoKS5tYXRjaCh0aGlzLm5vbnB1bmN0dWF0aW9uKSB8fCBbXSxcbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDAsIDAsIDAsIDAsIDAsIDAsIDApLFxuICAgICAgICBwYXJzZWQgPSB7fSxcbiAgICAgICAgc2V0dGVyc19vcmRlciA9IFsnaGgnLCAnaCcsICdpaScsICdpJywgJ3NzJywgJ3MnLCAneXl5eScsICd5eScsICdNJywgJ01NJywgJ20nLCAnbW0nLCAnRCcsICdERCcsICdkJywgJ2RkJywgJ0gnLCAnSEgnLCAncCcsICdQJywgJ3onLCAnWiddLFxuICAgICAgICBzZXR0ZXJzX21hcCA9IHtcbiAgICAgICAgICBoaDogICBmdW5jdGlvbiAoZCwgdikge1xuICAgICAgICAgICAgcmV0dXJuIGQuc2V0VVRDSG91cnModik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBoOiAgICBmdW5jdGlvbiAoZCwgdikge1xuICAgICAgICAgICAgcmV0dXJuIGQuc2V0VVRDSG91cnModik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBISDogICBmdW5jdGlvbiAoZCwgdikge1xuICAgICAgICAgICAgcmV0dXJuIGQuc2V0VVRDSG91cnModiA9PT0gMTIgPyAwIDogdik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBIOiAgICBmdW5jdGlvbiAoZCwgdikge1xuICAgICAgICAgICAgcmV0dXJuIGQuc2V0VVRDSG91cnModiA9PT0gMTIgPyAwIDogdik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpaTogICBmdW5jdGlvbiAoZCwgdikge1xuICAgICAgICAgICAgcmV0dXJuIGQuc2V0VVRDTWludXRlcyh2KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGk6ICAgIGZ1bmN0aW9uIChkLCB2KSB7XG4gICAgICAgICAgICByZXR1cm4gZC5zZXRVVENNaW51dGVzKHYpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3M6ICAgZnVuY3Rpb24gKGQsIHYpIHtcbiAgICAgICAgICAgIHJldHVybiBkLnNldFVUQ1NlY29uZHModik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzOiAgICBmdW5jdGlvbiAoZCwgdikge1xuICAgICAgICAgICAgcmV0dXJuIGQuc2V0VVRDU2Vjb25kcyh2KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHl5eXk6IGZ1bmN0aW9uIChkLCB2KSB7XG4gICAgICAgICAgICByZXR1cm4gZC5zZXRVVENGdWxsWWVhcih2KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHl5OiAgIGZ1bmN0aW9uIChkLCB2KSB7XG4gICAgICAgICAgICByZXR1cm4gZC5zZXRVVENGdWxsWWVhcigyMDAwICsgdik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBtOiAgICBmdW5jdGlvbiAoZCwgdikge1xuICAgICAgICAgICAgdiAtPSAxO1xuICAgICAgICAgICAgd2hpbGUgKHYgPCAwKSB2ICs9IDEyO1xuICAgICAgICAgICAgdiAlPSAxMjtcbiAgICAgICAgICAgIGQuc2V0VVRDTW9udGgodik7XG4gICAgICAgICAgICB3aGlsZSAoZC5nZXRVVENNb250aCgpICE9PSB2KVxuICAgICAgICAgICAgICBpZiAoaXNOYU4oZC5nZXRVVENNb250aCgpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGQuc2V0VVRDRGF0ZShkLmdldFVUQ0RhdGUoKSAtIDEpO1xuICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkOiAgICBmdW5jdGlvbiAoZCwgdikge1xuICAgICAgICAgICAgcmV0dXJuIGQuc2V0VVRDRGF0ZSh2KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHA6ICAgIGZ1bmN0aW9uIChkLCB2KSB7XG4gICAgICAgICAgICByZXR1cm4gZC5zZXRVVENIb3Vycyh2ID09PSAxID8gZC5nZXRVVENIb3VycygpICsgMTIgOiBkLmdldFVUQ0hvdXJzKCkpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgejogICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRpbWV6b25lXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB2YWwsIGZpbHRlcmVkLCBwYXJ0O1xuICAgICAgc2V0dGVyc19tYXBbJ00nXSA9IHNldHRlcnNfbWFwWydNTSddID0gc2V0dGVyc19tYXBbJ21tJ10gPSBzZXR0ZXJzX21hcFsnbSddO1xuICAgICAgc2V0dGVyc19tYXBbJ2RkJ10gPSBzZXR0ZXJzX21hcFsnZCddO1xuICAgICAgc2V0dGVyc19tYXBbJ1AnXSA9IHNldHRlcnNfbWFwWydwJ107XG4gICAgICBzZXR0ZXJzX21hcFsnWiddID0gc2V0dGVyc19tYXBbJ3onXTtcbiAgICAgIGRhdGUgPSBVVENEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSwgZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKSwgZGF0ZS5nZXRTZWNvbmRzKCkpO1xuICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gZm9ybWF0LnBhcnRzLmxlbmd0aCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgY250ID0gZm9ybWF0LnBhcnRzLmxlbmd0aDsgaSA8IGNudDsgaSsrKSB7XG4gICAgICAgICAgdmFsID0gcGFyc2VJbnQocGFydHNbaV0sIDEwKTtcbiAgICAgICAgICBwYXJ0ID0gZm9ybWF0LnBhcnRzW2ldO1xuICAgICAgICAgIGlmIChpc05hTih2YWwpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhcnQpIHtcbiAgICAgICAgICAgICAgY2FzZSAnTU0nOlxuICAgICAgICAgICAgICAgIGZpbHRlcmVkID0gJChkYXRlc1tsYW5ndWFnZV0ubW9udGhzKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgdmFyIG0gPSB0aGlzLnNsaWNlKDAsIHBhcnRzW2ldLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgICAgIHAgPSBwYXJ0c1tpXS5zbGljZSgwLCBtLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbSA9PT0gcDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YWwgPSAkLmluQXJyYXkoZmlsdGVyZWRbMF0sIGRhdGVzW2xhbmd1YWdlXS5tb250aHMpICsgMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAnTSc6XG4gICAgICAgICAgICAgICAgZmlsdGVyZWQgPSAkKGRhdGVzW2xhbmd1YWdlXS5tb250aHNTaG9ydCkuZmlsdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBtID0gdGhpcy5zbGljZSgwLCBwYXJ0c1tpXS5sZW5ndGgpLFxuICAgICAgICAgICAgICAgICAgICBwID0gcGFydHNbaV0uc2xpY2UoMCwgbS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG0udG9Mb3dlckNhc2UoKSA9PT0gcC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhbCA9ICQuaW5BcnJheShmaWx0ZXJlZFswXSwgZGF0ZXNbbGFuZ3VhZ2VdLm1vbnRoc1Nob3J0KSArIDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ3AnOlxuICAgICAgICAgICAgICBjYXNlICdQJzpcbiAgICAgICAgICAgICAgICB2YWwgPSAkLmluQXJyYXkocGFydHNbaV0udG9Mb3dlckNhc2UoKSwgZGF0ZXNbbGFuZ3VhZ2VdLm1lcmlkaWVtKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAneic6XG4gICAgICAgICAgICAgIGNhc2UgJ1onOlxuICAgICAgICAgICAgICAgIHRpbWV6b25lO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhcnNlZFtwYXJ0XSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgczsgaSA8IHNldHRlcnNfb3JkZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBzID0gc2V0dGVyc19vcmRlcltpXTtcbiAgICAgICAgICBpZiAocyBpbiBwYXJzZWQgJiYgIWlzTmFOKHBhcnNlZFtzXSkpXG4gICAgICAgICAgICBzZXR0ZXJzX21hcFtzXShkYXRlLCBwYXJzZWRbc10pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRlO1xuICAgIH0sXG4gICAgZm9ybWF0RGF0ZTogICAgICAgZnVuY3Rpb24gKGRhdGUsIGZvcm1hdCwgbGFuZ3VhZ2UsIHR5cGUsIHRpbWV6b25lKSB7XG4gICAgICBpZiAoZGF0ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgICB2YXIgdmFsO1xuICAgICAgaWYgKHR5cGUgPT09ICdzdGFuZGFyZCcpIHtcbiAgICAgICAgdmFsID0ge1xuICAgICAgICAgIHQ6ICAgIGRhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgIC8vIHllYXJcbiAgICAgICAgICB5eTogICBkYXRlLmdldFVUQ0Z1bGxZZWFyKCkudG9TdHJpbmcoKS5zdWJzdHJpbmcoMiksXG4gICAgICAgICAgeXl5eTogZGF0ZS5nZXRVVENGdWxsWWVhcigpLFxuICAgICAgICAgIC8vIG1vbnRoXG4gICAgICAgICAgbTogICAgZGF0ZS5nZXRVVENNb250aCgpICsgMSxcbiAgICAgICAgICBNOiAgICBkYXRlc1tsYW5ndWFnZV0ubW9udGhzU2hvcnRbZGF0ZS5nZXRVVENNb250aCgpXSxcbiAgICAgICAgICBNTTogICBkYXRlc1tsYW5ndWFnZV0ubW9udGhzW2RhdGUuZ2V0VVRDTW9udGgoKV0sXG4gICAgICAgICAgLy8gZGF5XG4gICAgICAgICAgZDogICAgZGF0ZS5nZXRVVENEYXRlKCksXG4gICAgICAgICAgRDogICAgZGF0ZXNbbGFuZ3VhZ2VdLmRheXNTaG9ydFtkYXRlLmdldFVUQ0RheSgpXSxcbiAgICAgICAgICBERDogICBkYXRlc1tsYW5ndWFnZV0uZGF5c1tkYXRlLmdldFVUQ0RheSgpXSxcbiAgICAgICAgICBwOiAgICAoZGF0ZXNbbGFuZ3VhZ2VdLm1lcmlkaWVtLmxlbmd0aCA9PT0gMiA/IGRhdGVzW2xhbmd1YWdlXS5tZXJpZGllbVtkYXRlLmdldFVUQ0hvdXJzKCkgPCAxMiA/IDAgOiAxXSA6ICcnKSxcbiAgICAgICAgICAvLyBob3VyXG4gICAgICAgICAgaDogICAgZGF0ZS5nZXRVVENIb3VycygpLFxuICAgICAgICAgIC8vIG1pbnV0ZVxuICAgICAgICAgIGk6ICAgIGRhdGUuZ2V0VVRDTWludXRlcygpLFxuICAgICAgICAgIC8vIHNlY29uZFxuICAgICAgICAgIHM6ICAgIGRhdGUuZ2V0VVRDU2Vjb25kcygpLFxuICAgICAgICAgIC8vIHRpbWV6b25lXG4gICAgICAgICAgejogICAgdGltZXpvbmVcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZGF0ZXNbbGFuZ3VhZ2VdLm1lcmlkaWVtLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgIHZhbC5IID0gKHZhbC5oICUgMTIgPT09IDAgPyAxMiA6IHZhbC5oICUgMTIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHZhbC5IID0gdmFsLmg7XG4gICAgICAgIH1cbiAgICAgICAgdmFsLkhIID0gKHZhbC5IIDwgMTAgPyAnMCcgOiAnJykgKyB2YWwuSDtcbiAgICAgICAgdmFsLlAgPSB2YWwucC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB2YWwuWiA9IHZhbC56O1xuICAgICAgICB2YWwuaGggPSAodmFsLmggPCAxMCA/ICcwJyA6ICcnKSArIHZhbC5oO1xuICAgICAgICB2YWwuaWkgPSAodmFsLmkgPCAxMCA/ICcwJyA6ICcnKSArIHZhbC5pO1xuICAgICAgICB2YWwuc3MgPSAodmFsLnMgPCAxMCA/ICcwJyA6ICcnKSArIHZhbC5zO1xuICAgICAgICB2YWwuZGQgPSAodmFsLmQgPCAxMCA/ICcwJyA6ICcnKSArIHZhbC5kO1xuICAgICAgICB2YWwubW0gPSAodmFsLm0gPCAxMCA/ICcwJyA6ICcnKSArIHZhbC5tO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncGhwJykge1xuICAgICAgICAvLyBwaHAgZm9ybWF0XG4gICAgICAgIHZhbCA9IHtcbiAgICAgICAgICAvLyB5ZWFyXG4gICAgICAgICAgeTogZGF0ZS5nZXRVVENGdWxsWWVhcigpLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDIpLFxuICAgICAgICAgIFk6IGRhdGUuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgICAgICAvLyBtb250aFxuICAgICAgICAgIEY6IGRhdGVzW2xhbmd1YWdlXS5tb250aHNbZGF0ZS5nZXRVVENNb250aCgpXSxcbiAgICAgICAgICBNOiBkYXRlc1tsYW5ndWFnZV0ubW9udGhzU2hvcnRbZGF0ZS5nZXRVVENNb250aCgpXSxcbiAgICAgICAgICBuOiBkYXRlLmdldFVUQ01vbnRoKCkgKyAxLFxuICAgICAgICAgIHQ6IERQR2xvYmFsLmdldERheXNJbk1vbnRoKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSwgZGF0ZS5nZXRVVENNb250aCgpKSxcbiAgICAgICAgICAvLyBkYXlcbiAgICAgICAgICBqOiBkYXRlLmdldFVUQ0RhdGUoKSxcbiAgICAgICAgICBsOiBkYXRlc1tsYW5ndWFnZV0uZGF5c1tkYXRlLmdldFVUQ0RheSgpXSxcbiAgICAgICAgICBEOiBkYXRlc1tsYW5ndWFnZV0uZGF5c1Nob3J0W2RhdGUuZ2V0VVRDRGF5KCldLFxuICAgICAgICAgIHc6IGRhdGUuZ2V0VVRDRGF5KCksIC8vIDAgLT4gNlxuICAgICAgICAgIE46IChkYXRlLmdldFVUQ0RheSgpID09PSAwID8gNyA6IGRhdGUuZ2V0VVRDRGF5KCkpLCAgICAgICAvLyAxIC0+IDdcbiAgICAgICAgICBTOiAoZGF0ZS5nZXRVVENEYXRlKCkgJSAxMCA8PSBkYXRlc1tsYW5ndWFnZV0uc3VmZml4Lmxlbmd0aCA/IGRhdGVzW2xhbmd1YWdlXS5zdWZmaXhbZGF0ZS5nZXRVVENEYXRlKCkgJSAxMCAtIDFdIDogJycpLFxuICAgICAgICAgIC8vIGhvdXJcbiAgICAgICAgICBhOiAoZGF0ZXNbbGFuZ3VhZ2VdLm1lcmlkaWVtLmxlbmd0aCA9PT0gMiA/IGRhdGVzW2xhbmd1YWdlXS5tZXJpZGllbVtkYXRlLmdldFVUQ0hvdXJzKCkgPCAxMiA/IDAgOiAxXSA6ICcnKSxcbiAgICAgICAgICBnOiAoZGF0ZS5nZXRVVENIb3VycygpICUgMTIgPT09IDAgPyAxMiA6IGRhdGUuZ2V0VVRDSG91cnMoKSAlIDEyKSxcbiAgICAgICAgICBHOiBkYXRlLmdldFVUQ0hvdXJzKCksXG4gICAgICAgICAgLy8gbWludXRlXG4gICAgICAgICAgaTogZGF0ZS5nZXRVVENNaW51dGVzKCksXG4gICAgICAgICAgLy8gc2Vjb25kXG4gICAgICAgICAgczogZGF0ZS5nZXRVVENTZWNvbmRzKClcbiAgICAgICAgfTtcbiAgICAgICAgdmFsLm0gPSAodmFsLm4gPCAxMCA/ICcwJyA6ICcnKSArIHZhbC5uO1xuICAgICAgICB2YWwuZCA9ICh2YWwuaiA8IDEwID8gJzAnIDogJycpICsgdmFsLmo7XG4gICAgICAgIHZhbC5BID0gdmFsLmEudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB2YWwuaCA9ICh2YWwuZyA8IDEwID8gJzAnIDogJycpICsgdmFsLmc7XG4gICAgICAgIHZhbC5IID0gKHZhbC5HIDwgMTAgPyAnMCcgOiAnJykgKyB2YWwuRztcbiAgICAgICAgdmFsLmkgPSAodmFsLmkgPCAxMCA/ICcwJyA6ICcnKSArIHZhbC5pO1xuICAgICAgICB2YWwucyA9ICh2YWwucyA8IDEwID8gJzAnIDogJycpICsgdmFsLnM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZm9ybWF0IHR5cGUuJyk7XG4gICAgICB9XG4gICAgICB2YXIgZGF0ZSA9IFtdLFxuICAgICAgICBzZXBzID0gJC5leHRlbmQoW10sIGZvcm1hdC5zZXBhcmF0b3JzKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBjbnQgPSBmb3JtYXQucGFydHMubGVuZ3RoOyBpIDwgY250OyBpKyspIHtcbiAgICAgICAgaWYgKHNlcHMubGVuZ3RoKSB7XG4gICAgICAgICAgZGF0ZS5wdXNoKHNlcHMuc2hpZnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZGF0ZS5wdXNoKHZhbFtmb3JtYXQucGFydHNbaV1dKTtcbiAgICAgIH1cbiAgICAgIGlmIChzZXBzLmxlbmd0aCkge1xuICAgICAgICBkYXRlLnB1c2goc2Vwcy5zaGlmdCgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRlLmpvaW4oJycpO1xuICAgIH0sXG4gICAgY29udmVydFZpZXdNb2RlOiAgZnVuY3Rpb24gKHZpZXdNb2RlKSB7XG4gICAgICBzd2l0Y2ggKHZpZXdNb2RlKSB7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSAnZGVjYWRlJzpcbiAgICAgICAgICB2aWV3TW9kZSA9IDQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSAneWVhcic6XG4gICAgICAgICAgdmlld01vZGUgPSAzO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICB2aWV3TW9kZSA9IDI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAnZGF5JzpcbiAgICAgICAgICB2aWV3TW9kZSA9IDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSAnaG91cic6XG4gICAgICAgICAgdmlld01vZGUgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmlld01vZGU7XG4gICAgfSxcbiAgICBoZWFkVGVtcGxhdGU6ICc8dGhlYWQ+JyArXG4gICAgICAgICAgICAgICAgJzx0cj4nICtcbiAgICAgICAgICAgICAgICAnPHRoIGNsYXNzPVwicHJldlwiPjxpIGNsYXNzPVwie2ljb25UeXBlfSB7bGVmdEFycm93fVwiLz48L3RoPicgK1xuICAgICAgICAgICAgICAgICc8dGggY29sc3Bhbj1cIjVcIiBjbGFzcz1cInN3aXRjaFwiPjwvdGg+JyArXG4gICAgICAgICAgICAgICAgJzx0aCBjbGFzcz1cIm5leHRcIj48aSBjbGFzcz1cIntpY29uVHlwZX0ge3JpZ2h0QXJyb3d9XCIvPjwvdGg+JyArXG4gICAgICAgICAgICAgICAgJzwvdHI+JyArXG4gICAgICAnPC90aGVhZD4nLFxuICAgIGhlYWRUZW1wbGF0ZVYzOiAnPHRoZWFkPicgK1xuICAgICAgICAgICAgICAgICc8dHI+JyArXG4gICAgICAgICAgICAgICAgJzx0aCBjbGFzcz1cInByZXZcIj48c3BhbiBjbGFzcz1cIntpY29uVHlwZX0ge2xlZnRBcnJvd31cIj48L3NwYW4+IDwvdGg+JyArXG4gICAgICAgICAgICAgICAgJzx0aCBjb2xzcGFuPVwiNVwiIGNsYXNzPVwic3dpdGNoXCI+PC90aD4nICtcbiAgICAgICAgICAgICAgICAnPHRoIGNsYXNzPVwibmV4dFwiPjxzcGFuIGNsYXNzPVwie2ljb25UeXBlfSB7cmlnaHRBcnJvd31cIj48L3NwYW4+IDwvdGg+JyArXG4gICAgICAgICAgICAgICAgJzwvdHI+JyArXG4gICAgICAnPC90aGVhZD4nLFxuICAgIGNvbnRUZW1wbGF0ZTogJzx0Ym9keT48dHI+PHRkIGNvbHNwYW49XCI3XCI+PC90ZD48L3RyPjwvdGJvZHk+JyxcbiAgICBmb290VGVtcGxhdGU6ICc8dGZvb3Q+JyArIFxuICAgICAgICAgICAgICAgICAgICAnPHRyPjx0aCBjb2xzcGFuPVwiN1wiIGNsYXNzPVwidG9kYXlcIj48L3RoPjwvdHI+JyArXG4gICAgICAgICAgICAgICAgICAgICc8dHI+PHRoIGNvbHNwYW49XCI3XCIgY2xhc3M9XCJjbGVhclwiPjwvdGg+PC90cj4nICtcbiAgICAgICAgICAgICAgICAgICc8L3Rmb290PidcbiAgfTtcbiAgRFBHbG9iYWwudGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cImRhdGV0aW1lcGlja2VyXCI+JyArXG4gICAgJzxkaXYgY2xhc3M9XCJkYXRldGltZXBpY2tlci1taW51dGVzXCI+JyArXG4gICAgJzx0YWJsZSBjbGFzcz1cIiB0YWJsZS1jb25kZW5zZWRcIj4nICtcbiAgICBEUEdsb2JhbC5oZWFkVGVtcGxhdGUgK1xuICAgIERQR2xvYmFsLmNvbnRUZW1wbGF0ZSArXG4gICAgRFBHbG9iYWwuZm9vdFRlbXBsYXRlICtcbiAgICAnPC90YWJsZT4nICtcbiAgICAnPC9kaXY+JyArXG4gICAgJzxkaXYgY2xhc3M9XCJkYXRldGltZXBpY2tlci1ob3Vyc1wiPicgK1xuICAgICc8dGFibGUgY2xhc3M9XCIgdGFibGUtY29uZGVuc2VkXCI+JyArXG4gICAgRFBHbG9iYWwuaGVhZFRlbXBsYXRlICtcbiAgICBEUEdsb2JhbC5jb250VGVtcGxhdGUgK1xuICAgIERQR2xvYmFsLmZvb3RUZW1wbGF0ZSArXG4gICAgJzwvdGFibGU+JyArXG4gICAgJzwvZGl2PicgK1xuICAgICc8ZGl2IGNsYXNzPVwiZGF0ZXRpbWVwaWNrZXItZGF5c1wiPicgK1xuICAgICc8dGFibGUgY2xhc3M9XCIgdGFibGUtY29uZGVuc2VkXCI+JyArXG4gICAgRFBHbG9iYWwuaGVhZFRlbXBsYXRlICtcbiAgICAnPHRib2R5PjwvdGJvZHk+JyArXG4gICAgRFBHbG9iYWwuZm9vdFRlbXBsYXRlICtcbiAgICAnPC90YWJsZT4nICtcbiAgICAnPC9kaXY+JyArXG4gICAgJzxkaXYgY2xhc3M9XCJkYXRldGltZXBpY2tlci1tb250aHNcIj4nICtcbiAgICAnPHRhYmxlIGNsYXNzPVwidGFibGUtY29uZGVuc2VkXCI+JyArXG4gICAgRFBHbG9iYWwuaGVhZFRlbXBsYXRlICtcbiAgICBEUEdsb2JhbC5jb250VGVtcGxhdGUgK1xuICAgIERQR2xvYmFsLmZvb3RUZW1wbGF0ZSArXG4gICAgJzwvdGFibGU+JyArXG4gICAgJzwvZGl2PicgK1xuICAgICc8ZGl2IGNsYXNzPVwiZGF0ZXRpbWVwaWNrZXIteWVhcnNcIj4nICtcbiAgICAnPHRhYmxlIGNsYXNzPVwidGFibGUtY29uZGVuc2VkXCI+JyArXG4gICAgRFBHbG9iYWwuaGVhZFRlbXBsYXRlICtcbiAgICBEUEdsb2JhbC5jb250VGVtcGxhdGUgK1xuICAgIERQR2xvYmFsLmZvb3RUZW1wbGF0ZSArXG4gICAgJzwvdGFibGU+JyArXG4gICAgJzwvZGl2PicgK1xuICAgICc8L2Rpdj4nO1xuICBEUEdsb2JhbC50ZW1wbGF0ZVYzID0gJzxkaXYgY2xhc3M9XCJkYXRldGltZXBpY2tlclwiPicgK1xuICAgICc8ZGl2IGNsYXNzPVwiZGF0ZXRpbWVwaWNrZXItbWludXRlc1wiPicgK1xuICAgICc8dGFibGUgY2xhc3M9XCIgdGFibGUtY29uZGVuc2VkXCI+JyArXG4gICAgRFBHbG9iYWwuaGVhZFRlbXBsYXRlVjMgK1xuICAgIERQR2xvYmFsLmNvbnRUZW1wbGF0ZSArXG4gICAgRFBHbG9iYWwuZm9vdFRlbXBsYXRlICtcbiAgICAnPC90YWJsZT4nICtcbiAgICAnPC9kaXY+JyArXG4gICAgJzxkaXYgY2xhc3M9XCJkYXRldGltZXBpY2tlci1ob3Vyc1wiPicgK1xuICAgICc8dGFibGUgY2xhc3M9XCIgdGFibGUtY29uZGVuc2VkXCI+JyArXG4gICAgRFBHbG9iYWwuaGVhZFRlbXBsYXRlVjMgK1xuICAgIERQR2xvYmFsLmNvbnRUZW1wbGF0ZSArXG4gICAgRFBHbG9iYWwuZm9vdFRlbXBsYXRlICtcbiAgICAnPC90YWJsZT4nICtcbiAgICAnPC9kaXY+JyArXG4gICAgJzxkaXYgY2xhc3M9XCJkYXRldGltZXBpY2tlci1kYXlzXCI+JyArXG4gICAgJzx0YWJsZSBjbGFzcz1cIiB0YWJsZS1jb25kZW5zZWRcIj4nICtcbiAgICBEUEdsb2JhbC5oZWFkVGVtcGxhdGVWMyArXG4gICAgJzx0Ym9keT48L3Rib2R5PicgK1xuICAgIERQR2xvYmFsLmZvb3RUZW1wbGF0ZSArXG4gICAgJzwvdGFibGU+JyArXG4gICAgJzwvZGl2PicgK1xuICAgICc8ZGl2IGNsYXNzPVwiZGF0ZXRpbWVwaWNrZXItbW9udGhzXCI+JyArXG4gICAgJzx0YWJsZSBjbGFzcz1cInRhYmxlLWNvbmRlbnNlZFwiPicgK1xuICAgIERQR2xvYmFsLmhlYWRUZW1wbGF0ZVYzICtcbiAgICBEUEdsb2JhbC5jb250VGVtcGxhdGUgK1xuICAgIERQR2xvYmFsLmZvb3RUZW1wbGF0ZSArXG4gICAgJzwvdGFibGU+JyArXG4gICAgJzwvZGl2PicgK1xuICAgICc8ZGl2IGNsYXNzPVwiZGF0ZXRpbWVwaWNrZXIteWVhcnNcIj4nICtcbiAgICAnPHRhYmxlIGNsYXNzPVwidGFibGUtY29uZGVuc2VkXCI+JyArXG4gICAgRFBHbG9iYWwuaGVhZFRlbXBsYXRlVjMgK1xuICAgIERQR2xvYmFsLmNvbnRUZW1wbGF0ZSArXG4gICAgRFBHbG9iYWwuZm9vdFRlbXBsYXRlICtcbiAgICAnPC90YWJsZT4nICtcbiAgICAnPC9kaXY+JyArXG4gICAgJzwvZGl2Pic7XG4gICQuZm4uZGF0ZXRpbWVwaWNrZXIuRFBHbG9iYWwgPSBEUEdsb2JhbDtcblxuICAvKiBEQVRFVElNRVBJQ0tFUiBOTyBDT05GTElDVFxuICAgKiA9PT09PT09PT09PT09PT09PT09ICovXG5cbiAgJC5mbi5kYXRldGltZXBpY2tlci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm4uZGF0ZXRpbWVwaWNrZXIgPSBvbGQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyogREFURVRJTUVQSUNLRVIgREFUQS1BUElcbiAgICogPT09PT09PT09PT09PT09PT09ICovXG5cbiAgJChkb2N1bWVudCkub24oXG4gICAgJ2ZvY3VzLmRhdGV0aW1lcGlja2VyLmRhdGEtYXBpIGNsaWNrLmRhdGV0aW1lcGlja2VyLmRhdGEtYXBpJyxcbiAgICAnW2RhdGEtcHJvdmlkZT1cImRhdGV0aW1lcGlja2VyXCJdJyxcbiAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgIGlmICgkdGhpcy5kYXRhKCdkYXRldGltZXBpY2tlcicpKSByZXR1cm47XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyBjb21wb25lbnQgY2xpY2sgcmVxdWlyZXMgdXMgdG8gZXhwbGljaXRseSBzaG93IGl0XG4gICAgICAkdGhpcy5kYXRldGltZXBpY2tlcignc2hvdycpO1xuICAgIH1cbiAgKTtcbiAgJChmdW5jdGlvbiAoKSB7XG4gICAgJCgnW2RhdGEtcHJvdmlkZT1cImRhdGV0aW1lcGlja2VyLWlubGluZVwiXScpLmRhdGV0aW1lcGlja2VyKCk7XG4gIH0pO1xuXG59KSk7XG4iLCIvKipcbiAqIFNpbXBsaWZpZWQgQ2hpbmVzZSB0cmFuc2xhdGlvbiBmb3IgYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyXG4gKiBZdWFuIENoZXVuZyA8YWR2YW5pbWFsQGdtYWlsLmNvbT5cbiAqL1xuOyhmdW5jdGlvbigkKXtcblx0JC5mbi5kYXRldGltZXBpY2tlci5kYXRlc1snemgtQ04nXSA9IHtcblx0XHRcdGRheXM6IFtcIuaYn+acn+aXpVwiLCBcIuaYn+acn+S4gFwiLCBcIuaYn+acn+S6jFwiLCBcIuaYn+acn+S4iVwiLCBcIuaYn+acn+Wbm1wiLCBcIuaYn+acn+S6lFwiLCBcIuaYn+acn+WFrVwiLCBcIuaYn+acn+aXpVwiXSxcblx0XHRcdGRheXNTaG9ydDogW1wi5ZGo5pelXCIsIFwi5ZGo5LiAXCIsIFwi5ZGo5LqMXCIsIFwi5ZGo5LiJXCIsIFwi5ZGo5ZubXCIsIFwi5ZGo5LqUXCIsIFwi5ZGo5YWtXCIsIFwi5ZGo5pelXCJdLFxuXHRcdFx0ZGF5c01pbjogIFtcIuaXpVwiLCBcIuS4gFwiLCBcIuS6jFwiLCBcIuS4iVwiLCBcIuWbm1wiLCBcIuS6lFwiLCBcIuWFrVwiLCBcIuaXpVwiXSxcblx0XHRcdG1vbnRoczogW1wi5LiA5pyIXCIsIFwi5LqM5pyIXCIsIFwi5LiJ5pyIXCIsIFwi5Zub5pyIXCIsIFwi5LqU5pyIXCIsIFwi5YWt5pyIXCIsIFwi5LiD5pyIXCIsIFwi5YWr5pyIXCIsIFwi5Lmd5pyIXCIsIFwi5Y2B5pyIXCIsIFwi5Y2B5LiA5pyIXCIsIFwi5Y2B5LqM5pyIXCJdLFxuXHRcdFx0bW9udGhzU2hvcnQ6IFtcIuS4gOaciFwiLCBcIuS6jOaciFwiLCBcIuS4ieaciFwiLCBcIuWbm+aciFwiLCBcIuS6lOaciFwiLCBcIuWFreaciFwiLCBcIuS4g+aciFwiLCBcIuWFq+aciFwiLCBcIuS5neaciFwiLCBcIuWNgeaciFwiLCBcIuWNgeS4gOaciFwiLCBcIuWNgeS6jOaciFwiXSxcblx0XHRcdHRvZGF5OiBcIuS7iuWkqVwiLFxuXHRcdFx0c3VmZml4OiBbXSxcblx0XHRcdG1lcmlkaWVtOiBbXCLkuIrljYhcIiwgXCLkuIvljYhcIl1cblx0fTtcbn0oalF1ZXJ5KSk7XG4iLCIvL+ato+W8j+acjeWKoeWZqFxyXG5cclxuLy9ib29rIHVybFxyXG5cclxuY29uc3QgaW5kZXhVcmwgPSBcImh0dHA6Ly8xMC4xNjcuMzUuMTg2OjgwODAvZmluZEJvb2svQWxsXCI7XHJcbmNvbnN0IGFkZFBvc3RVcmwgPSBcImh0dHA6Ly8xMC4xNjcuMzUuMTg2OjgwODAvZmluZEJvb2svaW5zZXJ0XCI7XHJcbmNvbnN0IG1vZGlmeVBvc3RVcmwgPSBcImh0dHA6Ly8xMC4xNjcuMzUuMTg2OjgwODAvZmluZEJvb2svdXBkYXRlXCI7XHJcblxyXG4vL3N0YWZmIHVybFxyXG5jb25zdCBzdGFmZkdldFVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xODY6ODA4MC91c2VyL1Blb3BsZVwiOyAgIC8v546w5pyJ5ZGY5belXHJcbmNvbnN0IHNpbmdsZVN0YWZmSW5mb1VybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xODY6ODA4MC91c2VyL3NlbGVjdGJ5UGFyYW1cIjsgLy/ljZXkuKrlkZjlt6Xkv6Hmga9cclxuY29uc3Qgdm9sdW50YXJ5RGVtaXNzaW9uR2V0VXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE4Njo4MDgwL3VzZXIvc2VsZWN0YnlQYXJhbT9zdGF0ZT3nprvogYxcIjsgIC8v56a76IGM5ZGY5belXHJcbmNvbnN0IGFkZFBlb3BsZVVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xODY6ODA4MC91c2VyL2FkZFN0YWZmXCI7ICAvL+a3u+WKoOWRmOW3pVxyXG5jb25zdCBtb2RpZnlQZW9wbGVVcmwgPSBcImh0dHA6Ly8xMC4xNjcuMzUuMTg2OjgwODAvdXNlci9tb2RpZnlTdGFmZlwiOyAgLy/kv67mlLnlkZjlt6VcclxuY29uc3QgZGVsZXRlUGVvcGxlVXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE4Njo4MDgwL3VzZXIvZGVsZXRlU3RhZmZcIjsgIC8v5Yig6Zmk5ZGY5belXHJcblxyXG4vL3BhdGVudCB1cmxcclxuXHJcbmNvbnN0IHBhdGVudEdldFVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xODY6ODA4MC9QYXRlbnQvdXNlclBhdGVudFwiOyAvLyDkuJPliKnkuLvpobXmkJzntKLpobXpnaLkv6Hmga/nlJ/miJBcclxuY29uc3QgYWRkUGF0ZW50VXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE4Njo4MDgwL1BhdGVudC9hZGRQYXRlbnRcIjsvLyDmt7vliqDkuJPliKnpobXpnaLkv6Hmga/nlJ/miJBcclxuY29uc3QgcGF0ZW50R2V0QWxsVXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE4Njo4MDgwL1BhdGVudC9hbGxQYXRlbnRcIjsvLyDkv67mlLnkuJPliKnpobXpnaLkv6Hmga/nlJ/miJBcclxuY29uc3QgcGF0ZW50TW9kaWZ5VXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE4Njo4MDgwL1BhdGVudC9tb2RpZnlQYXRlbnRcIjsvLyDkv67mlLnkuJPliKnpobXpnaLmj5DkuqTkv6Hmga9cclxuXHJcblxyXG4vLyB0aGVzaXMgdXJsXHJcblxyXG5jb25zdCB0aGVzaXNHZXRVcmwgPSBcImh0dHA6Ly8xMC4xNjcuMzUuMTg2OjgwODAvbWFpblRoZXNpc1wiOyAvLyDorrrmlofkuLvpobXpnaLmkJzntKLpobXpnaLkv6Hmga9cclxuY29uc3QgdGhlc2lzQWRkUG9zdFVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xODY6ODA4MC9hZGRUaGVzaXNcIjsvLyDmt7vliqDorrrmlofpobXpnaLmj5DkuqTkv6Hmga9cclxuY29uc3QgdGhlc2lzUG9zdE1vZGlmeVVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xODY6ODA4MC91cGRhdGVUaGVzaXNcIjsvLyDkv67mlLnorrrmlofpobXpnaLmj5DkuqTkv6Hmga9cclxuY29uc3QgdXBsb2FkVGhlc2lzRmlsZSA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xODY6ODA4MC91cGxvYWRGaWxlXCI7IC8v5LiK5Lyg5paH5Lu25Zyw5Z2AXHJcbmNvbnN0IGRvd25sb2FkRmlsZVVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xODY6ODA4MC9kb3dubG9hZGZpbGUvXCI7Ly8g5paH5Lu25LiL6L295Zyw5Z2AXHJcbmNvbnN0IHByZXZpZXdGaWxlVXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE4Njo4MDgwL3ZpZXdlci9cIjsvLyDmlofku7bpooTop4jlnLDlnYBcclxuXHJcbi8vIHBob3RvIHVybFxyXG5jb25zdCBwaG90b0dldFVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xODY6ODA4MC9tYWluUGhvdG9cIjtcclxuY29uc3QgYWRkUGhvdG9Qb3N0VXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE4Njo4MDgwL3VwbG9hZFBob3RvXCI7XHJcbmNvbnN0IHBob3RvVGl0bGVDaGVja1VybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xODY6ODA4MC9jaGVja1RpdGxlXCI7XHJcbmNvbnN0IHBob3RvRGV0YWlsc1VybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xODY6ODA4MC9zZWxlY3RQaG90b1wiO1xyXG5jb25zdCBkZWxldGVQaG90b1VybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xMDY6ODA4MC9kZWxldGVQaG90b1wiO1xyXG5jb25zdCBtb2RpZnlQaG90b1Bvc3RVcmwgPSBcImh0dHA6Ly8xMC4xNjcuMzUuMTA2OjgwODAvaW5zZXJ0QWN0aXZpdHlQaG90b1wiO1xyXG5cclxud2luZG93Lm9ucGFnZXNob3cgPSBmdW5jdGlvbihldmVudCkgeyAgLy/lvLrliLbpobXpnaLliLfmlrBcclxu44CA44CAaWYgKGV2ZW50LnBlcnNpc3RlZCkge1xyXG7jgIDjgIDjgIDjgIB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbuOAgOOAgH1cclxufTtcclxuIiwi77u/Ly/mraPlvI/mnI3liqHlmahcblxuLy9ib29rIHVybFxudmFyIGluZGV4VXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE3MTo4ODg4L2ZpbmRCb29rL0FsbFwiO1xudmFyIGFkZFBvc3RVcmwgPSBcImh0dHA6Ly8xMC4xNjcuMzUuMTcxOjg4ODgvZmluZEJvb2svaW5zZXJ0XCI7XG52YXIgbW9kaWZ5UG9zdFVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xNzE6ODg4OC9maW5kQm9vay91cGRhdGVcIjtcblxuLy9zdGFmZiB1cmxcbnZhciBzdGFmZkdldFVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xNzE6ODg4OC91c2VyL1Blb3BsZVwiOyAgIC8v546w5pyJ5ZGY5belXG52YXIgc2luZ2xlU3RhZmZJbmZvVXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE3MTo4ODg4L3VzZXIvc2VsZWN0YnlQYXJhbVwiOyAvL+WNleS4quWRmOW3peS/oeaBr1xudmFyIHZvbHVudGFyeURlbWlzc2lvbkdldFVybCA9IGVuY29kZVVSSShcImh0dHA6Ly8xMC4xNjcuMzUuMTcxOjg4ODgvdXNlci9zZWxlY3RieVBhcmFtP3N0YXRlPeemu+iBjFwiKTsgIC8v56a76IGM5ZGY5belXG52YXIgYWRkUGVvcGxlVXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE3MTo4ODg4L3VzZXIvYWRkU3RhZmZcIjsgIC8v5re75Yqg5ZGY5belXG52YXIgbW9kaWZ5UGVvcGxlVXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE3MTo4ODg4L3VzZXIvbW9kaWZ5U3RhZmZcIjsgIC8v5L+u5pS55ZGY5belXG52YXIgZGVsZXRlUGVvcGxlVXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE3MTo4ODg4L3VzZXIvZGVsZXRlU3RhZmZcIjsgIC8v5Yig6Zmk5ZGY5belXG5cbi8vcGF0ZW50IHVybFxuXG52YXIgcGF0ZW50R2V0VXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE3MTo4ODg4L1BhdGVudC91c2VyUGF0ZW50XCI7IC8vIOS4k+WIqeS4u+mhteaQnOe0oumhtemdouS/oeaBr+eUn+aIkFxudmFyIGFkZFBhdGVudFVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xNzE6ODg4OC9QYXRlbnQvYWRkUGF0ZW50XCI7Ly8g5re75Yqg5LiT5Yip6aG16Z2i5L+h5oGv55Sf5oiQXG52YXIgcGF0ZW50R2V0QWxsVXJsID0gXCJodHRwOi8vMTAuMTY3LjM1LjE3MTo4ODg4L1BhdGVudC9hbGxQYXRlbnRcIjsvLyDkv67mlLnkuJPliKnpobXpnaLkv6Hmga/nlJ/miJBcbnZhciBwYXRlbnRNb2RpZnlVcmwgPSBcImh0dHA6Ly8xMC4xNjcuMzUuMTcxOjg4ODgvUGF0ZW50L21vZGlmeVBhdGVudFwiOy8vIOS/ruaUueS4k+WIqemhtemdouaPkOS6pOS/oeaBr1xuXG4vL3RoZXNpcyB1cmxcbmNvbnN0IHRoZXNpc0dldFVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xNzE6ODg4OC9tYWluVGhlc2lzXCI7IC8vIOiuuuaWh+S4u+mhtemdouaQnOe0oumhtemdouS/oeaBr1xuY29uc3QgdGhlc2lzQWRkUG9zdFVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xNzE6ODg4OC9hZGRUaGVzaXNcIjsvLyDmt7vliqDorrrmlofpobXpnaLmj5DkuqTkv6Hmga9cbmNvbnN0IHRoZXNpc1Bvc3RNb2RpZnlVcmwgPSBcImh0dHA6Ly8xMC4xNjcuMzUuMTcxOjg4ODgvdXBkYXRlVGhlc2lzXCI7Ly8g5L+u5pS56K665paH6aG16Z2i5o+Q5Lqk5L+h5oGvXG5jb25zdCB1cGxvYWRUaGVzaXNGaWxlID0gXCJodHRwOi8vMTAuMTY3LjM1LjE3MTo4ODg4L3VwbG9hZEZpbGVcIjsgLy/kuIrkvKDmlofku7blnLDlnYBcbmNvbnN0IGRvd25sb2FkRmlsZVVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xNzE6ODg4OC9kb3dubG9hZGZpbGUvXCI7Ly8g5paH5Lu25LiL6L295Zyw5Z2AXG5jb25zdCBwcmV2aWV3RmlsZVVybCA9IFwiaHR0cDovLzEwLjE2Ny4zNS4xNzE6ODg4OC92aWV3ZXIvXCI7Ly8g5paH5Lu26aKE6KeI5Zyw5Z2AXG5cblxuXG53aW5kb3cub25wYWdlc2hvdyA9IGZ1bmN0aW9uKGV2ZW50KSB7ICAvLyByZWZyZXNoIFxuXG7jgIDjgIBpZiAoZXZlbnQucGVyc2lzdGVkKSB7XG5cbuOAgOOAgOOAgOOAgHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcblxu44CA44CAfVxuXG59OyIsIiQoZnVuY3Rpb24oKXtcclxuICAkKFwiLmZvcm0taW5saW5lIGlucHV0XCIpLnZhbChcIlwiKVxyXG4gICQoXCIuZm9ybS1pbmxpbmUgc2VsZWN0XCIpLnZhbChcIuWcqOW9lVwiKVxyXG4gIHZhciB1cmwgPSBpbmRleFVybDtcclxuICB2YXIgZ2V0cGFyYW1zID0ge307XHJcbiAgICAgIGdldHBhcmFtcy5zZWxlY3RTb3J0ID0gXCLlnKjlvZVcIjtcclxuICAgICAgZ2V0cGFyYW1zLnNlYXJjaEJ1eWVyID0gJChcIiNzZWFyY2hOYW1lXCIpLnZhbCgpO1xyXG4gICAgICBnZXRwYXJhbXMuc2VhcmNoQm9vayA9ICQoXCIjc2VhcmNoQm9va1wiKS52YWwoKTtcclxuICBpbmRleEdldERhdGEodXJsLGdldHBhcmFtcywkKFwiI2Jvb2stdGFibGVcIiksJ2luZGV4UGFnZScsJ2luZGV4TG9jYXRpb24nKTsgLy/liJ3lp4vljJbliqDovb3lm77kuabkv6Hmga9cclxuICAkKFwiI3NlYXJjaFwiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtcclxuXHJcbiAgICBnZXRwYXJhbXMuc2VsZWN0U29ydCA9ICQoXCIjc2VsZWN0U29ydFwiKS52YWwoKTtcclxuICAgIGdldHBhcmFtcy5zZWFyY2hCdXllciA9ICQoXCIjc2VhcmNoTmFtZVwiKS52YWwoKTtcclxuICAgIGdldHBhcmFtcy5zZWFyY2hCb29rID0gJChcIiNzZWFyY2hCb29rXCIpLnZhbCgpO1xyXG4gICAgJChcIiNib29rLXRhYmxlIHRyIHRkXCIpLnJlbW92ZSgpO1xyXG4gICAgLy9jb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShnZXRwYXJhbXMpKVxyXG4gICAgLy9zZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xyXG4gIFx0aW5kZXhHZXREYXRhKHVybCxnZXRwYXJhbXMsJChcIiNib29rLXRhYmxlXCIpLCdzZWFyY2hQYWdlJywnc2VhcmNoTG9jYXRpb24nKTtcclxuICB9KVxyXG5cclxufSlcclxuZnVuY3Rpb24gaW5kZXhHZXREYXRhKHVybCxnZXRwYXJhbXMsJGVsZW0scGFnZU5hbWUscGFnZUxvY2F0aW9uKXsgIC8vZ2V05pa55byP6I635Y+W5pWw5o2uXHJcbiAgICBsb2FkaW5nKCRlbGVtKVxyXG4gICAgJC5hamF4KHtcclxuICAgICAgICAgdHlwZTpcIkdFVFwiLFxyXG4gICAgICAgICB1cmw6dXJsLFxyXG4gICAgICAgICBkYXRhOmdldHBhcmFtcyxcclxuICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcclxuXHJcbiAgICAgICAgIC8vICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xyXG4gICAgICAgICAgICQoXCIjYW50LXNpdGUtbG9hZGluZ1wiKS5yZW1vdmUoKTtcclxuICAgICAgICAgICB2YXIgYm9va0RhdGEsXHJcbiAgICAgICAgICAgICAgIG1lc3NhZ2VEYXRhPVwiXCI7XHJcbiAgICAgICAgICAgaWYodHlwZW9mKGRhdGEpID09IFwic3RyaW5nXCIpe1xyXG4gICAgICAgICAgICAgICBib29rRGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICAgICAgICAgfWVsc2UgaWYodHlwZW9mKGRhdGEpID09IFwib2JqZWN0XCIpe1xyXG4gICAgICAgICAgICAgICBib29rRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIG1lc3NhZ2VEYXRhID0gYm9va0RhdGEubWVzc2FnZTtcclxuXHJcbiAgICAgICAgICAgaWYobWVzc2FnZURhdGEgPT0gXCLmk43kvZzmiJDlip9cIil7XHJcbiAgICAgICAgICAgICB2YXIgYm9va0RhdGEgPSBib29rRGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgLy/lvJXnlKh0YWJsZeaPkuS7tlxyXG5cclxuICAgICAgICAgICAgICQoXCIjYm9vay10YWJsZVwiKS5jcmVhdGVUYWJsZSh7dGFibGVEYXRhOmJvb2tEYXRhLGNob2ljZUNvbnRlbnQ6J2luZGV4JyxwYWdlSWQ6XCIjcGFnZVwiLHRvdGFsUGFnZUlkOicjdG90YWwtcGFnZScsc2tpcFBhZ2VJZDpcIiNza2lwLWNsaWNrXCIsdGFibGVJZDonI2Jvb2stdGFibGUnLHNlc3Npb25QYWdlOnBhZ2VOYW1lLHNlc3Npb25Mb2NhdGlvbjpwYWdlTG9jYXRpb259KVxyXG5cclxuICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgIGFsZXJ0KG1lc3NhZ2VEYXRhKVxyXG4gICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxufVxyXG4iLCIvKiEgalF1ZXJ5IHYzLjEuMSB8IChjKSBqUXVlcnkgRm91bmRhdGlvbiB8IGpxdWVyeS5vcmcvbGljZW5zZSAqL1xuIWZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIpO3JldHVybiBiKGEpfTpiKGEpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGM9W10sZD1hLmRvY3VtZW50LGU9T2JqZWN0LmdldFByb3RvdHlwZU9mLGY9Yy5zbGljZSxnPWMuY29uY2F0LGg9Yy5wdXNoLGk9Yy5pbmRleE9mLGo9e30saz1qLnRvU3RyaW5nLGw9ai5oYXNPd25Qcm9wZXJ0eSxtPWwudG9TdHJpbmcsbj1tLmNhbGwoT2JqZWN0KSxvPXt9O2Z1bmN0aW9uIHAoYSxiKXtiPWJ8fGQ7dmFyIGM9Yi5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO2MudGV4dD1hLGIuaGVhZC5hcHBlbmRDaGlsZChjKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpfXZhciBxPVwiMy4xLjFcIixyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyByLmZuLmluaXQoYSxiKX0scz0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csdD0vXi1tcy0vLHU9Ly0oW2Etel0pL2csdj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O3IuZm49ci5wcm90b3R5cGU9e2pxdWVyeTpxLGNvbnN0cnVjdG9yOnIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBmLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9mLmNhbGwodGhpcyk6YTwwP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPXIubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxifSxlYWNoOmZ1bmN0aW9uKGEpe3JldHVybiByLmVhY2godGhpcyxhKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhyLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoYTwwP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmM8Yj9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6aCxzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LHIuZXh0ZW5kPXIuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKFwiYm9vbGVhblwiPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSxcIm9iamVjdFwiPT10eXBlb2YgZ3x8ci5pc0Z1bmN0aW9uKGcpfHwoZz17fSksaD09PWkmJihnPXRoaXMsaC0tKTtoPGk7aCsrKWlmKG51bGwhPShhPWFyZ3VtZW50c1toXSkpZm9yKGIgaW4gYSljPWdbYl0sZD1hW2JdLGchPT1kJiYoaiYmZCYmKHIuaXNQbGFpbk9iamVjdChkKXx8KGU9ci5pc0FycmF5KGQpKSk/KGU/KGU9ITEsZj1jJiZyLmlzQXJyYXkoYyk/YzpbXSk6Zj1jJiZyLmlzUGxhaW5PYmplY3QoYyk/Yzp7fSxnW2JdPXIuZXh0ZW5kKGosZixkKSk6dm9pZCAwIT09ZCYmKGdbYl09ZCkpO3JldHVybiBnfSxyLmV4dGVuZCh7ZXhwYW5kbzpcImpRdWVyeVwiKyhxK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xcRC9nLFwiXCIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKGEpfSxub29wOmZ1bmN0aW9uKCl7fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVyblwiZnVuY3Rpb25cIj09PXIudHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5LGlzV2luZG93OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hJiZhPT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXt2YXIgYj1yLnR5cGUoYSk7cmV0dXJuKFwibnVtYmVyXCI9PT1ifHxcInN0cmluZ1wiPT09YikmJiFpc05hTihhLXBhcnNlRmxvYXQoYSkpfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiLGM7cmV0dXJuISghYXx8XCJbb2JqZWN0IE9iamVjdF1cIiE9PWsuY2FsbChhKSkmJighKGI9ZShhKSl8fChjPWwuY2FsbChiLFwiY29uc3RydWN0b3JcIikmJmIuY29uc3RydWN0b3IsXCJmdW5jdGlvblwiPT10eXBlb2YgYyYmbS5jYWxsKGMpPT09bikpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2ZvcihiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9LHR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YStcIlwiOlwib2JqZWN0XCI9PXR5cGVvZiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2pbay5jYWxsKGEpXXx8XCJvYmplY3RcIjp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXtwKGEpfSxjYW1lbENhc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh0LFwibXMtXCIpLnJlcGxhY2UodSx2KX0sbm9kZU5hbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yi50b0xvd2VyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0wO2lmKHcoYSkpe2ZvcihjPWEubGVuZ3RoO2Q8YztkKyspaWYoYi5jYWxsKGFbZF0sZCxhW2RdKT09PSExKWJyZWFrfWVsc2UgZm9yKGQgaW4gYSlpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWs7cmV0dXJuIGF9LHRyaW06ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjooYStcIlwiKS5yZXBsYWNlKHMsXCJcIil9LG1ha2VBcnJheTpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fFtdO3JldHVybiBudWxsIT1hJiYodyhPYmplY3QoYSkpP3IubWVyZ2UoYyxcInN0cmluZ1wiPT10eXBlb2YgYT9bYV06YSk6aC5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1iPy0xOmkuY2FsbChiLGEsYyl9LG1lcmdlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPStiLmxlbmd0aCxkPTAsZT1hLmxlbmd0aDtkPGM7ZCsrKWFbZSsrXT1iW2RdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7ZjxnO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9MCxoPVtdO2lmKHcoYSkpZm9yKGQ9YS5sZW5ndGg7ZjxkO2YrKyllPWIoYVtmXSxmLGMpLG51bGwhPWUmJmgucHVzaChlKTtlbHNlIGZvcihmIGluIGEpZT1iKGFbZl0sZixjKSxudWxsIT1lJiZoLnB1c2goZSk7cmV0dXJuIGcuYXBwbHkoW10saCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZTtpZihcInN0cmluZ1wiPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxyLmlzRnVuY3Rpb24oYSkpcmV0dXJuIGQ9Zi5jYWxsKGFyZ3VtZW50cywyKSxlPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxkLmNvbmNhdChmLmNhbGwoYXJndW1lbnRzKSkpfSxlLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8ci5ndWlkKyssZX0sbm93OkRhdGUubm93LHN1cHBvcnQ6b30pLFwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmKHIuZm5bU3ltYm9sLml0ZXJhdG9yXT1jW1N5bWJvbC5pdGVyYXRvcl0pLHIuZWFjaChcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7altcIltvYmplY3QgXCIrYitcIl1cIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gdyhhKXt2YXIgYj0hIWEmJlwibGVuZ3RoXCJpbiBhJiZhLmxlbmd0aCxjPXIudHlwZShhKTtyZXR1cm5cImZ1bmN0aW9uXCIhPT1jJiYhci5pc1dpbmRvdyhhKSYmKFwiYXJyYXlcIj09PWN8fDA9PT1ifHxcIm51bWJlclwiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYSl9dmFyIHg9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT1cInNpenpsZVwiKzEqbmV3IERhdGUsdj1hLmRvY3VtZW50LHc9MCx4PTAseT1oYSgpLHo9aGEoKSxBPWhhKCksQj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09YiYmKGw9ITApLDB9LEM9e30uaGFzT3duUHJvcGVydHksRD1bXSxFPUQucG9wLEY9RC5wdXNoLEc9RC5wdXNoLEg9RC5zbGljZSxJPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxKPVwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixLPVwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixMPVwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFwwLVxcXFx4YTBdKStcIixNPVwiXFxcXFtcIitLK1wiKihcIitMK1wiKSg/OlwiK0srXCIqKFsqXiR8IX5dPz0pXCIrSytcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiK0wrXCIpKXwpXCIrSytcIipcXFxcXVwiLE49XCI6KFwiK0wrXCIpKD86XFxcXCgoKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8KCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiK00rXCIpKil8LiopXFxcXCl8KVwiLE89bmV3IFJlZ0V4cChLK1wiK1wiLFwiZ1wiKSxQPW5ldyBSZWdFeHAoXCJeXCIrSytcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrSytcIiskXCIsXCJnXCIpLFE9bmV3IFJlZ0V4cChcIl5cIitLK1wiKixcIitLK1wiKlwiKSxSPW5ldyBSZWdFeHAoXCJeXCIrSytcIiooWz4rfl18XCIrSytcIilcIitLK1wiKlwiKSxTPW5ldyBSZWdFeHAoXCI9XCIrSytcIiooW15cXFxcXSdcXFwiXSo/KVwiK0srXCIqXFxcXF1cIixcImdcIiksVD1uZXcgUmVnRXhwKE4pLFU9bmV3IFJlZ0V4cChcIl5cIitMK1wiJFwiKSxWPXtJRDpuZXcgUmVnRXhwKFwiXiMoXCIrTCtcIilcIiksQ0xBU1M6bmV3IFJlZ0V4cChcIl5cXFxcLihcIitMK1wiKVwiKSxUQUc6bmV3IFJlZ0V4cChcIl4oXCIrTCtcInxbKl0pXCIpLEFUVFI6bmV3IFJlZ0V4cChcIl5cIitNKSxQU0VVRE86bmV3IFJlZ0V4cChcIl5cIitOKSxDSElMRDpuZXcgUmVnRXhwKFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIitLK1wiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIrSytcIiooPzooWystXXwpXCIrSytcIiooXFxcXGQrKXwpKVwiK0srXCIqXFxcXCl8KVwiLFwiaVwiKSxib29sOm5ldyBSZWdFeHAoXCJeKD86XCIrSitcIikkXCIsXCJpXCIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKFwiXlwiK0srXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiK0srXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiK0srXCIqXFxcXCl8KSg/PVteLV18JClcIixcImlcIil9LFc9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxYPS9eaFxcZCQvaSxZPS9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sWj0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLywkPS9bK35dLyxfPW5ldyBSZWdFeHAoXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIitLK1wiP3woXCIrSytcIil8LilcIixcImlnXCIpLGFhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1cIjB4XCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjpkPDA/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGJhPS8oW1xcMC1cXHgxZlxceDdmXXxeLT9cXGQpfF4tJHxbXlxcMC1cXHgxZlxceDdmLVxcdUZGRkZcXHctXS9nLGNhPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/XCJcXDBcIj09PWE/XCJcXHVmZmZkXCI6YS5zbGljZSgwLC0xKStcIlxcXFxcIithLmNoYXJDb2RlQXQoYS5sZW5ndGgtMSkudG9TdHJpbmcoMTYpK1wiIFwiOlwiXFxcXFwiK2F9LGRhPWZ1bmN0aW9uKCl7bSgpfSxlYT10YShmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwJiYoXCJmb3JtXCJpbiBhfHxcImxhYmVsXCJpbiBhKX0se2RpcjpcInBhcmVudE5vZGVcIixuZXh0OlwibGVnZW5kXCJ9KTt0cnl7Ry5hcHBseShEPUguY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRFt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChmYSl7Rz17YXBwbHk6RC5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtGLmFwcGx5KGEsSC5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZ2EoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscz1iJiZiLm93bmVyRG9jdW1lbnQsdz1iP2Iubm9kZVR5cGU6OTtpZihkPWR8fFtdLFwic3RyaW5nXCIhPXR5cGVvZiBhfHwhYXx8MSE9PXcmJjkhPT13JiYxMSE9PXcpcmV0dXJuIGQ7aWYoIWUmJigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixwKSl7aWYoMTEhPT13JiYobD1aLmV4ZWMoYSkpKWlmKGY9bFsxXSl7aWYoOT09PXcpe2lmKCEoaj1iLmdldEVsZW1lbnRCeUlkKGYpKSlyZXR1cm4gZDtpZihqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZSBpZihzJiYoaj1zLmdldEVsZW1lbnRCeUlkKGYpKSYmdChiLGopJiZqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZXtpZihsWzJdKXJldHVybiBHLmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoZj1sWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEcuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZikpLGR9aWYoYy5xc2EmJiFBW2ErXCIgXCJdJiYoIXF8fCFxLnRlc3QoYSkpKXtpZigxIT09dylzPWIscj1hO2Vsc2UgaWYoXCJvYmplY3RcIiE9PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7KGs9Yi5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk/az1rLnJlcGxhY2UoYmEsY2EpOmIuc2V0QXR0cmlidXRlKFwiaWRcIixrPXUpLG89ZyhhKSxoPW8ubGVuZ3RoO3doaWxlKGgtLSlvW2hdPVwiI1wiK2srXCIgXCIrc2Eob1toXSk7cj1vLmpvaW4oXCIsXCIpLHM9JC50ZXN0KGEpJiZxYShiLnBhcmVudE5vZGUpfHxifWlmKHIpdHJ5e3JldHVybiBHLmFwcGx5KGQscy5xdWVyeVNlbGVjdG9yQWxsKHIpKSxkfWNhdGNoKHgpe31maW5hbGx5e2s9PT11JiZiLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpfX19cmV0dXJuIGkoYS5yZXBsYWNlKFAsXCIkMVwiKSxiLGQsZSl9ZnVuY3Rpb24gaGEoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjK1wiIFwiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYytcIiBcIl09ZX1yZXR1cm4gYn1mdW5jdGlvbiBpYShhKXtyZXR1cm4gYVt1XT0hMCxhfWZ1bmN0aW9uIGphKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goYyl7cmV0dXJuITF9ZmluYWxseXtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9fWZ1bmN0aW9uIGthKGEsYil7dmFyIGM9YS5zcGxpdChcInxcIiksZT1jLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24gbGEoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiZhLnNvdXJjZUluZGV4LWIuc291cmNlSW5kZXg7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oXCJpbnB1dFwiPT09Y3x8XCJidXR0b25cIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuXCJmb3JtXCJpbiBiP2IucGFyZW50Tm9kZSYmYi5kaXNhYmxlZD09PSExP1wibGFiZWxcImluIGI/XCJsYWJlbFwiaW4gYi5wYXJlbnROb2RlP2IucGFyZW50Tm9kZS5kaXNhYmxlZD09PWE6Yi5kaXNhYmxlZD09PWE6Yi5pc0Rpc2FibGVkPT09YXx8Yi5pc0Rpc2FibGVkIT09IWEmJmVhKGIpPT09YTpiLmRpc2FibGVkPT09YTpcImxhYmVsXCJpbiBiJiZiLmRpc2FibGVkPT09YX19ZnVuY3Rpb24gcGEoYSl7cmV0dXJuIGlhKGZ1bmN0aW9uKGIpe3JldHVybiBiPStiLGlhKGZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hKFtdLGMubGVuZ3RoLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWNbZT1mW2ddXSYmKGNbZV09IShkW2VdPWNbZV0pKX0pfSl9ZnVuY3Rpb24gcWEoYSl7cmV0dXJuIGEmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZhfWM9Z2Euc3VwcG9ydD17fSxmPWdhLmlzWE1MPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLm93bmVyRG9jdW1lbnR8fGEpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4hIWImJlwiSFRNTFwiIT09Yi5ub2RlTmFtZX0sbT1nYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89bi5kb2N1bWVudEVsZW1lbnQscD0hZihuKSx2IT09biYmKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIixkYSwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZGEpKSxjLmF0dHJpYnV0ZXM9amEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2xhc3NOYW1lPVwiaVwiLCFhLmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKX0pLGMuZ2V0RWxlbWVudHNCeVRhZ05hbWU9amEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQobi5jcmVhdGVDb21tZW50KFwiXCIpKSwhYS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVkudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShfLGFhKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKFwiaWRcIik9PT1ifX0sZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjPWIuZ2V0RWxlbWVudEJ5SWQoYSk7cmV0dXJuIGM/W2NdOltdfX0pOihkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoXyxhYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO3JldHVybiBjJiZjLnZhbHVlPT09Yn19LGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRCeUlkJiZwKXt2YXIgYyxkLGUsZj1iLmdldEVsZW1lbnRCeUlkKGEpO2lmKGYpe2lmKGM9Zi5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIiksYyYmYy52YWx1ZT09PWEpcmV0dXJuW2ZdO2U9Yi5nZXRFbGVtZW50c0J5TmFtZShhKSxkPTA7d2hpbGUoZj1lW2QrK10paWYoYz1mLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKSxjJiZjLnZhbHVlPT09YSlyZXR1cm5bZl19cmV0dXJuW119fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWU/Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTpjLnFzYT9iLnF1ZXJ5U2VsZWN0b3JBbGwoYSk6dm9pZCAwfTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT0wLGY9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTtpZihcIipcIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmcClyZXR1cm4gYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpfSxyPVtdLHE9W10sKGMucXNhPVkudGVzdChuLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGphKGZ1bmN0aW9uKGEpe28uYXBwZW5kQ2hpbGQoYSkuaW5uZXJIVE1MPVwiPGEgaWQ9J1wiK3UrXCInPjwvYT48c2VsZWN0IGlkPSdcIit1K1wiLVxcclxcXFwnIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCIsYS5xdWVyeVNlbGVjdG9yQWxsKFwiW21zYWxsb3djYXB0dXJlXj0nJ11cIikubGVuZ3RoJiZxLnB1c2goXCJbKl4kXT1cIitLK1wiKig/OicnfFxcXCJcXFwiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aHx8cS5wdXNoKFwiXFxcXFtcIitLK1wiKig/OnZhbHVlfFwiK0orXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltpZH49XCIrdStcIi1dXCIpLmxlbmd0aHx8cS5wdXNoKFwifj1cIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RofHxxLnB1c2goXCI6Y2hlY2tlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJhI1wiK3UrXCIrKlwiKS5sZW5ndGh8fHEucHVzaChcIi4jLitbK35dXCIpfSksamEoZnVuY3Rpb24oYSl7YS5pbm5lckhUTUw9XCI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD5cIjt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtiLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImhpZGRlblwiKSxhLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcIkRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoJiZxLnB1c2goXCJuYW1lXCIrSytcIipbKl4kfCF+XT89XCIpLDIhPT1hLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGgmJnEucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksby5hcHBlbmRDaGlsZChhKS5kaXNhYmxlZD0hMCwyIT09YS5xdWVyeVNlbGVjdG9yQWxsKFwiOmRpc2FibGVkXCIpLmxlbmd0aCYmcS5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLHEucHVzaChcIiwuKjpcIil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVkudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmamEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSxcIipcIikscy5jYWxsKGEsXCJbcyE9JyddOnhcIiksci5wdXNoKFwiIT1cIixOKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKFwifFwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oXCJ8XCIpKSxiPVkudGVzdChvLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx0PWJ8fFkudGVzdChvLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBjPTk9PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kfHwhKCFkfHwxIT09ZC5ub2RlVHlwZXx8IShjLmNvbnRhaW5zP2MuY29udGFpbnMoZCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSkpfTpmdW5jdGlvbihhLGIpe2lmKGIpd2hpbGUoYj1iLnBhcmVudE5vZGUpaWYoYj09PWEpcmV0dXJuITA7cmV0dXJuITF9LEI9Yj9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGQ9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIGQ/ZDooZD0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MSwxJmR8fCFjLnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWQ/YT09PW58fGEub3duZXJEb2N1bWVudD09PXYmJnQodixhKT8tMTpiPT09bnx8Yi5vd25lckRvY3VtZW50PT09diYmdCh2LGIpPzE6az9JKGssYSktSShrLGIpOjA6NCZkPy0xOjEpfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGMsZD0wLGU9YS5wYXJlbnROb2RlLGY9Yi5wYXJlbnROb2RlLGc9W2FdLGg9W2JdO2lmKCFlfHwhZilyZXR1cm4gYT09PW4/LTE6Yj09PW4/MTplPy0xOmY/MTprP0koayxhKS1JKGssYik6MDtpZihlPT09ZilyZXR1cm4gbGEoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpZy51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7d2hpbGUoZ1tkXT09PWhbZF0pZCsrO3JldHVybiBkP2xhKGdbZF0saFtkXSk6Z1tkXT09PXY/LTE6aFtkXT09PXY/MTowfSxuKTpufSxnYS5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGdhKGEsbnVsbCxudWxsLGIpfSxnYS5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksYj1iLnJlcGxhY2UoUyxcIj0nJDEnXVwiKSxjLm1hdGNoZXNTZWxlY3RvciYmcCYmIUFbYitcIiBcIl0mJighcnx8IXIudGVzdChiKSkmJighcXx8IXEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGdhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGdhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZ2EuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkMuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGdhLmVzY2FwZT1mdW5jdGlvbihhKXtyZXR1cm4oYStcIlwiKS5yZXBsYWNlKGJhLGNhKX0sZ2EuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIrYSl9LGdhLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGw9IWMuZGV0ZWN0RHVwbGljYXRlcyxrPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KEIpLGwpe3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBrPW51bGwsYX0sZT1nYS5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9XCJcIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWdhLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmlhLG1hdGNoOlYsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOntcIj5cIjp7ZGlyOlwicGFyZW50Tm9kZVwiLGZpcnN0OiEwfSxcIiBcIjp7ZGlyOlwicGFyZW50Tm9kZVwifSxcIitcIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCIsZmlyc3Q6ITB9LFwiflwiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoXyxhYSksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8XCJcIikucmVwbGFjZShfLGFhKSxcIn49XCI9PT1hWzJdJiYoYVszXT1cIiBcIithWzNdK1wiIFwiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSxcIm50aFwiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxnYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKihcImV2ZW5cIj09PWFbM118fFwib2RkXCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8XCJvZGRcIj09PWFbM10pKTphWzNdJiZnYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gVi5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHxcIlwiOmMmJlQudGVzdChjKSYmKGI9ZyhjLCEwKSkmJihiPWMuaW5kZXhPZihcIilcIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShfLGFhKS50b0xvd2VyQ2FzZSgpO3JldHVyblwiKlwiPT09YT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LENMQVNTOmZ1bmN0aW9uKGEpe3ZhciBiPXlbYStcIiBcIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoXCIoXnxcIitLK1wiKVwiK2ErXCIoXCIrSytcInwkKVwiKSkmJnkoYSxmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KFwic3RyaW5nXCI9PXR5cGVvZiBhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWV8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIil9KX0sQVRUUjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPWdhLmF0dHIoZCxhKTtyZXR1cm4gbnVsbD09ZT9cIiE9XCI9PT1iOiFifHwoZSs9XCJcIixcIj1cIj09PWI/ZT09PWM6XCIhPVwiPT09Yj9lIT09YzpcIl49XCI9PT1iP2MmJjA9PT1lLmluZGV4T2YoYyk6XCIqPVwiPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6XCIkPVwiPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOlwifj1cIj09PWI/KFwiIFwiK2UucmVwbGFjZShPLFwiIFwiKStcIiBcIikuaW5kZXhPZihjKT4tMTpcInw9XCI9PT1iJiYoZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrXCItXCIpKX19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9XCJudGhcIiE9PWEuc2xpY2UoMCwzKSxnPVwibGFzdFwiIT09YS5zbGljZSgtNCksaD1cIm9mLXR5cGVcIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nP1wibmV4dFNpYmxpbmdcIjpcInByZXZpb3VzU2libGluZ1wiLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPVwib25seVwiPT09YSYmIW8mJlwibmV4dFNpYmxpbmdcIn1yZXR1cm4hMH1pZihvPVtnP3EuZmlyc3RDaGlsZDpxLmxhc3RDaGlsZF0sZyYmcyl7bT1xLGw9bVt1XXx8KG1bdV09e30pLGs9bFttLnVuaXF1ZUlEXXx8KGxbbS51bmlxdWVJRF09e30pLGo9a1thXXx8W10sbj1qWzBdPT09dyYmalsxXSx0PW4mJmpbMl0sbT1uJiZxLmNoaWxkTm9kZXNbbl07d2hpbGUobT0rK24mJm0mJm1bcF18fCh0PW49MCl8fG8ucG9wKCkpaWYoMT09PW0ubm9kZVR5cGUmJisrdCYmbT09PWIpe2tbYV09W3csbix0XTticmVha319ZWxzZSBpZihzJiYobT1iLGw9bVt1XXx8KG1bdV09e30pLGs9bFttLnVuaXF1ZUlEXXx8KGxbbS51bmlxdWVJRF09e30pLGo9a1thXXx8W10sbj1qWzBdPT09dyYmalsxXSx0PW4pLHQ9PT0hMSl3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigoaD9tLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1tLm5vZGVUeXBlKSYmKyt0JiYocyYmKGw9bVt1XXx8KG1bdV09e30pLGs9bFttLnVuaXF1ZUlEXXx8KGxbbS51bmlxdWVJRF09e30pLGtbYV09W3csdF0pLG09PT1iKSlicmVhaztyZXR1cm4gdC09ZSx0PT09ZHx8dCVkPT09MCYmdC9kPj0wfX19LFBTRVVETzpmdW5jdGlvbihhLGIpe3ZhciBjLGU9ZC5wc2V1ZG9zW2FdfHxkLnNldEZpbHRlcnNbYS50b0xvd2VyQ2FzZSgpXXx8Z2EuZXJyb3IoXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLFwiXCIsYl0sZC5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGEudG9Mb3dlckNhc2UoKSk/aWEoZnVuY3Rpb24oYSxjKXt2YXIgZCxmPWUoYSxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSlkPUkoYSxmW2ddKSxhW2RdPSEoY1tkXT1mW2ddKX0pOmZ1bmN0aW9uKGEpe3JldHVybiBlKGEsMCxjKX0pOmV9fSxwc2V1ZG9zOntub3Q6aWEoZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkPWgoYS5yZXBsYWNlKFAsXCIkMVwiKSk7cmV0dXJuIGRbdV0/aWEoZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsZz1kKGEsbnVsbCxlLFtdKSxoPWEubGVuZ3RoO3doaWxlKGgtLSkoZj1nW2hdKSYmKGFbaF09IShiW2hdPWYpKX0pOmZ1bmN0aW9uKGEsZSxmKXtyZXR1cm4gYlswXT1hLGQoYixudWxsLGYsYyksYlswXT1udWxsLCFjLnBvcCgpfX0pLGhhczppYShmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGdhKGEsYikubGVuZ3RoPjB9fSksY29udGFpbnM6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKF8sYWEpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBVLnRlc3QoYXx8XCJcIil8fGdhLmVycm9yKFwidW5zdXBwb3J0ZWQgbGFuZzogXCIrYSksYT1hLnJlcGxhY2UoXyxhYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIil8fGIuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYStcIi1cIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpvYSghMSksZGlzYWJsZWQ6b2EoITApLGNoZWNrZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJiEhYS5jaGVja2VkfHxcIm9wdGlvblwiPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiZcImJ1dHRvblwiPT09YS50eXBlfHxcImJ1dHRvblwiPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm5cImlucHV0XCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJlwidGV4dFwiPT09YS50eXBlJiYobnVsbD09KGI9YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKXx8XCJ0ZXh0XCI9PT1iLnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpwYShmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6cGEoZnVuY3Rpb24oYSxiKXtyZXR1cm5bYi0xXX0pLGVxOnBhKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm5bYzwwP2MrYjpjXX0pLGV2ZW46cGEoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtjPGI7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxvZGQ6cGEoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MTtjPGI7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxsdDpwYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWM8MD9jK2I6YzstLWQ+PTA7KWEucHVzaChkKTtyZXR1cm4gYX0pLGd0OnBhKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YzwwP2MrYjpjOysrZDxiOylhLnB1c2goZCk7cmV0dXJuIGF9KX19LGQucHNldWRvcy5udGg9ZC5wc2V1ZG9zLmVxO2ZvcihiIGlue3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KWQucHNldWRvc1tiXT1tYShiKTtmb3IoYiBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KWQucHNldWRvc1tiXT1uYShiKTtmdW5jdGlvbiByYSgpe31yYS5wcm90b3R5cGU9ZC5maWx0ZXJzPWQucHNldWRvcyxkLnNldEZpbHRlcnM9bmV3IHJhLGc9Z2EudG9rZW5pemU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxoLGksaixrPXpbYStcIiBcIl07aWYoaylyZXR1cm4gYj8wOmsuc2xpY2UoMCk7aD1hLGk9W10saj1kLnByZUZpbHRlcjt3aGlsZShoKXtjJiYhKGU9US5leGVjKGgpKXx8KGUmJihoPWguc2xpY2UoZVswXS5sZW5ndGgpfHxoKSxpLnB1c2goZj1bXSkpLGM9ITEsKGU9Ui5leGVjKGgpKSYmKGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmVbMF0ucmVwbGFjZShQLFwiIFwiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1WW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/Z2EuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBzYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9XCJcIjtiPGM7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gdGEoYSxiLGMpe3ZhciBkPWIuZGlyLGU9Yi5uZXh0LGY9ZXx8ZCxnPWMmJlwicGFyZW50Tm9kZVwiPT09ZixoPXgrKztyZXR1cm4gYi5maXJzdD9mdW5jdGlvbihiLGMsZSl7d2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxnKXJldHVybiBhKGIsYyxlKTtyZXR1cm4hMX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtPVt3LGhdO2lmKGkpe3doaWxlKGI9YltkXSlpZigoMT09PWIubm9kZVR5cGV8fGcpJiZhKGIsYyxpKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZylpZihsPWJbdV18fChiW3VdPXt9KSxrPWxbYi51bmlxdWVJRF18fChsW2IudW5pcXVlSURdPXt9KSxlJiZlPT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKWI9YltkXXx8YjtlbHNle2lmKChqPWtbZl0pJiZqWzBdPT09dyYmalsxXT09PWgpcmV0dXJuIG1bMl09alsyXTtpZihrW2ZdPW0sbVsyXT1hKGIsYyxpKSlyZXR1cm4hMH1yZXR1cm4hMX19ZnVuY3Rpb24gdWEoYSl7cmV0dXJuIGEubGVuZ3RoPjE/ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEubGVuZ3RoO3doaWxlKGUtLSlpZighYVtlXShiLGMsZCkpcmV0dXJuITE7cmV0dXJuITB9OmFbMF19ZnVuY3Rpb24gdmEoYSxiLGMpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKylnYShhLGJbZF0sYyk7cmV0dXJuIGN9ZnVuY3Rpb24gd2EoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz1bXSxoPTAsaT1hLmxlbmd0aCxqPW51bGwhPWI7aDxpO2grKykoZj1hW2hdKSYmKGMmJiFjKGYsZCxlKXx8KGcucHVzaChmKSxqJiZiLnB1c2goaCkpKTtyZXR1cm4gZ31mdW5jdGlvbiB4YShhLGIsYyxkLGUsZil7cmV0dXJuIGQmJiFkW3VdJiYoZD14YShkKSksZSYmIWVbdV0mJihlPXhhKGUsZikpLGlhKGZ1bmN0aW9uKGYsZyxoLGkpe3ZhciBqLGssbCxtPVtdLG49W10sbz1nLmxlbmd0aCxwPWZ8fHZhKGJ8fFwiKlwiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6d2EocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXdhKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9JKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj13YShyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6Ry5hcHBseShnLHIpfSl9ZnVuY3Rpb24geWEoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVtcIiBcIl0saT1nPzE6MCxrPXRhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD10YShmdW5jdGlvbihhKXtyZXR1cm4gSShiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07aTxmO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVt0YSh1YShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtlPGY7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4geGEoaT4xJiZ1YShtKSxpPjEmJnNhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6XCIgXCI9PT1hW2ktMl0udHlwZT9cIipcIjpcIlwifSkpLnJlcGxhY2UoUCxcIiQxXCIpLGMsaTxlJiZ5YShhLnNsaWNlKGksZSkpLGU8ZiYmeWEoYT1hLnNsaWNlKGUpKSxlPGYmJnNhKGEpKX1tLnB1c2goYyl9cmV0dXJuIHVhKG0pfWZ1bmN0aW9uIHphKGEsYil7dmFyIGM9Yi5sZW5ndGg+MCxlPWEubGVuZ3RoPjAsZj1mdW5jdGlvbihmLGcsaCxpLGspe3ZhciBsLG8scSxyPTAscz1cIjBcIix0PWYmJltdLHU9W10sdj1qLHg9Znx8ZSYmZC5maW5kLlRBRyhcIipcIixrKSx5PXcrPW51bGw9PXY/MTpNYXRoLnJhbmRvbSgpfHwuMSx6PXgubGVuZ3RoO2ZvcihrJiYoaj1nPT09bnx8Z3x8ayk7cyE9PXomJm51bGwhPShsPXhbc10pO3MrKyl7aWYoZSYmbCl7bz0wLGd8fGwub3duZXJEb2N1bWVudD09PW58fChtKGwpLGg9IXApO3doaWxlKHE9YVtvKytdKWlmKHEobCxnfHxuLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9eSl9YyYmKChsPSFxJiZsKSYmci0tLGYmJnQucHVzaChsKSl9aWYocis9cyxjJiZzIT09cil7bz0wO3doaWxlKHE9YltvKytdKXEodCx1LGcsaCk7aWYoZil7aWYocj4wKXdoaWxlKHMtLSl0W3NdfHx1W3NdfHwodVtzXT1FLmNhbGwoaSkpO3U9d2EodSl9Ry5hcHBseShpLHUpLGsmJiFmJiZ1Lmxlbmd0aD4wJiZyK2IubGVuZ3RoPjEmJmdhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXksaj12KSx0fTtyZXR1cm4gYz9pYShmKTpmfXJldHVybiBoPWdhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErXCIgXCJdO2lmKCFmKXtifHwoYj1nKGEpKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlmPXlhKGJbY10pLGZbdV0/ZC5wdXNoKGYpOmUucHVzaChmKTtmPUEoYSx6YShlLGQpKSxmLnNlbGVjdG9yPWF9cmV0dXJuIGZ9LGk9Z2Euc2VsZWN0PWZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGksaixrLGwsbT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhLG49IWUmJmcoYT1tLnNlbGVjdG9yfHxhKTtpZihjPWN8fFtdLDE9PT1uLmxlbmd0aCl7aWYoaT1uWzBdPW5bMF0uc2xpY2UoMCksaS5sZW5ndGg+MiYmXCJJRFwiPT09KGo9aVswXSkudHlwZSYmOT09PWIubm9kZVR5cGUmJnAmJmQucmVsYXRpdmVbaVsxXS50eXBlXSl7aWYoYj0oZC5maW5kLklEKGoubWF0Y2hlc1swXS5yZXBsYWNlKF8sYWEpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGM7bSYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2UoaS5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9Zj1WLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6aS5sZW5ndGg7d2hpbGUoZi0tKXtpZihqPWlbZl0sZC5yZWxhdGl2ZVtrPWoudHlwZV0pYnJlYWs7aWYoKGw9ZC5maW5kW2tdKSYmKGU9bChqLm1hdGNoZXNbMF0ucmVwbGFjZShfLGFhKSwkLnRlc3QoaVswXS50eXBlKSYmcWEoYi5wYXJlbnROb2RlKXx8YikpKXtpZihpLnNwbGljZShmLDEpLGE9ZS5sZW5ndGgmJnNhKGkpLCFhKXJldHVybiBHLmFwcGx5KGMsZSksYzticmVha319fXJldHVybihtfHxoKGEsbikpKGUsYiwhcCxjLCFifHwkLnRlc3QoYSkmJnFhKGIucGFyZW50Tm9kZSl8fGIpLGN9LGMuc29ydFN0YWJsZT11LnNwbGl0KFwiXCIpLnNvcnQoQikuam9pbihcIlwiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9amEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKSl9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsXCIjXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pfHxrYShcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIixmdW5jdGlvbihhLGIsYyl7aWYoIWMpcmV0dXJuIGEuZ2V0QXR0cmlidXRlKGIsXCJ0eXBlXCI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGlucHV0Lz5cIixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSxcIlwiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSl8fGthKFwidmFsdWVcIixmdW5jdGlvbihhLGIsYyl7aWYoIWMmJlwiaW5wdXRcIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4gYS5kZWZhdWx0VmFsdWV9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0pfHxrYShKLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtpZighYylyZXR1cm4gYVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxnYX0oYSk7ci5maW5kPXgsci5leHByPXguc2VsZWN0b3JzLHIuZXhwcltcIjpcIl09ci5leHByLnBzZXVkb3Msci51bmlxdWVTb3J0PXIudW5pcXVlPXgudW5pcXVlU29ydCxyLnRleHQ9eC5nZXRUZXh0LHIuaXNYTUxEb2M9eC5pc1hNTCxyLmNvbnRhaW5zPXguY29udGFpbnMsci5lc2NhcGVTZWxlY3Rvcj14LmVzY2FwZTt2YXIgeT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT12b2lkIDAhPT1jO3doaWxlKChhPWFbYl0pJiY5IT09YS5ub2RlVHlwZSlpZigxPT09YS5ub2RlVHlwZSl7aWYoZSYmcihhKS5pcyhjKSlicmVhaztkLnB1c2goYSl9cmV0dXJuIGR9LHo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9LEE9ci5leHByLm1hdGNoLm5lZWRzQ29udGV4dCxCPS9ePChbYS16XVteXFwvXFwwPjpcXHgyMFxcdFxcclxcblxcZl0qKVtcXHgyMFxcdFxcclxcblxcZl0qXFwvPz4oPzo8XFwvXFwxPnwpJC9pLEM9L14uW146I1xcW1xcLixdKiQvO2Z1bmN0aW9uIEQoYSxiLGMpe3JldHVybiByLmlzRnVuY3Rpb24oYik/ci5ncmVwKGEsZnVuY3Rpb24oYSxkKXtyZXR1cm4hIWIuY2FsbChhLGQsYSkhPT1jfSk6Yi5ub2RlVHlwZT9yLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk6XCJzdHJpbmdcIiE9dHlwZW9mIGI/ci5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGkuY2FsbChiLGEpPi0xIT09Y30pOkMudGVzdChiKT9yLmZpbHRlcihiLGEsYyk6KGI9ci5maWx0ZXIoYixhKSxyLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gaS5jYWxsKGIsYSk+LTEhPT1jJiYxPT09YS5ub2RlVHlwZX0pKX1yLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9XCI6bm90KFwiK2ErXCIpXCIpLDE9PT1iLmxlbmd0aCYmMT09PWQubm9kZVR5cGU/ci5maW5kLm1hdGNoZXNTZWxlY3RvcihkLGEpP1tkXTpbXTpyLmZpbmQubWF0Y2hlcyhhLHIuZ3JlcChiLGZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZX0pKX0sci5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMubGVuZ3RoLGU9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2socihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2I8ZDtiKyspaWYoci5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihjPXRoaXMucHVzaFN0YWNrKFtdKSxiPTA7YjxkO2IrKylyLmZpbmQoYSxlW2JdLGMpO3JldHVybiBkPjE/ci51bmlxdWVTb3J0KGMpOmN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRCh0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRCh0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEhRCh0aGlzLFwic3RyaW5nXCI9PXR5cGVvZiBhJiZBLnRlc3QoYSk/cihhKTphfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBFLEY9L14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKykpJC8sRz1yLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxFLFwic3RyaW5nXCI9PXR5cGVvZiBhKXtpZihlPVwiPFwiPT09YVswXSYmXCI+XCI9PT1hW2EubGVuZ3RoLTFdJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOkYuZXhlYyhhKSwhZXx8IWVbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHxjKS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihlWzFdKXtpZihiPWIgaW5zdGFuY2VvZiByP2JbMF06YixyLm1lcmdlKHRoaXMsci5wYXJzZUhUTUwoZVsxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8YjpkLCEwKSksQi50ZXN0KGVbMV0pJiZyLmlzUGxhaW5PYmplY3QoYikpZm9yKGUgaW4gYilyLmlzRnVuY3Rpb24odGhpc1tlXSk/dGhpc1tlXShiW2VdKTp0aGlzLmF0dHIoZSxiW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4gZj1kLmdldEVsZW1lbnRCeUlkKGVbMl0pLGYmJih0aGlzWzBdPWYsdGhpcy5sZW5ndGg9MSksdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6ci5pc0Z1bmN0aW9uKGEpP3ZvaWQgMCE9PWMucmVhZHk/Yy5yZWFkeShhKTphKHIpOnIubWFrZUFycmF5KGEsdGhpcyl9O0cucHJvdG90eXBlPXIuZm4sRT1yKGQpO3ZhciBIPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEk9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07ci5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1yKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGM7YSsrKWlmKHIuY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPVwic3RyaW5nXCIhPXR5cGVvZiBhJiZyKGEpO2lmKCFBLnRlc3QoYSkpZm9yKDtkPGU7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmci5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP3IudW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/XCJzdHJpbmdcIj09dHlwZW9mIGE/aS5jYWxsKHIoYSksdGhpc1swXSk6aS5jYWxsKHRoaXMsYS5qcXVlcnk/YVswXTphKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnB1c2hTdGFjayhyLnVuaXF1ZVNvcnQoci5tZXJnZSh0aGlzLmdldCgpLHIoYSxiKSkpKX0sYWRkQmFjazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09YT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihhKSl9fSk7ZnVuY3Rpb24gSihhLGIpe3doaWxlKChhPWFbYl0pJiYxIT09YS5ub2RlVHlwZSk7cmV0dXJuIGF9ci5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiYxMSE9PWIubm9kZVR5cGU/YjpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiB5KGEsXCJwYXJlbnROb2RlXCIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB5KGEsXCJwYXJlbnROb2RlXCIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEooYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBKKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB5KGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHkoYSxcIm5leHRTaWJsaW5nXCIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHkoYSxcInByZXZpb3VzU2libGluZ1wiLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4geigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHooYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudERvY3VtZW50fHxyLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe3IuZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1yLm1hcCh0aGlzLGIsYyk7cmV0dXJuXCJVbnRpbFwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJlwic3RyaW5nXCI9PXR5cGVvZiBkJiYoZT1yLmZpbHRlcihkLGUpKSx0aGlzLmxlbmd0aD4xJiYoSVthXXx8ci51bmlxdWVTb3J0KGUpLEgudGVzdChhKSYmZS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBLPS9bXlxceDIwXFx0XFxyXFxuXFxmXSsvZztmdW5jdGlvbiBMKGEpe3ZhciBiPXt9O3JldHVybiByLmVhY2goYS5tYXRjaChLKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1yLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPVwic3RyaW5nXCI9PXR5cGVvZiBhP0woYSk6ci5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZj1bXSxnPVtdLGg9LTEsaT1mdW5jdGlvbigpe2ZvcihlPWEub25jZSxkPWI9ITA7Zy5sZW5ndGg7aD0tMSl7Yz1nLnNoaWZ0KCk7d2hpbGUoKytoPGYubGVuZ3RoKWZbaF0uYXBwbHkoY1swXSxjWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlJiYoaD1mLmxlbmd0aCxjPSExKX1hLm1lbW9yeXx8KGM9ITEpLGI9ITEsZSYmKGY9Yz9bXTpcIlwiKX0saj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIGYmJihjJiYhYiYmKGg9Zi5sZW5ndGgtMSxnLnB1c2goYykpLGZ1bmN0aW9uIGQoYil7ci5lYWNoKGIsZnVuY3Rpb24oYixjKXtyLmlzRnVuY3Rpb24oYyk/YS51bmlxdWUmJmouaGFzKGMpfHxmLnB1c2goYyk6YyYmYy5sZW5ndGgmJlwic3RyaW5nXCIhPT1yLnR5cGUoYykmJmQoYyl9KX0oYXJndW1lbnRzKSxjJiYhYiYmaSgpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gci5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihhLGIpe3ZhciBjO3doaWxlKChjPXIuaW5BcnJheShiLGYsYykpPi0xKWYuc3BsaWNlKGMsMSksYzw9aCYmaC0tfSksdGhpc30saGFzOmZ1bmN0aW9uKGEpe3JldHVybiBhP3IuaW5BcnJheShhLGYpPi0xOmYubGVuZ3RoPjB9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIGYmJihmPVtdKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGU9Zz1bXSxmPWM9XCJcIix0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFmfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGU9Zz1bXSxjfHxifHwoZj1jPVwiXCIpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiEhZX0sZmlyZVdpdGg6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gZXx8KGM9Y3x8W10sYz1bYSxjLnNsaWNlP2Muc2xpY2UoKTpjXSxnLnB1c2goYyksYnx8aSgpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGouZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFkfX07cmV0dXJuIGp9O2Z1bmN0aW9uIE0oYSl7cmV0dXJuIGF9ZnVuY3Rpb24gTihhKXt0aHJvdyBhfWZ1bmN0aW9uIE8oYSxiLGMpe3ZhciBkO3RyeXthJiZyLmlzRnVuY3Rpb24oZD1hLnByb21pc2UpP2QuY2FsbChhKS5kb25lKGIpLmZhaWwoYyk6YSYmci5pc0Z1bmN0aW9uKGQ9YS50aGVuKT9kLmNhbGwoYSxiLGMpOmIuY2FsbCh2b2lkIDAsYSl9Y2F0Y2goYSl7Yy5jYWxsKHZvaWQgMCxhKX19ci5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGIpe3ZhciBjPVtbXCJub3RpZnlcIixcInByb2dyZXNzXCIsci5DYWxsYmFja3MoXCJtZW1vcnlcIiksci5DYWxsYmFja3MoXCJtZW1vcnlcIiksMl0sW1wicmVzb2x2ZVwiLFwiZG9uZVwiLHIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksci5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwwLFwicmVzb2x2ZWRcIl0sW1wicmVqZWN0XCIsXCJmYWlsXCIsci5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxyLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLDEsXCJyZWplY3RlZFwiXV0sZD1cInBlbmRpbmdcIixlPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBkfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZi5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LFwiY2F0Y2hcIjpmdW5jdGlvbihhKXtyZXR1cm4gZS50aGVuKG51bGwsYSl9LHBpcGU6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIHIuRGVmZXJyZWQoZnVuY3Rpb24oYil7ci5lYWNoKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1yLmlzRnVuY3Rpb24oYVtkWzRdXSkmJmFbZFs0XV07ZltkWzFdXShmdW5jdGlvbigpe3ZhciBhPWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJnIuaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLnByb2dyZXNzKGIubm90aWZ5KS5kb25lKGIucmVzb2x2ZSkuZmFpbChiLnJlamVjdCk6YltkWzBdK1wiV2l0aFwiXSh0aGlzLGU/W2FdOmFyZ3VtZW50cyl9KX0pLGE9bnVsbH0pLnByb21pc2UoKX0sdGhlbjpmdW5jdGlvbihiLGQsZSl7dmFyIGY9MDtmdW5jdGlvbiBnKGIsYyxkLGUpe3JldHVybiBmdW5jdGlvbigpe3ZhciBoPXRoaXMsaT1hcmd1bWVudHMsaj1mdW5jdGlvbigpe3ZhciBhLGo7aWYoIShiPGYpKXtpZihhPWQuYXBwbHkoaCxpKSxhPT09Yy5wcm9taXNlKCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvblwiKTtqPWEmJihcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYSkmJmEudGhlbixyLmlzRnVuY3Rpb24oaik/ZT9qLmNhbGwoYSxnKGYsYyxNLGUpLGcoZixjLE4sZSkpOihmKyssai5jYWxsKGEsZyhmLGMsTSxlKSxnKGYsYyxOLGUpLGcoZixjLE0sYy5ub3RpZnlXaXRoKSkpOihkIT09TSYmKGg9dm9pZCAwLGk9W2FdKSwoZXx8Yy5yZXNvbHZlV2l0aCkoaCxpKSl9fSxrPWU/ajpmdW5jdGlvbigpe3RyeXtqKCl9Y2F0Y2goYSl7ci5EZWZlcnJlZC5leGNlcHRpb25Ib29rJiZyLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2soYSxrLnN0YWNrVHJhY2UpLGIrMT49ZiYmKGQhPT1OJiYoaD12b2lkIDAsaT1bYV0pLGMucmVqZWN0V2l0aChoLGkpKX19O2I/aygpOihyLkRlZmVycmVkLmdldFN0YWNrSG9vayYmKGsuc3RhY2tUcmFjZT1yLkRlZmVycmVkLmdldFN0YWNrSG9vaygpKSxhLnNldFRpbWVvdXQoaykpfX1yZXR1cm4gci5EZWZlcnJlZChmdW5jdGlvbihhKXtjWzBdWzNdLmFkZChnKDAsYSxyLmlzRnVuY3Rpb24oZSk/ZTpNLGEubm90aWZ5V2l0aCkpLGNbMV1bM10uYWRkKGcoMCxhLHIuaXNGdW5jdGlvbihiKT9iOk0pKSxjWzJdWzNdLmFkZChnKDAsYSxyLmlzRnVuY3Rpb24oZCk/ZDpOKSl9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/ci5leHRlbmQoYSxlKTplfX0sZj17fTtyZXR1cm4gci5lYWNoKGMsZnVuY3Rpb24oYSxiKXt2YXIgZz1iWzJdLGg9Yls1XTtlW2JbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7ZD1ofSxjWzMtYV1bMl0uZGlzYWJsZSxjWzBdWzJdLmxvY2spLGcuYWRkKGJbM10uZmlyZSksZltiWzBdXT1mdW5jdGlvbigpe3JldHVybiBmW2JbMF0rXCJXaXRoXCJdKHRoaXM9PT1mP3ZvaWQgMDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZltiWzBdK1wiV2l0aFwiXT1nLmZpcmVXaXRofSksZS5wcm9taXNlKGYpLGImJmIuY2FsbChmLGYpLGZ9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9YXJndW1lbnRzLmxlbmd0aCxjPWIsZD1BcnJheShjKSxlPWYuY2FsbChhcmd1bWVudHMpLGc9ci5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe2RbYV09dGhpcyxlW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9mLmNhbGwoYXJndW1lbnRzKTpjLC0tYnx8Zy5yZXNvbHZlV2l0aChkLGUpfX07aWYoYjw9MSYmKE8oYSxnLmRvbmUoaChjKSkucmVzb2x2ZSxnLnJlamVjdCksXCJwZW5kaW5nXCI9PT1nLnN0YXRlKCl8fHIuaXNGdW5jdGlvbihlW2NdJiZlW2NdLnRoZW4pKSlyZXR1cm4gZy50aGVuKCk7d2hpbGUoYy0tKU8oZVtjXSxoKGMpLGcucmVqZWN0KTtyZXR1cm4gZy5wcm9taXNlKCl9fSk7dmFyIFA9L14oRXZhbHxJbnRlcm5hbHxSYW5nZXxSZWZlcmVuY2V8U3ludGF4fFR5cGV8VVJJKUVycm9yJC87ci5EZWZlcnJlZC5leGNlcHRpb25Ib29rPWZ1bmN0aW9uKGIsYyl7YS5jb25zb2xlJiZhLmNvbnNvbGUud2FybiYmYiYmUC50ZXN0KGIubmFtZSkmJmEuY29uc29sZS53YXJuKFwialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogXCIrYi5tZXNzYWdlLGIuc3RhY2ssYyl9LHIucmVhZHlFeGNlcHRpb249ZnVuY3Rpb24oYil7YS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgYn0pfTt2YXIgUT1yLkRlZmVycmVkKCk7ci5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gUS50aGVuKGEpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7ci5yZWFkeUV4Y2VwdGlvbihhKX0pLHRoaXN9LHIuZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP3IucmVhZHlXYWl0Kys6ci5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpeyhhPT09ITA/LS1yLnJlYWR5V2FpdDpyLmlzUmVhZHkpfHwoci5pc1JlYWR5PSEwLGEhPT0hMCYmLS1yLnJlYWR5V2FpdD4wfHxRLnJlc29sdmVXaXRoKGQsW3JdKSl9fSksci5yZWFkeS50aGVuPVEudGhlbjtmdW5jdGlvbiBSKCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLFIpLFxuYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLFIpLHIucmVhZHkoKX1cImNvbXBsZXRlXCI9PT1kLnJlYWR5U3RhdGV8fFwibG9hZGluZ1wiIT09ZC5yZWFkeVN0YXRlJiYhZC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGw/YS5zZXRUaW1lb3V0KHIucmVhZHkpOihkLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsUiksYS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLFIpKTt2YXIgUz1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKFwib2JqZWN0XCI9PT1yLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYylTKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLHIuaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChyKGEpLGMpfSkpLGIpKWZvcig7aDxpO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9LFQ9ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfHw5PT09YS5ub2RlVHlwZXx8ISthLm5vZGVUeXBlfTtmdW5jdGlvbiBVKCl7dGhpcy5leHBhbmRvPXIuZXhwYW5kbytVLnVpZCsrfVUudWlkPTEsVS5wcm90b3R5cGU9e2NhY2hlOmZ1bmN0aW9uKGEpe3ZhciBiPWFbdGhpcy5leHBhbmRvXTtyZXR1cm4gYnx8KGI9e30sVChhKSYmKGEubm9kZVR5cGU/YVt0aGlzLmV4cGFuZG9dPWI6T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsdGhpcy5leHBhbmRvLHt2YWx1ZTpiLGNvbmZpZ3VyYWJsZTohMH0pKSksYn0sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPXRoaXMuY2FjaGUoYSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpZVtyLmNhbWVsQ2FzZShiKV09YztlbHNlIGZvcihkIGluIGIpZVtyLmNhbWVsQ2FzZShkKV09YltkXTtyZXR1cm4gZX0sZ2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHZvaWQgMD09PWI/dGhpcy5jYWNoZShhKTphW3RoaXMuZXhwYW5kb10mJmFbdGhpcy5leHBhbmRvXVtyLmNhbWVsQ2FzZShiKV19LGFjY2VzczpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHZvaWQgMD09PWJ8fGImJlwic3RyaW5nXCI9PXR5cGVvZiBiJiZ2b2lkIDA9PT1jP3RoaXMuZ2V0KGEsYik6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9YVt0aGlzLmV4cGFuZG9dO2lmKHZvaWQgMCE9PWQpe2lmKHZvaWQgMCE9PWIpe3IuaXNBcnJheShiKT9iPWIubWFwKHIuY2FtZWxDYXNlKTooYj1yLmNhbWVsQ2FzZShiKSxiPWIgaW4gZD9bYl06Yi5tYXRjaChLKXx8W10pLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWRlbGV0ZSBkW2JbY11dfSh2b2lkIDA9PT1ifHxyLmlzRW1wdHlPYmplY3QoZCkpJiYoYS5ub2RlVHlwZT9hW3RoaXMuZXhwYW5kb109dm9pZCAwOmRlbGV0ZSBhW3RoaXMuZXhwYW5kb10pfX0saGFzRGF0YTpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMuZXhwYW5kb107cmV0dXJuIHZvaWQgMCE9PWImJiFyLmlzRW1wdHlPYmplY3QoYil9fTt2YXIgVj1uZXcgVSxXPW5ldyBVLFg9L14oPzpcXHtbXFx3XFxXXSpcXH18XFxbW1xcd1xcV10qXFxdKSQvLFk9L1tBLVpdL2c7ZnVuY3Rpb24gWihhKXtyZXR1cm5cInRydWVcIj09PWF8fFwiZmFsc2VcIiE9PWEmJihcIm51bGxcIj09PWE/bnVsbDphPT09K2ErXCJcIj8rYTpYLnRlc3QoYSk/SlNPTi5wYXJzZShhKTphKX1mdW5jdGlvbiAkKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPVwiZGF0YS1cIitiLnJlcGxhY2UoWSxcIi0kJlwiKS50b0xvd2VyQ2FzZSgpLGM9YS5nZXRBdHRyaWJ1dGUoZCksXCJzdHJpbmdcIj09dHlwZW9mIGMpe3RyeXtjPVooYyl9Y2F0Y2goZSl7fVcuc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfXIuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBXLmhhc0RhdGEoYSl8fFYuaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFcuYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1cucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gVi5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1YucmVtb3ZlKGEsYil9fSksci5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1XLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIVYuZ2V0KGYsXCJoYXNEYXRhQXR0cnNcIikpKXtjPWcubGVuZ3RoO3doaWxlKGMtLSlnW2NdJiYoZD1nW2NdLm5hbWUsMD09PWQuaW5kZXhPZihcImRhdGEtXCIpJiYoZD1yLmNhbWVsQ2FzZShkLnNsaWNlKDUpKSwkKGYsZCxlW2RdKSkpO1Yuc2V0KGYsXCJoYXNEYXRhQXR0cnNcIiwhMCl9cmV0dXJuIGV9cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Vy5zZXQodGhpcyxhKX0pOlModGhpcyxmdW5jdGlvbihiKXt2YXIgYztpZihmJiZ2b2lkIDA9PT1iKXtpZihjPVcuZ2V0KGYsYSksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPSQoZixhKSx2b2lkIDAhPT1jKXJldHVybiBjfWVsc2UgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Vy5zZXQodGhpcyxhLGIpfSl9LG51bGwsYixhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1cucmVtb3ZlKHRoaXMsYSl9KX19KSxyLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGEpcmV0dXJuIGI9KGJ8fFwiZnhcIikrXCJxdWV1ZVwiLGQ9Vi5nZXQoYSxiKSxjJiYoIWR8fHIuaXNBcnJheShjKT9kPVYuYWNjZXNzKGEsYixyLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXX0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8XCJmeFwiO3ZhciBjPXIucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9ci5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtyLmRlcXVldWUoYSxiKX07XCJpbnByb2dyZXNzXCI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoXCJmeFwiPT09YiYmYy51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iK1wicXVldWVIb29rc1wiO3JldHVybiBWLmdldChhLGMpfHxWLmFjY2VzcyhhLGMse2VtcHR5OnIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7Vi5yZW1vdmUoYSxbYitcInF1ZXVlXCIsY10pfSl9KX19KSxyLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9XCJmeFwiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP3IucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9ci5xdWV1ZSh0aGlzLGEsYik7ci5fcXVldWVIb29rcyh0aGlzLGEpLFwiZnhcIj09PWEmJlwiaW5wcm9ncmVzc1wiIT09Y1swXSYmci5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9ci5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTtcInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHxcImZ4XCI7d2hpbGUoZy0tKWM9Vi5nZXQoZltnXSxhK1wicXVldWVIb29rc1wiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgXz0vWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLy5zb3VyY2UsYWE9bmV3IFJlZ0V4cChcIl4oPzooWystXSk9fCkoXCIrXytcIikoW2EteiVdKikkXCIsXCJpXCIpLGJhPVtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXSxjYT1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsXCJub25lXCI9PT1hLnN0eWxlLmRpc3BsYXl8fFwiXCI9PT1hLnN0eWxlLmRpc3BsYXkmJnIuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpJiZcIm5vbmVcIj09PXIuY3NzKGEsXCJkaXNwbGF5XCIpfSxkYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX07ZnVuY3Rpb24gZWEoYSxiLGMsZCl7dmFyIGUsZj0xLGc9MjAsaD1kP2Z1bmN0aW9uKCl7cmV0dXJuIGQuY3VyKCl9OmZ1bmN0aW9uKCl7cmV0dXJuIHIuY3NzKGEsYixcIlwiKX0saT1oKCksaj1jJiZjWzNdfHwoci5jc3NOdW1iZXJbYl0/XCJcIjpcInB4XCIpLGs9KHIuY3NzTnVtYmVyW2JdfHxcInB4XCIhPT1qJiYraSkmJmFhLmV4ZWMoci5jc3MoYSxiKSk7aWYoayYma1szXSE9PWope2o9anx8a1szXSxjPWN8fFtdLGs9K2l8fDE7ZG8gZj1mfHxcIi41XCIsay89ZixyLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBmYT17fTtmdW5jdGlvbiBnYShhKXt2YXIgYixjPWEub3duZXJEb2N1bWVudCxkPWEubm9kZU5hbWUsZT1mYVtkXTtyZXR1cm4gZT9lOihiPWMuYm9keS5hcHBlbmRDaGlsZChjLmNyZWF0ZUVsZW1lbnQoZCkpLGU9ci5jc3MoYixcImRpc3BsYXlcIiksYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLFwibm9uZVwiPT09ZSYmKGU9XCJibG9ja1wiKSxmYVtkXT1lLGUpfWZ1bmN0aW9uIGhhKGEsYil7Zm9yKHZhciBjLGQsZT1bXSxmPTAsZz1hLmxlbmd0aDtmPGc7ZisrKWQ9YVtmXSxkLnN0eWxlJiYoYz1kLnN0eWxlLmRpc3BsYXksYj8oXCJub25lXCI9PT1jJiYoZVtmXT1WLmdldChkLFwiZGlzcGxheVwiKXx8bnVsbCxlW2ZdfHwoZC5zdHlsZS5kaXNwbGF5PVwiXCIpKSxcIlwiPT09ZC5zdHlsZS5kaXNwbGF5JiZjYShkKSYmKGVbZl09Z2EoZCkpKTpcIm5vbmVcIiE9PWMmJihlW2ZdPVwibm9uZVwiLFYuc2V0KGQsXCJkaXNwbGF5XCIsYykpKTtmb3IoZj0wO2Y8ZztmKyspbnVsbCE9ZVtmXSYmKGFbZl0uc3R5bGUuZGlzcGxheT1lW2ZdKTtyZXR1cm4gYX1yLmZuLmV4dGVuZCh7c2hvdzpmdW5jdGlvbigpe3JldHVybiBoYSh0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBoYSh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYT9hP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe2NhKHRoaXMpP3IodGhpcykuc2hvdygpOnIodGhpcykuaGlkZSgpfSl9fSk7dmFyIGlhPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLGphPS88KFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKykvaSxrYT0vXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGxhPXtvcHRpb246WzEsXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsXCI8L3NlbGVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXCI8L3Rib2R5PjwvdGFibGU+XCJdLHRkOlszLFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIl0sX2RlZmF1bHQ6WzAsXCJcIixcIlwiXX07bGEub3B0Z3JvdXA9bGEub3B0aW9uLGxhLnRib2R5PWxhLnRmb290PWxhLmNvbGdyb3VwPWxhLmNhcHRpb249bGEudGhlYWQsbGEudGg9bGEudGQ7ZnVuY3Rpb24gbWEoYSxiKXt2YXIgYztyZXR1cm4gYz1cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fFwiKlwiKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHxcIipcIik6W10sdm9pZCAwPT09Ynx8YiYmci5ub2RlTmFtZShhLGIpP3IubWVyZ2UoW2FdLGMpOmN9ZnVuY3Rpb24gbmEoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspVi5zZXQoYVtjXSxcImdsb2JhbEV2YWxcIiwhYnx8Vi5nZXQoYltjXSxcImdsb2JhbEV2YWxcIikpfXZhciBvYT0vPHwmIz9cXHcrOy87ZnVuY3Rpb24gcGEoYSxiLGMsZCxlKXtmb3IodmFyIGYsZyxoLGksaixrLGw9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbT1bXSxuPTAsbz1hLmxlbmd0aDtuPG87bisrKWlmKGY9YVtuXSxmfHwwPT09ZilpZihcIm9iamVjdFwiPT09ci50eXBlKGYpKXIubWVyZ2UobSxmLm5vZGVUeXBlP1tmXTpmKTtlbHNlIGlmKG9hLnRlc3QoZikpe2c9Z3x8bC5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGg9KGphLmV4ZWMoZil8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpLGk9bGFbaF18fGxhLl9kZWZhdWx0LGcuaW5uZXJIVE1MPWlbMV0rci5odG1sUHJlZmlsdGVyKGYpK2lbMl0saz1pWzBdO3doaWxlKGstLSlnPWcubGFzdENoaWxkO3IubWVyZ2UobSxnLmNoaWxkTm9kZXMpLGc9bC5maXJzdENoaWxkLGcudGV4dENvbnRlbnQ9XCJcIn1lbHNlIG0ucHVzaChiLmNyZWF0ZVRleHROb2RlKGYpKTtsLnRleHRDb250ZW50PVwiXCIsbj0wO3doaWxlKGY9bVtuKytdKWlmKGQmJnIuaW5BcnJheShmLGQpPi0xKWUmJmUucHVzaChmKTtlbHNlIGlmKGo9ci5jb250YWlucyhmLm93bmVyRG9jdW1lbnQsZiksZz1tYShsLmFwcGVuZENoaWxkKGYpLFwic2NyaXB0XCIpLGomJm5hKGcpLGMpe2s9MDt3aGlsZShmPWdbaysrXSlrYS50ZXN0KGYudHlwZXx8XCJcIikmJmMucHVzaChmKX1yZXR1cm4gbH0hZnVuY3Rpb24oKXt2YXIgYT1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxiPWEuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxjPWQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2Muc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIiksYy5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsXCJjaGVja2VkXCIpLGMuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwidFwiKSxiLmFwcGVuZENoaWxkKGMpLG8uY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD1cIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIixvLm5vQ2xvbmVDaGVja2VkPSEhYi5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIHFhPWQuZG9jdW1lbnRFbGVtZW50LHJhPS9ea2V5LyxzYT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sdGE9L14oW14uXSopKD86XFwuKC4rKXwpLztmdW5jdGlvbiB1YSgpe3JldHVybiEwfWZ1bmN0aW9uIHZhKCl7cmV0dXJuITF9ZnVuY3Rpb24gd2EoKXt0cnl7cmV0dXJuIGQuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fWZ1bmN0aW9uIHhhKGEsYixjLGQsZSxmKXt2YXIgZyxoO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBiKXtcInN0cmluZ1wiIT10eXBlb2YgYyYmKGQ9ZHx8YyxjPXZvaWQgMCk7Zm9yKGggaW4gYil4YShhLGgsYyxkLGJbaF0sZik7cmV0dXJuIGF9aWYobnVsbD09ZCYmbnVsbD09ZT8oZT1jLGQ9Yz12b2lkIDApOm51bGw9PWUmJihcInN0cmluZ1wiPT10eXBlb2YgYz8oZT1kLGQ9dm9pZCAwKTooZT1kLGQ9YyxjPXZvaWQgMCkpLGU9PT0hMSllPXZhO2Vsc2UgaWYoIWUpcmV0dXJuIGE7cmV0dXJuIDE9PT1mJiYoZz1lLGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHIoKS5vZmYoYSksZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZ3VpZD1nLmd1aWR8fChnLmd1aWQ9ci5ndWlkKyspKSxhLmVhY2goZnVuY3Rpb24oKXtyLmV2ZW50LmFkZCh0aGlzLGIsZSxkLGMpfSl9ci5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbixvLHAscT1WLmdldChhKTtpZihxKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxlJiZyLmZpbmQubWF0Y2hlc1NlbGVjdG9yKHFhLGUpLGMuZ3VpZHx8KGMuZ3VpZD1yLmd1aWQrKyksKGk9cS5ldmVudHMpfHwoaT1xLmV2ZW50cz17fSksKGc9cS5oYW5kbGUpfHwoZz1xLmhhbmRsZT1mdW5jdGlvbihiKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgciYmci5ldmVudC50cmlnZ2VyZWQhPT1iLnR5cGU/ci5ldmVudC5kaXNwYXRjaC5hcHBseShhLGFyZ3VtZW50cyk6dm9pZCAwfSksYj0oYnx8XCJcIikubWF0Y2goSyl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPXRhLmV4ZWMoYltqXSl8fFtdLG49cD1oWzFdLG89KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbiYmKGw9ci5ldmVudC5zcGVjaWFsW25dfHx7fSxuPShlP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxuLGw9ci5ldmVudC5zcGVjaWFsW25dfHx7fSxrPXIuZXh0ZW5kKHt0eXBlOm4sb3JpZ1R5cGU6cCxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJnIuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6by5qb2luKFwiLlwiKX0sZiksKG09aVtuXSl8fChtPWlbbl09W10sbS5kZWxlZ2F0ZUNvdW50PTAsbC5zZXR1cCYmbC5zZXR1cC5jYWxsKGEsZCxvLGcpIT09ITF8fGEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKG4sZykpLGwuYWRkJiYobC5hZGQuY2FsbChhLGspLGsuaGFuZGxlci5ndWlkfHwoay5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9tLnNwbGljZShtLmRlbGVnYXRlQ291bnQrKywwLGspOm0ucHVzaChrKSxyLmV2ZW50Lmdsb2JhbFtuXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG4sbyxwLHE9Vi5oYXNEYXRhKGEpJiZWLmdldChhKTtpZihxJiYoaT1xLmV2ZW50cykpe2I9KGJ8fFwiXCIpLm1hdGNoKEspfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paWYoaD10YS5leGVjKGJbal0pfHxbXSxuPXA9aFsxXSxvPShoWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLG4pe2w9ci5ldmVudC5zcGVjaWFsW25dfHx7fSxuPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxuLG09aVtuXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrby5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIiksZz1mPW0ubGVuZ3RoO3doaWxlKGYtLSlrPW1bZl0sIWUmJnAhPT1rLm9yaWdUeXBlfHxjJiZjLmd1aWQhPT1rLmd1aWR8fGgmJiFoLnRlc3Qoay5uYW1lc3BhY2UpfHxkJiZkIT09ay5zZWxlY3RvciYmKFwiKipcIiE9PWR8fCFrLnNlbGVjdG9yKXx8KG0uc3BsaWNlKGYsMSksay5zZWxlY3RvciYmbS5kZWxlZ2F0ZUNvdW50LS0sbC5yZW1vdmUmJmwucmVtb3ZlLmNhbGwoYSxrKSk7ZyYmIW0ubGVuZ3RoJiYobC50ZWFyZG93biYmbC50ZWFyZG93bi5jYWxsKGEsbyxxLmhhbmRsZSkhPT0hMXx8ci5yZW1vdmVFdmVudChhLG4scS5oYW5kbGUpLGRlbGV0ZSBpW25dKX1lbHNlIGZvcihuIGluIGkpci5ldmVudC5yZW1vdmUoYSxuK2Jbal0sYyxkLCEwKTtyLmlzRW1wdHlPYmplY3QoaSkmJlYucmVtb3ZlKGEsXCJoYW5kbGUgZXZlbnRzXCIpfX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dmFyIGI9ci5ldmVudC5maXgoYSksYyxkLGUsZixnLGgsaT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksaj0oVi5nZXQodGhpcyxcImV2ZW50c1wiKXx8e30pW2IudHlwZV18fFtdLGs9ci5ldmVudC5zcGVjaWFsW2IudHlwZV18fHt9O2ZvcihpWzBdPWIsYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspaVtjXT1hcmd1bWVudHNbY107aWYoYi5kZWxlZ2F0ZVRhcmdldD10aGlzLCFrLnByZURpc3BhdGNofHxrLnByZURpc3BhdGNoLmNhbGwodGhpcyxiKSE9PSExKXtoPXIuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGIsaiksYz0wO3doaWxlKChmPWhbYysrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2IuY3VycmVudFRhcmdldD1mLmVsZW0sZD0wO3doaWxlKChnPWYuaGFuZGxlcnNbZCsrXSkmJiFiLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpYi5ybmFtZXNwYWNlJiYhYi5ybmFtZXNwYWNlLnRlc3QoZy5uYW1lc3BhY2UpfHwoYi5oYW5kbGVPYmo9ZyxiLmRhdGE9Zy5kYXRhLGU9KChyLmV2ZW50LnNwZWNpYWxbZy5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGcuaGFuZGxlcikuYXBwbHkoZi5lbGVtLGkpLHZvaWQgMCE9PWUmJihiLnJlc3VsdD1lKT09PSExJiYoYi5wcmV2ZW50RGVmYXVsdCgpLGIuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gay5wb3N0RGlzcGF0Y2gmJmsucG9zdERpc3BhdGNoLmNhbGwodGhpcyxiKSxiLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZyxoPVtdLGk9Yi5kZWxlZ2F0ZUNvdW50LGo9YS50YXJnZXQ7aWYoaSYmai5ub2RlVHlwZSYmIShcImNsaWNrXCI9PT1hLnR5cGUmJmEuYnV0dG9uPj0xKSlmb3IoO2ohPT10aGlzO2o9ai5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1qLm5vZGVUeXBlJiYoXCJjbGlja1wiIT09YS50eXBlfHxqLmRpc2FibGVkIT09ITApKXtmb3IoZj1bXSxnPXt9LGM9MDtjPGk7YysrKWQ9YltjXSxlPWQuc2VsZWN0b3IrXCIgXCIsdm9pZCAwPT09Z1tlXSYmKGdbZV09ZC5uZWVkc0NvbnRleHQ/cihlLHRoaXMpLmluZGV4KGopPi0xOnIuZmluZChlLHRoaXMsbnVsbCxbal0pLmxlbmd0aCksZ1tlXSYmZi5wdXNoKGQpO2YubGVuZ3RoJiZoLnB1c2goe2VsZW06aixoYW5kbGVyczpmfSl9cmV0dXJuIGo9dGhpcyxpPGIubGVuZ3RoJiZoLnB1c2goe2VsZW06aixoYW5kbGVyczpiLnNsaWNlKGkpfSksaH0sYWRkUHJvcDpmdW5jdGlvbihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLkV2ZW50LnByb3RvdHlwZSxhLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ci5pc0Z1bmN0aW9uKGIpP2Z1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbEV2ZW50KXJldHVybiBiKHRoaXMub3JpZ2luYWxFdmVudCl9OmZ1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbEV2ZW50KXJldHVybiB0aGlzLm9yaWdpbmFsRXZlbnRbYV19LHNldDpmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxhLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpifSl9fSl9LGZpeDpmdW5jdGlvbihhKXtyZXR1cm4gYVtyLmV4cGFuZG9dP2E6bmV3IHIuRXZlbnQoYSl9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXMhPT13YSgpJiZ0aGlzLmZvY3VzKXJldHVybiB0aGlzLmZvY3VzKCksITF9LGRlbGVnYXRlVHlwZTpcImZvY3VzaW5cIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXM9PT13YSgpJiZ0aGlzLmJsdXIpcmV0dXJuIHRoaXMuYmx1cigpLCExfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c291dFwifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKFwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmdGhpcy5jbGljayYmci5ub2RlTmFtZSh0aGlzLFwiaW5wdXRcIikpcmV0dXJuIHRoaXMuY2xpY2soKSwhMX0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHIubm9kZU5hbWUoYS50YXJnZXQsXCJhXCIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX19LHIucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9LHIuRXZlbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIHIuRXZlbnQ/KGEmJmEudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWEsdGhpcy50eXBlPWEudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWEuZGVmYXVsdFByZXZlbnRlZCYmYS5yZXR1cm5WYWx1ZT09PSExP3VhOnZhLHRoaXMudGFyZ2V0PWEudGFyZ2V0JiYzPT09YS50YXJnZXQubm9kZVR5cGU/YS50YXJnZXQucGFyZW50Tm9kZTphLnRhcmdldCx0aGlzLmN1cnJlbnRUYXJnZXQ9YS5jdXJyZW50VGFyZ2V0LHRoaXMucmVsYXRlZFRhcmdldD1hLnJlbGF0ZWRUYXJnZXQpOnRoaXMudHlwZT1hLGImJnIuZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fHIubm93KCksdm9pZCh0aGlzW3IuZXhwYW5kb109ITApKTpuZXcgci5FdmVudChhLGIpfSxyLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6ci5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6dmEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6dmEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6dmEsaXNTaW11bGF0ZWQ6ITEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9dWEsYSYmIXRoaXMuaXNTaW11bGF0ZWQmJmEucHJldmVudERlZmF1bHQoKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9dWEsYSYmIXRoaXMuaXNTaW11bGF0ZWQmJmEuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPXVhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxyLmVhY2goe2FsdEtleTohMCxidWJibGVzOiEwLGNhbmNlbGFibGU6ITAsY2hhbmdlZFRvdWNoZXM6ITAsY3RybEtleTohMCxkZXRhaWw6ITAsZXZlbnRQaGFzZTohMCxtZXRhS2V5OiEwLHBhZ2VYOiEwLHBhZ2VZOiEwLHNoaWZ0S2V5OiEwLHZpZXc6ITAsXCJjaGFyXCI6ITAsY2hhckNvZGU6ITAsa2V5OiEwLGtleUNvZGU6ITAsYnV0dG9uOiEwLGJ1dHRvbnM6ITAsY2xpZW50WDohMCxjbGllbnRZOiEwLG9mZnNldFg6ITAsb2Zmc2V0WTohMCxwb2ludGVySWQ6ITAscG9pbnRlclR5cGU6ITAsc2NyZWVuWDohMCxzY3JlZW5ZOiEwLHRhcmdldFRvdWNoZXM6ITAsdG9FbGVtZW50OiEwLHRvdWNoZXM6ITAsd2hpY2g6ZnVuY3Rpb24oYSl7dmFyIGI9YS5idXR0b247cmV0dXJuIG51bGw9PWEud2hpY2gmJnJhLnRlc3QoYS50eXBlKT9udWxsIT1hLmNoYXJDb2RlP2EuY2hhckNvZGU6YS5rZXlDb2RlOiFhLndoaWNoJiZ2b2lkIDAhPT1iJiZzYS50ZXN0KGEudHlwZSk/MSZiPzE6MiZiPzM6NCZiPzI6MDphLndoaWNofX0sci5ldmVudC5hZGRQcm9wKSxyLmVhY2goe21vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIixtb3VzZWxlYXZlOlwibW91c2VvdXRcIixwb2ludGVyZW50ZXI6XCJwb2ludGVyb3ZlclwiLHBvaW50ZXJsZWF2ZTpcInBvaW50ZXJvdXRcIn0sZnVuY3Rpb24oYSxiKXtyLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fHIuY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLHIuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4geGEodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB4YSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixyKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlK1wiLlwiK2QubmFtZXNwYWNlOmQub3JpZ1R5cGUsZC5zZWxlY3RvcixkLmhhbmRsZXIpLHRoaXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybiBiIT09ITEmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9dmEpLHRoaXMuZWFjaChmdW5jdGlvbigpe3IuZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9fSk7dmFyIHlhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKilbXj5dKilcXC8+L2dpLHphPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLEFhPS9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksQmE9L150cnVlXFwvKC4qKS8sQ2E9L15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nO2Z1bmN0aW9uIERhKGEsYil7cmV0dXJuIHIubm9kZU5hbWUoYSxcInRhYmxlXCIpJiZyLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCxcInRyXCIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKVswXXx8YTphfWZ1bmN0aW9uIEVhKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpK1wiL1wiK2EudHlwZSxhfWZ1bmN0aW9uIEZhKGEpe3ZhciBiPUJhLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIiksYX1mdW5jdGlvbiBHYShhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGo7aWYoMT09PWIubm9kZVR5cGUpe2lmKFYuaGFzRGF0YShhKSYmKGY9Vi5hY2Nlc3MoYSksZz1WLnNldChiLGYpLGo9Zi5ldmVudHMpKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGUgaW4gailmb3IoYz0wLGQ9altlXS5sZW5ndGg7YzxkO2MrKylyLmV2ZW50LmFkZChiLGUsaltlXVtjXSl9Vy5oYXNEYXRhKGEpJiYoaD1XLmFjY2VzcyhhKSxpPXIuZXh0ZW5kKHt9LGgpLFcuc2V0KGIsaSkpfX1mdW5jdGlvbiBIYShhLGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcImlucHV0XCI9PT1jJiZpYS50ZXN0KGEudHlwZSk/Yi5jaGVja2VkPWEuY2hlY2tlZDpcImlucHV0XCIhPT1jJiZcInRleHRhcmVhXCIhPT1jfHwoYi5kZWZhdWx0VmFsdWU9YS5kZWZhdWx0VmFsdWUpfWZ1bmN0aW9uIElhKGEsYixjLGQpe2I9Zy5hcHBseShbXSxiKTt2YXIgZSxmLGgsaSxqLGssbD0wLG09YS5sZW5ndGgsbj1tLTEscT1iWzBdLHM9ci5pc0Z1bmN0aW9uKHEpO2lmKHN8fG0+MSYmXCJzdHJpbmdcIj09dHlwZW9mIHEmJiFvLmNoZWNrQ2xvbmUmJkFhLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3MmJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSxJYShmLGIsYyxkKX0pO2lmKG0mJihlPXBhKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZj1lLmZpcnN0Q2hpbGQsMT09PWUuY2hpbGROb2Rlcy5sZW5ndGgmJihlPWYpLGZ8fGQpKXtmb3IoaD1yLm1hcChtYShlLFwic2NyaXB0XCIpLEVhKSxpPWgubGVuZ3RoO2w8bTtsKyspaj1lLGwhPT1uJiYoaj1yLmNsb25lKGosITAsITApLGkmJnIubWVyZ2UoaCxtYShqLFwic2NyaXB0XCIpKSksYy5jYWxsKGFbbF0saixsKTtpZihpKWZvcihrPWhbaC5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxyLm1hcChoLEZhKSxsPTA7bDxpO2wrKylqPWhbbF0sa2EudGVzdChqLnR5cGV8fFwiXCIpJiYhVi5hY2Nlc3MoaixcImdsb2JhbEV2YWxcIikmJnIuY29udGFpbnMoayxqKSYmKGouc3JjP3IuX2V2YWxVcmwmJnIuX2V2YWxVcmwoai5zcmMpOnAoai50ZXh0Q29udGVudC5yZXBsYWNlKENhLFwiXCIpLGspKX1yZXR1cm4gYX1mdW5jdGlvbiBKYShhLGIsYyl7Zm9yKHZhciBkLGU9Yj9yLmZpbHRlcihiLGEpOmEsZj0wO251bGwhPShkPWVbZl0pO2YrKyljfHwxIT09ZC5ub2RlVHlwZXx8ci5jbGVhbkRhdGEobWEoZCkpLGQucGFyZW50Tm9kZSYmKGMmJnIuY29udGFpbnMoZC5vd25lckRvY3VtZW50LGQpJiZuYShtYShkLFwic2NyaXB0XCIpKSxkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCkpO3JldHVybiBhfXIuZXh0ZW5kKHtodG1sUHJlZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoeWEsXCI8JDE+PC8kMj5cIil9LGNsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPXIuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoby5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8ci5pc1hNTERvYyhhKSkpZm9yKGc9bWEoaCksZj1tYShhKSxkPTAsZT1mLmxlbmd0aDtkPGU7ZCsrKUhhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG1hKGEpLGc9Z3x8bWEoaCksZD0wLGU9Zi5sZW5ndGg7ZDxlO2QrKylHYShmW2RdLGdbZF0pO2Vsc2UgR2EoYSxoKTtyZXR1cm4gZz1tYShoLFwic2NyaXB0XCIpLGcubGVuZ3RoPjAmJm5hKGcsIWkmJm1hKGEsXCJzY3JpcHRcIikpLGh9LGNsZWFuRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkLGU9ci5ldmVudC5zcGVjaWFsLGY9MDt2b2lkIDAhPT0oYz1hW2ZdKTtmKyspaWYoVChjKSl7aWYoYj1jW1YuZXhwYW5kb10pe2lmKGIuZXZlbnRzKWZvcihkIGluIGIuZXZlbnRzKWVbZF0/ci5ldmVudC5yZW1vdmUoYyxkKTpyLnJlbW92ZUV2ZW50KGMsZCxiLmhhbmRsZSk7Y1tWLmV4cGFuZG9dPXZvaWQgMH1jW1cuZXhwYW5kb10mJihjW1cuZXhwYW5kb109dm9pZCAwKX19fSksci5mbi5leHRlbmQoe2RldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gSmEodGhpcyxhLCEwKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiBKYSh0aGlzLGEpfSx0ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBTKHRoaXMsZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/ci50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7MSE9PXRoaXMubm9kZVR5cGUmJjExIT09dGhpcy5ub2RlVHlwZSYmOSE9PXRoaXMubm9kZVR5cGV8fCh0aGlzLnRleHRDb250ZW50PWEpfSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIElhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1EYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSWEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPURhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gSWEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gSWEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKykxPT09YS5ub2RlVHlwZSYmKHIuY2xlYW5EYXRhKG1hKGEsITEpKSxhLnRleHRDb250ZW50PVwiXCIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGwhPWEmJmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiByLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBTKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYhemEudGVzdChhKSYmIWxhWyhqYS5leGVjKGEpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9ci5odG1sUHJlZmlsdGVyKGEpO3RyeXtmb3IoO2M8ZDtjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKHIuY2xlYW5EYXRhKG1hKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIElhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMucGFyZW50Tm9kZTtyLmluQXJyYXkodGhpcyxhKTwwJiYoci5jbGVhbkRhdGEobWEodGhpcykpLGMmJmMucmVwbGFjZUNoaWxkKGIsdGhpcykpfSxhKX19KSxyLmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oYSxiKXtyLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPVtdLGU9cihhKSxmPWUubGVuZ3RoLTEsZz0wO2c8PWY7ZysrKWM9Zz09PWY/dGhpczp0aGlzLmNsb25lKCEwKSxyKGVbZ10pW2JdKGMpLGguYXBwbHkoZCxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZCl9fSk7dmFyIEthPS9ebWFyZ2luLyxMYT1uZXcgUmVnRXhwKFwiXihcIitfK1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLE1hPWZ1bmN0aW9uKGIpe3ZhciBjPWIub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm4gYyYmYy5vcGVuZXJ8fChjPWEpLGMuZ2V0Q29tcHV0ZWRTdHlsZShiKX07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe2lmKGkpe2kuc3R5bGUuY3NzVGV4dD1cImJveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7dG9wOjElO3dpZHRoOjUwJVwiLGkuaW5uZXJIVE1MPVwiXCIscWEuYXBwZW5kQ2hpbGQoaCk7dmFyIGI9YS5nZXRDb21wdXRlZFN0eWxlKGkpO2M9XCIxJVwiIT09Yi50b3AsZz1cIjJweFwiPT09Yi5tYXJnaW5MZWZ0LGU9XCI0cHhcIj09PWIud2lkdGgsaS5zdHlsZS5tYXJnaW5SaWdodD1cIjUwJVwiLGY9XCI0cHhcIj09PWIubWFyZ2luUmlnaHQscWEucmVtb3ZlQ2hpbGQoaCksaT1udWxsfX12YXIgYyxlLGYsZyxoPWQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxpPWQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLnN0eWxlJiYoaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cImNvbnRlbnQtYm94XCIsaS5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiXCIsby5jbGVhckNsb25lU3R5bGU9XCJjb250ZW50LWJveFwiPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxoLnN0eWxlLmNzc1RleHQ9XCJib3JkZXI6MDt3aWR0aDo4cHg7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O3BhZGRpbmc6MDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZVwiLGguYXBwZW5kQ2hpbGQoaSksci5leHRlbmQobyx7cGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBiKCksY30sYm94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGV9LHBpeGVsTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGZ9LHJlbGlhYmxlTWFyZ2luTGVmdDpmdW5jdGlvbigpe3JldHVybiBiKCksZ319KSl9KCk7ZnVuY3Rpb24gTmEoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHxNYShhKSxjJiYoZz1jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl0sXCJcIiE9PWd8fHIuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1yLnN0eWxlKGEsYikpLCFvLnBpeGVsTWFyZ2luUmlnaHQoKSYmTGEudGVzdChnKSYmS2EudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwIT09Zz9nK1wiXCI6Z31mdW5jdGlvbiBPYShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX12YXIgUGE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFFhPXtwb3NpdGlvbjpcImFic29sdXRlXCIsdmlzaWJpbGl0eTpcImhpZGRlblwiLGRpc3BsYXk6XCJibG9ja1wifSxSYT17bGV0dGVyU3BhY2luZzpcIjBcIixmb250V2VpZ2h0OlwiNDAwXCJ9LFNhPVtcIldlYmtpdFwiLFwiTW96XCIsXCJtc1wiXSxUYT1kLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikuc3R5bGU7ZnVuY3Rpb24gVWEoYSl7aWYoYSBpbiBUYSlyZXR1cm4gYTt2YXIgYj1hWzBdLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPVNhLmxlbmd0aDt3aGlsZShjLS0paWYoYT1TYVtjXStiLGEgaW4gVGEpcmV0dXJuIGF9ZnVuY3Rpb24gVmEoYSxiLGMpe3ZhciBkPWFhLmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzJdLShjfHwwKSkrKGRbM118fFwicHhcIik6Yn1mdW5jdGlvbiBXYShhLGIsYyxkLGUpe3ZhciBmLGc9MDtmb3IoZj1jPT09KGQ/XCJib3JkZXJcIjpcImNvbnRlbnRcIik/NDpcIndpZHRoXCI9PT1iPzE6MDtmPDQ7Zis9MilcIm1hcmdpblwiPT09YyYmKGcrPXIuY3NzKGEsYytiYVtmXSwhMCxlKSksZD8oXCJjb250ZW50XCI9PT1jJiYoZy09ci5jc3MoYSxcInBhZGRpbmdcIitiYVtmXSwhMCxlKSksXCJtYXJnaW5cIiE9PWMmJihnLT1yLmNzcyhhLFwiYm9yZGVyXCIrYmFbZl0rXCJXaWR0aFwiLCEwLGUpKSk6KGcrPXIuY3NzKGEsXCJwYWRkaW5nXCIrYmFbZl0sITAsZSksXCJwYWRkaW5nXCIhPT1jJiYoZys9ci5jc3MoYSxcImJvcmRlclwiK2JhW2ZdK1wiV2lkdGhcIiwhMCxlKSkpO3JldHVybiBnfWZ1bmN0aW9uIFhhKGEsYixjKXt2YXIgZCxlPSEwLGY9TWEoYSksZz1cImJvcmRlci1ib3hcIj09PXIuY3NzKGEsXCJib3hTaXppbmdcIiwhMSxmKTtpZihhLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiYoZD1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW2JdKSxkPD0wfHxudWxsPT1kKXtpZihkPU5hKGEsYixmKSwoZDwwfHxudWxsPT1kKSYmKGQ9YS5zdHlsZVtiXSksTGEudGVzdChkKSlyZXR1cm4gZDtlPWcmJihvLmJveFNpemluZ1JlbGlhYmxlKCl8fGQ9PT1hLnN0eWxlW2JdKSxkPXBhcnNlRmxvYXQoZCl8fDB9cmV0dXJuIGQrV2EoYSxiLGN8fChnP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpLGUsZikrXCJweFwifXIuZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9TmEoYSxcIm9wYWNpdHlcIik7cmV0dXJuXCJcIj09PWM/XCIxXCI6Y319fX0sY3NzTnVtYmVyOnthbmltYXRpb25JdGVyYXRpb25Db3VudDohMCxjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7XCJmbG9hdFwiOlwiY3NzRmxvYXRcIn0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1yLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7cmV0dXJuIGI9ci5jc3NQcm9wc1toXXx8KHIuY3NzUHJvcHNbaF09VWEoaCl8fGgpLGc9ci5jc3NIb29rc1tiXXx8ci5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJlwiZ2V0XCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl06KGY9dHlwZW9mIGMsXCJzdHJpbmdcIj09PWYmJihlPWFhLmV4ZWMoYykpJiZlWzFdJiYoYz1lYShhLGIsZSksZj1cIm51bWJlclwiKSxudWxsIT1jJiZjPT09YyYmKFwibnVtYmVyXCI9PT1mJiYoYys9ZSYmZVszXXx8KHIuY3NzTnVtYmVyW2hdP1wiXCI6XCJweFwiKSksby5jbGVhckNsb25lU3R5bGV8fFwiXCIhPT1jfHwwIT09Yi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKXx8KGlbYl09XCJpbmhlcml0XCIpLGcmJlwic2V0XCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpfHwoaVtiXT1jKSksdm9pZCAwKX19LGNzczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaD1yLmNhbWVsQ2FzZShiKTtyZXR1cm4gYj1yLmNzc1Byb3BzW2hdfHwoci5jc3NQcm9wc1toXT1VYShoKXx8aCksZz1yLmNzc0hvb2tzW2JdfHxyLmNzc0hvb2tzW2hdLGcmJlwiZ2V0XCJpbiBnJiYoZT1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1lJiYoZT1OYShhLGIsZCkpLFwibm9ybWFsXCI9PT1lJiZiIGluIFJhJiYoZT1SYVtiXSksXCJcIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fGlzRmluaXRlKGYpP2Z8fDA6ZSk6ZX19KSxyLmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihhLGIpe3IuY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7aWYoYylyZXR1cm4hUGEudGVzdChyLmNzcyhhLFwiZGlzcGxheVwiKSl8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg/WGEoYSxiLGQpOmRhKGEsUWEsZnVuY3Rpb24oKXtyZXR1cm4gWGEoYSxiLGQpfSl9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZj1kJiZNYShhKSxnPWQmJldhKGEsYixkLFwiYm9yZGVyLWJveFwiPT09ci5jc3MoYSxcImJveFNpemluZ1wiLCExLGYpLGYpO3JldHVybiBnJiYoZT1hYS5leGVjKGMpKSYmXCJweFwiIT09KGVbM118fFwicHhcIikmJihhLnN0eWxlW2JdPWMsYz1yLmNzcyhhLGIpKSxWYShhLGMsZyl9fX0pLHIuY3NzSG9va3MubWFyZ2luTGVmdD1PYShvLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe2lmKGIpcmV0dXJuKHBhcnNlRmxvYXQoTmEoYSxcIm1hcmdpbkxlZnRcIikpfHxhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtZGEoYSx7bWFyZ2luTGVmdDowfSxmdW5jdGlvbigpe3JldHVybiBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9KSkrXCJweFwifSksci5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oYSxiKXtyLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9XCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5zcGxpdChcIiBcIik6W2NdO2Q8NDtkKyspZVthK2JhW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LEthLnRlc3QoYSl8fChyLmNzc0hvb2tzW2ErYl0uc2V0PVZhKX0pLHIuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyh0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKHIuaXNBcnJheShiKSl7Zm9yKGQ9TWEoYSksZT1iLmxlbmd0aDtnPGU7ZysrKWZbYltnXV09ci5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP3Iuc3R5bGUoYSxiLGMpOnIuY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfX0pO2Z1bmN0aW9uIFlhKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBZYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfXIuVHdlZW49WWEsWWEucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpZYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxyLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KHIuY3NzTnVtYmVyW2NdP1wiXCI6XCJweFwiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGE9WWEucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGEmJmEuZ2V0P2EuZ2V0KHRoaXMpOllhLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihhKXt2YXIgYixjPVlhLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24/dGhpcy5wb3M9Yj1yLmVhc2luZ1t0aGlzLmVhc2luZ10oYSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qYSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTp0aGlzLnBvcz1iPWEsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmIrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksYyYmYy5zZXQ/Yy5zZXQodGhpcyk6WWEucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sWWEucHJvdG90eXBlLmluaXQucHJvdG90eXBlPVlhLnByb3RvdHlwZSxZYS5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIDEhPT1hLmVsZW0ubm9kZVR5cGV8fG51bGwhPWEuZWxlbVthLnByb3BdJiZudWxsPT1hLmVsZW0uc3R5bGVbYS5wcm9wXT9hLmVsZW1bYS5wcm9wXTooYj1yLmNzcyhhLmVsZW0sYS5wcm9wLFwiXCIpLGImJlwiYXV0b1wiIT09Yj9iOjApfSxzZXQ6ZnVuY3Rpb24oYSl7ci5meC5zdGVwW2EucHJvcF0/ci5meC5zdGVwW2EucHJvcF0oYSk6MSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbD09YS5lbGVtLnN0eWxlW3IuY3NzUHJvcHNbYS5wcm9wXV0mJiFyLmNzc0hvb2tzW2EucHJvcF0/YS5lbGVtW2EucHJvcF09YS5ub3c6ci5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCl9fX0sWWEucHJvcEhvb2tzLnNjcm9sbFRvcD1ZYS5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxyLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9LF9kZWZhdWx0Olwic3dpbmdcIn0sci5meD1ZYS5wcm90b3R5cGUuaW5pdCxyLmZ4LnN0ZXA9e307dmFyIFphLCRhLF9hPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxhYj0vcXVldWVIb29rcyQvO2Z1bmN0aW9uIGJiKCl7JGEmJihhLnJlcXVlc3RBbmltYXRpb25GcmFtZShiYiksci5meC50aWNrKCkpfWZ1bmN0aW9uIGNiKCl7cmV0dXJuIGEuc2V0VGltZW91dChmdW5jdGlvbigpe1phPXZvaWQgMH0pLFphPXIubm93KCl9ZnVuY3Rpb24gZGIoYSxiKXt2YXIgYyxkPTAsZT17aGVpZ2h0OmF9O2ZvcihiPWI/MTowO2Q8NDtkKz0yLWIpYz1iYVtkXSxlW1wibWFyZ2luXCIrY109ZVtcInBhZGRpbmdcIitjXT1hO3JldHVybiBiJiYoZS5vcGFjaXR5PWUud2lkdGg9YSksZX1mdW5jdGlvbiBlYihhLGIsYyl7Zm9yKHZhciBkLGU9KGhiLnR3ZWVuZXJzW2JdfHxbXSkuY29uY2F0KGhiLnR3ZWVuZXJzW1wiKlwiXSksZj0wLGc9ZS5sZW5ndGg7ZjxnO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gZmIoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD1cIndpZHRoXCJpbiBifHxcImhlaWdodFwiaW4gYixtPXRoaXMsbj17fSxvPWEuc3R5bGUscD1hLm5vZGVUeXBlJiZjYShhKSxxPVYuZ2V0KGEsXCJmeHNob3dcIik7Yy5xdWV1ZXx8KGc9ci5fcXVldWVIb29rcyhhLFwiZnhcIiksbnVsbD09Zy51bnF1ZXVlZCYmKGcudW5xdWV1ZWQ9MCxoPWcuZW1wdHkuZmlyZSxnLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtnLnVucXVldWVkfHxoKCl9KSxnLnVucXVldWVkKyssbS5hbHdheXMoZnVuY3Rpb24oKXttLmFsd2F5cyhmdW5jdGlvbigpe2cudW5xdWV1ZWQtLSxyLnF1ZXVlKGEsXCJmeFwiKS5sZW5ndGh8fGcuZW1wdHkuZmlyZSgpfSl9KSk7Zm9yKGQgaW4gYilpZihlPWJbZF0sX2EudGVzdChlKSl7aWYoZGVsZXRlIGJbZF0sZj1mfHxcInRvZ2dsZVwiPT09ZSxlPT09KHA/XCJoaWRlXCI6XCJzaG93XCIpKXtpZihcInNob3dcIiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bltkXT1xJiZxW2RdfHxyLnN0eWxlKGEsZCl9aWYoaT0hci5pc0VtcHR5T2JqZWN0KGIpLGl8fCFyLmlzRW1wdHlPYmplY3Qobikpe2wmJjE9PT1hLm5vZGVUeXBlJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1xJiZxLmRpc3BsYXksbnVsbD09aiYmKGo9Vi5nZXQoYSxcImRpc3BsYXlcIikpLGs9ci5jc3MoYSxcImRpc3BsYXlcIiksXCJub25lXCI9PT1rJiYoaj9rPWo6KGhhKFthXSwhMCksaj1hLnN0eWxlLmRpc3BsYXl8fGosaz1yLmNzcyhhLFwiZGlzcGxheVwiKSxoYShbYV0pKSksKFwiaW5saW5lXCI9PT1rfHxcImlubGluZS1ibG9ja1wiPT09ayYmbnVsbCE9aikmJlwibm9uZVwiPT09ci5jc3MoYSxcImZsb2F0XCIpJiYoaXx8KG0uZG9uZShmdW5jdGlvbigpe28uZGlzcGxheT1qfSksbnVsbD09aiYmKGs9by5kaXNwbGF5LGo9XCJub25lXCI9PT1rP1wiXCI6aykpLG8uZGlzcGxheT1cImlubGluZS1ibG9ja1wiKSksYy5vdmVyZmxvdyYmKG8ub3ZlcmZsb3c9XCJoaWRkZW5cIixtLmFsd2F5cyhmdW5jdGlvbigpe28ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxvLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG8ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSksaT0hMTtmb3IoZCBpbiBuKWl8fChxP1wiaGlkZGVuXCJpbiBxJiYocD1xLmhpZGRlbik6cT1WLmFjY2VzcyhhLFwiZnhzaG93XCIse2Rpc3BsYXk6an0pLGYmJihxLmhpZGRlbj0hcCkscCYmaGEoW2FdLCEwKSxtLmRvbmUoZnVuY3Rpb24oKXtwfHxoYShbYV0pLFYucmVtb3ZlKGEsXCJmeHNob3dcIik7Zm9yKGQgaW4gbilyLnN0eWxlKGEsZCxuW2RdKX0pKSxpPWViKHA/cVtkXTowLGQsbSksZCBpbiBxfHwocVtkXT1pLnN0YXJ0LHAmJihpLmVuZD1pLnN0YXJ0LGkuc3RhcnQ9MCkpfX1mdW5jdGlvbiBnYihhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPXIuY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sci5pc0FycmF5KGYpJiYoZT1mWzFdLGY9YVtjXT1mWzBdKSxjIT09ZCYmKGFbZF09ZixkZWxldGUgYVtjXSksZz1yLmNzc0hvb2tzW2RdLGcmJlwiZXhwYW5kXCJpbiBnKXtmPWcuZXhwYW5kKGYpLGRlbGV0ZSBhW2RdO2ZvcihjIGluIGYpYyBpbiBhfHwoYVtjXT1mW2NdLGJbY109ZSl9ZWxzZSBiW2RdPWV9ZnVuY3Rpb24gaGIoYSxiLGMpe3ZhciBkLGUsZj0wLGc9aGIucHJlZmlsdGVycy5sZW5ndGgsaD1yLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIGkuZWxlbX0pLGk9ZnVuY3Rpb24oKXtpZihlKXJldHVybiExO2Zvcih2YXIgYj1aYXx8Y2IoKSxjPU1hdGgubWF4KDAsai5zdGFydFRpbWUrai5kdXJhdGlvbi1iKSxkPWMvai5kdXJhdGlvbnx8MCxmPTEtZCxnPTAsaT1qLnR3ZWVucy5sZW5ndGg7ZzxpO2crKylqLnR3ZWVuc1tnXS5ydW4oZik7cmV0dXJuIGgubm90aWZ5V2l0aChhLFtqLGYsY10pLGY8MSYmaT9jOihoLnJlc29sdmVXaXRoKGEsW2pdKSwhMSl9LGo9aC5wcm9taXNlKHtlbGVtOmEscHJvcHM6ci5leHRlbmQoe30sYiksb3B0czpyLmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fSxlYXNpbmc6ci5lYXNpbmcuX2RlZmF1bHR9LGMpLG9yaWdpbmFsUHJvcGVydGllczpiLG9yaWdpbmFsT3B0aW9uczpjLHN0YXJ0VGltZTpaYXx8Y2IoKSxkdXJhdGlvbjpjLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihiLGMpe3ZhciBkPXIuVHdlZW4oYSxqLm9wdHMsYixjLGoub3B0cy5zcGVjaWFsRWFzaW5nW2JdfHxqLm9wdHMuZWFzaW5nKTtyZXR1cm4gai50d2VlbnMucHVzaChkKSxkfSxzdG9wOmZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1iP2oudHdlZW5zLmxlbmd0aDowO2lmKGUpcmV0dXJuIHRoaXM7Zm9yKGU9ITA7YzxkO2MrKylqLnR3ZWVuc1tjXS5ydW4oMSk7cmV0dXJuIGI/KGgubm90aWZ5V2l0aChhLFtqLDEsMF0pLGgucmVzb2x2ZVdpdGgoYSxbaixiXSkpOmgucmVqZWN0V2l0aChhLFtqLGJdKSx0aGlzfX0pLGs9ai5wcm9wcztmb3IoZ2IoayxqLm9wdHMuc3BlY2lhbEVhc2luZyk7ZjxnO2YrKylpZihkPWhiLnByZWZpbHRlcnNbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiByLmlzRnVuY3Rpb24oZC5zdG9wKSYmKHIuX3F1ZXVlSG9va3Moai5lbGVtLGoub3B0cy5xdWV1ZSkuc3RvcD1yLnByb3h5KGQuc3RvcCxkKSksZDtyZXR1cm4gci5tYXAoayxlYixqKSxyLmlzRnVuY3Rpb24oai5vcHRzLnN0YXJ0KSYmai5vcHRzLnN0YXJ0LmNhbGwoYSxqKSxyLmZ4LnRpbWVyKHIuZXh0ZW5kKGkse2VsZW06YSxhbmltOmoscXVldWU6ai5vcHRzLnF1ZXVlfSkpLGoucHJvZ3Jlc3Moai5vcHRzLnByb2dyZXNzKS5kb25lKGoub3B0cy5kb25lLGoub3B0cy5jb21wbGV0ZSkuZmFpbChqLm9wdHMuZmFpbCkuYWx3YXlzKGoub3B0cy5hbHdheXMpfXIuQW5pbWF0aW9uPXIuZXh0ZW5kKGhiLHt0d2VlbmVyczp7XCIqXCI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBlYShjLmVsZW0sYSxhYS5leGVjKGIpLGMpLGN9XX0sdHdlZW5lcjpmdW5jdGlvbihhLGIpe3IuaXNGdW5jdGlvbihhKT8oYj1hLGE9W1wiKlwiXSk6YT1hLm1hdGNoKEspO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWM9YVtkXSxoYi50d2VlbmVyc1tjXT1oYi50d2VlbmVyc1tjXXx8W10saGIudHdlZW5lcnNbY10udW5zaGlmdChiKX0scHJlZmlsdGVyczpbZmJdLHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/aGIucHJlZmlsdGVycy51bnNoaWZ0KGEpOmhiLnByZWZpbHRlcnMucHVzaChhKX19KSxyLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZT1hJiZcIm9iamVjdFwiPT10eXBlb2YgYT9yLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fHIuaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhci5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gci5meC5vZmZ8fGQuaGlkZGVuP2UuZHVyYXRpb249MDpcIm51bWJlclwiIT10eXBlb2YgZS5kdXJhdGlvbiYmKGUuZHVyYXRpb24gaW4gci5meC5zcGVlZHM/ZS5kdXJhdGlvbj1yLmZ4LnNwZWVkc1tlLmR1cmF0aW9uXTplLmR1cmF0aW9uPXIuZnguc3BlZWRzLl9kZWZhdWx0KSxudWxsIT1lLnF1ZXVlJiZlLnF1ZXVlIT09ITB8fChlLnF1ZXVlPVwiZnhcIiksZS5vbGQ9ZS5jb21wbGV0ZSxlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7ci5pc0Z1bmN0aW9uKGUub2xkKSYmZS5vbGQuY2FsbCh0aGlzKSxlLnF1ZXVlJiZyLmRlcXVldWUodGhpcyxlLnF1ZXVlKX0sZX0sci5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5maWx0ZXIoY2EpLmNzcyhcIm9wYWNpdHlcIiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ci5pc0VtcHR5T2JqZWN0KGEpLGY9ci5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPWhiKHRoaXMsci5leHRlbmQoe30sYSksZik7KGV8fFYuZ2V0KHRoaXMsXCJmaW5pc2hcIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8XCJmeFwiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErXCJxdWV1ZUhvb2tzXCIsZj1yLnRpbWVycyxnPVYuZ2V0KHRoaXMpO2lmKGUpZ1tlXSYmZ1tlXS5zdG9wJiZkKGdbZV0pO2Vsc2UgZm9yKGUgaW4gZylnW2VdJiZnW2VdLnN0b3AmJmFiLnRlc3QoZSkmJmQoZ1tlXSk7Zm9yKGU9Zi5sZW5ndGg7ZS0tOylmW2VdLmVsZW0hPT10aGlzfHxudWxsIT1hJiZmW2VdLnF1ZXVlIT09YXx8KGZbZV0uYW5pbS5zdG9wKGMpLGI9ITEsZi5zcGxpY2UoZSwxKSk7IWImJmN8fHIuZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHxcImZ4XCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGM9Vi5nZXQodGhpcyksZD1jW2ErXCJxdWV1ZVwiXSxlPWNbYStcInF1ZXVlSG9va3NcIl0sZj1yLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsci5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7YjxnO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxyLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9ci5mbltiXTtyLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8XCJib29sZWFuXCI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShkYihiLCEwKSxhLGQsZSl9fSksci5lYWNoKHtzbGlkZURvd246ZGIoXCJzaG93XCIpLHNsaWRlVXA6ZGIoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOmRiKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oYSxiKXtyLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLHIudGltZXJzPVtdLHIuZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9MCxjPXIudGltZXJzO2ZvcihaYT1yLm5vdygpO2I8Yy5sZW5ndGg7YisrKWE9Y1tiXSxhKCl8fGNbYl0hPT1hfHxjLnNwbGljZShiLS0sMSk7Yy5sZW5ndGh8fHIuZnguc3RvcCgpLFphPXZvaWQgMH0sci5meC50aW1lcj1mdW5jdGlvbihhKXtyLnRpbWVycy5wdXNoKGEpLGEoKT9yLmZ4LnN0YXJ0KCk6ci50aW1lcnMucG9wKCl9LHIuZnguaW50ZXJ2YWw9MTMsci5meC5zdGFydD1mdW5jdGlvbigpeyRhfHwoJGE9YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYmIpOmEuc2V0SW50ZXJ2YWwoci5meC50aWNrLHIuZnguaW50ZXJ2YWwpKX0sci5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jYW5jZWxBbmltYXRpb25GcmFtZT9hLmNhbmNlbEFuaW1hdGlvbkZyYW1lKCRhKTphLmNsZWFySW50ZXJ2YWwoJGEpLCRhPW51bGx9LHIuZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LHIuZm4uZGVsYXk9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYj1yLmZ4P3IuZnguc3BlZWRzW2JdfHxiOmIsYz1jfHxcImZ4XCIsdGhpcy5xdWV1ZShjLGZ1bmN0aW9uKGMsZCl7dmFyIGU9YS5zZXRUaW1lb3V0KGMsYik7ZC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhclRpbWVvdXQoZSl9fSl9LGZ1bmN0aW9uKCl7dmFyIGE9ZC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYj1kLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksYz1iLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSk7YS50eXBlPVwiY2hlY2tib3hcIixvLmNoZWNrT249XCJcIiE9PWEudmFsdWUsby5vcHRTZWxlY3RlZD1jLnNlbGVjdGVkLGE9ZC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYS52YWx1ZT1cInRcIixhLnR5cGU9XCJyYWRpb1wiLG8ucmFkaW9WYWx1ZT1cInRcIj09PWEudmFsdWV9KCk7dmFyIGliLGpiPXIuZXhwci5hdHRySGFuZGxlO3IuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFModGhpcyxyLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3IucmVtb3ZlQXR0cih0aGlzLGEpfSl9fSksci5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIGEuZ2V0QXR0cmlidXRlP3IucHJvcChhLGIsYyk6KDE9PT1mJiZyLmlzWE1MRG9jKGEpfHwoZT1yLmF0dHJIb29rc1tiLnRvTG93ZXJDYXNlKCldfHwoci5leHByLm1hdGNoLmJvb2wudGVzdChiKT9pYjp2b2lkIDApKSxcbnZvaWQgMCE9PWM/bnVsbD09PWM/dm9pZCByLnJlbW92ZUF0dHIoYSxiKTplJiZcInNldFwiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOihhLnNldEF0dHJpYnV0ZShiLGMrXCJcIiksYyk6ZSYmXCJnZXRcImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOihkPXIuZmluZC5hdHRyKGEsYiksbnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFvLnJhZGlvVmFsdWUmJlwicmFkaW9cIj09PWImJnIubm9kZU5hbWUoYSxcImlucHV0XCIpKXt2YXIgYz1hLnZhbHVlO3JldHVybiBhLnNldEF0dHJpYnV0ZShcInR5cGVcIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0wLGU9YiYmYi5tYXRjaChLKTtpZihlJiYxPT09YS5ub2RlVHlwZSl3aGlsZShjPWVbZCsrXSlhLnJlbW92ZUF0dHJpYnV0ZShjKX19KSxpYj17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP3IucmVtb3ZlQXR0cihhLGMpOmEuc2V0QXR0cmlidXRlKGMsYyksY319LHIuZWFjaChyLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1xcdysvZyksZnVuY3Rpb24oYSxiKXt2YXIgYz1qYltiXXx8ci5maW5kLmF0dHI7amJbYl09ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGYsZz1iLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGR8fChmPWpiW2ddLGpiW2ddPWUsZT1udWxsIT1jKGEsYixkKT9nOm51bGwsamJbZ109ZiksZX19KTt2YXIga2I9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxsYj0vXig/OmF8YXJlYSkkL2k7ci5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyh0aGlzLHIucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbci5wcm9wRml4W2FdfHxhXX0pfX0pLHIuZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZigzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiAxPT09ZiYmci5pc1hNTERvYyhhKXx8KGI9ci5wcm9wRml4W2JdfHxiLGU9ci5wcm9wSG9va3NbYl0pLHZvaWQgMCE9PWM/ZSYmXCJzZXRcImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmXCJnZXRcImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXt2YXIgYj1yLmZpbmQuYXR0cihhLFwidGFiaW5kZXhcIik7cmV0dXJuIGI/cGFyc2VJbnQoYiwxMCk6a2IudGVzdChhLm5vZGVOYW1lKXx8bGIudGVzdChhLm5vZGVOYW1lKSYmYS5ocmVmPzA6LTF9fX0scHJvcEZpeDp7XCJmb3JcIjpcImh0bWxGb3JcIixcImNsYXNzXCI6XCJjbGFzc05hbWVcIn19KSxvLm9wdFNlbGVjdGVkfHwoci5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLHIuZWFjaChbXCJ0YWJJbmRleFwiLFwicmVhZE9ubHlcIixcIm1heExlbmd0aFwiLFwiY2VsbFNwYWNpbmdcIixcImNlbGxQYWRkaW5nXCIsXCJyb3dTcGFuXCIsXCJjb2xTcGFuXCIsXCJ1c2VNYXBcIixcImZyYW1lQm9yZGVyXCIsXCJjb250ZW50RWRpdGFibGVcIl0sZnVuY3Rpb24oKXtyLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7ZnVuY3Rpb24gbWIoYSl7dmFyIGI9YS5tYXRjaChLKXx8W107cmV0dXJuIGIuam9pbihcIiBcIil9ZnVuY3Rpb24gbmIoYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwifXIuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYoci5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7cih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLG5iKHRoaXMpKSl9KTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEspfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPW5iKGMpLGQ9MT09PWMubm9kZVR5cGUmJlwiIFwiK21iKGUpK1wiIFwiKXtnPTA7d2hpbGUoZj1iW2crK10pZC5pbmRleE9mKFwiIFwiK2YrXCIgXCIpPDAmJihkKz1mK1wiIFwiKTtoPW1iKGQpLGUhPT1oJiZjLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsaCl9fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYoci5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7cih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLG5iKHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKFwiY2xhc3NcIixcIlwiKTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEspfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPW5iKGMpLGQ9MT09PWMubm9kZVR5cGUmJlwiIFwiK21iKGUpK1wiIFwiKXtnPTA7d2hpbGUoZj1iW2crK10pd2hpbGUoZC5pbmRleE9mKFwiIFwiK2YrXCIgXCIpPi0xKWQ9ZC5yZXBsYWNlKFwiIFwiK2YrXCIgXCIsXCIgXCIpO2g9bWIoZCksZSE9PWgmJmMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixoKX19cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBiJiZcInN0cmluZ1wiPT09Yz9iP3RoaXMuYWRkQ2xhc3MoYSk6dGhpcy5yZW1vdmVDbGFzcyhhKTpyLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3IodGhpcykudG9nZ2xlQ2xhc3MoYS5jYWxsKHRoaXMsYyxuYih0aGlzKSxiKSxiKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGQsZSxmO2lmKFwic3RyaW5nXCI9PT1jKXtkPTAsZT1yKHRoaXMpLGY9YS5tYXRjaChLKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZSB2b2lkIDAhPT1hJiZcImJvb2xlYW5cIiE9PWN8fChiPW5iKHRoaXMpLGImJlYuc2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIsYiksdGhpcy5zZXRBdHRyaWJ1dGUmJnRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixifHxhPT09ITE/XCJcIjpWLmdldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiKXx8XCJcIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0wO2I9XCIgXCIrYStcIiBcIjt3aGlsZShjPXRoaXNbZCsrXSlpZigxPT09Yy5ub2RlVHlwZSYmKFwiIFwiK21iKG5iKGMpKStcIiBcIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgb2I9L1xcci9nO3IuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1yLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMscih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9XCJcIjpcIm51bWJlclwiPT10eXBlb2YgZT9lKz1cIlwiOnIuaXNBcnJheShlKSYmKGU9ci5tYXAoZSxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOmErXCJcIn0pKSxiPXIudmFsSG9va3NbdGhpcy50eXBlXXx8ci52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwic2V0XCJpbiBiJiZ2b2lkIDAhPT1iLnNldCh0aGlzLGUsXCJ2YWx1ZVwiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1yLnZhbEhvb2tzW2UudHlwZV18fHIudmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcImdldFwiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSxcInZhbHVlXCIpKT9jOihjPWUudmFsdWUsXCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5yZXBsYWNlKG9iLFwiXCIpOm51bGw9PWM/XCJcIjpjKX19fSksci5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihhKXt2YXIgYj1yLmZpbmQuYXR0cihhLFwidmFsdWVcIik7cmV0dXJuIG51bGwhPWI/YjptYihyLnRleHQoYSkpfX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9YS5vcHRpb25zLGY9YS5zZWxlY3RlZEluZGV4LGc9XCJzZWxlY3Qtb25lXCI9PT1hLnR5cGUsaD1nP251bGw6W10saT1nP2YrMTplLmxlbmd0aDtmb3IoZD1mPDA/aTpnP2Y6MDtkPGk7ZCsrKWlmKGM9ZVtkXSwoYy5zZWxlY3RlZHx8ZD09PWYpJiYhYy5kaXNhYmxlZCYmKCFjLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFyLm5vZGVOYW1lKGMucGFyZW50Tm9kZSxcIm9wdGdyb3VwXCIpKSl7aWYoYj1yKGMpLnZhbCgpLGcpcmV0dXJuIGI7aC5wdXNoKGIpfXJldHVybiBofSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9ci5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0pZD1lW2ddLChkLnNlbGVjdGVkPXIuaW5BcnJheShyLnZhbEhvb2tzLm9wdGlvbi5nZXQoZCksZik+LTEpJiYoYz0hMCk7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGZ9fX19KSxyLmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7ci52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7aWYoci5pc0FycmF5KGIpKXJldHVybiBhLmNoZWNrZWQ9ci5pbkFycmF5KHIoYSkudmFsKCksYik+LTF9fSxvLmNoZWNrT258fChyLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik/XCJvblwiOmEudmFsdWV9KX0pO3ZhciBwYj0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC87ci5leHRlbmQoci5ldmVudCx7dHJpZ2dlcjpmdW5jdGlvbihiLGMsZSxmKXt2YXIgZyxoLGksaixrLG0sbixvPVtlfHxkXSxwPWwuY2FsbChiLFwidHlwZVwiKT9iLnR5cGU6YixxPWwuY2FsbChiLFwibmFtZXNwYWNlXCIpP2IubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihoPWk9ZT1lfHxkLDMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmIXBiLnRlc3QocCtyLmV2ZW50LnRyaWdnZXJlZCkmJihwLmluZGV4T2YoXCIuXCIpPi0xJiYocT1wLnNwbGl0KFwiLlwiKSxwPXEuc2hpZnQoKSxxLnNvcnQoKSksaz1wLmluZGV4T2YoXCI6XCIpPDAmJlwib25cIitwLGI9YltyLmV4cGFuZG9dP2I6bmV3IHIuRXZlbnQocCxcIm9iamVjdFwiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9cS5qb2luKFwiLlwiKSxiLnJuYW1lc3BhY2U9Yi5uYW1lc3BhY2U/bmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Euam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpOm51bGwsYi5yZXN1bHQ9dm9pZCAwLGIudGFyZ2V0fHwoYi50YXJnZXQ9ZSksYz1udWxsPT1jP1tiXTpyLm1ha2VBcnJheShjLFtiXSksbj1yLmV2ZW50LnNwZWNpYWxbcF18fHt9LGZ8fCFuLnRyaWdnZXJ8fG4udHJpZ2dlci5hcHBseShlLGMpIT09ITEpKXtpZighZiYmIW4ubm9CdWJibGUmJiFyLmlzV2luZG93KGUpKXtmb3Ioaj1uLmRlbGVnYXRlVHlwZXx8cCxwYi50ZXN0KGorcCl8fChoPWgucGFyZW50Tm9kZSk7aDtoPWgucGFyZW50Tm9kZSlvLnB1c2goaCksaT1oO2k9PT0oZS5vd25lckRvY3VtZW50fHxkKSYmby5wdXNoKGkuZGVmYXVsdFZpZXd8fGkucGFyZW50V2luZG93fHxhKX1nPTA7d2hpbGUoKGg9b1tnKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSliLnR5cGU9Zz4xP2o6bi5iaW5kVHlwZXx8cCxtPShWLmdldChoLFwiZXZlbnRzXCIpfHx7fSlbYi50eXBlXSYmVi5nZXQoaCxcImhhbmRsZVwiKSxtJiZtLmFwcGx5KGgsYyksbT1rJiZoW2tdLG0mJm0uYXBwbHkmJlQoaCkmJihiLnJlc3VsdD1tLmFwcGx5KGgsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXAsZnx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8bi5fZGVmYXVsdCYmbi5fZGVmYXVsdC5hcHBseShvLnBvcCgpLGMpIT09ITF8fCFUKGUpfHxrJiZyLmlzRnVuY3Rpb24oZVtwXSkmJiFyLmlzV2luZG93KGUpJiYoaT1lW2tdLGkmJihlW2tdPW51bGwpLHIuZXZlbnQudHJpZ2dlcmVkPXAsZVtwXSgpLHIuZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxpJiYoZVtrXT1pKSksYi5yZXN1bHR9fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ci5leHRlbmQobmV3IHIuRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwfSk7ci5ldmVudC50cmlnZ2VyKGQsbnVsbCxiKX19KSxyLmZuLmV4dGVuZCh7dHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtyLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1swXTtpZihjKXJldHVybiByLmV2ZW50LnRyaWdnZXIoYSxiLGMsITApfX0pLHIuZWFjaChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCByZXNpemUgc2Nyb2xsIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgY29udGV4dG1lbnVcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSxiKXtyLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxyLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9fSksby5mb2N1c2luPVwib25mb2N1c2luXCJpbiBhLG8uZm9jdXNpbnx8ci5lYWNoKHtmb2N1czpcImZvY3VzaW5cIixibHVyOlwiZm9jdXNvdXRcIn0sZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbihhKXtyLmV2ZW50LnNpbXVsYXRlKGIsYS50YXJnZXQsci5ldmVudC5maXgoYSkpfTtyLmV2ZW50LnNwZWNpYWxbYl09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9Vi5hY2Nlc3MoZCxiKTtlfHxkLmFkZEV2ZW50TGlzdGVuZXIoYSxjLCEwKSxWLmFjY2VzcyhkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPVYuYWNjZXNzKGQsYiktMTtlP1YuYWNjZXNzKGQsYixlKTooZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYywhMCksVi5yZW1vdmUoZCxiKSl9fX0pO3ZhciBxYj1hLmxvY2F0aW9uLHJiPXIubm93KCksc2I9L1xcPy87ci5wYXJzZVhNTD1mdW5jdGlvbihiKXt2YXIgYztpZighYnx8XCJzdHJpbmdcIiE9dHlwZW9mIGIpcmV0dXJuIG51bGw7dHJ5e2M9KG5ldyBhLkRPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKGIsXCJ0ZXh0L3htbFwiKX1jYXRjaChkKXtjPXZvaWQgMH1yZXR1cm4gYyYmIWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJzZXJlcnJvclwiKS5sZW5ndGh8fHIuZXJyb3IoXCJJbnZhbGlkIFhNTDogXCIrYiksY307dmFyIHRiPS9cXFtcXF0kLyx1Yj0vXFxyP1xcbi9nLHZiPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSx3Yj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24geGIoYSxiLGMsZCl7dmFyIGU7aWYoci5pc0FycmF5KGIpKXIuZWFjaChiLGZ1bmN0aW9uKGIsZSl7Y3x8dGIudGVzdChhKT9kKGEsZSk6eGIoYStcIltcIisoXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPWU/YjpcIlwiKStcIl1cIixlLGMsZCl9KTtlbHNlIGlmKGN8fFwib2JqZWN0XCIhPT1yLnR5cGUoYikpZChhLGIpO2Vsc2UgZm9yKGUgaW4gYil4YihhK1wiW1wiK2UrXCJdXCIsYltlXSxjLGQpfXIucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1yLmlzRnVuY3Rpb24oYik/YigpOmI7ZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChudWxsPT1jP1wiXCI6Yyl9O2lmKHIuaXNBcnJheShhKXx8YS5qcXVlcnkmJiFyLmlzUGxhaW5PYmplY3QoYSkpci5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSl4YihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKFwiJlwiKX0sci5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiByLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9ci5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gYT9yLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFyKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZ3Yi50ZXN0KHRoaXMubm9kZU5hbWUpJiYhdmIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IWlhLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9cih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOnIuaXNBcnJheShjKT9yLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UodWIsXCJcXHJcXG5cIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZSh1YixcIlxcclxcblwiKX19KS5nZXQoKX19KTt2YXIgeWI9LyUyMC9nLHpiPS8jLiokLyxBYj0vKFs/Jl0pXz1bXiZdKi8sQmI9L14oLio/KTpbIFxcdF0qKFteXFxyXFxuXSopJC9nbSxDYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxEYj0vXig/OkdFVHxIRUFEKSQvLEViPS9eXFwvXFwvLyxGYj17fSxHYj17fSxIYj1cIiovXCIuY29uY2F0KFwiKlwiKSxJYj1kLmNyZWF0ZUVsZW1lbnQoXCJhXCIpO0liLmhyZWY9cWIuaHJlZjtmdW5jdGlvbiBKYihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtcInN0cmluZ1wiIT10eXBlb2YgYiYmKGM9YixiPVwiKlwiKTt2YXIgZCxlPTAsZj1iLnRvTG93ZXJDYXNlKCkubWF0Y2goSyl8fFtdO2lmKHIuaXNGdW5jdGlvbihjKSl3aGlsZShkPWZbZSsrXSlcIitcIj09PWRbMF0/KGQ9ZC5zbGljZSgxKXx8XCIqXCIsKGFbZF09YVtkXXx8W10pLnVuc2hpZnQoYykpOihhW2RdPWFbZF18fFtdKS5wdXNoKGMpfX1mdW5jdGlvbiBLYihhLGIsYyxkKXt2YXIgZT17fSxmPWE9PT1HYjtmdW5jdGlvbiBnKGgpe3ZhciBpO3JldHVybiBlW2hdPSEwLHIuZWFjaChhW2hdfHxbXSxmdW5jdGlvbihhLGgpe3ZhciBqPWgoYixjLGQpO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBqfHxmfHxlW2pdP2Y/IShpPWopOnZvaWQgMDooYi5kYXRhVHlwZXMudW5zaGlmdChqKSxnKGopLCExKX0pLGl9cmV0dXJuIGcoYi5kYXRhVHlwZXNbMF0pfHwhZVtcIipcIl0mJmcoXCIqXCIpfWZ1bmN0aW9uIExiKGEsYil7dmFyIGMsZCxlPXIuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoYyBpbiBiKXZvaWQgMCE9PWJbY10mJigoZVtjXT9hOmR8fChkPXt9KSlbY109YltjXSk7cmV0dXJuIGQmJnIuZXh0ZW5kKCEwLGEsZCksYX1mdW5jdGlvbiBNYihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLmNvbnRlbnRzLGk9YS5kYXRhVHlwZXM7d2hpbGUoXCIqXCI9PT1pWzBdKWkuc2hpZnQoKSx2b2lkIDA9PT1kJiYoZD1hLm1pbWVUeXBlfHxiLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKTtpZihkKWZvcihlIGluIGgpaWYoaFtlXSYmaFtlXS50ZXN0KGQpKXtpLnVuc2hpZnQoZSk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGUgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tlK1wiIFwiK2lbMF1dKXtmPWU7YnJlYWt9Z3x8KGc9ZSl9Zj1mfHxnfWlmKGYpcmV0dXJuIGYhPT1pWzBdJiZpLnVuc2hpZnQoZiksY1tmXX1mdW5jdGlvbiBOYihhLGIsYyxkKXt2YXIgZSxmLGcsaCxpLGo9e30saz1hLmRhdGFUeXBlcy5zbGljZSgpO2lmKGtbMV0pZm9yKGcgaW4gYS5jb252ZXJ0ZXJzKWpbZy50b0xvd2VyQ2FzZSgpXT1hLmNvbnZlcnRlcnNbZ107Zj1rLnNoaWZ0KCk7d2hpbGUoZilpZihhLnJlc3BvbnNlRmllbGRzW2ZdJiYoY1thLnJlc3BvbnNlRmllbGRzW2ZdXT1iKSwhaSYmZCYmYS5kYXRhRmlsdGVyJiYoYj1hLmRhdGFGaWx0ZXIoYixhLmRhdGFUeXBlKSksaT1mLGY9ay5zaGlmdCgpKWlmKFwiKlwiPT09ZilmPWk7ZWxzZSBpZihcIipcIiE9PWkmJmkhPT1mKXtpZihnPWpbaStcIiBcIitmXXx8altcIiogXCIrZl0sIWcpZm9yKGUgaW4gailpZihoPWUuc3BsaXQoXCIgXCIpLGhbMV09PT1mJiYoZz1qW2krXCIgXCIraFswXV18fGpbXCIqIFwiK2hbMF1dKSl7Zz09PSEwP2c9altlXTpqW2VdIT09ITAmJihmPWhbMF0say51bnNoaWZ0KGhbMV0pKTticmVha31pZihnIT09ITApaWYoZyYmYVtcInRocm93c1wiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZTpcInBhcnNlcmVycm9yXCIsZXJyb3I6Zz9sOlwiTm8gY29udmVyc2lvbiBmcm9tIFwiK2krXCIgdG8gXCIrZn19fXJldHVybntzdGF0ZTpcInN1Y2Nlc3NcIixkYXRhOmJ9fXIuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpxYi5ocmVmLHR5cGU6XCJHRVRcIixpc0xvY2FsOkNiLnRlc3QocWIucHJvdG9jb2wpLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLGFjY2VwdHM6e1wiKlwiOkhiLHRleHQ6XCJ0ZXh0L3BsYWluXCIsaHRtbDpcInRleHQvaHRtbFwiLHhtbDpcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixqc29uOlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJ9LGNvbnRlbnRzOnt4bWw6L1xcYnhtbFxcYi8saHRtbDovXFxiaHRtbC8sanNvbjovXFxianNvblxcYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6XCJyZXNwb25zZVhNTFwiLHRleHQ6XCJyZXNwb25zZVRleHRcIixqc29uOlwicmVzcG9uc2VKU09OXCJ9LGNvbnZlcnRlcnM6e1wiKiB0ZXh0XCI6U3RyaW5nLFwidGV4dCBodG1sXCI6ITAsXCJ0ZXh0IGpzb25cIjpKU09OLnBhcnNlLFwidGV4dCB4bWxcIjpyLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9MYihMYihhLHIuYWpheFNldHRpbmdzKSxiKTpMYihyLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpKYihGYiksYWpheFRyYW5zcG9ydDpKYihHYiksYWpheDpmdW5jdGlvbihiLGMpe1wib2JqZWN0XCI9PXR5cGVvZiBiJiYoYz1iLGI9dm9pZCAwKSxjPWN8fHt9O3ZhciBlLGYsZyxoLGksaixrLGwsbSxuLG89ci5hamF4U2V0dXAoe30sYykscD1vLmNvbnRleHR8fG8scT1vLmNvbnRleHQmJihwLm5vZGVUeXBlfHxwLmpxdWVyeSk/cihwKTpyLmV2ZW50LHM9ci5EZWZlcnJlZCgpLHQ9ci5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSx1PW8uc3RhdHVzQ29kZXx8e30sdj17fSx3PXt9LHg9XCJjYW5jZWxlZFwiLHk9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZihrKXtpZighaCl7aD17fTt3aGlsZShiPUJiLmV4ZWMoZykpaFtiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1oW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gaz9nOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09ayYmKGE9d1thLnRvTG93ZXJDYXNlKCldPXdbYS50b0xvd2VyQ2FzZSgpXXx8YSx2W2FdPWIpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWsmJihvLm1pbWVUeXBlPWEpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYSlpZihrKXkuYWx3YXlzKGFbeS5zdGF0dXNdKTtlbHNlIGZvcihiIGluIGEpdVtiXT1bdVtiXSxhW2JdXTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8eDtyZXR1cm4gZSYmZS5hYm9ydChiKSxBKDAsYiksdGhpc319O2lmKHMucHJvbWlzZSh5KSxvLnVybD0oKGJ8fG8udXJsfHxxYi5ocmVmKStcIlwiKS5yZXBsYWNlKEViLHFiLnByb3RvY29sK1wiLy9cIiksby50eXBlPWMubWV0aG9kfHxjLnR5cGV8fG8ubWV0aG9kfHxvLnR5cGUsby5kYXRhVHlwZXM9KG8uZGF0YVR5cGV8fFwiKlwiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKEspfHxbXCJcIl0sbnVsbD09by5jcm9zc0RvbWFpbil7aj1kLmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3RyeXtqLmhyZWY9by51cmwsai5ocmVmPWouaHJlZixvLmNyb3NzRG9tYWluPUliLnByb3RvY29sK1wiLy9cIitJYi5ob3N0IT1qLnByb3RvY29sK1wiLy9cIitqLmhvc3R9Y2F0Y2goeil7by5jcm9zc0RvbWFpbj0hMH19aWYoby5kYXRhJiZvLnByb2Nlc3NEYXRhJiZcInN0cmluZ1wiIT10eXBlb2Ygby5kYXRhJiYoby5kYXRhPXIucGFyYW0oby5kYXRhLG8udHJhZGl0aW9uYWwpKSxLYihGYixvLGMseSksaylyZXR1cm4geTtsPXIuZXZlbnQmJm8uZ2xvYmFsLGwmJjA9PT1yLmFjdGl2ZSsrJiZyLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIiksby50eXBlPW8udHlwZS50b1VwcGVyQ2FzZSgpLG8uaGFzQ29udGVudD0hRGIudGVzdChvLnR5cGUpLGY9by51cmwucmVwbGFjZSh6YixcIlwiKSxvLmhhc0NvbnRlbnQ/by5kYXRhJiZvLnByb2Nlc3NEYXRhJiYwPT09KG8uY29udGVudFR5cGV8fFwiXCIpLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikmJihvLmRhdGE9by5kYXRhLnJlcGxhY2UoeWIsXCIrXCIpKToobj1vLnVybC5zbGljZShmLmxlbmd0aCksby5kYXRhJiYoZis9KHNiLnRlc3QoZik/XCImXCI6XCI/XCIpK28uZGF0YSxkZWxldGUgby5kYXRhKSxvLmNhY2hlPT09ITEmJihmPWYucmVwbGFjZShBYixcIiQxXCIpLG49KHNiLnRlc3QoZik/XCImXCI6XCI/XCIpK1wiXz1cIityYisrICtuKSxvLnVybD1mK24pLG8uaWZNb2RpZmllZCYmKHIubGFzdE1vZGlmaWVkW2ZdJiZ5LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLHIubGFzdE1vZGlmaWVkW2ZdKSxyLmV0YWdbZl0mJnkuc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIixyLmV0YWdbZl0pKSwoby5kYXRhJiZvLmhhc0NvbnRlbnQmJm8uY29udGVudFR5cGUhPT0hMXx8Yy5jb250ZW50VHlwZSkmJnkuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLG8uY29udGVudFR5cGUpLHkuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLG8uZGF0YVR5cGVzWzBdJiZvLmFjY2VwdHNbby5kYXRhVHlwZXNbMF1dP28uYWNjZXB0c1tvLmRhdGFUeXBlc1swXV0rKFwiKlwiIT09by5kYXRhVHlwZXNbMF0/XCIsIFwiK0hiK1wiOyBxPTAuMDFcIjpcIlwiKTpvLmFjY2VwdHNbXCIqXCJdKTtmb3IobSBpbiBvLmhlYWRlcnMpeS5zZXRSZXF1ZXN0SGVhZGVyKG0sby5oZWFkZXJzW21dKTtpZihvLmJlZm9yZVNlbmQmJihvLmJlZm9yZVNlbmQuY2FsbChwLHksbyk9PT0hMXx8aykpcmV0dXJuIHkuYWJvcnQoKTtpZih4PVwiYWJvcnRcIix0LmFkZChvLmNvbXBsZXRlKSx5LmRvbmUoby5zdWNjZXNzKSx5LmZhaWwoby5lcnJvciksZT1LYihHYixvLGMseSkpe2lmKHkucmVhZHlTdGF0ZT0xLGwmJnEudHJpZ2dlcihcImFqYXhTZW5kXCIsW3ksb10pLGspcmV0dXJuIHk7by5hc3luYyYmby50aW1lb3V0PjAmJihpPWEuc2V0VGltZW91dChmdW5jdGlvbigpe3kuYWJvcnQoXCJ0aW1lb3V0XCIpfSxvLnRpbWVvdXQpKTt0cnl7az0hMSxlLnNlbmQodixBKX1jYXRjaCh6KXtpZihrKXRocm93IHo7QSgtMSx6KX19ZWxzZSBBKC0xLFwiTm8gVHJhbnNwb3J0XCIpO2Z1bmN0aW9uIEEoYixjLGQsaCl7dmFyIGosbSxuLHYsdyx4PWM7a3x8KGs9ITAsaSYmYS5jbGVhclRpbWVvdXQoaSksZT12b2lkIDAsZz1ofHxcIlwiLHkucmVhZHlTdGF0ZT1iPjA/NDowLGo9Yj49MjAwJiZiPDMwMHx8MzA0PT09YixkJiYodj1NYihvLHksZCkpLHY9TmIobyx2LHksaiksaj8oby5pZk1vZGlmaWVkJiYodz15LmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKSx3JiYoci5sYXN0TW9kaWZpZWRbZl09dyksdz15LmdldFJlc3BvbnNlSGVhZGVyKFwiZXRhZ1wiKSx3JiYoci5ldGFnW2ZdPXcpKSwyMDQ9PT1ifHxcIkhFQURcIj09PW8udHlwZT94PVwibm9jb250ZW50XCI6MzA0PT09Yj94PVwibm90bW9kaWZpZWRcIjooeD12LnN0YXRlLG09di5kYXRhLG49di5lcnJvcixqPSFuKSk6KG49eCwhYiYmeHx8KHg9XCJlcnJvclwiLGI8MCYmKGI9MCkpKSx5LnN0YXR1cz1iLHkuc3RhdHVzVGV4dD0oY3x8eCkrXCJcIixqP3MucmVzb2x2ZVdpdGgocCxbbSx4LHldKTpzLnJlamVjdFdpdGgocCxbeSx4LG5dKSx5LnN0YXR1c0NvZGUodSksdT12b2lkIDAsbCYmcS50cmlnZ2VyKGo/XCJhamF4U3VjY2Vzc1wiOlwiYWpheEVycm9yXCIsW3ksbyxqP206bl0pLHQuZmlyZVdpdGgocCxbeSx4XSksbCYmKHEudHJpZ2dlcihcImFqYXhDb21wbGV0ZVwiLFt5LG9dKSwtLXIuYWN0aXZlfHxyLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSkpfXJldHVybiB5fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gci5nZXQoYSxiLGMsXCJqc29uXCIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gci5nZXQoYSx2b2lkIDAsYixcInNjcmlwdFwiKX19KSxyLmVhY2goW1wiZ2V0XCIsXCJwb3N0XCJdLGZ1bmN0aW9uKGEsYil7cltiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gci5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksci5hamF4KHIuZXh0ZW5kKHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSxyLmlzUGxhaW5PYmplY3QoYSkmJmEpKX19KSxyLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiByLmFqYXgoe3VybDphLHR5cGU6XCJHRVRcIixkYXRhVHlwZTpcInNjcmlwdFwiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSxcInRocm93c1wiOiEwfSl9LHIuZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiB0aGlzWzBdJiYoci5pc0Z1bmN0aW9uKGEpJiYoYT1hLmNhbGwodGhpc1swXSkpLGI9cihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RFbGVtZW50Q2hpbGQpYT1hLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBhfSkuYXBwZW5kKHRoaXMpKSx0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHIuaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYil7cih0aGlzKS53cmFwSW5uZXIoYS5jYWxsKHRoaXMsYikpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9cih0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1yLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXtyKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucGFyZW50KGEpLm5vdChcImJvZHlcIikuZWFjaChmdW5jdGlvbigpe3IodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLHRoaXN9fSksci5leHByLnBzZXVkb3MuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiFyLmV4cHIucHNldWRvcy52aXNpYmxlKGEpfSxyLmV4cHIucHNldWRvcy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiEhKGEub2Zmc2V0V2lkdGh8fGEub2Zmc2V0SGVpZ2h0fHxhLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKX0sci5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgYS5YTUxIdHRwUmVxdWVzdH1jYXRjaChiKXt9fTt2YXIgT2I9ezA6MjAwLDEyMjM6MjA0fSxQYj1yLmFqYXhTZXR0aW5ncy54aHIoKTtvLmNvcnM9ISFQYiYmXCJ3aXRoQ3JlZGVudGlhbHNcImluIFBiLG8uYWpheD1QYj0hIVBiLHIuYWpheFRyYW5zcG9ydChmdW5jdGlvbihiKXt2YXIgYyxkO2lmKG8uY29yc3x8UGImJiFiLmNyb3NzRG9tYWluKXJldHVybntzZW5kOmZ1bmN0aW9uKGUsZil7dmFyIGcsaD1iLnhocigpO2lmKGgub3BlbihiLnR5cGUsYi51cmwsYi5hc3luYyxiLnVzZXJuYW1lLGIucGFzc3dvcmQpLGIueGhyRmllbGRzKWZvcihnIGluIGIueGhyRmllbGRzKWhbZ109Yi54aHJGaWVsZHNbZ107Yi5taW1lVHlwZSYmaC5vdmVycmlkZU1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUoYi5taW1lVHlwZSksYi5jcm9zc0RvbWFpbnx8ZVtcIlgtUmVxdWVzdGVkLVdpdGhcIl18fChlW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXT1cIlhNTEh0dHBSZXF1ZXN0XCIpO2ZvcihnIGluIGUpaC5zZXRSZXF1ZXN0SGVhZGVyKGcsZVtnXSk7Yz1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtjJiYoYz1kPWgub25sb2FkPWgub25lcnJvcj1oLm9uYWJvcnQ9aC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxcImFib3J0XCI9PT1hP2guYWJvcnQoKTpcImVycm9yXCI9PT1hP1wibnVtYmVyXCIhPXR5cGVvZiBoLnN0YXR1cz9mKDAsXCJlcnJvclwiKTpmKGguc3RhdHVzLGguc3RhdHVzVGV4dCk6ZihPYltoLnN0YXR1c118fGguc3RhdHVzLGguc3RhdHVzVGV4dCxcInRleHRcIiE9PShoLnJlc3BvbnNlVHlwZXx8XCJ0ZXh0XCIpfHxcInN0cmluZ1wiIT10eXBlb2YgaC5yZXNwb25zZVRleHQ/e2JpbmFyeTpoLnJlc3BvbnNlfTp7dGV4dDpoLnJlc3BvbnNlVGV4dH0saC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0saC5vbmxvYWQ9YygpLGQ9aC5vbmVycm9yPWMoXCJlcnJvclwiKSx2b2lkIDAhPT1oLm9uYWJvcnQ/aC5vbmFib3J0PWQ6aC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09aC5yZWFkeVN0YXRlJiZhLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjJiZkKCl9KX0sYz1jKFwiYWJvcnRcIik7dHJ5e2guc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCl9Y2F0Y2goaSl7aWYoYyl0aHJvdyBpfX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX0pLHIuYWpheFByZWZpbHRlcihmdW5jdGlvbihhKXthLmNyb3NzRG9tYWluJiYoYS5jb250ZW50cy5zY3JpcHQ9ITEpfSksci5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDpcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJ9LGNvbnRlbnRzOntzY3JpcHQ6L1xcYig/OmphdmF8ZWNtYSlzY3JpcHRcXGIvfSxjb252ZXJ0ZXJzOntcInRleHQgc2NyaXB0XCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHIuZ2xvYmFsRXZhbChhKSxhfX19KSxyLmFqYXhQcmVmaWx0ZXIoXCJzY3JpcHRcIixmdW5jdGlvbihhKXt2b2lkIDA9PT1hLmNhY2hlJiYoYS5jYWNoZT0hMSksYS5jcm9zc0RvbWFpbiYmKGEudHlwZT1cIkdFVFwiKX0pLHIuYWpheFRyYW5zcG9ydChcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSxmKXtiPXIoXCI8c2NyaXB0PlwiKS5wcm9wKHtjaGFyc2V0OmEuc2NyaXB0Q2hhcnNldCxzcmM6YS51cmx9KS5vbihcImxvYWQgZXJyb3JcIixjPWZ1bmN0aW9uKGEpe2IucmVtb3ZlKCksYz1udWxsLGEmJmYoXCJlcnJvclwiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLGQuaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgUWI9W10sUmI9Lyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztyLmFqYXhTZXR1cCh7anNvbnA6XCJjYWxsYmFja1wiLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYT1RYi5wb3AoKXx8ci5leHBhbmRvK1wiX1wiK3JiKys7cmV0dXJuIHRoaXNbYV09ITAsYX19KSxyLmFqYXhQcmVmaWx0ZXIoXCJqc29uIGpzb25wXCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKFJiLnRlc3QoYi51cmwpP1widXJsXCI6XCJzdHJpbmdcIj09dHlwZW9mIGIuZGF0YSYmMD09PShiLmNvbnRlbnRUeXBlfHxcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpJiZSYi50ZXN0KGIuZGF0YSkmJlwiZGF0YVwiKTtpZihofHxcImpzb25wXCI9PT1iLmRhdGFUeXBlc1swXSlyZXR1cm4gZT1iLmpzb25wQ2FsbGJhY2s9ci5pc0Z1bmN0aW9uKGIuanNvbnBDYWxsYmFjayk/Yi5qc29ucENhbGxiYWNrKCk6Yi5qc29ucENhbGxiYWNrLGg/YltoXT1iW2hdLnJlcGxhY2UoUmIsXCIkMVwiK2UpOmIuanNvbnAhPT0hMSYmKGIudXJsKz0oc2IudGVzdChiLnVybCk/XCImXCI6XCI/XCIpK2IuanNvbnArXCI9XCIrZSksYi5jb252ZXJ0ZXJzW1wic2NyaXB0IGpzb25cIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8ci5lcnJvcihlK1wiIHdhcyBub3QgY2FsbGVkXCIpLGdbMF19LGIuZGF0YVR5cGVzWzBdPVwianNvblwiLGY9YVtlXSxhW2VdPWZ1bmN0aW9uKCl7Zz1hcmd1bWVudHN9LGQuYWx3YXlzKGZ1bmN0aW9uKCl7dm9pZCAwPT09Zj9yKGEpLnJlbW92ZVByb3AoZSk6YVtlXT1mLGJbZV0mJihiLmpzb25wQ2FsbGJhY2s9Yy5qc29ucENhbGxiYWNrLFFiLnB1c2goZSkpLGcmJnIuaXNGdW5jdGlvbihmKSYmZihnWzBdKSxnPWY9dm9pZCAwfSksXCJzY3JpcHRcIn0pLG8uY3JlYXRlSFRNTERvY3VtZW50PWZ1bmN0aW9uKCl7dmFyIGE9ZC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoXCJcIikuYm9keTtyZXR1cm4gYS5pbm5lckhUTUw9XCI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPlwiLDI9PT1hLmNoaWxkTm9kZXMubGVuZ3RofSgpLHIucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm5bXTtcImJvb2xlYW5cIj09dHlwZW9mIGImJihjPWIsYj0hMSk7dmFyIGUsZixnO3JldHVybiBifHwoby5jcmVhdGVIVE1MRG9jdW1lbnQ/KGI9ZC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoXCJcIiksZT1iLmNyZWF0ZUVsZW1lbnQoXCJiYXNlXCIpLGUuaHJlZj1kLmxvY2F0aW9uLmhyZWYsYi5oZWFkLmFwcGVuZENoaWxkKGUpKTpiPWQpLGY9Qi5leGVjKGEpLGc9IWMmJltdLGY/W2IuY3JlYXRlRWxlbWVudChmWzFdKV06KGY9cGEoW2FdLGIsZyksZyYmZy5sZW5ndGgmJnIoZykucmVtb3ZlKCksci5tZXJnZShbXSxmLmNoaWxkTm9kZXMpKX0sci5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZz10aGlzLGg9YS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gaD4tMSYmKGQ9bWIoYS5zbGljZShoKSksYT1hLnNsaWNlKDAsaCkpLHIuaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiZcIm9iamVjdFwiPT10eXBlb2YgYiYmKGU9XCJQT1NUXCIpLGcubGVuZ3RoPjAmJnIuYWpheCh7dXJsOmEsdHlwZTplfHxcIkdFVFwiLGRhdGFUeXBlOlwiaHRtbFwiLGRhdGE6Yn0pLmRvbmUoZnVuY3Rpb24oYSl7Zj1hcmd1bWVudHMsZy5odG1sKGQ/cihcIjxkaXY+XCIpLmFwcGVuZChyLnBhcnNlSFRNTChhKSkuZmluZChkKTphKX0pLmFsd2F5cyhjJiZmdW5jdGlvbihhLGIpe2cuZWFjaChmdW5jdGlvbigpe2MuYXBwbHkodGhpcyxmfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KX0pLHRoaXN9LHIuZWFjaChbXCJhamF4U3RhcnRcIixcImFqYXhTdG9wXCIsXCJhamF4Q29tcGxldGVcIixcImFqYXhFcnJvclwiLFwiYWpheFN1Y2Nlc3NcIixcImFqYXhTZW5kXCJdLGZ1bmN0aW9uKGEsYil7ci5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLHIuZXhwci5wc2V1ZG9zLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiByLmdyZXAoci50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O2Z1bmN0aW9uIFNiKGEpe3JldHVybiByLmlzV2luZG93KGEpP2E6OT09PWEubm9kZVR5cGUmJmEuZGVmYXVsdFZpZXd9ci5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1yLmNzcyhhLFwicG9zaXRpb25cIiksbD1yKGEpLG09e307XCJzdGF0aWNcIj09PWsmJihhLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIiksaD1sLm9mZnNldCgpLGY9ci5jc3MoYSxcInRvcFwiKSxpPXIuY3NzKGEsXCJsZWZ0XCIpLGo9KFwiYWJzb2x1dGVcIj09PWt8fFwiZml4ZWRcIj09PWspJiYoZitpKS5pbmRleE9mKFwiYXV0b1wiKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksci5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLHIuZXh0ZW5kKHt9LGgpKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSxcInVzaW5nXCJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sci5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3Iub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQsZSxmPXRoaXNbMF07aWYoZilyZXR1cm4gZi5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD8oZD1mLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGQud2lkdGh8fGQuaGVpZ2h0PyhlPWYub3duZXJEb2N1bWVudCxjPVNiKGUpLGI9ZS5kb2N1bWVudEVsZW1lbnQse3RvcDpkLnRvcCtjLnBhZ2VZT2Zmc2V0LWIuY2xpZW50VG9wLGxlZnQ6ZC5sZWZ0K2MucGFnZVhPZmZzZXQtYi5jbGllbnRMZWZ0fSk6ZCk6e3RvcDowLGxlZnQ6MH19LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXRoaXNbMF0sZD17dG9wOjAsbGVmdDowfTtyZXR1cm5cImZpeGVkXCI9PT1yLmNzcyhjLFwicG9zaXRpb25cIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLHIubm9kZU5hbWUoYVswXSxcImh0bWxcIil8fChkPWEub2Zmc2V0KCkpLGQ9e3RvcDpkLnRvcCtyLmNzcyhhWzBdLFwiYm9yZGVyVG9wV2lkdGhcIiwhMCksbGVmdDpkLmxlZnQrci5jc3MoYVswXSxcImJvcmRlckxlZnRXaWR0aFwiLCEwKX0pLHt0b3A6Yi50b3AtZC50b3Atci5jc3MoYyxcIm1hcmdpblRvcFwiLCEwKSxsZWZ0OmIubGVmdC1kLmxlZnQtci5jc3MoYyxcIm1hcmdpbkxlZnRcIiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vZmZzZXRQYXJlbnQ7d2hpbGUoYSYmXCJzdGF0aWNcIj09PXIuY3NzKGEsXCJwb3NpdGlvblwiKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxxYX0pfX0pLHIuZWFjaCh7c2Nyb2xsTGVmdDpcInBhZ2VYT2Zmc2V0XCIsc2Nyb2xsVG9wOlwicGFnZVlPZmZzZXRcIn0sZnVuY3Rpb24oYSxiKXt2YXIgYz1cInBhZ2VZT2Zmc2V0XCI9PT1iO3IuZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIFModGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9U2IoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9mW2JdOmFbZF06dm9pZChmP2Yuc2Nyb2xsVG8oYz9mLnBhZ2VYT2Zmc2V0OmUsYz9lOmYucGFnZVlPZmZzZXQpOmFbZF09ZSl9LGEsZCxhcmd1bWVudHMubGVuZ3RoKX19KSxyLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGEsYil7ci5jc3NIb29rc1tiXT1PYShvLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtpZihjKXJldHVybiBjPU5hKGEsYiksTGEudGVzdChjKT9yKGEpLnBvc2l0aW9uKClbYl0rXCJweFwiOmN9KX0pLHIuZWFjaCh7SGVpZ2h0OlwiaGVpZ2h0XCIsV2lkdGg6XCJ3aWR0aFwifSxmdW5jdGlvbihhLGIpe3IuZWFjaCh7cGFkZGluZzpcImlubmVyXCIrYSxjb250ZW50OmIsXCJcIjpcIm91dGVyXCIrYX0sZnVuY3Rpb24oYyxkKXtyLmZuW2RdPWZ1bmN0aW9uKGUsZil7dmFyIGc9YXJndW1lbnRzLmxlbmd0aCYmKGN8fFwiYm9vbGVhblwiIT10eXBlb2YgZSksaD1jfHwoZT09PSEwfHxmPT09ITA/XCJtYXJnaW5cIjpcImJvcmRlclwiKTtyZXR1cm4gUyh0aGlzLGZ1bmN0aW9uKGIsYyxlKXt2YXIgZjtyZXR1cm4gci5pc1dpbmRvdyhiKT8wPT09ZC5pbmRleE9mKFwib3V0ZXJcIik/YltcImlubmVyXCIrYV06Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbXCJjbGllbnRcIithXTo5PT09Yi5ub2RlVHlwZT8oZj1iLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChiLmJvZHlbXCJzY3JvbGxcIithXSxmW1wic2Nyb2xsXCIrYV0sYi5ib2R5W1wib2Zmc2V0XCIrYV0sZltcIm9mZnNldFwiK2FdLGZbXCJjbGllbnRcIithXSkpOnZvaWQgMD09PWU/ci5jc3MoYixjLGgpOnIuc3R5bGUoYixjLGUsaCl9LGIsZz9lOnZvaWQgMCxnKX19KX0pLHIuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLFwiKipcIik6dGhpcy5vZmYoYixhfHxcIioqXCIsYyl9fSksci5wYXJzZUpTT049SlNPTi5wYXJzZSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShcImpxdWVyeVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KTt2YXIgVGI9YS5qUXVlcnksVWI9YS4kO3JldHVybiByLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PXImJihhLiQ9VWIpLGImJmEualF1ZXJ5PT09ciYmKGEualF1ZXJ5PVRiKSxyfSxifHwoYS5qUXVlcnk9YS4kPXIpLHJ9KTtcbiIsIi8qISBqcXVlcnkuY29va2llIHYxLjQuMSB8IE1JVCAqL1xuIWZ1bmN0aW9uKGEpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGEpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2EocmVxdWlyZShcImpxdWVyeVwiKSk6YShqUXVlcnkpfShmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBoLnJhdz9hOmVuY29kZVVSSUNvbXBvbmVudChhKX1mdW5jdGlvbiBjKGEpe3JldHVybiBoLnJhdz9hOmRlY29kZVVSSUNvbXBvbmVudChhKX1mdW5jdGlvbiBkKGEpe3JldHVybiBiKGguanNvbj9KU09OLnN0cmluZ2lmeShhKTpTdHJpbmcoYSkpfWZ1bmN0aW9uIGUoYSl7MD09PWEuaW5kZXhPZignXCInKSYmKGE9YS5zbGljZSgxLC0xKS5yZXBsYWNlKC9cXFxcXCIvZywnXCInKS5yZXBsYWNlKC9cXFxcXFxcXC9nLFwiXFxcXFwiKSk7dHJ5e3JldHVybiBhPWRlY29kZVVSSUNvbXBvbmVudChhLnJlcGxhY2UoZyxcIiBcIikpLGguanNvbj9KU09OLnBhcnNlKGEpOmF9Y2F0Y2goYil7fX1mdW5jdGlvbiBmKGIsYyl7dmFyIGQ9aC5yYXc/YjplKGIpO3JldHVybiBhLmlzRnVuY3Rpb24oYyk/YyhkKTpkfXZhciBnPS9cXCsvZyxoPWEuY29va2llPWZ1bmN0aW9uKGUsZyxpKXtpZih2b2lkIDAhPT1nJiYhYS5pc0Z1bmN0aW9uKGcpKXtpZihpPWEuZXh0ZW5kKHt9LGguZGVmYXVsdHMsaSksXCJudW1iZXJcIj09dHlwZW9mIGkuZXhwaXJlcyl7dmFyIGo9aS5leHBpcmVzLGs9aS5leHBpcmVzPW5ldyBEYXRlO2suc2V0VGltZSgrays4NjRlNSpqKX1yZXR1cm4gZG9jdW1lbnQuY29va2llPVtiKGUpLFwiPVwiLGQoZyksaS5leHBpcmVzP1wiOyBleHBpcmVzPVwiK2kuZXhwaXJlcy50b1VUQ1N0cmluZygpOlwiXCIsaS5wYXRoP1wiOyBwYXRoPVwiK2kucGF0aDpcIlwiLGkuZG9tYWluP1wiOyBkb21haW49XCIraS5kb21haW46XCJcIixpLnNlY3VyZT9cIjsgc2VjdXJlXCI6XCJcIl0uam9pbihcIlwiKX1mb3IodmFyIGw9ZT92b2lkIDA6e30sbT1kb2N1bWVudC5jb29raWU/ZG9jdW1lbnQuY29va2llLnNwbGl0KFwiOyBcIik6W10sbj0wLG89bS5sZW5ndGg7bz5uO24rKyl7dmFyIHA9bVtuXS5zcGxpdChcIj1cIikscT1jKHAuc2hpZnQoKSkscj1wLmpvaW4oXCI9XCIpO2lmKGUmJmU9PT1xKXtsPWYocixnKTticmVha31lfHx2b2lkIDA9PT0ocj1mKHIpKXx8KGxbcV09cil9cmV0dXJuIGx9O2guZGVmYXVsdHM9e30sYS5yZW1vdmVDb29raWU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gdm9pZCAwPT09YS5jb29raWUoYik/ITE6KGEuY29va2llKGIsXCJcIixhLmV4dGVuZCh7fSxjLHtleHBpcmVzOi0xfSkpLCFhLmNvb2tpZShiKSl9fSk7IiwiOyhmdW5jdGlvbigkLHdpbmRvdyxkb2N1bWVudCx1bmRlZmluZWQpe1xyXG5cdHNlc3Npb25TdG9yYWdlLmNsZWFyKClcclxuXHR2YXIgY3JlYXRlVGFibGUgPSBmdW5jdGlvbihlbGVtZW50LG9wdGlvbnMpe1xyXG5cdFx0dGhpcy4kZWxlbWVudCA9IGVsZW1lbnQ7XHJcblx0XHR0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLHtcclxuXHRcdFx0XHRcdFx0dGFibGVEYXRhOiBbXSxcclxuXHRcdFx0XHRcdFx0Y2hvaWNlQ29udGVudDonaW5kZXgnLFxyXG5cdFx0XHRcdFx0XHRwYWdlSWQ6JycsXHJcblx0XHRcdFx0XHRcdHRvdGFsUGFnZUlkOicnLFxyXG5cdFx0XHRcdFx0XHR0YWJsZUlkOicnLFxyXG5cdFx0XHRcdFx0XHRza2lwUGFnZUlkOicnLFxyXG5cdFx0XHRcdFx0XHRzZXNzaW9uUGFnZTogJycsXHJcblx0XHRcdFx0XHRcdHNlc3Npb25Mb2NhdGlvbjogJycsXHJcblx0XHRcdFx0XHRcdHByZXZpZXdVcmw6JycsXHJcblx0XHRcdFx0XHRcdGRvd25sb2FkVXJsOicnXHJcblx0XHR9LG9wdGlvbnMpO1xyXG5cdH07XHJcblx0Y3JlYXRlVGFibGUucHJvdG90eXBlID0ge1xyXG5cclxuXHRcdGluaXQ6ZnVuY3Rpb24oKXtcclxuXHRcdFx0dGhpcy5ib29rRGF0YSA9IHRoaXMub3B0aW9ucy50YWJsZURhdGEucmV2ZXJzZSgpLFxyXG5cdFx0XHR0aGlzLmJvb2tEYXRhTGVuID0gdGhpcy5ib29rRGF0YS5sZW5ndGgsXHJcblx0XHRcdHRoaXMuc2Vzc2lvblBhZ2UgPSB0aGlzLm9wdGlvbnMuc2Vzc2lvblBhZ2UsXHJcblx0XHRcdHRoaXMuc2Vzc2lvbkxvY2F0aW9uID0gdGhpcy5vcHRpb25zLnNlc3Npb25Mb2NhdGlvbixcclxuXHRcdFx0dGhpcy5ib29rRGF0YVBhZ2VMZW4gPSAnJyxcclxuXHRcdFx0dGhpcy5zZXNzaW9uRGF0YUxlbiA9ICcnLFxyXG5cdFx0XHR0aGlzLmJvb2tTdHJIdG1sID0gJycsXHJcblx0XHRcdHRoaXMudG90YWxTdHJIdG1sID0gJycsICAgLy/pobXmlbDnmoRodG1sXHJcblx0XHRcdHRoaXMucHJldlBhZ2UgPSAnJyxcclxuXHRcdFx0dGhpcy5uZXh0UGFnZSA9ICcnLFxyXG5cdFx0XHR0aGlzLnRvdGFsUGFnZU1pbiA9IDEwOyAvLyDlj6/lnKjpobXpnaLmmL7npLrmnIDlpKfpobXmlbDkuLoxMOmhtVxyXG5cdFx0XHR0aGlzLnRvdGFsUGFnZSA9ICcnLFxyXG5cdFx0XHR0aGlzLmN1cnJlbnRQYWdlID0gMSwgICAgIC8v6buY6K6k5b2T5YmN6aG15pWw5Li6MVxyXG5cdFx0XHR0aGlzLmN1cnJQYWdlID0gJycsICAgICAgIC8v54K55Ye76I635Y+W5b2T5YmN6aG15pWw5Y+Y6YePXHJcblx0XHRcdHRoaXMuc2l6ZVBhZ2UgPSAxMCwgICAvL+avj+mhtTEw5p2h5pWw5o2uXHJcblx0XHRcdHRoaXMuc3RhcnRQYWdlID0nJyxcclxuXHRcdFx0dGhpcy5zdGFydEN1cnJlbnQgPSAnJyxcclxuXHRcdFx0dGhpcy5lbmRQYWdlID0gJycsICAgIC8v5b2T5YmN55qE5a6e6ZmF57uT5p2f6aG15pWwXHJcblx0XHRcdHRoaXMudG90YWxTdHIgPSAnJyxcclxuXHRcdFx0dGhpcy5zZXNzaW9uVmFsdWUgPSAnJyxcclxuXHRcdFx0dGhpcy5zZXNzaW9uQ3VycmVudExvY2F0aW9uVmFsdWUgPSAnJyxcclxuXHRcdFx0dGhpcy5wYWdlSWQgPSB0aGlzLm9wdGlvbnMucGFnZUlkLFxyXG5cdFx0XHR0aGlzLnRvdGFsUGFnZUlkID0gdGhpcy5vcHRpb25zLnRvdGFsUGFnZUlkLFxyXG5cdFx0XHR0aGlzLnNraXBQYWdlSWQgPSB0aGlzLm9wdGlvbnMuc2tpcFBhZ2VJZCxcclxuXHRcdFx0dGhpcy50YWJsZUlkID0gdGhpcy5vcHRpb25zLnRhYmxlSWQsXHJcblx0XHRcdHRoaXMuZG93bmxvYWQgPSB0aGlzLm9wdGlvbnMuZG93bmxvYWRVcmwsXHJcblx0XHRcdHRoaXMucHJldmlldyA9IHRoaXMub3B0aW9ucy5wcmV2aWV3VXJsO1xyXG5cclxuXHRcdFx0dGhpcy5pbml0VGFibGUoKTtcclxuXHJcblx0XHR9LFxyXG5cdFx0aW5pdFRhYmxlOmZ1bmN0aW9uKCl7XHJcblx0XHRcdHRoaXMudG90YWxQYWdlID0gTWF0aC5jZWlsKHRoaXMuYm9va0RhdGFMZW4vdGhpcy5zaXplUGFnZSk7ICAvL+iuoeeul+aAu+WFsemhteaVsFxyXG5cdFx0XHR0aGlzLmJvb2tEYXRhUGFnZUxlbiA9IHRoaXMuc2l6ZVBhZ2U7XHJcblxyXG5cclxuXHJcblx0XHRcdGlmKHRoaXMuYm9va0RhdGFMZW4gIT09IDApeyAgIC8v5Yid5aeL6buY6K6k5Yqg6L29dGFibGXlhoXlrrlcclxuXHJcblx0XHRcdFx0dGhpcy5zZXNzaW9uRGF0YUxlbiA9ICBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcInNlc3Npb25EYXRhTGVuXCIpKVxyXG5cclxuXHRcdFx0XHQvLyBpZih0aGlzLnNlc3Npb25EYXRhTGVuICE9PSAwKXtcclxuXHRcdFx0XHQvLyBcdGFsZXJ0KFwiZmRcIilcclxuXHRcdFx0XHQvLyBcdGlmKFx0dGhpcy5zZXNzaW9uRGF0YUxlbiAhPT0gdGhpcy5ib29rRGF0YUxlbil7XHJcblx0XHRcdFx0Ly8gXHRcdHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7XHJcblx0XHRcdFx0Ly8gXHR9XHJcblx0XHRcdFx0Ly8gfVxyXG5cclxuXHRcdFx0XHR2YXIgZ2V0U2Vzc2lvblBhZ2UgPSBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnNlc3Npb25QYWdlKSk7XHJcblx0XHRcdFx0dmFyIGdldFNlc3Npb25Mb2NhdGlvbiA9IE51bWJlcihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHRoaXMuc2Vzc2lvbkxvY2F0aW9uKSk7XHJcblx0XHRcdFx0dGhpcy5zZXNzaW9uVmFsdWUgPSBnZXRTZXNzaW9uUGFnZTtcclxuXHRcdFx0XHR0aGlzLnNlc3Npb25DdXJyZW50TG9jYXRpb25WYWx1ZSA9IGdldFNlc3Npb25Mb2NhdGlvbjtcclxuXHJcblx0XHRcdFx0dmFyIGkgPSAnJztcclxuXHRcdFx0XHQvLyBpZih0aGlzLnNlc3Npb25WYWx1ZSAhPT0gMCl7ICAgICAgICAgICAgICAgICAgICAgLy/liKTmlq3mmK/lkKbliLfmlrDvvIzmnIlzdG9yYWdl5pWw5o2u5Lqn55SfXHJcblx0XHRcdFx0Ly8gICBpID0gKHRoaXMuc2Vzc2lvblZhbHVlLTEpICogdGhpcy5zaXplUGFnZTtcclxuXHRcdFx0XHQvLyAgIHRoaXMuYm9va0RhdGFQYWdlTGVuID0gdGhpcy5zZXNzaW9uVmFsdWUgKiB0aGlzLnNpemVQYWdlXHJcblx0XHRcdFx0Ly8gfWVsc2V7XHJcblx0XHRcdFx0ICBpID0gMDtcclxuXHRcdFx0XHQvLyB9XHJcblxyXG5cclxuXHJcblx0XHRcdFx0JCh0aGlzLnRhYmxlSWQgKyBcIiB0cjpub3QoOmZpcnN0LWNoaWxkKVwiKS5yZW1vdmUoKTtcclxuXHRcdFx0XHRpZih0aGlzLmJvb2tEYXRhUGFnZUxlbiA+IHRoaXMuYm9va0RhdGFMZW4pe1xyXG5cdFx0XHRcdFx0XHQkKHRoaXMudGFibGVJZCArIFwiIHRyOm5vdCg6Zmlyc3QtY2hpbGQpXCIpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0aWYodGhpcy5vcHRpb25zLmNob2ljZUNvbnRlbnQgPT0gXCJpbmRleFwiKXtcclxuXHRcdFx0XHRcdFx0Zm9yKGk7aSA8IHRoaXMuYm9va0RhdGFMZW47aSsrKXtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicrIChpKzEpICsnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rTmFtZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tWb2x1bWVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rQnV5ZXJcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rQm9ycm93ZXJcIl0gKyAnPC90ZD48dGQ+JyArICB0aGlzLmJvb2tEYXRhW2ldW1wiYnV5VGltZVwiXSArICc8L3RkPjwvdHI+JztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYodGhpcy5vcHRpb25zLmNob2ljZUNvbnRlbnQgPT0gXCJtb2RpZnlcIil7XHJcblx0XHRcdFx0XHRcdGZvcihpO2kgPCB0aGlzLmJvb2tEYXRhTGVuO2krKyl7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nICsgKGkrMSkgKyAnPC90ZD48dGQgZGF0YS1pZG51bT1cIicrIHRoaXMuYm9va0RhdGFbaV1bXCJib29rSWRcIl0gKydcIj4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tOYW1lXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va1ZvbHVtZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tCdXllclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tCb3Jyb3dlclwiXSArICc8L3RkPjx0ZD4nICsgIHRoaXMuYm9va0RhdGFbaV1bXCJidXlUaW1lXCJdICsgJzwvdGQ+PHRkPjxidXR0b24gY2xhc3M9XCJidG4gYnRuLWVkaXQyIHRhYmxlLWVkaXRcIiB0eXBlPVwiYnV0dG9uXCI+57yW6L6RPC9idXR0b24+PC90ZD48L3RyPic7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwibW9kaWZ5U3RhZmZcIil7XHJcblx0XHRcdFx0XHRcdGZvcihpO2kgPCB0aGlzLmJvb2tEYXRhTGVuO2krKyl7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nICsgKGkrMSkgKyAnPC90ZD48dGQgZGF0YS1pZG51bT1cIicrIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZklkXCJdICsnXCI+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZkRlcGFydG1lbnRcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZk5hbWVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZkVtYWlsXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wic3RhZmZFeHRlbnNpb25cIl0gKyAnPC90ZD48dGQ+JyArICB0aGlzLmJvb2tEYXRhW2ldW1wic3RhZmZOdW1iZXJcIl0gKyAnPC90ZD48dGQ+PGEgaHJlZj1cIiMjI1wiIGNsYXNzPVwiZWRpdC1wZW9wbGUtaW5mb1wiPue8lui+kTwvYT58PGEgaHJlZj1cIiMjI1wiIGNsYXNzPVwiZGVsZXRlLXBlb3BsZS1pbmZvXCI+5Yig6ZmkPC9hPjwvdGQ+PC90cj4nO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZih0aGlzLm9wdGlvbnMuY2hvaWNlQ29udGVudCA9PSBcImluZGV4UGF0ZW50XCIpe1xyXG5cdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuYm9va1N0ckh0bWwgKz0gJzx0cj48dGQ+JysgKGkrMSkgKyc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcInBhdGVudFRpdGxlXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wicHJvcG9zZXJcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJvcmRlck51bWJlclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImFwcGxpY2F0aW9uRGF0ZVwiXSArICc8L3RkPjwvdHI+JztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYodGhpcy5vcHRpb25zLmNob2ljZUNvbnRlbnQgPT0gXCJtb2RpZnlQYXRlbnRcIil7XHJcblx0XHRcdFx0XHRcdGZvcihpO2kgPCB0aGlzLmJvb2tEYXRhTGVuO2krKyl7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nICsgKGkrMSkgKyAnPC90ZD48dGQgZGF0YS1pZG51bT1cIicrIHRoaXMuYm9va0RhdGFbaV1bXCJwYXRlbnRJZFwiXSArJ1wiPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wicGF0ZW50TmFtZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImZpcnN0SW52ZW50b3JcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzb3J0Q29kZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImFjY2VwdERhdGVcIl0gKyAnPC90ZD48dGQ+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWVkaXQyIHRhYmxlLWVkaXRcIiBkYXRhLXRvZ2dsZT1cIm1vZGFsXCIgZGF0YS10YXJnZXQ9XCIuYnMtZXhhbXBsZS1tb2RhbC1sZ1wiPue8lui+kTwvYnV0dG9uPjwvdGQ+PC90cj4nO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZih0aGlzLm9wdGlvbnMuY2hvaWNlQ29udGVudCA9PSBcImluZGV4VGhlc2lzXCIpe1xyXG5cdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuYm9va1N0ckh0bWwgKz0gJzx0cj48dGQ+JysgKGkrMSkgKyc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcInBhcGVyVGl0bGVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJwcm9wb3NlclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImFwcGxpY2F0aW9uRGF0ZVwiXSArICc8L3RkPjx0ZD48YSBocmVmPVwiJysgdGhpcy5kb3dubG9hZCArIGVuY29kZVVSSSh0aGlzLmJvb2tEYXRhW2ldW1wiZmlsZU5hbWVcIl0pICsnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+5LiL6L29PC9hPiB8IDxhIGhyZWY9XCInKyB0aGlzLnByZXZpZXcgKyBlbmNvZGVVUkkodGhpcy5ib29rRGF0YVtpXVtcImZpbGVOYW1lXCJdKSArJ1wiIHRhcmdldD1cIl9ibGFua1wiPumihOiniDwvYT48L3RkPjwvdHI+JztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYodGhpcy5vcHRpb25zLmNob2ljZUNvbnRlbnQgPT0gXCJtb2RpZnlUaGVzaXNcIil7XHJcblx0XHRcdFx0XHRcdGZvcihpO2kgPCB0aGlzLmJvb2tEYXRhTGVuO2krKyl7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nICsgKGkrMSkgKyAnPC90ZD48dGQgZGF0YS1pZG51bT1cIicrIHRoaXMuYm9va0RhdGFbaV1bXCJwYXBlcklkXCJdICsnXCI+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJwYXBlclRpdGxlXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wicHJvcG9zZXJcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJhcHBsaWNhdGlvbkRhdGVcIl0gKyAnPC90ZD48dGQ+PGEgaHJlZj1cIicrIHRoaXMucHJldmlldyArIGVuY29kZVVSSSh0aGlzLmJvb2tEYXRhW2ldW1wiZmlsZU5hbWVcIl0pICsnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+6aKE6KeIPC9hPjwvdGQ+PHRkPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1lZGl0MiB0YWJsZS1lZGl0XCIgZGF0YS10b2dnbGU9XCJtb2RhbFwiIGRhdGEtdGFyZ2V0PVwiLmJzLWV4YW1wbGUtbW9kYWwtbGdcIj7nvJbovpE8L2J1dHRvbj48L3RkPjwvdHI+JztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0aWYodGhpcy5vcHRpb25zLmNob2ljZUNvbnRlbnQgPT0gXCJpbmRleFwiKXtcclxuXHRcdFx0XHRcdFx0Zm9yKGk7aSA8IHRoaXMuYm9va0RhdGFQYWdlTGVuO2krKyl7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nKyAoaSsxKSArJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va05hbWVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rVm9sdW1lXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va0J1eWVyXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va0JvcnJvd2VyXCJdICsgJzwvdGQ+PHRkPicgKyAgdGhpcy5ib29rRGF0YVtpXVtcImJ1eVRpbWVcIl0gKyAnPC90ZD48L3RyPic7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwibW9kaWZ5XCIpe1xyXG5cdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YVBhZ2VMZW47aSsrKXtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicgKyAoaSsxKSArICc8L3RkPjx0ZCBkYXRhLWlkbnVtPVwiJysgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tJZFwiXSArJ1wiPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va05hbWVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rVm9sdW1lXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va0J1eWVyXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va0JvcnJvd2VyXCJdICsgJzwvdGQ+PHRkPicgKyAgdGhpcy5ib29rRGF0YVtpXVtcImJ1eVRpbWVcIl0gKyAnPC90ZD48dGQ+PGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZWRpdDIgdGFibGUtZWRpdFwiIHR5cGU9XCJidXR0b25cIj7nvJbovpE8L2J1dHRvbj48L3RkPjwvdHI+JztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYodGhpcy5vcHRpb25zLmNob2ljZUNvbnRlbnQgPT0gXCJtb2RpZnlTdGFmZlwiKXtcclxuXHRcdFx0XHRcdFx0Zm9yKGk7aSA8IHRoaXMuYm9va0RhdGFQYWdlTGVuO2krKyl7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nICsgKGkrMSkgKyAnPC90ZD48dGQgZGF0YS1pZG51bT1cIicrIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZklkXCJdICsnXCI+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZkRlcGFydG1lbnRcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZk5hbWVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZkVtYWlsXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wic3RhZmZFeHRlbnNpb25cIl0gKyAnPC90ZD48dGQ+JyArICB0aGlzLmJvb2tEYXRhW2ldW1wic3RhZmZOdW1iZXJcIl0gKyAnPC90ZD48dGQ+PGEgaHJlZj1cIiMjI1wiIGNsYXNzPVwiZWRpdC1wZW9wbGUtaW5mb1wiPue8lui+kTwvYT58PGEgaHJlZj1cIiMjI1wiIGNsYXNzPVwiZGVsZXRlLXBlb3BsZS1pbmZvXCI+5Yig6ZmkPC9hPjwvdGQ+PC90cj4nO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZih0aGlzLm9wdGlvbnMuY2hvaWNlQ29udGVudCA9PSBcImluZGV4UGF0ZW50XCIpe1xyXG5cdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YVBhZ2VMZW47aSsrKXtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicrIChpKzEpICsnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJwYXRlbnRUaXRsZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcInByb3Bvc2VyXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wib3JkZXJOdW1iZXJcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJhcHBsaWNhdGlvbkRhdGVcIl0gKyAnPC90ZD48L3RyPic7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwibW9kaWZ5UGF0ZW50XCIpe1xyXG5cdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YVBhZ2VMZW47aSsrKXtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicgKyAoaSsxKSArICc8L3RkPjx0ZCBkYXRhLWlkbnVtPVwiJysgdGhpcy5ib29rRGF0YVtpXVtcInBhdGVudElkXCJdICsnXCI+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJwYXRlbnROYW1lXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiZmlyc3RJbnZlbnRvclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcInNvcnRDb2RlXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYWNjZXB0RGF0ZVwiXSArICc8L3RkPjx0ZD48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZWRpdDIgdGFibGUtZWRpdFwiIGRhdGEtdG9nZ2xlPVwibW9kYWxcIiBkYXRhLXRhcmdldD1cIi5icy1leGFtcGxlLW1vZGFsLWxnXCI+57yW6L6RPC9idXR0b24+PC90ZD48L3RyPic7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwiaW5kZXhUaGVzaXNcIil7XHJcblx0XHRcdFx0XHRcdGZvcihpO2kgPCB0aGlzLmJvb2tEYXRhUGFnZUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuYm9va1N0ckh0bWwgKz0gJzx0cj48dGQ+JysgKGkrMSkgKyc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcInBhcGVyVGl0bGVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJwcm9wb3NlclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImFwcGxpY2F0aW9uRGF0ZVwiXSArICc8L3RkPjx0ZD48YSBocmVmPVwiJysgdGhpcy5kb3dubG9hZCArIGVuY29kZVVSSSh0aGlzLmJvb2tEYXRhW2ldW1wiZmlsZU5hbWVcIl0pICsnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+5LiL6L29PC9hPiB8IDxhIGhyZWY9XCInKyB0aGlzLnByZXZpZXcgKyBlbmNvZGVVUkkodGhpcy5ib29rRGF0YVtpXVtcImZpbGVOYW1lXCJdKSAgKydcIiB0YXJnZXQ9XCJfYmxhbmtcIj7pooTop4g8L2E+PC90ZD48L3RyPic7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwibW9kaWZ5VGhlc2lzXCIpe1xyXG5cdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YVBhZ2VMZW47aSsrKXtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicgKyAoaSsxKSArICc8L3RkPjx0ZCBkYXRhLWlkbnVtPVwiJysgdGhpcy5ib29rRGF0YVtpXVtcInBhcGVySWRcIl0gKydcIj4nICsgdGhpcy5ib29rRGF0YVtpXVtcInBhcGVyVGl0bGVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJwcm9wb3NlclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImFwcGxpY2F0aW9uRGF0ZVwiXSArICc8L3RkPjx0ZD48YSBocmVmPVwiJysgdGhpcy5wcmV2aWV3ICsgZW5jb2RlVVJJKHRoaXMuYm9va0RhdGFbaV1bXCJmaWxlTmFtZVwiXSkgKydcIiB0YXJnZXQ9XCJfYmxhbmtcIj7pooTop4g8L2E+PC90ZD48dGQ+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWVkaXQyIHRhYmxlLWVkaXRcIiBkYXRhLXRvZ2dsZT1cIm1vZGFsXCIgZGF0YS10YXJnZXQ9XCIuYnMtZXhhbXBsZS1tb2RhbC1sZ1wiPue8lui+kTwvYnV0dG9uPjwvdGQ+PC90cj4nO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBpZih0aGlzLm9wdGlvbnMuY2hvaWNlQ29udGVudCA9PSBcImluZGV4XCIpe1xyXG5cdFx0XHRcdC8vIFx0Zm9yKGk7aSA8IHRoaXMuYm9va0RhdGFQYWdlTGVuO2krKyl7XHJcblx0XHRcdFx0Ly8gXHRcdHRoaXMuYm9va1N0ckh0bWwgKz0gJzx0cj48dGQ+JysgKGkrMSkgKyc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tOYW1lXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va1ZvbHVtZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tCdXllclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tCb3Jyb3dlclwiXSArICc8L3RkPjx0ZD4nICsgIHRoaXMuYm9va0RhdGFbaV1bXCJidXlUaW1lXCJdICsgJzwvdGQ+PC90cj4nO1xyXG5cdFx0XHRcdC8vIFx0fVxyXG5cdFx0XHRcdC8vIH1cclxuXHRcdFx0XHQvLyBpZih0aGlzLm9wdGlvbnMuY2hvaWNlQ29udGVudCA9PSBcIm1vZGlmeVwiKXtcclxuXHRcdFx0XHQvLyBcdGZvcihpO2kgPCB0aGlzLmJvb2tEYXRhUGFnZUxlbjtpKyspe1xyXG5cdFx0XHRcdC8vIFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicgKyAoaSsxKSArICc8L3RkPjx0ZCBkYXRhLWlkbnVtPVwiJysgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tJZFwiXSArJ1wiPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va05hbWVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rVm9sdW1lXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va0J1eWVyXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va0JvcnJvd2VyXCJdICsgJzwvdGQ+PHRkPicgKyAgdGhpcy5ib29rRGF0YVtpXVtcImJ1eVRpbWVcIl0gKyAnPC90ZD48dGQ+PGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZWRpdDIgdGFibGUtZWRpdFwiIHR5cGU9XCJidXR0b25cIj7nvJbovpE8L2J1dHRvbj48L3RkPjwvdHI+JztcclxuXHRcdFx0XHQvLyBcdH1cclxuXHRcdFx0XHQvLyB9XHJcblx0XHRcdFx0dGhpcy4kZWxlbWVudC5hcHBlbmQodGhpcy5ib29rU3RySHRtbCk7XHJcblx0XHRcdH1lbHNle1xyXG5cclxuXHRcdFx0XHQkKHRoaXMudGFibGVJZCArIFwiIHRyOm5vdCg6Zmlyc3QtY2hpbGQpXCIpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwiaW5kZXhcIiApe1xyXG5cdFx0XHRcdFx0dGhpcy4kZWxlbWVudC5hcHBlbmQoJzx0cj48dGQgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIGNvbHNwYW49XCI2XCI+5pqC5peg55u45YWz5pWw5o2uLi4uPC90ZD48L3RyPicpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwibW9kaWZ5XCIpe1xyXG5cdFx0XHRcdFx0dGhpcy4kZWxlbWVudC5hcHBlbmQoJzx0cj48dGQgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIGNvbHNwYW49XCI3XCI+5pqC5peg55u45YWz5pWw5o2uLi4uPC90ZD48L3RyPicpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwibW9kaWZ5U3RhZmZcIiApe1xyXG5cdFx0XHRcdFx0dGhpcy4kZWxlbWVudC5hcHBlbmQoJzx0cj48dGQgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIGNvbHNwYW49XCI3XCI+5pqC5peg55u45YWz5pWw5o2uLi4uPC90ZD48L3RyPicpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwiaW5kZXhQYXRlbnRcIil7XHJcblx0XHRcdFx0XHR0aGlzLiRlbGVtZW50LmFwcGVuZCgnPHRyPjx0ZCBjbGFzcz1cInRleHQtY2VudGVyXCIgY29sc3Bhbj1cIjVcIj7mmoLml6Dnm7jlhbPmlbDmja4uLi48L3RkPjwvdHI+JylcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYodGhpcy5vcHRpb25zLmNob2ljZUNvbnRlbnQgPT0gXCJtb2RpZnlQYXRlbnRcIiApe1xyXG5cdFx0XHRcdFx0dGhpcy4kZWxlbWVudC5hcHBlbmQoJzx0cj48dGQgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIGNvbHNwYW49XCI2XCI+5pqC5peg55u45YWz5pWw5o2uLi4uPC90ZD48L3RyPicpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwiaWRuZXhUaGVzaXNcIiApe1xyXG5cdFx0XHRcdFx0dGhpcy4kZWxlbWVudC5hcHBlbmQoJzx0cj48dGQgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIGNvbHNwYW49XCI1XCI+5pqC5peg55u45YWz5pWw5o2uLi4uPC90ZD48L3RyPicpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwibW9kaWZ5VGhlc2lzXCIgKXtcclxuXHRcdFx0XHRcdHRoaXMuJGVsZW1lbnQuYXBwZW5kKCc8dHI+PHRkIGNsYXNzPVwidGV4dC1jZW50ZXJcIiBjb2xzcGFuPVwiNlwiPuaaguaXoOebuOWFs+aVsOaNri4uLjwvdGQ+PC90cj4nKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmluaXRQYWdlKCk7XHJcblxyXG5cdFx0fSxcclxuXHRcdGluaXRQYWdlOmZ1bmN0aW9uKCl7XHJcblxyXG5cdFx0XHQkKHRoaXMucGFnZUlkICsgXCI+bGk6bm90KCcucHJldi1wYWdlLC5uZXh0LXBhZ2UsLm5leHRBZGRQYWdlNS1wYWdlLC5wcmV2UmVkdWNlUGFnZTUtcGFnZScpXCIpLnJlbW92ZSgpOyAgICAgLy/pobXmlbBcclxuXHJcblx0XHRcdGlmKHRoaXMudG90YWxQYWdlPD0xKXsgICAgICAgICAvL+W9k+WJjeWGheWuueS4jei2szEw5p2h77yM5pi+56S65LiA6aG1XHJcblxyXG5cdFx0XHRcdCQodGhpcy5wYWdlSWQgK1wiIC5uZXh0LXBhZ2VcIikuYWRkQ2xhc3MoXCJkaXNhbGJlZFwiKTtcclxuXHRcdFx0XHQkKHRoaXMucGFnZUlkKS5jaGlsZHJlbigpLmVxKDEpLmFmdGVyKCc8bGkgY2xhc3M9XCJhY3RpdmVcIj48YSBocmVmPVwiIyMjXCI+MTwvYT48L2xpPicpO1xyXG5cdFx0XHRcdCQodGhpcy50b3RhbFBhZ2VJZCkudGV4dChcIjFcIilcclxuXHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0ICBpZiggdGhpcy50b3RhbFBhZ2UgPiAxICYmIHRoaXMudG90YWxQYWdlIDwgMTEpeyAgICAgICAgICAgLy/lvZPliY3pobXpnaLlpKfkuo4xMOadoVxyXG5cclxuXHRcdFx0XHRmb3IodmFyIGk9MDtpPHRoaXMudG90YWxQYWdlO2krKyl7XHJcblx0XHRcdFx0ICB0aGlzLnRvdGFsU3RySHRtbCArPSAnPGxpPjxhIGhyZWY9XCIjIyNcIj4nKyAoaSsxKSArJzwvYT48L2xpPic7IC8vIOWKqOaAgeeUn+aIkOmhteaVsFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKHRoaXMudG90YWxQYWdlSWQpLnRleHQodGhpcy50b3RhbFBhZ2UpICAgICAgICAgLy/lhbHorqHpobXmlbDnmoTmlbDph49cclxuXHJcblx0XHRcdFx0JCh0aGlzLnBhZ2VJZCkuY2hpbGRyZW4oKS5lcSgxKS5hZnRlcih0aGlzLnRvdGFsU3RySHRtbCk7XHJcblxyXG5cdFx0XHQvLyAgICB2YXIgc2Vzc2lvblZhbHVlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncGFnZScpXHJcblx0XHRcdFx0Ly8gaWYodGhpcy5zZXNzaW9uVmFsdWUgIT09IDEgJiYgdGhpcy5zZXNzaW9uVmFsdWUgIT09IDApe1xyXG5cdFx0XHRcdC8vXHJcblx0XHRcdFx0Ly8gICAkKHRoaXMucGFnZUlkKS5jaGlsZHJlbigpLmVxKHRoaXMuc2Vzc2lvbkN1cnJlbnRMb2NhdGlvblZhbHVlKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdFx0XHQvLyB9ZWxzZXtcclxuXHRcdFx0XHQgICQodGhpcy5wYWdlSWQpLmNoaWxkcmVuKCkuZXEoMikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0XHRcdFx0Ly8gfVxyXG5cdFx0XHRcdGlmKHRoaXMuc2Vzc2lvbkN1cnJlbnRMb2NhdGlvblZhbHVlID09IDIpe1xyXG5cdFx0XHRcdFx0aWYoISQodGhpcy5wYWdlSWQgKyBcIiAucHJldi1wYWdlXCIpLmhhc0NsYXNzKFwiZGlzYWJsZWRcIikpe1xyXG5cdFx0XHRcdFx0XHQkKHRoaXMucGFnZUlkICsgXCIgLnByZXYtcGFnZVwiKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZigkKHRoaXMucGFnZUlkICsgXCIgLm5leHQtcGFnZVwiKS5oYXNDbGFzcyhcImRpc2FibGVkXCIpKXtcclxuXHRcdFx0XHRcdFx0JCh0aGlzLnBhZ2VJZCArIFwiIC5uZXh0LXBhZ2VcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZih0aGlzLnNlc3Npb25DdXJyZW50TG9jYXRpb25WYWx1ZSA9PSAxMSl7XHJcblx0XHRcdFx0XHRpZighJCh0aGlzLnBhZ2VJZCArIFwiIC5uZXh0LXBhZ2VcIikuaGFzQ2xhc3MoXCJkaXNhYmxlZFwiKSl7XHJcblx0XHRcdFx0XHRcdCQodGhpcy5wYWdlSWQgKyBcIiAubmV4dC1wYWdlXCIpLmFkZENsYXNzKFwiZGlzYWJsZWRcIilcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKCQodGhpcy5wYWdlSWQgKyBcIiAucHJldi1wYWdlXCIpLmhhc0NsYXNzKFwiZGlzYWJsZWRcIikpe1xyXG5cdFx0XHRcdFx0XHQkKHRoaXMucGFnZUlkICsgXCIgLnByZXYtcGFnZVwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHRoaXMuc2Vzc2lvbkN1cnJlbnRMb2NhdGlvblZhbHVlID4gMiAmJiB0aGlzLnNlc3Npb25DdXJyZW50TG9jYXRpb25WYWx1ZSA8IDExKXtcclxuXHRcdFx0XHRcdCQodGhpcy5wYWdlSWQgKyBcIiAucHJldi1wYWdlLFwiKyB0aGlzLnBhZ2VJZCArXCIgLm5leHQtcGFnZVwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fVxyXG5cdFx0ICBpZih0aGlzLnRvdGFsUGFnZSA+IDEwKXtcclxuXHJcblx0XHRcdFx0XHRmb3IodmFyIGk9MDtpPDEwO2krKyl7XHJcblx0XHRcdFx0XHQgIHRoaXMudG90YWxTdHJIdG1sICs9ICc8bGk+PGEgaHJlZj1cIiMjI1wiPicrIChpKzEpICsnPC9hPjwvbGk+JzsgIC8vIOWKqOaAgeeUn+aIkOmhteaVsFxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdCQodGhpcy5wYWdlSWQpLmNoaWxkcmVuKCkuZXEoMSkuYWZ0ZXIodGhpcy50b3RhbFN0ckh0bWwpO1xyXG5cclxuXHRcdFx0XHRcdCQodGhpcy5wYWdlSWQpLmNoaWxkcmVuKCkuZXEoMikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0XHRcdFx0Ly8gfVxyXG5cclxuXHJcblxyXG5cdFx0XHRcdC8vIGlmKCEkKHRoaXMucGFnZUlkICsgXCIgLnByZXYtcGFnZVwiKS5oYXNDbGFzcyhcImRpc2FibGVkXCIpKXtcclxuXHRcdFx0XHQvLyAgICQodGhpcy5wYWdlSWQgKyBcIiAucHJldi1wYWdlXCIpLmFkZENsYXNzKFwiZGlzYWJsZWRcIilcclxuXHRcdFx0XHQvLyB9XHJcblx0XHRcdFx0Ly8gaWYoJCh0aGlzLnBhZ2VJZCArIFwiIC5uZXh0LXBhZ2VcIikuaGFzQ2xhc3MoXCJkaXNhYmxlZFwiKSl7XHJcblx0XHRcdFx0Ly8gICAkKHRoaXMucGFnZUlkICsgXCIgLm5leHQtcGFnZVwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpXHJcblx0XHRcdFx0Ly8gfVxyXG5cdFx0XHRcdCQodGhpcy50b3RhbFBhZ2VJZCkudGV4dCh0aGlzLnRvdGFsUGFnZSlcclxuXHRcdFx0fVxyXG5cclxuXHJcblxyXG5cdFx0XHRcdHRoaXMuY2xpY2tQYWdlKCk7XHJcblx0XHRcdFx0dGhpcy5jbGlja1ByZXZQYWdlKCk7XHJcblx0XHRcdFx0dGhpcy5jbGlja05leHRQYWdlKCk7XHJcblx0XHRcdFx0dGhpcy5jbGlja1NraXBQYWdlKCk7XHJcblxyXG5cdFx0fSxcclxuXHRcdGNsaWNrUGFnZTpmdW5jdGlvbigpe1xyXG5cclxuXHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdHZhciBib29rRGF0YUxlbiA9IHNlbGYuYm9va0RhdGFMZW47XHJcbiBcdFx0XHQkKHRoaXMucGFnZUlkKS5vZmYoXCJjbGlja1wiKS5vbihcImNsaWNrXCIsXCJsaTpub3QoJy5wcmV2LXBhZ2UsLm5leHQtcGFnZSwubmV4dEFkZFBhZ2U1LXBhZ2UsLnByZXZSZWR1Y2VQYWdlNS1wYWdlJylcIixmdW5jdGlvbigpe1xyXG5cdFx0XHRcdCQoc2VsZi5za2lwUGFnZUlkKS52YWwoXCJcIilcclxuXHJcblx0XHRcdFx0aWYoYm9va0RhdGFMZW4gPT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFx0ICAkKHRoaXMpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcblxyXG5cdFx0XHQgICQoc2VsZi50YWJsZUlkICsgXCIgdHI6bm90KDpmaXJzdC1jaGlsZClcIikucmVtb3ZlKCk7XHJcblx0XHRcdCAgc2VsZi5jdXJyUGFnZSA9ICQodGhpcykudGV4dCgpXHJcblxyXG5cdFx0XHQgIC8vc2Vzc2lvblN0b3JhZ2VbJ3BhZ2UnXSA9IGN1cnJQYWdlO1xyXG5cclxuXHRcdFx0XHRzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwic2Vzc2lvbkRhdGFMZW5cIixzZWxmLmJvb2tEYXRhTGVuKVxyXG5cdFx0XHQgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oc2VsZi5zZXNzaW9uUGFnZSxzZWxmLmN1cnJQYWdlKVxyXG5cdFx0XHQgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oc2VsZi5zZXNzaW9uTG9jYXRpb24sJChzZWxmLnBhZ2VJZCArIFwiPmxpLmFjdGl2ZVwiKS5pbmRleCgpKVxyXG5cclxuXHRcdFx0ICBzZWxmLnBhZ2VUYWJsZUNvbnRlbnQoKTtcclxuXHJcblx0XHRcdCByZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0pXHJcblx0XHR9LFxyXG5cdFx0Y2xpY2tQcmV2UGFnZTpmdW5jdGlvbigpe1xyXG5cclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiIC5wcmV2LXBhZ2VcIikub2ZmKFwiY2xpY2tcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0JChzZWxmLnNraXBQYWdlSWQpLnZhbChcIlwiKVxyXG5cdFx0XHRcdHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJzZXNzaW9uRGF0YUxlblwiLHNlbGYuYm9va0RhdGFMZW4pXHJcblxyXG5cdFx0XHRcdHNlbGYuY3VyclBhZ2UgPSBOdW1iZXIoJChzZWxmLnBhZ2VJZCArIFwiIC5hY3RpdmU+YVwiKS50ZXh0KCkpO1xyXG5cclxuXHRcdFx0XHRzZWxmLnN0YXJ0Q3VycmVudCA9IHNlbGYuY3VyclBhZ2UgLSAxO1xyXG5cclxuXHJcblx0XHRcdFx0aWYoIHNlbGYuY3VyclBhZ2UgPT0gMSl7XHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHNlbGYuc2Vzc2lvblBhZ2Usc2VsZi5zdGFydEN1cnJlbnQpXHJcblx0XHRcdFx0c2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShzZWxmLnNlc3Npb25Mb2NhdGlvbiwkKHNlbGYucGFnZUlkICsgXCI+bGkuYWN0aXZlXCIpLmluZGV4KCkpXHJcblxyXG5cdFx0XHRcdHNlbGYuc2Vzc2lvblZhbHVlID0gTnVtYmVyKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oc2VsZi5zZXNzaW9uUGFnZSkpXHJcblx0XHRcdFx0c2VsZi5zZXNzaW9uQ3VycmVudExvY2F0aW9uVmFsdWUgPSBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShzZWxmLnNlc3Npb25Mb2NhdGlvbikpXHJcblx0XHRcdFx0aWYoIHNlbGYuY3VyclBhZ2UgPT0gMil7XHJcblx0XHRcdFx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIiAubmV4dC1wYWdlXCIpLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIilcclxuXHRcdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiIC5wcmV2LXBhZ2VcIikuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiggc2VsZi5jdXJyUGFnZSA+IDIpe1xyXG5cdFx0XHRcdFx0XHQkKHNlbGYucGFnZUlkICsgXCIgLm5leHQtcGFnZVwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpXHJcblx0XHRcdFx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIiAucHJldi1wYWdlXCIpLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIilcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmKHNlbGYuY3VyclBhZ2UgIT09IDEpe1xyXG5cclxuXHRcdFx0XHRcdGlmKHNlbGYuc2Vzc2lvbkN1cnJlbnRMb2NhdGlvblZhbHVlICE9PSAyKXtcclxuXHJcblx0XHRcdFx0XHRcdCQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHJcblx0XHRcdFx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIiBsaVwiKS5lcShzZWxmLnNlc3Npb25DdXJyZW50TG9jYXRpb25WYWx1ZS0xKS5hZGRDbGFzcyhcImFjdGl2ZVwiKVxyXG5cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHNlbGYuc2Vzc2lvbkN1cnJlbnRMb2NhdGlvblZhbHVlID09IDIpe1xyXG5cclxuXHRcdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiPmxpOm5vdCgnLnByZXYtcGFnZSwubmV4dC1wYWdlLC5uZXh0QWRkUGFnZTUtcGFnZSwucHJldlJlZHVjZVBhZ2U1LXBhZ2UnKVwiKS5yZW1vdmUoKTsgICAgIC8v6aG15pWwXHJcblx0XHRcdFx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIiAubmV4dC1wYWdlLFwiICsgc2VsZi5wYWdlSWQgKyBcIiAubmV4dEFkZFBhZ2U1LXBhZ2UsXCIgKyBzZWxmLnBhZ2VJZCArIFwiIC5wcmV2LXBhZ2UsXCIgKyBzZWxmLnBhZ2VJZCArIFwiIC5wcmV2UmVkdWNlUGFnZTUtcGFnZVwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpO1xyXG5cdFx0XHRcdFx0XHR2YXIgc3RhcnRDdXJyID0gc2VsZi5zdGFydEN1cnJlbnQ7XHJcblxyXG5cdFx0XHRcdFx0XHRzZWxmLnRvdGFsU3RySHRtbCA9IFwiXCI7XHJcblx0XHRcdFx0XHRcdHZhciBpID0gc3RhcnRDdXJyLTEwO1xyXG5cdFx0XHRcdFx0XHRpZihpPjApe1xyXG5cdFx0XHRcdFx0XHRcdGZvcihpIDtpPHN0YXJ0Q3VycjtpKyspe1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYudG90YWxTdHJIdG1sICs9ICc8bGk+PGEgaHJlZj1cIiMjI1wiPicrIChpKzEpICsnPC9hPjwvbGk+JzsgLy8g5Yqo5oCB55Sf5oiQ6aG15pWwXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIj5saS5wcmV2LXBhZ2VcIikuYWZ0ZXIoc2VsZi50b3RhbFN0ckh0bWwpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQkKHNlbGYucGFnZUlkICsgXCI+bGlcIikuZXEoMTEpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG5cdFx0XHRcdFx0XHR9ZWxzZXtcclxuXHJcblx0XHRcdFx0XHRcdFx0Zm9yKGk9MCA7aTwxMDtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi50b3RhbFN0ckh0bWwgKz0gJzxsaT48YSBocmVmPVwiIyMjXCI+JysgKGkrMSkgKyc8L2E+PC9saT4nOyAvLyDliqjmgIHnlJ/miJDpobXmlbBcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiPmxpLnByZXYtcGFnZVwiKS5hZnRlcihzZWxmLnRvdGFsU3RySHRtbCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIj5saVwiKS5lcShzdGFydEN1cnIrMSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRcdHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oc2VsZi5zZXNzaW9uTG9jYXRpb24sJChzZWxmLnBhZ2VJZCArIFwiPmxpLmFjdGl2ZVwiKS5pbmRleCgpKVxyXG5cclxuXHJcblxyXG5cclxuXHJcblx0XHRcdCAgLy90aGlzLnNlc3Npb25QYWdlICAgdGhpcy5zZXNzaW9uTG9jYXRpb25bJ3BhZ2UnXSA9IHN0YXJ0Q3VycmVudDtcclxuXHRcdFx0XHRzZWxmLnBhZ2VQcmV2T3JOZXh0KClcclxuXHJcblx0XHRcdCAgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9KVxyXG5cdFx0fSxcclxuXHRcdGNsaWNrUHJldlJlZHVjZVBhZ2U1OmZ1bmN0aW9uKCl7XHJcblxyXG5cdFx0fSxcclxuXHRcdGNsaWNrTmV4dFBhZ2U6ZnVuY3Rpb24oKXtcclxuXHJcblxyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIiAubmV4dC1wYWdlXCIpLm9mZihcImNsaWNrXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe1xyXG5cdFx0XHRcdCQoc2VsZi5za2lwUGFnZUlkKS52YWwoXCJcIilcclxuXHRcdFx0XHRzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwic2Vzc2lvbkRhdGFMZW5cIixzZWxmLmJvb2tEYXRhTGVuKVxyXG5cclxuXHRcdFx0XHRzZWxmLmN1cnJQYWdlID0gTnVtYmVyKCQoc2VsZi5wYWdlSWQgKyBcIiAuYWN0aXZlPmFcIikudGV4dCgpKTtcclxuXHJcblx0XHRcdFx0c2VsZi5zdGFydEN1cnJlbnQgPSBzZWxmLmN1cnJQYWdlICsgMTtcclxuXHJcblx0XHRcdFx0aWYoIHNlbGYuY3VyclBhZ2UgPT0gc2VsZi50b3RhbFBhZ2UgKXtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoIHNlbGYuY3VyclBhZ2UgPT0gKHNlbGYudG90YWxQYWdlLTEpKXtcclxuXHRcdFx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIiAubmV4dC1wYWdlXCIpLmFkZENsYXNzKFwiZGlzYWJsZWRcIilcclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oc2VsZi5zZXNzaW9uUGFnZSxzZWxmLnN0YXJ0Q3VycmVudClcclxuXHRcdFx0XHRzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHNlbGYuc2Vzc2lvbkxvY2F0aW9uLCQoc2VsZi5wYWdlSWQgKyBcIj5saS5hY3RpdmVcIikuaW5kZXgoKSlcclxuXHJcblx0XHRcdFx0c2VsZi5zZXNzaW9uVmFsdWUgPSBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShzZWxmLnNlc3Npb25QYWdlKSlcclxuXHRcdFx0XHRzZWxmLnNlc3Npb25DdXJyZW50TG9jYXRpb25WYWx1ZSA9IE51bWJlcihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHNlbGYuc2Vzc2lvbkxvY2F0aW9uKSlcclxuXHJcblx0XHRcdFx0aWYoc2VsZi5jdXJyUGFnZSAhPT0gc2VsZi50b3RhbFBhZ2Upe1xyXG5cdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiIC5wcmV2LXBhZ2VcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKVxyXG5cdFx0XHRcdC8vXHQkKHNlbGYucGFnZUlkICsgXCIgLm5leHQtcGFnZSxcIiArIHNlbGYucGFnZUlkICsgXCIgLm5leHRBZGRQYWdlNS1wYWdlLFwiICsgc2VsZi5wYWdlSWQgKyBcIiAucHJldi1wYWdlLFwiICsgc2VsZi5wYWdlSWQgKyBcIiAucHJldlJlZHVjZVBhZ2U1LXBhZ2VcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuXHJcblx0XHRcdFx0XHRpZihzZWxmLnNlc3Npb25DdXJyZW50TG9jYXRpb25WYWx1ZSAhPT0gMTEpe1xyXG5cclxuXHRcdFx0XHRcdFx0JCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG5cclxuXHRcdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiIGxpXCIpLmVxKHNlbGYuc2Vzc2lvbkN1cnJlbnRMb2NhdGlvblZhbHVlKzEpLmFkZENsYXNzKFwiYWN0aXZlXCIpXHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYoc2VsZi5zZXNzaW9uQ3VycmVudExvY2F0aW9uVmFsdWUgPT0gMTEpe1xyXG5cclxuXHRcdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiPmxpOm5vdCgnLnByZXYtcGFnZSwubmV4dC1wYWdlLC5uZXh0QWRkUGFnZTUtcGFnZSwucHJldlJlZHVjZVBhZ2U1LXBhZ2UnKVwiKS5yZW1vdmUoKTsgICAgIC8v6aG15pWwXHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgc3RhcnRDdXJyID0gc2VsZi5zdGFydEN1cnJlbnQ7XHJcblxyXG5cdFx0XHRcdFx0XHRzZWxmLnRvdGFsU3RySHRtbCA9IFwiXCI7XHJcblx0XHRcdFx0XHRcdHZhciBpID0gc3RhcnRDdXJyLTEwO1xyXG5cclxuXHRcdFx0XHRcdFx0Zm9yKGkgO2k8c3RhcnRDdXJyO2krKyl7XHJcblxyXG5cdFx0XHRcdFx0XHRcdHNlbGYudG90YWxTdHJIdG1sICs9ICc8bGk+PGEgaHJlZj1cIiMjI1wiPicrIChpKzEpICsnPC9hPjwvbGk+JzsgLy8g5Yqo5oCB55Sf5oiQ6aG15pWwXHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIj5saS5wcmV2LXBhZ2VcIikuYWZ0ZXIoc2VsZi50b3RhbFN0ckh0bWwpO1xyXG5cclxuXHRcdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiPmxpXCIpLmVxKHNlbGYuc2Vzc2lvbkN1cnJlbnRMb2NhdGlvblZhbHVlKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHJcblx0XHRcdFx0c2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShzZWxmLnNlc3Npb25Mb2NhdGlvbiwkKHNlbGYucGFnZUlkICsgXCI+bGkuYWN0aXZlXCIpLmluZGV4KCkpXHJcblxyXG5cdFx0XHRcdC8vc2Vzc2lvblN0b3JhZ2VbJ3BhZ2UnXSA9IHN0YXJ0Q3VycmVudDtcclxuXHJcblx0XHRcdFx0c2VsZi5wYWdlUHJldk9yTmV4dCgpXHJcblxyXG5cdFx0XHQgIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdH0pXHJcblx0XHR9LFxyXG5cdFx0Y2xjaWtOZXh0QWRkUGFnZTU6ZnVuY3Rpb24oKXtcclxuXHJcblx0XHR9LFxyXG5cdFx0Y2xpY2tTa2lwUGFnZTpmdW5jdGlvbigpeyAvL+i3s+i9rOmhtemdolxyXG5cdFx0XHR2YXIgdG90YWxQYWdlID0gdGhpcy50b3RhbFBhZ2UsXHJcblx0XHRcdCAgICBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdCQodGhpcy5za2lwUGFnZUlkKS5vbihcImtleXVwXCIsZnVuY3Rpb24oZSl7XHJcblxyXG5cdFx0XHRcdHZhciByZWdOdW0gPSAvXlsxLTldWzAtOV0qJC8sICAgLy/ovpPlhaXmoYbpqozor4FcclxuXHRcdFx0XHRcdFx0c2tpcFBhZ2UgPSBOdW1iZXIoJCh0aGlzKS52YWwoKSksXHJcblx0XHRcdFx0XHRcdHBhZ2VCb29sZWFuID0gdHJ1ZTtcclxuXHRcdFx0XHRpZiAoZS53aGljaCA9PSAxMykge1xyXG5cdFx0XHRcdFx0aWYoIXJlZ051bS50ZXN0KHNraXBQYWdlKSl7XHJcblx0XHRcdFx0XHRcdGFsZXJ0KFwi6K+35aGr5pWw5a2XXCIpXHJcblx0XHRcdFx0XHRcdHBhZ2VCb29sZWFuID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZihza2lwUGFnZSA+IHRvdGFsUGFnZSl7XHJcblx0XHRcdFx0XHRcdGFsZXJ0KFwi6K+35aGr5bCP5LqO5oC76aG15pWw55qE5pWw5a2XXCIpXHJcblx0XHRcdFx0XHRcdHBhZ2VCb29sZWFuID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZighcGFnZUJvb2xlYW4pIHJldHVybiBwYWdlQm9vbGVhbjsgIC8v6aqM6K+B57uT5p2fXHJcblxyXG5cdFx0XHRcdFx0JChzZWxmLnRhYmxlSWQgKyBcIiB0cjpub3QoOmZpcnN0LWNoaWxkKVwiKS5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdHNlbGYuY3VycmVudFBhZ2UgPSBza2lwUGFnZSxcclxuXHRcdFx0XHRcdHNlbGYuYm9va1N0ckh0bWwgPSAnJztcclxuXHRcdFx0XHRcdHNlbGYuc3RhcnRQYWdlID0gKHNlbGYuY3VycmVudFBhZ2UtMSkgKiBzZWxmLnNpemVQYWdlO1xyXG5cdFx0XHRcdFx0c2VsZi5lbmRQYWdlID0gc2VsZi5jdXJyZW50UGFnZSAqIHNlbGYuc2l6ZVBhZ2U7XHJcblx0XHRcdFx0XHRzZWxmLmJvb2tEYXRhUGFnZUxlbiA9IHNlbGYuZW5kUGFnZTtcclxuXHJcblx0XHRcdFx0XHRpZihzZWxmLmN1cnJlbnRQYWdlICE9PSAxIHx8IHNlbGYuY3VycmVudFBhZ2UgIT09IHNlbGYudG90YWxQYWdlKXtcclxuXHRcdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiIGxpXCIpLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIilcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHNlbGYuY3VycmVudFBhZ2UgPT0gMSl7XHJcblx0XHRcdFx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIiAucHJldi1wYWdlXCIpLmFkZENsYXNzKFwiZGlzYWJsZWRcIilcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHNlbGYuY3VycmVudFBhZ2UgPT0gc2VsZi50b3RhbFBhZ2Upe1xyXG5cdFx0XHRcdFx0XHQkKHNlbGYucGFnZUlkICsgXCIgLm5leHQtcGFnZVwiKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiPmxpOm5vdCgnLnByZXYtcGFnZSwubmV4dC1wYWdlLC5uZXh0QWRkUGFnZTUtcGFnZSwucHJldlJlZHVjZVBhZ2U1LXBhZ2UnKVwiKS5yZW1vdmUoKTsgICAgIC8v6aG15pWwXHJcblx0XHRcdFx0XHQkKHNlbGYucGFnZUlkICsgXCIgLm5leHQtcGFnZSxcIiArIHNlbGYucGFnZUlkICsgXCIgLm5leHRBZGRQYWdlNS1wYWdlLFwiICsgc2VsZi5wYWdlSWQgKyBcIiAucHJldi1wYWdlLFwiICsgc2VsZi5wYWdlSWQgKyBcIiAucHJldlJlZHVjZVBhZ2U1LXBhZ2VcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuXHRcdFx0XHRcdHNlbGYudG90YWxTdHJIdG1sID0gXCJcIjtcclxuXHJcblx0XHRcdFx0XHR2YXIgc2tpcFN0YXJ0UGFnZSA9IHNraXBQYWdlIC0gNSxza2lwRW5kUGFnZSA9IHNraXBQYWdlICsgNDtcclxuXHJcblx0XHRcdFx0XHRpZiggc2tpcFN0YXJ0UGFnZSA8PSAwICl7ICAvLyDot7Povazlh4/ljrs1LOmhtemdoueahOW8gOWni+Wwj+S6jjDml7ZcclxuXHRcdFx0XHRcdFx0dmFyIGkgPSAwLGllbmQ7XHJcblx0XHRcdFx0XHRcdGlmKHNlbGYudG90YWxQYWdlID49IHNraXBFbmRQYWdlKXsgIC8v5b2T5oC76aG15pWw5aSn5LqOc2tpcEVuZFBhZ2VcclxuXHRcdFx0XHRcdFx0XHRmb3IoaTtpPDEwO2krKyl7XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLnRvdGFsU3RySHRtbCArPSAnPGxpPjxhIGhyZWY9XCIjIyNcIj4nKyAoaSsxKSArJzwvYT48L2xpPic7IC8vIOWKqOaAgeeUn+aIkOmhteaVsFxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHQkKHNlbGYucGFnZUlkICsgXCI+bGkucHJldi1wYWdlXCIpLmFmdGVyKHNlbGYudG90YWxTdHJIdG1sKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiPmxpXCIpLmVxKHNraXBQYWdlKzEpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmKHNlbGYudG90YWxQYWdlIDwgc2tpcEVuZFBhZ2UpeyAvL+W9k+aAu+mhteaVsOWwj+S6jnNraXBFbmRQYWdlXHJcblx0XHRcdFx0XHRcdFx0aWVuZCA9IHNlbGYudG90YWxQYWdlO1xyXG5cdFx0XHRcdFx0XHRcdGZvcihpO2k8aWVuZDtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi50b3RhbFN0ckh0bWwgKz0gJzxsaT48YSBocmVmPVwiIyMjXCI+JysgKGkrMSkgKyc8L2E+PC9saT4nOyAvLyDliqjmgIHnlJ/miJDpobXmlbBcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiPmxpLnByZXYtcGFnZVwiKS5hZnRlcihzZWxmLnRvdGFsU3RySHRtbCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIj5saVwiKS5lcShza2lwUGFnZSsxKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiggc2tpcFN0YXJ0UGFnZSA+IDAgKXsgLy8g6Lez6L2s5YeP5Y67NSzpobXpnaLnmoTlvIDlp4vlpKfkuo4w5pe2XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgaSA9IHNraXBTdGFydFBhZ2UsaWVuZDtcclxuXHRcdFx0XHRcdFx0aWYoc2VsZi50b3RhbFBhZ2UgPj0gc2tpcEVuZFBhZ2UpeyAgLy/lvZPmgLvpobXmlbDlpKfkuo7ot7PovazpobXmlbBcclxuXHRcdFx0XHRcdFx0XHRpZW5kID0gc2tpcEVuZFBhZ2UgKyAxO1xyXG5cdFx0XHRcdFx0XHRcdGZvcihpO2kgPCBpZW5kOyBpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi50b3RhbFN0ckh0bWwgKz0gJzxsaT48YSBocmVmPVwiIyMjXCI+JysgaSArJzwvYT48L2xpPic7IC8vIOWKqOaAgeeUn+aIkOmhteaVsFxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHQkKHNlbGYucGFnZUlkICsgXCI+bGkucHJldi1wYWdlXCIpLmFmdGVyKHNlbGYudG90YWxTdHJIdG1sKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0JChzZWxmLnBhZ2VJZCArIFwiPmxpXCIpLmVxKDcpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmKHNlbGYudG90YWxQYWdlIDwgc2tpcEVuZFBhZ2UpeyAgLy/lvZPmgLvpobXmlbDlsI/kuo7ot7PovazpobXmlbBcclxuXHRcdFx0XHRcdFx0XHRpID0gc2VsZi50b3RhbFBhZ2UtMTA7XHJcblx0XHRcdFx0XHRcdFx0aWVuZCA9IHNlbGYudG90YWxQYWdlO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRmb3IoaTtpIDwgaWVuZDsgaSsrKXtcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYudG90YWxTdHJIdG1sICs9ICc8bGk+PGEgaHJlZj1cIiMjI1wiPicrIChpKzEpICsnPC9hPjwvbGk+JzsgLy8g5Yqo5oCB55Sf5oiQ6aG15pWwXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdCQoc2VsZi5wYWdlSWQgKyBcIj5saS5wcmV2LXBhZ2VcIikuYWZ0ZXIoc2VsZi50b3RhbFN0ckh0bWwpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQkKHNlbGYucGFnZUlkICsgXCI+bGlcIikuZXEoMTEtKHNlbGYudG90YWxQYWdlLXNraXBQYWdlKSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvL1xyXG5cdFx0XHRcdFx0Ly8gaWYoKHNraXBQYWdlICsgNCkgPiBzZWxmLnRvdGFsUGFnZSl7XHJcblx0XHRcdFx0XHQvLyBhbGVydCgoc2tpcFBhZ2UgKyA0KSlcclxuXHRcdFx0XHRcdC8vIFx0dmFyIGkgPSBzZWxmLnRvdGFsUGFnZS0xMDtcclxuXHRcdFx0XHRcdC8vIFx0Zm9yKGk7aSA8IHNlbGYudG90YWxQYWdlOyBpKyspe1xyXG5cdFx0XHRcdFx0Ly8gXHRcdHNlbGYudG90YWxTdHJIdG1sICs9ICc8bGk+PGEgaHJlZj1cIiMjI1wiPicrIChpKzEpICsnPC9hPjwvbGk+JzsgLy8g5Yqo5oCB55Sf5oiQ6aG15pWwXHJcblx0XHRcdFx0XHQvLyBcdH1cclxuXHRcdFx0XHRcdC8vIFx0JChzZWxmLnBhZ2VJZCArIFwiPmxpLnByZXYtcGFnZVwiKS5hZnRlcihzZWxmLnRvdGFsU3RySHRtbCk7XHJcblx0XHRcdFx0XHQvL1xyXG5cdFx0XHRcdFx0Ly8gXHQkKHNlbGYucGFnZUlkICsgXCI+bGlcIikuZXEoMTEtKHNlbGYudG90YWxQYWdlIC0gc2tpcFBhZ2UpKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdFx0XHRcdC8vXHJcblx0XHRcdFx0XHQvLyB9XHJcblxyXG5cclxuXHRcdFx0XHQgIHNlbGYucGFnZUNoYW5nZVRhYmxlQ3JlYXRlKClcclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0fSxcclxuXHRcdHBhZ2VUYWJsZUNvbnRlbnQ6ZnVuY3Rpb24oKXtcclxuXHJcblx0XHRcdCQodGhpcy50YWJsZUlkICsgXCIgdHI6bm90KDpmaXJzdC1jaGlsZClcIikucmVtb3ZlKCk7XHJcblx0XHRcdHRoaXMuY3VycmVudFBhZ2UgPSB0aGlzLmN1cnJQYWdlLFxyXG5cdFx0XHR0aGlzLmJvb2tTdHJIdG1sID0gJyc7XHJcblx0XHRcdHRoaXMuc3RhcnRQYWdlID0gKHRoaXMuY3VycmVudFBhZ2UtMSkgKiB0aGlzLnNpemVQYWdlO1xyXG5cdFx0XHR0aGlzLmVuZFBhZ2UgPSB0aGlzLmN1cnJlbnRQYWdlICogdGhpcy5zaXplUGFnZTtcclxuXHRcdFx0dGhpcy5ib29rRGF0YVBhZ2VMZW4gPSB0aGlzLmVuZFBhZ2U7XHJcblxyXG5cdFx0XHRpZih0aGlzLmN1cnJlbnRQYWdlICE9PSAxIHx8IHRoaXMuY3VycmVudFBhZ2UgIT09IHRoaXMudG90YWxQYWdlKXtcclxuXHRcdFx0XHQkKHRoaXMucGFnZUlkICsgXCIgbGlcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKVxyXG5cdFx0XHR9XHJcblx0XHRcdGlmKHRoaXMuY3VycmVudFBhZ2UgPT0gMSl7XHJcblx0XHRcdFx0JCh0aGlzLnBhZ2VJZCArIFwiIC5wcmV2LXBhZ2VcIikuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKVxyXG5cdFx0XHR9XHJcblx0XHRcdGlmKHRoaXMuY3VycmVudFBhZ2UgPT0gdGhpcy50b3RhbFBhZ2Upe1xyXG5cdFx0XHRcdCQodGhpcy5wYWdlSWQgKyBcIiAubmV4dC1wYWdlXCIpLmFkZENsYXNzKFwiZGlzYWJsZWRcIilcclxuXHRcdFx0fVxyXG5cclxuXHRcdCAgdGhpcy5wYWdlQ2hhbmdlVGFibGVDcmVhdGUoKVxyXG5cdFx0fSxcclxuXHRcdHBhZ2VQcmV2T3JOZXh0OmZ1bmN0aW9uKCl7XHJcblx0XHRcdCQodGhpcy50YWJsZUlkICsgXCIgdHI6bm90KDpmaXJzdC1jaGlsZClcIikucmVtb3ZlKCk7XHJcblxyXG5cdFx0XHR0aGlzLmN1cnJlbnRQYWdlID0gdGhpcy5zdGFydEN1cnJlbnQsXHJcblx0XHRcdHRoaXMuYm9va1N0ckh0bWwgPSAnJztcclxuXHRcdFx0dGhpcy5zdGFydFBhZ2UgPSAodGhpcy5jdXJyZW50UGFnZS0xKSAqIHRoaXMuc2l6ZVBhZ2U7XHJcblx0XHRcdHRoaXMuZW5kUGFnZSA9IHRoaXMuY3VycmVudFBhZ2UgKiB0aGlzLnNpemVQYWdlO1xyXG5cdFx0XHR0aGlzLmJvb2tEYXRhUGFnZUxlbiA9IHRoaXMuZW5kUGFnZTtcclxuXHJcblx0XHRcdHRoaXMucGFnZUNoYW5nZVRhYmxlQ3JlYXRlKClcclxuXHRcdH0sXHJcblx0XHRwYWdlQ2hhbmdlVGFibGVDcmVhdGU6ZnVuY3Rpb24oKXtcclxuXHJcblx0XHRcdFx0aWYodGhpcy5ib29rRGF0YUxlbiAhPT0gMCl7XHJcblx0XHRcdFx0XHR2YXIgaSA9IHRoaXMuc3RhcnRQYWdlO1xyXG5cdFx0XHRcdFx0aWYodGhpcy50b3RhbFBhZ2UgPT0gdGhpcy5jdXJyZW50UGFnZSl7ICAvL+W9k+WJjemhteaVsOWSjOmhteaVsOaAu+WSjOebuOWQjFxyXG5cdFx0XHRcdFx0XHRpZih0aGlzLmVuZFBhZ2UgPj0gdGhpcy5ib29rRGF0YUxlbil7XHJcblx0XHRcdFx0XHRcdFx0XHQkKHRoaXMudGFibGVJZCArIFwiIHRyOm5vdCg6Zmlyc3QtY2hpbGQpXCIpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwiaW5kZXhcIil7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicrIChpKzEpICsnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rTmFtZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tWb2x1bWVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rQnV5ZXJcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rQm9ycm93ZXJcIl0gKyAnPC90ZD48dGQ+JyArICB0aGlzLmJvb2tEYXRhW2ldW1wiYnV5VGltZVwiXSArICc8L3RkPjwvdHI+JztcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0aWYodGhpcy5vcHRpb25zLmNob2ljZUNvbnRlbnQgPT0gXCJtb2RpZnlcIil7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicrIChpKzEpICsnPC90ZD48dGQgZGF0YS1pZG51bT1cIicrIHRoaXMuYm9va0RhdGFbaV1bXCJib29rSWRcIl0gKydcIj4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tOYW1lXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va1ZvbHVtZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tCdXllclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tCb3Jyb3dlclwiXSArICc8L3RkPjx0ZD4nICsgIHRoaXMuYm9va0RhdGFbaV1bXCJidXlUaW1lXCJdICsgJzwvdGQ+PHRkPjxidXR0b24gY2xhc3M9XCJidG4gYnRuLWVkaXQyIHRhYmxlLWVkaXRcIiB0eXBlPVwiYnV0dG9uXCI+57yW6L6RPC9idXR0b24+PC90ZD48L3RyPic7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwibW9kaWZ5U3RhZmZcIil7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicgKyAoaSsxKSArICc8L3RkPjx0ZCBkYXRhLWlkbnVtPVwiJysgdGhpcy5ib29rRGF0YVtpXVtcInN0YWZmSWRcIl0gKydcIj4nICsgdGhpcy5ib29rRGF0YVtpXVtcInN0YWZmRGVwYXJ0bWVudFwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcInN0YWZmTmFtZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcInN0YWZmRW1haWxcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZkV4dGVuc2lvblwiXSArICc8L3RkPjx0ZD4nICsgIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZk51bWJlclwiXSArICc8L3RkPjx0ZD48YSBocmVmPVwiIyMjXCIgY2xhc3M9XCJlZGl0LXBlb3BsZS1pbmZvXCI+57yW6L6RPC9hPnw8YSBocmVmPVwiIyMjXCIgY2xhc3M9XCJkZWxldGUtcGVvcGxlLWluZm9cIj7liKDpmaQ8L2E+PC90ZD48L3RyPic7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwiaW5kZXhQYXRlbnRcIil7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicrIChpKzEpICsnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJwYXRlbnRUaXRsZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcInByb3Bvc2VyXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wib3JkZXJOdW1iZXJcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJhcHBsaWNhdGlvbkRhdGVcIl0gKyAnPC90ZD48L3RyPic7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwibW9kaWZ5UGF0ZW50XCIpe1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKGk7aSA8IHRoaXMuYm9va0RhdGFMZW47aSsrKXtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nICsgKGkrMSkgKyAnPC90ZD48dGQgZGF0YS1pZG51bT1cIicrIHRoaXMuYm9va0RhdGFbaV1bXCJwYXRlbnRJZFwiXSArJ1wiPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wicGF0ZW50TmFtZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImZpcnN0SW52ZW50b3JcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzb3J0Q29kZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImFjY2VwdERhdGVcIl0gKyAnPC90ZD48dGQ+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWVkaXQyIHRhYmxlLWVkaXRcIiBkYXRhLXRvZ2dsZT1cIm1vZGFsXCIgZGF0YS10YXJnZXQ9XCIuYnMtZXhhbXBsZS1tb2RhbC1sZ1wiPue8lui+kTwvYnV0dG9uPjwvdGQ+PC90cj4nO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRpZih0aGlzLm9wdGlvbnMuY2hvaWNlQ29udGVudCA9PSBcImluZGV4VGhlc2lzXCIpe1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKGk7aSA8IHRoaXMuYm9va0RhdGFMZW47aSsrKXtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nKyAoaSsxKSArJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wicGFwZXJUaXRsZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcInByb3Bvc2VyXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYXBwbGljYXRpb25EYXRlXCJdICsgJzwvdGQ+PHRkPjxhIGhyZWY9XCInKyB0aGlzLmRvd25sb2FkICsgZW5jb2RlVVJJKHRoaXMuYm9va0RhdGFbaV1bXCJmaWxlTmFtZVwiXSkgKydcIiB0YXJnZXQ9XCJfYmxhbmtcIj7kuIvovb08L2E+IHwgPGEgaHJlZj1cIicrIHRoaXMucHJldmlldyArIGVuY29kZVVSSSh0aGlzLmJvb2tEYXRhW2ldW1wiZmlsZU5hbWVcIl0pICArJ1wiIHRhcmdldD1cIl9ibGFua1wiPumihOiniDwvYT48L3RkPjwvdHI+JztcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0aWYodGhpcy5vcHRpb25zLmNob2ljZUNvbnRlbnQgPT0gXCJtb2RpZnlUaGVzaXNcIil7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicgKyAoaSsxKSArICc8L3RkPjx0ZCBkYXRhLWlkbnVtPVwiJysgdGhpcy5ib29rRGF0YVtpXVtcInBhcGVySWRcIl0gKydcIj4nICsgdGhpcy5ib29rRGF0YVtpXVtcInBhcGVyVGl0bGVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJwcm9wb3NlclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImFwcGxpY2F0aW9uRGF0ZVwiXSArICc8L3RkPjx0ZD48YSBocmVmPVwiJysgdGhpcy5wcmV2aWV3ICsgZW5jb2RlVVJJKHRoaXMuYm9va0RhdGFbaV1bXCJmaWxlTmFtZVwiXSkgKydcIiB0YXJnZXQ9XCJfYmxhbmtcIj7pooTop4g8L2E+PC90ZD48dGQ+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWVkaXQyIHRhYmxlLWVkaXRcIiBkYXRhLXRvZ2dsZT1cIm1vZGFsXCIgZGF0YS10YXJnZXQ9XCIuYnMtZXhhbXBsZS1tb2RhbC1sZ1wiPue8lui+kTwvYnV0dG9uPjwvdGQ+PC90cj4nO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0XHQkKHRoaXMudGFibGVJZCArIFwiIHRyOm5vdCg6Zmlyc3QtY2hpbGQpXCIpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHRpZih0aGlzLm9wdGlvbnMuY2hvaWNlQ29udGVudCA9PSBcImluZGV4XCIpe1xyXG5cdFx0XHRcdFx0XHRcdGZvcihpO2kgPCB0aGlzLmJvb2tEYXRhUGFnZUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nKyAoaSsxKSArJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va05hbWVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rVm9sdW1lXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va0J1eWVyXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va0JvcnJvd2VyXCJdICsgJzwvdGQ+PHRkPicgKyAgdGhpcy5ib29rRGF0YVtpXVtcImJ1eVRpbWVcIl0gKyAnPC90ZD48L3RyPic7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmKHRoaXMub3B0aW9ucy5jaG9pY2VDb250ZW50ID09IFwibW9kaWZ5XCIpe1xyXG5cdFx0XHRcdFx0XHRcdGZvcihpO2kgPCB0aGlzLmJvb2tEYXRhUGFnZUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nKyAoaSsxKSArJzwvdGQ+PHRkIGRhdGEtaWRudW09XCInKyB0aGlzLmJvb2tEYXRhW2ldW1wiYm9va0lkXCJdICsnXCI+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rTmFtZVwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImJvb2tWb2x1bWVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rQnV5ZXJcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJib29rQm9ycm93ZXJcIl0gKyAnPC90ZD48dGQ+JyArICB0aGlzLmJvb2tEYXRhW2ldW1wiYnV5VGltZVwiXSArICc8L3RkPjx0ZD48YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1lZGl0MiB0YWJsZS1lZGl0XCIgdHlwZT1cImJ1dHRvblwiPue8lui+kTwvYnV0dG9uPjwvdGQ+PC90cj4nO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZih0aGlzLm9wdGlvbnMuY2hvaWNlQ29udGVudCA9PSBcIm1vZGlmeVN0YWZmXCIpe1xyXG5cdFx0XHRcdFx0XHRcdGZvcihpO2kgPCB0aGlzLmJvb2tEYXRhUGFnZUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nICsgKGkrMSkgKyAnPC90ZD48dGQgZGF0YS1pZG51bT1cIicrIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZklkXCJdICsnXCI+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZkRlcGFydG1lbnRcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZk5hbWVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJzdGFmZkVtYWlsXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wic3RhZmZFeHRlbnNpb25cIl0gKyAnPC90ZD48dGQ+JyArICB0aGlzLmJvb2tEYXRhW2ldW1wic3RhZmZOdW1iZXJcIl0gKyAnPC90ZD48dGQ+PGEgaHJlZj1cIiMjI1wiIGNsYXNzPVwiZWRpdC1wZW9wbGUtaW5mb1wiPue8lui+kTwvYT58PGEgaHJlZj1cIiMjI1wiIGNsYXNzPVwiZGVsZXRlLXBlb3BsZS1pbmZvXCI+5Yig6ZmkPC9hPjwvdGQ+PC90cj4nO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZih0aGlzLm9wdGlvbnMuY2hvaWNlQ29udGVudCA9PSBcImluZGV4UGF0ZW50XCIpe1xyXG5cdFx0XHRcdFx0XHRcdGZvcihpO2kgPCB0aGlzLmJvb2tEYXRhUGFnZUxlbjtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5ib29rU3RySHRtbCArPSAnPHRyPjx0ZD4nKyAoaSsxKSArJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wicGF0ZW50VGl0bGVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJwcm9wb3NlclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcIm9yZGVyTnVtYmVyXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wiYXBwbGljYXRpb25EYXRlXCJdICsgJzwvdGQ+PC90cj4nO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZih0aGlzLm9wdGlvbnMuY2hvaWNlQ29udGVudCA9PSBcIm1vZGlmeVBhdGVudFwiKXtcclxuXHRcdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YVBhZ2VMZW47aSsrKXtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYm9va1N0ckh0bWwgKz0gJzx0cj48dGQ+JyArIChpKzEpICsgJzwvdGQ+PHRkIGRhdGEtaWRudW09XCInKyB0aGlzLmJvb2tEYXRhW2ldW1wicGF0ZW50SWRcIl0gKydcIj4nICsgdGhpcy5ib29rRGF0YVtpXVtcInBhdGVudE5hbWVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJmaXJzdEludmVudG9yXCJdICsgJzwvdGQ+PHRkPicgKyB0aGlzLmJvb2tEYXRhW2ldW1wic29ydENvZGVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJhY2NlcHREYXRlXCJdICsgJzwvdGQ+PHRkPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1lZGl0MiB0YWJsZS1lZGl0XCIgZGF0YS10b2dnbGU9XCJtb2RhbFwiIGRhdGEtdGFyZ2V0PVwiLmJzLWV4YW1wbGUtbW9kYWwtbGdcIj7nvJbovpE8L2J1dHRvbj48L3RkPjwvdHI+JztcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aWYodGhpcy5vcHRpb25zLmNob2ljZUNvbnRlbnQgPT0gXCJpbmRleFRoZXNpc1wiKXtcclxuXHRcdFx0XHRcdFx0XHRmb3IoaTtpIDwgdGhpcy5ib29rRGF0YVBhZ2VMZW47aSsrKXtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYm9va1N0ckh0bWwgKz0gJzx0cj48dGQ+JysgKGkrMSkgKyc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcInBhcGVyVGl0bGVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJwcm9wb3NlclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImFwcGxpY2F0aW9uRGF0ZVwiXSArICc8L3RkPjx0ZD48YSBocmVmPVwiJysgdGhpcy5kb3dubG9hZCArIGVuY29kZVVSSSh0aGlzLmJvb2tEYXRhW2ldW1wiZmlsZU5hbWVcIl0pICsnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+5LiL6L29PC9hPiB8IDxhIGhyZWY9XCInKyB0aGlzLnByZXZpZXcgKyBlbmNvZGVVUkkodGhpcy5ib29rRGF0YVtpXVtcImZpbGVOYW1lXCJdKSArJ1wiIHRhcmdldD1cIl9ibGFua1wiPumihOiniDwvYT48L3RkPjwvdHI+JztcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aWYodGhpcy5vcHRpb25zLmNob2ljZUNvbnRlbnQgPT0gXCJtb2RpZnlUaGVzaXNcIil7XHJcblx0XHRcdFx0XHRcdFx0Zm9yKGk7aSA8IHRoaXMuYm9va0RhdGFQYWdlTGVuO2krKyl7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmJvb2tTdHJIdG1sICs9ICc8dHI+PHRkPicgKyAoaSsxKSArICc8L3RkPjx0ZCBkYXRhLWlkbnVtPVwiJysgdGhpcy5ib29rRGF0YVtpXVtcInBhcGVySWRcIl0gKydcIj4nICsgdGhpcy5ib29rRGF0YVtpXVtcInBhcGVyVGl0bGVcIl0gKyAnPC90ZD48dGQ+JyArIHRoaXMuYm9va0RhdGFbaV1bXCJwcm9wb3NlclwiXSArICc8L3RkPjx0ZD4nICsgdGhpcy5ib29rRGF0YVtpXVtcImFwcGxpY2F0aW9uRGF0ZVwiXSArICc8L3RkPjx0ZD48YSBocmVmPVwiJysgdGhpcy5wcmV2aWV3ICsgZW5jb2RlVVJJKHRoaXMuYm9va0RhdGFbaV1bXCJmaWxlTmFtZVwiXSkgKydcIiB0YXJnZXQ9XCJfYmxhbmtcIj7pooTop4g8L2E+PC90ZD48dGQ+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWVkaXQyIHRhYmxlLWVkaXRcIiBkYXRhLXRvZ2dsZT1cIm1vZGFsXCIgZGF0YS10YXJnZXQ9XCIuYnMtZXhhbXBsZS1tb2RhbC1sZ1wiPue8lui+kTwvYnV0dG9uPjwvdGQ+PC90cj4nO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dGhpcy4kZWxlbWVudC5hcHBlbmQodGhpcy5ib29rU3RySHRtbCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHJcblxyXG5cdFx0LypcdCAgY29uc29sZS5sb2coaSArXCJwYWdlXCIpXHJcblx0XHRcdCAgY29uc29sZS5sb2codGhpcy50b3RhbFBhZ2UgK1widG90YWxQYWdlXCIpXHJcblx0XHRcdCAgY29uc29sZS5sb2codGhpcy5jdXJyZW50UGFnZSArXCJjdXJyZW50UGFnZVwiKVxyXG5cdFx0XHQgIGNvbnNvbGUubG9nKHRoaXMuYm9va0RhdGEgK1wiYm9va0RhdGFcIilcclxuXHRcdFx0ICBjb25zb2xlLmxvZyh0aGlzLmVuZFBhZ2UgKyBcImVuZFBhZ2VcIilcclxuXHRcdFx0ICAgY29uc29sZS5sb2codGhpcy5ib29rRGF0YUxlbiArXCJib29rRGF0YUxlblwiKVxyXG5cdFx0XHQgIGNvbnNvbGUubG9nKHRoaXMuYm9va0RhdGFQYWdlTGVuICtcImJvb2tEYXRhUGFnZUxlblwiKSovXHJcblxyXG5cclxuXHRcdH1cclxuXHJcblx0fTtcclxuXHQkLmZuLmNyZWF0ZVRhYmxlID0gZnVuY3Rpb24ob3B0aW9ucyl7XHJcblxyXG5cdHZhciBvYmogPSBuZXcgY3JlYXRlVGFibGUodGhpcyxvcHRpb25zKTtcclxuXHJcblx0XHRvYmouaW5pdCgpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH07XHJcblxyXG5cclxuXHJcblxyXG59KShqUXVlcnksd2luZG93LGRvY3VtZW50KTtcclxuIiwiJChmdW5jdGlvbigpe1xuICAkKFwiI2FkZC10aGVzaXMgaW5wdXRcIikudmFsKFwiXCIpO1xuICB2YXIgcGVvcGxlUGFyYW0gPSBsb2NhdGlvbi5zZWFyY2gsXG4gICAgICBwZW9wbGVOYW1lID0gXCJcIjtcblxuICBpZihwZW9wbGVQYXJhbSAhPT0gXCJcIil7XG4gICAgaWYocGVvcGxlUGFyYW0uaW5kZXhPZihcIiZcIikgIT09IC0xKXtcbiAgICAgICBwZW9wbGVOYW1lID0gZGVjb2RlVVJJKHBlb3BsZVBhcmFtLnNsaWNlKChwZW9wbGVQYXJhbS5pbmRleE9mKFwiPVwiKSsxKSwocGVvcGxlUGFyYW0uaW5kZXhPZihcIiZcIikpKSk7XG4gICAgICAgcGVvcGxlSWQgPSBkZWNvZGVVUkkocGVvcGxlUGFyYW0uc2xpY2UoKHBlb3BsZVBhcmFtLmluZGV4T2YoXCJzdGFmZmlkXCIpKzgpLChwZW9wbGVQYXJhbS5sZW5ndGgrMSkpKTtcbiAgICB9ZWxzZXtcbiAgICAgICBwZW9wbGVOYW1lID0gZGVjb2RlVVJJKHBlb3BsZVBhcmFtLnNsaWNlKChwZW9wbGVQYXJhbS5pbmRleE9mKFwiPVwiKSsxKSxwZW9wbGVQYXJhbS5sZW5ndGgpKTtcbiAgICB9XG5cbiAgICAkKFwiI3Blb3BsZS1uYW1lXCIpLnRleHQoXCIvXCIrIGRlY29kZVVSSShwZW9wbGVOYW1lKSlcbiAgICAkKFwiI3Byb3Bvc2VyLW5hbWVcIikudmFsKGRlY29kZVVSSShwZW9wbGVOYW1lKSlcbiAgfWVsc2V7XG4gICAgJChcIiNwZW9wbGUtbmFtZVwiKS50ZXh0KFwiXCIpXG4gIH1cblxuICBjYWxlbmRhcigpO1xuXG4gICQoXCIuYWRkLWxpIGxpIGE6ZXEoMSlcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7ICAgICAgLy90YWLpgInpobkg54K55Ye75YiH5o2i5LqL5Lu2XG4gICAgaWYocGVvcGxlUGFyYW0gIT09IFwiXCIpe1xuICAgICAgdmFyIGdldHBhcmFtcyA9IHt9O1xuICAgICAgICAgIGdldHBhcmFtcy5wYXRlbnROYW1lID0gcGVvcGxlTmFtZTtcbiAgICAgIGdldFBhdGVudChnZXRwYXJhbXMpXG4gICAgfWVsc2V7XG4gICAgICBnZXRQYXRlbnQoKVxuICAgIH1cblxuXG4gIH0pXG5cbiAgJChcIiNhZGQtcGF0ZW50LW1vZHVsZVwiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXsgIC8v5re75Yqg5qih5Z2XXG4gICAgJChcIiNhZGQtcGF0ZW50XCIpLmFwcGVuZCgnPHVsIGNsYXNzPVwiZWRpdC1wZW9wbGUtYmcgZWRpdC1wYXRlbnQgbGlzdC11bnN0eWxlZFwiPjxsaT48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlIGRlbGV0ZS1wYXRlbnQtbW9kdWxlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj7Dlzwvc3Bhbj48L2J1dHRvbj48L2xpPjxsaT48ZGl2IGNsYXNzPVwibGkxXCI+57G75YirPC9kaXY+PGRpdiBjbGFzcz1cImxpMlwiPjxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInBhdGVudFNvcnRcIiBwbGFjZWhvbGRlcj1cIuexu+WIqyjlv4XloaspXCI+PC9kaXY+PC9saT48bGk+PGRpdiBjbGFzcz1cImxpMVwiPumDqOmXqOeuoeeQhuaDheaKpTwvZGl2PjxkaXYgY2xhc3M9XCJsaTJcIj48aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJwYXRlbnREZXBhcnRtZW50XCIgcGxhY2Vob2xkZXI9XCLpg6jpl6jnrqHnkIbmg4XmiqUo5b+F5aGrKVwiPjwvZGl2PjwvbGk+PGxpPjxkaXYgY2xhc3M9XCJsaTFcIj7kvp3poLzlhYPnmbrkv6E8L2Rpdj48ZGl2IGNsYXNzPVwibGkyXCI+PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBuYW1lPVwicGF0ZW50UmVseVwiIHBsYWNlaG9sZGVyPVwi5L6d6aC85YWD55m65L+hKOW/heWhqylcIj48L2Rpdj48L2xpPjxsaT48ZGl2IGNsYXNzPVwibGkxXCI+56CU56m26KO955WqPC9kaXY+PGRpdiBjbGFzcz1cImxpMlwiPjxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInBhdGVudFJlc2VhcmNoXCIgcGxhY2Vob2xkZXI9XCLnoJTnqbboo73nlaoo5b+F5aGrKVwiPjwvZGl2PjwvbGk+PGxpPjxkaXYgY2xhc3M9XCJsaTFcIj7nrKzkuIDlj5HmmI7kuro8L2Rpdj48ZGl2IGNsYXNzPVwibGkyXCI+PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBuYW1lPVwicHJvcG9zZXJcIiBwbGFjZWhvbGRlcj1cIueUs+ivt+S6uijlv4XloaspXCI+PC9kaXY+PC9saT48bGk+PGRpdiBjbGFzcz1cImxpMVwiPuWPkeaYjuWQjeensDwvZGl2PjxkaXYgY2xhc3M9XCJsaTJcIj48aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJ0aGVzaXNUaXRsZVwiIHBsYWNlaG9sZGVyPVwi5Y+R5piO5ZCN56ewKOW/heWhqylcIj48L2Rpdj48L2xpPjxsaT48ZGl2IGNsYXNzPVwibGkxXCI+5Y+X5LuY5pelPC9kaXY+PGRpdiBjbGFzcz1cImxpMlwiPjxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBkYXRldGltZXBpY2tlclwiIHR5cGU9XCJ0ZXh0XCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgbmFtZT1cImFwcGxpY2F0aW9uRGF0ZVwiIHBsYWNlaG9sZGVyPVwi5Y+X5LuY5pelKOW/heWhqylcIj48L2Rpdj48L2xpPjxsaT48ZGl2IGNsYXNzPVwibGkxXCI+5pW055CG55Wq5Y+3PC9kaXY+PGRpdiBjbGFzcz1cImxpMlwiPjxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInRoZXNpc0lkXCIgcGxhY2Vob2xkZXI9XCLmlbTnkIbnlarlj7co5b+F5aGrKVwiPjwvZGl2PjwvbGk+PGxpPjxkaXYgY2xhc3M9XCJsaTFcIj7mkZjopoE8L2Rpdj48ZGl2IGNsYXNzPVwibGkyXCI+PHRleHRhcmVhIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgbmFtZT1cIm5hbWVcIiByb3dzPVwiOFwiIGNvbHM9XCI4MFwiPjwvdGV4dGFyZWE+PC9kaXY+PC9saT48L3VsPicpXG4gICAgY2FsZW5kYXIoKTtcbiAgfSlcbiAgJChcIiNhZGQtcGF0ZW50XCIpLm9uKFwiY2xpY2tcIixcIi5kZWxldGUtcGF0ZW50LW1vZHVsZVwiLGZ1bmN0aW9uKCl7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgfSlcblxuICAkKFwiI3BhdGVudC1zYXZlXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpeyAgLy/mlbDmja7mj5DkuqTkv53lrZhcblxuICAgICAgdmFyIHJ1bGVhZGRQYXRlbnQgPSBydWxlQWRkVmVyaWZ5KCk7ICAvL+ihqOWNlemqjOivgVxuICAgICAgaWYoIXJ1bGVhZGRQYXRlbnQpIHJldHVybiBmYWxzZTtcblxuICAgICAgcG9zdFBhdGVudChydWxlYWRkUGF0ZW50LGFkZFBhdGVudFVybClcblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9KVxuXG4gICQoXCIjcGF0ZW50LW1vZGlmeS1zYXZlXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpeyAgLy/mlbDmja7mj5DkuqTkv53lrZhcbiAgICAgIC8v6KGo5Y2V6aqM6K+BXG4gICAgICB2YXIgcnVsZU1vZGlmeVBhdGVudCA9IHJ1bGVNb2RpZnlWZXJpZnkoKTtcbiAgICAgIGlmKCFydWxlTW9kaWZ5UGF0ZW50KSByZXR1cm4gZmFsc2U7XG4gICAgICBwb3N0TW9kaWZ5UGF0ZW50RnVuKHJ1bGVNb2RpZnlQYXRlbnQscGF0ZW50TW9kaWZ5VXJsLHBlb3BsZU5hbWUpXG4gICAgLy8gIHBvc3RQYXRlbnQoKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9KVxuXG5cbn0pXG5cbmZ1bmN0aW9uIHBvc3RQYXRlbnQoZGF0YSx1cmwpeyAgICAvL+a3u+WKoOiuuuaWh+aPkOS6pFxuICAkLmFqYXgoe1xuICAgICAgIHR5cGU6XCJQT1NUXCIsXG4gICAgICAgdXJsOnVybCxcbiAgICAgICBjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICAgICBkYXRhVHlwZTpcImpzb25cIiwgIC8vIOmihOacn+acjeWKoeWZqOi/lOWbnueahOaVsOaNruexu+Wei+OAguWmguaenOS4jeaMh+Wumu+8jGpRdWVyeSDlsIboh6rliqjmoLnmja4gSFRUUCDljIUgTUlNRSDkv6Hmga/mnaXmmbrog73liKTmlq3vvIzmr5TlpoJYTUwgTUlNReexu+Wei+Wwseiiq+ivhuWIq+S4ulhNTOOAglxuICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICB2YXIgcGF0ZW50RGF0YTtcbiAgICAgICAgIGlmKHR5cGVvZihkYXRhKSA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgICBwYXRlbnREYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgIH1lbHNlIGlmKHR5cGVvZihkYXRhKSA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAgICBwYXRlbnREYXRhID0gZGF0YTtcbiAgICAgICAgIH1cbiAgICAgICAgIGlmKGRhdGEubWVzc2FnZSA9PSBcIua3u+WKoOaIkOWKn1wiKXtcbiAgICAgICAgICAgYWxlcnQoXCLmt7vliqDmiJDlip8hXCIpO1xuICAgICAgICAgICAkKFwiI2FkZC1wYXRlbnQgLmVkaXQtcGVvcGxlLWJnIC5mb3JtLWNvbnRyb2wsI21vZGlmeS1wYXRlbnQgLmZvcm0tY29udHJvbFwiKS52YWwoXCJcIilcbiAgICAgICAgICAgJChcIiNhZGQtcGF0ZW50IC5lZGl0LXBlb3BsZS1iZzpub3QoOmZpcnN0LWNoaWxkKVwiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgIGFsZXJ0KGRhdGEubWVzc2FnZSlcbiAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgfVxuXG4gICAgICAgfSxcbiAgICAgICBlcnJvcjpmdW5jdGlvbihlcnJvcil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBwb3N0TW9kaWZ5UGF0ZW50RnVuKGRhdGEsdXJsLGdldFVybFBhcmFtKXsgLy/kv67mlLnorrrmlofmj5DkuqRcbiAgJC5hamF4KHtcbiAgICAgICB0eXBlOlwiUE9TVFwiLFxuICAgICAgIHVybDp1cmwsXG4gICAgICAgY29udGVudFR5cGU6J2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCcsXG4gICAgICAgZGF0YVR5cGU6XCJqc29uXCIsICAvLyDpooTmnJ/mnI3liqHlmajov5Tlm57nmoTmlbDmja7nsbvlnovjgILlpoLmnpzkuI3mjIflrprvvIxqUXVlcnkg5bCG6Ieq5Yqo5qC55o2uIEhUVFAg5YyFIE1JTUUg5L+h5oGv5p2l5pm66IO95Yik5pat77yM5q+U5aaCWE1MIE1JTUXnsbvlnovlsLHooqvor4bliKvkuLpYTUzjgIJcbiAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuXG4gICAgICAgICB2YXIgcGF0ZW50RGF0YTtcbiAgICAgICAgIGlmKHR5cGVvZihkYXRhKSA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgICBwYXRlbnREYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgIH1lbHNlIGlmKHR5cGVvZihkYXRhKSA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAgICBwYXRlbnREYXRhID0gZGF0YTtcbiAgICAgICAgIH1cblxuICAgICAgICAgaWYocGF0ZW50RGF0YS5jb2RlID09IFwiMFwiKXtcbiAgICAgICAgICAgYWxlcnQocGF0ZW50RGF0YS5tZXNzYWdlKVxuICAgICAgICAgICAkKFwiLm1vZGFsLWhlYWRlciAuY2xvc2VcIikuY2xpY2soKTtcbiAgICAgICAgICAgaWYoZ2V0VXJsUGFyYW0gIT09IFwiXCIpe1xuICAgICAgICAgICAgIHZhciBwb3N0UGFyYW0gPSB7fTtcbiAgICAgICAgICAgICBwb3N0UGFyYW0ucGF0ZW50TmFtZSA9IGdldFVybFBhcmFtO1xuICAgICAgICAgICAgIGdldFBhdGVudChwb3N0UGFyYW0pXG4gICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgIGdldFBhdGVudCgpXG4gICAgICAgICAgIH1cbiAgICAgICAgIH1lbHNle1xuICAgICAgICAgICBhbGVydChwYXRlbnREYXRhLm1lc3NhZ2UpXG4gICAgICAgICB9XG5cbiAgICAgICB9LFxuICAgICAgIGVycm9yOmZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0UGF0ZW50KGRhdGFwYXJhbSl7IC8v6I635Y+W5LiT5Yip5L+h5oGvXG5cbiAgbG9hZGluZygkKFwiI21vZGlmeS1wYXRlbnQtdGFibGVcIikpXG4gICQuYWpheCh7ICAgICAgIC8vZ2V0IOiOt+WPluaVsOaNrlxuICAgICAgIHR5cGU6XCJHRVRcIixcbiAgICAgICB1cmw6cGF0ZW50R2V0QWxsVXJsLFxuICAgICAgIGRhdGE6IGRhdGFwYXJhbSxcbiAgICAgICBjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgJChcIiNtb2RpZnktcGF0ZW50LXRhYmxlIHRyOm5vdCg6Zmlyc3QtY2hpbGQpXCIpLnJlbW92ZSgpO1xuICAgICAgICAgJChcIiNhbnQtc2l0ZS1sb2FkaW5nXCIpLnJlbW92ZSgpO1xuICAgICAgICAgdmFyIHBhdGVudERhdGEscGF0ZW50SHRtbCA9IFwiXCIscGF0ZW50RGF0YUxlbiA9IFwiXCI7XG4gICAgICAgICBpZih0eXBlb2YoZGF0YSkgPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgcGF0ZW50RGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICB9ZWxzZSBpZih0eXBlb2YoZGF0YSkgPT0gXCJvYmplY3RcIil7XG4gICAgICAgICAgICAgcGF0ZW50RGF0YSA9IGRhdGE7XG4gICAgICAgICB9XG5cbiAgICAgICAgICQoXCIjbW9kaWZ5LXBhdGVudC10YWJsZVwiKS5jcmVhdGVUYWJsZSh7dGFibGVEYXRhOnBhdGVudERhdGEsY2hvaWNlQ29udGVudDonbW9kaWZ5UGF0ZW50JyxwYWdlSWQ6XCIjcGFnZVwiLHRvdGFsUGFnZUlkOicjdG90YWwtcGFnZScsdGFibGVJZDonI21vZGlmeS1wYXRlbnQtdGFibGUnLHNlc3Npb25QYWdlOidwYXRlbnRNb2RpZnlQYWdlJyxzZXNzaW9uTG9jYXRpb246J3BhdGVudE1vZGlmeUxvY2F0aW9uJ30pXG5cbiAgICAgICAgIHBhdGVudERhdGEgPSBwYXRlbnREYXRhLnJldmVyc2UoKTtcblxuICAgICAgICAgJChcIiNtb2RpZnktcGF0ZW50LXRhYmxlXCIpLm9mZihcImNsaWNrXCIpLm9uKFwiY2xpY2tcIixcIi50YWJsZS1lZGl0XCIsZnVuY3Rpb24oKXsgIC8v54K55Ye7XCLnvJbovpFcIu+8jOW8ueWHuuahhuS/ruaUueS/oeaBr1xuICAgICAgICAgICAgdmFyICRwYXRlbnRJZCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuY2hpbGRyZW4oKS5lcSgwKS50ZXh0KCktMSxcbiAgICAgICAgICAgICAgICBtb2RpZnlQYXRlbnQgPSBwYXRlbnREYXRhWyRwYXRlbnRJZF07XG5cbiAgICAgICAgICAgICQoXCIjbW9kaWZ5LXBhdGVudCBpbnB1dFwiKS52YWwoXCJcIilcbiAgICAgICAgICAgICQoXCIjcGF0ZW50LWlkXCIpLnZhbChtb2RpZnlQYXRlbnQucGF0ZW50SWQpXG4gICAgICAgICAgICAkKFwiI21vZGlmeS1wYXRlbnQtc29ydFwiKS52YWwobW9kaWZ5UGF0ZW50LnBhdGVudFNvcnQpXG4gICAgICAgICAgICAkKFwiI21vZGlmeS1wYXRlbnQtZGVwYXJ0bWVudFwiKS52YWwobW9kaWZ5UGF0ZW50LmRlcGFydG1lbnRJbmZvcm1hdGlvbilcbiAgICAgICAgICAgICQoXCIjbW9kaWZ5LXBhdGVudC1yZWx5XCIpLnZhbChtb2RpZnlQYXRlbnQucmVxdWVzdFNvdXJjZSlcbiAgICAgICAgICAgICQoXCIjbW9kaWZ5LXBhdGVudC1yZXNlYXJjaFwiKS52YWwobW9kaWZ5UGF0ZW50LnByb2R1Y3ROdW1iZXIpXG4gICAgICAgICAgICAkKFwiI21vZGlmeS1wYXRlbnQtcHJvcG9zZXJcIikudmFsKG1vZGlmeVBhdGVudC5maXJzdEludmVudG9yKVxuICAgICAgICAgICAgJChcIiNtb2RpZnktcGF0ZW50LXRpdGxlXCIpLnZhbChtb2RpZnlQYXRlbnQucGF0ZW50TmFtZSlcblxuICAgICAgICAgICAgJChcIiNtb2RpZnktYXBwbGljYXRpb24tZGF0ZVwiKS52YWwobW9kaWZ5UGF0ZW50LmFjY2VwdERhdGUpXG4gICAgICAgICAgICAkKFwiI21vZGlmeS1wYXRlbnQtaWRcIikudmFsKG1vZGlmeVBhdGVudC5zb3J0Q29kZSlcbiAgICAgICAgICAgICQoXCIjc3VtbWFyeVwiKS52YWwobW9kaWZ5UGF0ZW50LnN1bW1hcnkpXG5cbiAgICAgICAgIH0pXG4gICAgICAgfSxcbiAgICAgICBlcnJvcjpmdW5jdGlvbihlcnJvcil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBydWxlQWRkVmVyaWZ5KCl7ICAvLyDmt7vliqDpqozor4FcbiAgdmFyIHRoZXNpc0FkZCA9IHRydWUsXG4gICAgICBwb3N0UGF0ZW50UGFyYW1zID0gW107XG5cbiAgJChcIiNhZGQtcGF0ZW50IC5lZGl0LXBlb3BsZS1iZ1wiKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXsvL+esrOS4gOWxguW+queOr++8jOacieWHoOS4quaooeWdl1xuXG4gICAgICB2YXIgc2VsZkluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgcG9zdFBhdGVudFBhcmFtc1tzZWxmSW5kZXhdID0ge307XG4gICAgICAkKHRoaXMpLmZpbmQoXCIuZm9ybS1jb250cm9sXCIpLmVhY2goZnVuY3Rpb24oaW5kZXgyKXsgIC8v56ys5LqM5bGC5b6q546v77yM5q+P5Liq5qih5Z2X55qE5pWw5o2u5pyJ5ZOq5LqbXG4gICAgICAgIHZhciAkaW5wdXRWYWwgPSAkKHRoaXMpLnZhbCgpLnJlcGxhY2UoLyheXFxzKyl8KFxccyskKS9nLFwiXCIpO1xuICAgICAgICBpZihpbmRleDIgIT09IDgpe1xuICAgICAgICAgIGlmKCRpbnB1dFZhbCA9PSBcIlwiKXtcbiAgICAgICAgICAgIGFsZXJ0KFwi5YaF5a655LiN5Li656m677yBXCIpXG4gICAgICAgICAgICB0aGVzaXNBZGQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoIXRoZXNpc0FkZCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIHN3aXRjaCAoaW5kZXgyKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcG9zdFBhdGVudFBhcmFtc1tzZWxmSW5kZXhdLnBhdGVudFNvcnQgPSAkaW5wdXRWYWw7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBwb3N0UGF0ZW50UGFyYW1zW3NlbGZJbmRleF0ucGF0ZW50RGVwYXJ0bWVudCA9ICRpbnB1dFZhbDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHBvc3RQYXRlbnRQYXJhbXNbc2VsZkluZGV4XS5wYXRlbnRSZWx5ID0gJGlucHV0VmFsO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcG9zdFBhdGVudFBhcmFtc1tzZWxmSW5kZXhdLnBhdGVudFJlc2VhcmNoID0gJGlucHV0VmFsO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcG9zdFBhdGVudFBhcmFtc1tzZWxmSW5kZXhdLnByb3Bvc2VyID0gJGlucHV0VmFsO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcG9zdFBhdGVudFBhcmFtc1tzZWxmSW5kZXhdLnBhdGVudFRpdGxlID0gJGlucHV0VmFsO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcG9zdFBhdGVudFBhcmFtc1tzZWxmSW5kZXhdLmFwcGxpY2F0aW9uRGF0ZSA9ICRpbnB1dFZhbDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIHBvc3RQYXRlbnRQYXJhbXNbc2VsZkluZGV4XS5vcmRlck51bWJlciA9ICRpbnB1dFZhbDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHBvc3RQYXRlbnRQYXJhbXNbc2VsZkluZGV4XS5zdW1tYXJ5ID0gJGlucHV0VmFsO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGFsZXJ0KFwiZXJyb3JcIilcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgIGlmKCF0aGVzaXNBZGQpIHJldHVybiBmYWxzZTsgIC8v6aqM6K+B5aSx6LSlXG4gIH0pXG4gIGlmKCF0aGVzaXNBZGQpe1xuICAgIHJldHVybiBmYWxzZTtcbiAgfWVsc2V7XG4gICAgcmV0dXJuIHBvc3RQYXRlbnRQYXJhbXM7XG4gIH1cbn1cbmZ1bmN0aW9uIHJ1bGVNb2RpZnlWZXJpZnkoKXsgIC8v5L+u5pS56aqM6K+BXG4gIHZhciB0aGVzaXNBZGQgPSB0cnVlLHBvc3RNb2RpZnlQYXRlbnQgPSB7fTtcblxuICAkKFwiI21vZGlmeS1wYXRlbnQgLmZvcm0tY29udHJvbFwiKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcbiAgICB2YXIgJGlucHV0VmFsID0gJCh0aGlzKS52YWwoKS5yZXBsYWNlKC8oXlxccyspfChcXHMrJCkvZyxcIlwiKVxuICAgIGlmKGluZGV4ICE9PSA5KXtcblxuICAgICAgaWYoJGlucHV0VmFsID09IFwiXCIpe1xuICAgICAgICBhbGVydChcIuWGheWuueS4jeS4uuepuu+8gVwiKVxuICAgICAgICB0aGVzaXNBZGQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYoIXRoZXNpc0FkZCkgcmV0dXJuIGZhbHNlO1xuICAgIHN3aXRjaCAoaW5kZXgpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcG9zdE1vZGlmeVBhdGVudC5wYXRlbnRJZCA9ICRpbnB1dFZhbFxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcG9zdE1vZGlmeVBhdGVudC5wYXRlbnRTb3J0ID0gJGlucHV0VmFsXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBwb3N0TW9kaWZ5UGF0ZW50LnBhdGVudERlcGFydG1lbnQgPSAkaW5wdXRWYWxcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHBvc3RNb2RpZnlQYXRlbnQucGF0ZW50UmVseSA9ICRpbnB1dFZhbFxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgcG9zdE1vZGlmeVBhdGVudC5wYXRlbnRSZXNlYXJjaCA9ICRpbnB1dFZhbFxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTpcbiAgICAgICAgcG9zdE1vZGlmeVBhdGVudC5wcm9wb3NlciA9ICRpbnB1dFZhbFxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNjpcbiAgICAgICAgcG9zdE1vZGlmeVBhdGVudC5wYXRlbnRUaXRsZSA9ICRpbnB1dFZhbFxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNzpcbiAgICAgICAgcG9zdE1vZGlmeVBhdGVudC5hcHBsaWNhdGlvbkRhdGUgPSAkaW5wdXRWYWxcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDg6XG4gICAgICAgIHBvc3RNb2RpZnlQYXRlbnQub3JkZXJOdW1iZXIgPSAkaW5wdXRWYWxcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDk6XG4gICAgICAgIHBvc3RNb2RpZnlQYXRlbnQuc3VtbWFyeSA9ICRpbnB1dFZhbFxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFsZXJ0KFwiZXJyb3JcIilcbiAgICB9XG5cbiAgfSlcbiAgaWYoIXRoZXNpc0FkZCl7XG4gICAgcmV0dXJuIGZhbHNlOyAgLy/pqozor4HlpLHotKVcbiAgfWVsc2V7XG4gICAgcmV0dXJuIHBvc3RNb2RpZnlQYXRlbnQ7XG4gIH1cbn1cbmZ1bmN0aW9uIGNhbGVuZGFyKCl7XG4gICQoJyNhZGQtcGF0ZW50IC5kYXRldGltZXBpY2tlciwjbW9kaWZ5LXBhdGVudCAuZGF0ZXRpbWVwaWNrZXInKS5kYXRldGltZXBpY2tlcih7XG4gICAgZm9ybWF0Oid5eXl5L21tL2RkJyxcbiAgICBhdXRvY2xvc2U6dHJ1ZSwvL+iHquWKqOWFs+mXrVxuICAgIG1pblZpZXc6MiwvL+acgOeyvuWHhueahOaXtumXtOmAieaLqeS4uuaXpeacnzAt5YiGIDEt5pe2IDIt5pelIDMt5pyIXG4gICAgd2Vla1N0YXJ0OjAsXG4gICAgbGFuZ3VhZ2U6J3poLUNOJ1xuICB9KTtcbn1cbmZ1bmN0aW9uIGxvYWRpbmcoJGVsZW0pe1xuICAkZWxlbS5wYXJlbnQoKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJhbnQtc2l0ZS1sb2FkaW5nXCIgaWQ9XCJhbnQtc2l0ZS1sb2FkaW5nXCI+PGRpdiBpZD1cImxvYWRpbmctdGV4dFwiPjxzcGFuIGNsYXNzPVwidW5kZWZpbmVkXCI+TDwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0xXCI+Tzwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0yXCI+QTwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0zXCI+RDwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC01XCI+STwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0wXCI+Tjwvc3Bhbj48c3BhbiBjbGFzcz1cInVuZGVmaW5lZFwiPkc8L3NwYW4+PC9kaXY+PC9kaXY+Jylcbn1cbiIsIiQoZnVuY3Rpb24oKXtcbiAgJChcIiNwYXRlbnQtc2VhcmNoIGlucHV0XCIpLnZhbChcIlwiKTtcblxuICB2YXIgcGVvcGxlUGFyYW0gPSBsb2NhdGlvbi5zZWFyY2gsZ2V0UGFyYW1zID0gXCJcIixwZW9wbGVOYW1lPVwiXCI7XG4gIGlmKHBlb3BsZVBhcmFtICE9PSBcIlwiKXsgIC8v6I635Y+WdXJs5Lyg6YCS55qE5Y+C5pWwXG5cbiAgICBpZihwZW9wbGVQYXJhbS5pbmRleE9mKFwiJlwiKSAhPT0gLTEpe1xuICAgICAgIHBlb3BsZU5hbWUgPSBkZWNvZGVVUkkocGVvcGxlUGFyYW0uc2xpY2UoKHBlb3BsZVBhcmFtLmluZGV4T2YoXCI9XCIpKzEpLChwZW9wbGVQYXJhbS5pbmRleE9mKFwiJlwiKSkpKTsgLy/ojrflj5Z1cmwg55qE5Y+C5pWw5YaF5a65XG4gICAgICAgcGVvcGxlSWQgPSBkZWNvZGVVUkkocGVvcGxlUGFyYW0uc2xpY2UoKHBlb3BsZVBhcmFtLmluZGV4T2YoXCJzdGFmZmlkXCIpKzgpLChwZW9wbGVQYXJhbS5sZW5ndGgrMSkpKTtcbiAgICB9ZWxzZXtcbiAgICAgICBwZW9wbGVOYW1lID0gZGVjb2RlVVJJKHBlb3BsZVBhcmFtLnNsaWNlKChwZW9wbGVQYXJhbS5pbmRleE9mKFwiPVwiKSsxKSxwZW9wbGVQYXJhbS5sZW5ndGgpKTtcbiAgICB9XG5cbiAgICAkKFwiI3NlYXJjaC1uYW1lXCIpLnZhbChwZW9wbGVOYW1lKVxuICAgIGdldFBhcmFtcyA9ICQoXCIjcGF0ZW50LXNlYXJjaFwiKS5zZXJpYWxpemUoKTtcbiAgfWVsc2V7XG4gICAgJChcIiNzZWFyY2gtbmFtZVwiKS52YWwoXCJcIilcbiAgfVxuXG4gICQoJyNzdGFydC10aW1lJykuZGF0ZXRpbWVwaWNrZXIoe1xuICAgICBmb3JtYXQ6J3l5eXkvbW0vZGQnLFxuICAgICBhdXRvY2xvc2U6dHJ1ZSwvL+iHquWKqOWFs+mXrVxuICAgICBlbmREYXRlOm5ldyBEYXRlKCksIC8v5b2T5YmN5pe26Ze05ZCO6Z2i5pel5pyf5LiN5Y+v6YCJXG4gICAgIG1pblZpZXc6MiwvL+acgOeyvuWHhueahOaXtumXtOmAieaLqeS4uuaXpeacnzAt5YiGIDEt5pe2IDIt5pelIDMt5pyIXG4gICAgIHdlZWtTdGFydDowLFxuICAgICBsYW5ndWFnZTonemgtQ04nXG4gICB9KS5vbignY2hhbmdlRGF0ZScsZnVuY3Rpb24oZXYpe1xuICAgICAgdmFyIHN0YXJ0dGltZT0kKFwiI3N0YXJ0LXRpbWVcIikudmFsKCk7XG4gICAgICAkKFwiI2VuZC10aW1lIFwiKS5kYXRldGltZXBpY2tlcignc2V0U3RhcnREYXRlJyxzdGFydHRpbWUpO1xuICAgICAgJChcIiNzdGFydC10aW1lXCIpLmRhdGV0aW1lcGlja2VyKCdoaWRlJyk7XG4gICB9KTtcbiAgJCgnI2VuZC10aW1lJykuZGF0ZXRpbWVwaWNrZXIoe1xuICAgICAgZm9ybWF0Oid5eXl5L21tL2RkJyxcbiAgICAgIGF1dG9jbG9zZTp0cnVlLC8v6Ieq5Yqo5YWz6ZetXG4gICAgICBlbmREYXRlOm5ldyBEYXRlKCksLy/lvZPliY3ml7bpl7TlkI7pnaLml6XmnJ/kuI3lj6/pgIlcbiAgICAgIG1pblZpZXc6MiwvL+acgOeyvuWHhueahOaXtumXtOmAieaLqeS4uuaXpeacnzAt5YiGIDEt5pe2IDIt5pelIDMt5pyIXG4gICAgICB3ZWVrU3RhcnQ6MCxcbiAgICAgIGxhbmd1YWdlOid6aC1DTidcbiAgICB9KS5vbignY2hhbmdlRGF0ZScsZnVuY3Rpb24oZXYpe1xuICAgICAgIHZhciBzdGFydHRpbWU9JChcIiNzdGFydC10aW1lXCIpLnZhbCgpO1xuICAgICAgIHZhciBlbmR0aW1lPSQoXCIjZW5kLXRpbWVcIikudmFsKCk7XG4gICAgICAgJChcIiNzdGFydC10aW1lXCIpLmRhdGV0aW1lcGlja2VyKCdzZXRFbmREYXRlJyxlbmR0aW1lKTtcbiAgICAgICAkKFwiI2VuZC10aW1lXCIpLmRhdGV0aW1lcGlja2VyKCdoaWRlJylcbiAgICB9KTtcbiAgICBnZXRQYXRlbnQoZ2V0UGFyYW1zKTtcbiAgJChcIiNwYXRlbnQtc2VhcmNoLWJ0blwiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtcbiAgICAgIC8vIOaQnOe0ouahhuaXtumXtOiupOivgVxuICAgICAgdmFyIHJlZ1ZhbCA9IC8oXlxccyspfChcXHMrJCkvZztcbiAgICAgIC8vIHZhciBzZWxlY3RTb3J0VmFsID0gJChcIiNzZWxlY3Qtc29ydFwiKS52YWwoKS5yZXBsYWNlKHJlZ1ZhbCxcIlwiKSxcbiAgICAgIC8vICAgICBwYXRlbnRXb3JkVmFsID0gJChcIiNwYXRlbnQtd29yZFwiKS52YWwoKS5yZXBsYWNlKHJlZ1ZhbCxcIlwiKSxcbiAgICAgIC8vICAgICBwYXRlbnROYW1lVmFsID0gJChcIiNzZWFyY2gtbmFtZVwiKS52YWwoKS5yZXBsYWNlKHJlZ1ZhbCxcIlwiKSxcbiAgICAgIC8vICAgICBkZXNpZ25hdGlvbldvcmRWYWwgPSAkKFwiI2Rlc2lnbmF0aW9uLXdvcmRcIikudmFsKCkucmVwbGFjZShyZWdWYWwsXCJcIiksXG4gICAgICB2YXIgc3RhcnRUaW1lVmFsID0gJChcIiNzdGFydC10aW1lXCIpLnZhbCgpLnJlcGxhY2UocmVnVmFsLFwiXCIpLFxuICAgICAgICAgIGVuZFRpbWVWYWwgPSAkKFwiI2VuZC10aW1lXCIpLnZhbCgpLnJlcGxhY2UocmVnVmFsLFwiXCIpLFxuICAgICAgICAgIHRpbWVCb29sZWFuID0gdHJ1ZSxcbiAgICAgICAgICBwYXRlbnREYXRhID0ge307XG4gICAgICBpZihzdGFydFRpbWVWYWwgIT09IFwiXCIgfHwgZW5kVGltZVZhbCAhPT0gXCJcIiApe1xuICAgICAgICBpZihzdGFydFRpbWVWYWwgPT0gXCJcIiB8fCBlbmRUaW1lVmFsID09IFwiXCIgKXtcbiAgICAgICAgICB0aW1lQm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmKCF0aW1lQm9vbGVhbikge1xuICAgICAgICAgIGFsZXJ0KFwi6K+36YCJ5aW96LW35aeL5pe26Ze0XCIpXG4gICAgICAgICAgcmV0dXJuIHRpbWVCb29sZWFuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgcGF0ZW50RGF0YSA9ICQoXCIjcGF0ZW50LXNlYXJjaFwiKS5zZXJpYWxpemUoKTtcblxuICAgICBnZXRQYXRlbnQocGF0ZW50RGF0YSlcbiAgICB9KVxuXG59KVxuZnVuY3Rpb24gZ2V0UGF0ZW50KGRhdGEpeyAvL+iOt+WPluS4k+WIqeS/oeaBr1xuICBsb2FkaW5nKCQoXCIjcGF0ZW50LXRhYmxlXCIpKVxuICAkLmFqYXgoeyAgICAgICAvL2dldCDojrflj5bmlbDmja5cbiAgICAgICB0eXBlOlwiR0VUXCIsXG4gICAgICAgdXJsOnBhdGVudEdldFVybCxcbiAgICAgICBjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICAgICBkYXRhOmRhdGEsXG4gICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcblxuICAgICAgICAgJChcIiNhbnQtc2l0ZS1sb2FkaW5nXCIpLnJlbW92ZSgpXG4gICAgICAgICAkKFwiI3BhdGVudC10YWJsZSB0cjpub3QoOmZpcnN0LWNoaWxkKVwiKS5yZW1vdmUoKTtcbiAgICAgICAgIHZhciBwYXRlbnREYXRhLHBhdGVudEh0bWwgPSBcIlwiLHBhdGVudERhdGFMZW4gPSBcIlwiO1xuICAgICAgICAgaWYodHlwZW9mKGRhdGEpID09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgIHBhdGVudERhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgfWVsc2UgaWYodHlwZW9mKGRhdGEpID09IFwib2JqZWN0XCIpe1xuICAgICAgICAgICAgIHBhdGVudERhdGEgPSBkYXRhO1xuICAgICAgICAgfVxuICAgICAgICAgJChcIiNwYXRlbnQtdGFibGVcIikuY3JlYXRlVGFibGUoe3RhYmxlRGF0YTpwYXRlbnREYXRhLGNob2ljZUNvbnRlbnQ6J2luZGV4UGF0ZW50JyxwYWdlSWQ6XCIjcGFnZVwiLHRvdGFsUGFnZUlkOicjdG90YWwtcGFnZScsc2tpcFBhZ2VJZDpcIiNza2lwLWNsaWNrXCIsdGFibGVJZDonI3BhdGVudC10YWJsZScsc2Vzc2lvblBhZ2U6J3BhdGVudFBhZ2UnLHNlc3Npb25Mb2NhdGlvbjoncGF0ZW50TG9jYXRpb24nfSlcblxuICAgICAgIH0sXG4gICAgICAgZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICB9XG4gIH0pO1xufVxuIiwiIGxvYWRpbmcoJChcIi5iZy1ncmF5XCIpKVxuICAkLmFqYXgoeyAgICAgICAvL+WRmOW3peS/oeaBr+WxleekulxuICAgICAgIHR5cGU6XCJHRVRcIixcbiAgICAgICB1cmw6cGhvdG9HZXRVcmwsXG4gICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcbiAgICAgICAvLyAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgIC8vICAgJChcIiNhbnQtc2l0ZS1sb2FkaW5nXCIpLnJlbW92ZSgpO1xuICAgICAgICAgdmFyIHBob3RvRGF0YSxwaG90b0xlbiA9IFwiXCIsc3RySHRtbCA9IFwiXCIsaG92ZXJDbGFzcyA9IFwiXCI7XG4gICAgICAgICBpZih0eXBlb2YoZGF0YSkgPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgcGhvdG9EYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgIH1lbHNlIGlmKHR5cGVvZihkYXRhKSA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAgICBwaG90b0RhdGEgPSBkYXRhO1xuICAgICAgICAgfVxuXG4gICAgICAgICBwaG90b0xlbiA9IHBob3RvRGF0YS5sZW5ndGhcbiAgICAgICAgIGZvcih2YXIgaT0wO2kgPCBwaG90b0xlbjtpKyspe1xuXG4gICAgICAgICAgIGlmKGklNiA9PSAwKXtcbiAgICAgICAgICAgICBob3ZlckNsYXNzID0gXCJlZi1zbGlkZS1ib3R0b21cIlxuICAgICAgICAgICB9XG4gICAgICAgICAgIGlmKGklNiA9PSAxKXtcbiAgICAgICAgICAgICBob3ZlckNsYXNzID0gXCJlZi16b29tLWluXCJcbiAgICAgICAgICAgfVxuICAgICAgICAgICBpZihpJTYgPT0gMil7XG4gICAgICAgICAgICAgaG92ZXJDbGFzcyA9IFwiZWYtc2xpZGUtcmlnaHRcIlxuICAgICAgICAgICB9XG4gICAgICAgICAgIGlmKGklNiA9PSAzKXtcbiAgICAgICAgICAgICBob3ZlckNsYXNzID0gXCJlZi16b29tLWluXCJcbiAgICAgICAgICAgfVxuICAgICAgICAgICBpZihpJTYgPT0gNCl7XG4gICAgICAgICAgICAgaG92ZXJDbGFzcyA9IFwiZWYtbW92ZS10b3BcIlxuICAgICAgICAgICB9XG4gICAgICAgICAgIGlmKGklNiA9PSA1KXtcbiAgICAgICAgICAgICBob3ZlckNsYXNzID0gXCJlZi1tb3ZlLWJvdHRvbVwiXG4gICAgICAgICAgIH1cblxuICAgICAgICAgICBzdHJIdG1sICs9ICc8ZGl2IGNsYXNzPVwiZ3JpZC1pdGVtXCI+PGRpdiBjbGFzcz1cImdyaWQtaXRlbV9faW5uZXJcIj48ZGl2IGNsYXNzPVwiZ3JpZC1pdGVtX19jb250ZW50LXdyYXBwZXJcIj48ZGl2IGNsYXNzPVwid29ya1wiPjxhIGhyZWY9XCJwaG90b0RldGFpbHMuaHRtbD90aXRsZT0nKyBlbmNvZGVVUkkocGhvdG9EYXRhW2ldW1wiYWN0aXZpdHlUaXRsZVwiXSkgKydcIj48ZGl2IGNsYXNzPVwiaG92ZXJib3ggJysgaG92ZXJDbGFzcyArJyBsaWdodFwiPjxkaXYgY2xhc3M9XCJoYl9mcm9udFwiPjxpbWcgc3JjPVwiJysgcGhvdG9EYXRhW2ldW1wicGhvdG9Mb2NhbFwiXSArJ1wiIGFsdD1cInBob3RvXCI+PC9kaXY+PGRpdiBjbGFzcz1cImhiX2JhY2tcIj48aDIgY2xhc3M9XCJ3b3JrX190aXRsZVwiPicrIHBob3RvRGF0YVtpXVtcImFjdGl2aXR5VGl0bGVcIl0gKyc8L2gyPjxzcGFuIGNsYXNzPVwid29ya19fdGV4dFwiPicrIHBob3RvRGF0YVtpXVtcImRhdGVcIl0gKyc8L3NwYW4+PC9kaXY+PC9kaXY+PC9hPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2Pic7XG5cbiAgICAgICAgIH1cbiAgICAgICAgICQoXCIjcGhvdG9HYWxsZXJ5XCIpLmFwcGVuZChzdHJIdG1sKVxuXG5cbiAgICAgIH0sXG4gICAgICBlcnJvcjpmdW5jdGlvbihlcnJvcil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgfVxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIGxvYWRpbmcoJGVsZW0peyAgLy/liqDovb3lm77moIdcbiAgICAgICRlbGVtLmFwcGVuZCgnPGRpdiBjbGFzcz1cImFudC1zaXRlLWxvYWRpbmdcIiBpZD1cImFudC1zaXRlLWxvYWRpbmdcIj48ZGl2IGlkPVwibG9hZGluZy10ZXh0XCI+PHNwYW4gY2xhc3M9XCJ1bmRlZmluZWRcIj5MPC9zcGFuPjxzcGFuIGNsYXNzPVwieW95by14LTFcIj5PPC9zcGFuPjxzcGFuIGNsYXNzPVwieW95by14LTJcIj5BPC9zcGFuPjxzcGFuIGNsYXNzPVwieW95by14LTNcIj5EPC9zcGFuPjxzcGFuIGNsYXNzPVwieW95by14LTVcIj5JPC9zcGFuPjxzcGFuIGNsYXNzPVwieW95by14LTBcIj5OPC9zcGFuPjxzcGFuIGNsYXNzPVwidW5kZWZpbmVkXCI+Rzwvc3Bhbj48L2Rpdj48L2Rpdj4nKVxuICAgIH1cbiIsIiQoZnVuY3Rpb24oKXtcbiAgdmFyIHBob3RvUGFyYW0gPSBsb2NhdGlvbi5zZWFyY2gsXG4gICAgICBwaG90b05hbWUgPSBcIlwiLFxuICAgICAgcGhvdG9EYXRhID0ge307XG5cbiAgaWYocGhvdG9QYXJhbSAhPT0gXCJcIil7XG4gICAgcHBob3RvTmFtZSA9IGRlY29kZVVSSShwaG90b1BhcmFtLnNsaWNlKChwaG90b1BhcmFtLmluZGV4T2YoXCI9XCIpKzEpLHBob3RvUGFyYW0ubGVuZ3RoKSk7XG4gIH1cbiAgcGhvdG9EYXRhLmFjdGl2aXR5VGl0bGUgPSBwaG90b05hbWU7XG5cbiAgbG9hZGluZygkKFwiI3Bob3RvLWRldGFpbHMtYWpheFwiKSlcbiAgJC5hamF4KHsgICAgICAgLy/lkZjlt6Xkv6Hmga/lsZXnpLpcbiAgICAgICB0eXBlOlwiR0VUXCIsXG4gICAgICAgdXJsOnBob3RvRGV0YWlsc1VybCxcbiAgICAgICBkYXRhOnBob3RvRGF0YSxcbiAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgIC8vICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xuICAgICAgLy8gICAkKFwiI2FudC1zaXRlLWxvYWRpbmdcIikucmVtb3ZlKCk7XG4gICAgICAgICB2YXIgcGhvdG9EYXRhLHBob3RvTGVuID0gXCJcIixzdHJIdG1sID0gXCJcIixob3ZlckNsYXNzID0gXCJcIjtcbiAgICAgICAgIGlmKHR5cGVvZihkYXRhKSA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgICBwaG90b0RhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgfWVsc2UgaWYodHlwZW9mKGRhdGEpID09IFwib2JqZWN0XCIpe1xuICAgICAgICAgICAgIHBob3RvRGF0YSA9IGRhdGE7XG4gICAgICAgICB9XG4gICAgICAgICAkKFwiI3Bob3RvLXRpdGxlXCIpLnRleHQocGhvdG9EYXRhWzBdW1wiYWN0aXZpdHlUaXRsZVwiXSlcbiAgICAgICAgICQoXCIjcGhvdG8tdGltZVwiKS50ZXh0KHBob3RvRGF0YVswXVtcImRhdGVcIl0pXG4gICAgICAgICBwaG90b0xlbiA9IHBob3RvRGF0YS5sZW5ndGhcbiAgICAgICAgIGZvcih2YXIgaT0wO2kgPCBwaG90b0xlbjtpKyspe1xuICAgICAgICAgICBzdHJIdG1sICs9ICc8bGkgY2xhc3M9XCJtYXNvbnJ5LWl0ZW0gZ3JpZFwiPjxpbWcgc3JjPVwiJysgcGhvdG9EYXRhW2ldW1wicGhvdG9Mb2NhbFwiXSArJ1wiIGFsdD1cInBob3RvXCIgLz48L2xpPidcbiAgICAgICAgIH1cbiAgICAgICAgICQoXCIjcGhvdG8tZGV0YWlsc1wiKS5hcHBlbmQoc3RySHRtbClcblxuXG4gICAgICB9LFxuICAgICAgZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgIH1cbiAgICB9KTtcbn0pXG5mdW5jdGlvbiBjYWxlbmRhcigpe1xuICAkKCcjYWRkLXRoZXNpcyAuZGF0ZXRpbWVwaWNrZXIsI3RoZXNpcy1jb250ZW50IC5kYXRldGltZXBpY2tlcicpLmRhdGV0aW1lcGlja2VyKHtcbiAgICBmb3JtYXQ6J3l5eXkvbW0vZGQnLFxuICAgIGF1dG9jbG9zZTp0cnVlLC8v6Ieq5Yqo5YWz6ZetXG4gICAgbWluVmlldzoyLC8v5pyA57K+5YeG55qE5pe26Ze06YCJ5oup5Li65pel5pyfMC3liIYgMS3ml7YgMi3ml6UgMy3mnIhcbiAgICB3ZWVrU3RhcnQ6MCxcbiAgICBsYW5ndWFnZTonemgtQ04nXG4gIH0pO1xufVxuZnVuY3Rpb24gbG9hZGluZygkZWxlbSl7ICAvL+WKoOi9veWbvuagh1xuICAkZWxlbS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJhbnQtc2l0ZS1sb2FkaW5nXCIgaWQ9XCJhbnQtc2l0ZS1sb2FkaW5nXCI+PGRpdiBpZD1cImxvYWRpbmctdGV4dFwiPjxzcGFuIGNsYXNzPVwidW5kZWZpbmVkXCI+TDwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0xXCI+Tzwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0yXCI+QTwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0zXCI+RDwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC01XCI+STwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0wXCI+Tjwvc3Bhbj48c3BhbiBjbGFzcz1cInVuZGVmaW5lZFwiPkc8L3NwYW4+PC9kaXY+PC9kaXY+Jylcbn1cbiIsIiQoZnVuY3Rpb24oKXtcbiAgdmFyIHBob3RvUGFyYW0gPSBsb2NhdGlvbi5zZWFyY2gsXG4gICAgICBwaG90b05hbWUgPSBcIlwiLFxuICAgICAgcGhvdG9EYXRhID0ge307XG5cblxuICBpZihwaG90b1BhcmFtICE9PSBcIlwiKXtcbiAgICBwaG90b05hbWUgPSBkZWNvZGVVUkkocGhvdG9QYXJhbS5zbGljZSgocGhvdG9QYXJhbS5pbmRleE9mKFwiPVwiKSsxKSxwaG90b1BhcmFtLmxlbmd0aCkpO1xuXG4gIH1cbiAgLy8gcGhvdG9QYXJhbSA9IHBob3RvUGFyYW0uc2xpY2UoMSxwaG90b1BhcmFtLmxlbmd0aClcbiAgLy8gdmFyIGFyciA9IHBob3RvUGFyYW0uc3BsaXQoXCImXCIpLG5ld09iaiA9IHt9O1xuICAvLyBmb3IodmFyIGk9MDtpPGFyci5sZW5ndGg7aSsrKXtcbiAgLy8gICB2YXIgYXJyT2JqID0gYXJyW2ldLnNwbGl0KFwiPVwiKTtcbiAgLy8gICBjb25zb2xlLmxvZyhhcnJPYmopXG4gIC8vXG4gIC8vICAgZm9yKHZhciBqPTA7ajxhcnJPYmoubGVuZ3RoO2orKyl7XG4gIC8vICAgICAgIG5ld09ialthcnJPYmpbMF1dID0gYXJyT2JqWzFdXG4gIC8vICAgICAgICAgY29uc29sZS5sb2coYXJyT2JqW2pdKVxuICAvLyAgIH1cbiAgLy8gfVxuICAvLyBjb25zb2xlLmxvZyhuZXdPYmopXG5cbiAgcGhvdG9EYXRhLmFjdGl2aXR5VGl0bGUgPSBwaG90b05hbWU7XG4gIGNvbnNvbGUubG9nKHBob3RvTmFtZSlcbiAgbG9hZGluZygkKFwiI3Bob3RvLWRldGFpbHMtYWpheFwiKSlcbiB2YXIgbW9kaWZ5Rm9ybSA9IG5ldyBGb3JtRGF0YSgkKCcjYWRkLXBob3RvLWZvcm0nKVswXSlcblxuICAkLmFqYXgoe1xuICAgICAgIHR5cGU6XCJQT1NUXCIsXG4gICAgICAgdXJsOm1vZGlmeVBob3RvUG9zdFVybCxcbiAgICAgICBjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICAgICBkYXRhVHlwZTpcImpzb25cIiwgIC8vIOmihOacn+acjeWKoeWZqOi/lOWbnueahOaVsOaNruexu+Wei+OAguWmguaenOS4jeaMh+Wumu+8jGpRdWVyeSDlsIboh6rliqjmoLnmja4gSFRUUCDljIUgTUlNRSDkv6Hmga/mnaXmmbrog73liKTmlq3vvIzmr5TlpoJYTUwgTUlNReexu+Wei+Wwseiiq+ivhuWIq+S4ulhNTOOAglxuICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KG1vZGlmeUZvcm0pLFxuICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICB2YXIgcGF0ZW50RGF0YTtcbiAgICAgICAgIGlmKHR5cGVvZihkYXRhKSA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgICBwYXRlbnREYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgIH1lbHNlIGlmKHR5cGVvZihkYXRhKSA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAgICBwYXRlbnREYXRhID0gZGF0YTtcbiAgICAgICAgIH1cbiAgICAgICAgIGlmKGRhdGEubWVzc2FnZSA9PSBcIua3u+WKoOaIkOWKn1wiKXtcbiAgICAgICAgICAgYWxlcnQoXCLmt7vliqDmiJDlip8hXCIpO1xuICAgICAgICAgICAkKFwiI2FkZC1wYXRlbnQgLmVkaXQtcGVvcGxlLWJnIC5mb3JtLWNvbnRyb2wsI21vZGlmeS1wYXRlbnQgLmZvcm0tY29udHJvbFwiKS52YWwoXCJcIilcbiAgICAgICAgICAgJChcIiNhZGQtcGF0ZW50IC5lZGl0LXBlb3BsZS1iZzpub3QoOmZpcnN0LWNoaWxkKVwiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgIGFsZXJ0KGRhdGEubWVzc2FnZSlcbiAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgfVxuXG4gICAgICAgfSxcbiAgICAgICBlcnJvcjpmdW5jdGlvbihlcnJvcil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgIH1cbiAgfSk7XG4gICQuYWpheCh7ICAgICAgIC8v5ZGY5bel5L+h5oGv5bGV56S6XG4gICAgICAgdHlwZTpcIkdFVFwiLFxuICAgICAgIHVybDpwaG90b0RldGFpbHNVcmwsXG4gICAgICAgZGF0YTpwaG90b0RhdGEsXG4gICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcbiAgICAgICAvLyAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgIC8vICAgJChcIiNhbnQtc2l0ZS1sb2FkaW5nXCIpLnJlbW92ZSgpO1xuICAgICAgICAgdmFyIHBob3RvRGF0YSxwaG90b0xlbiA9IFwiXCIsc3RySHRtbCA9IFwiXCIsaG92ZXJDbGFzcyA9IFwiXCI7XG4gICAgICAgICBpZih0eXBlb2YoZGF0YSkgPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgcGhvdG9EYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgIH1lbHNlIGlmKHR5cGVvZihkYXRhKSA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAgICBwaG90b0RhdGEgPSBkYXRhO1xuICAgICAgICAgfVxuICAgICAgICAgJChcIiNwaG90by10aXRsZVwiKS50ZXh0KHBob3RvRGF0YVswXVtcImFjdGl2aXR5VGl0bGVcIl0pXG4gICAgICAgICAkKFwiI3Bob3RvLXRpbWVcIikudGV4dChwaG90b0RhdGFbMF1bXCJkYXRlXCJdKVxuXG4gICAgICAgICBmb3IodmFyIGk9MDtpIDwgcGhvdG9MZW47aSsrKXtcbiAgICAgICAgICAgc3RySHRtbCArPSAnPGxpPjxpbWcgc3JjPVwiJysgcGhvdG9EYXRhW2ldW1wicGhvdG9Mb2NhbFwiXSArJ1wiIGFsdD1cInBob3RvXCIgZGF0YS1waG90b0lkPVwiJysgIHBob3RvRGF0YVtpXVtcInBob3RvSWRcIl0gKydcIi8+IDxzcGFuIGNsYXNzPVwiZGVsZXRlLXBob3RvXCI+IFggPC9zcGFuPjwvbGk+J1xuICAgICAgICAgfVxuICAgICAgICAgJChcIiNkZWxldGUtbGlcIikuYXBwZW5kKHN0ckh0bWwpXG5cblxuICAgICAgfSxcbiAgICAgIGVycm9yOmZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICB9XG4gICAgfSk7XG4gICAgJChcIiNkZWxldGUtbGlcIikub24oXCJjbGlja1wiLFwiLmRlbGV0ZS1waG90b1wiLGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgcGhvdG9Qb3N0SWQgPSAkKHRoaXMpLnByZXYoKS5hdHRyKFwiZGF0YS1waG90b0lkXCIpLHBob3RvT2JqID0ge307XG4gICAgICBwaG90b09iai5waG90b0lkID0gcGhvdG9Qb3N0SWQ7XG4gICAgICAkLmFqYXgoe1xuICAgICAgICAgICB0eXBlOlwiUE9TVFwiLFxuICAgICAgICAgICB1cmw6bW9kaWZ5UGhvdG9Qb3N0VXJsLFxuICAgICAgICAgICBjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICAgICAgICAgZGF0YVR5cGU6XCJqc29uXCIsICAvLyDpooTmnJ/mnI3liqHlmajov5Tlm57nmoTmlbDmja7nsbvlnovjgILlpoLmnpzkuI3mjIflrprvvIxqUXVlcnkg5bCG6Ieq5Yqo5qC55o2uIEhUVFAg5YyFIE1JTUUg5L+h5oGv5p2l5pm66IO95Yik5pat77yM5q+U5aaCWE1MIE1JTUXnsbvlnovlsLHooqvor4bliKvkuLpYTUzjgIJcbiAgICAgICAgICAgZGF0YTogcGhvdG9PYmosXG4gICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgdmFyIHBhdGVudERhdGE7XG4gICAgICAgICAgICAgaWYodHlwZW9mKGRhdGEpID09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgICAgICBwYXRlbnREYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICB9ZWxzZSBpZih0eXBlb2YoZGF0YSkgPT0gXCJvYmplY3RcIil7XG4gICAgICAgICAgICAgICAgIHBhdGVudERhdGEgPSBkYXRhO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBhbGVydChkYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgfSxcbiAgICAgICAgICAgZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgfSlcblxufSlcblxuZnVuY3Rpb24gbG9hZGluZygkZWxlbSl7ICAvL+WKoOi9veWbvuagh1xuICAkZWxlbS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJhbnQtc2l0ZS1sb2FkaW5nXCIgaWQ9XCJhbnQtc2l0ZS1sb2FkaW5nXCI+PGRpdiBpZD1cImxvYWRpbmctdGV4dFwiPjxzcGFuIGNsYXNzPVwidW5kZWZpbmVkXCI+TDwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0xXCI+Tzwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0yXCI+QTwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0zXCI+RDwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC01XCI+STwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0wXCI+Tjwvc3Bhbj48c3BhbiBjbGFzcz1cInVuZGVmaW5lZFwiPkc8L3NwYW4+PC9kaXY+PC9kaXY+Jylcbn1cbiIsIiQoXCIuYWRkLWxpIGxpIGFcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7ICAgICAgLy90YWLpgInpobkg54K55Ye75YiH5o2i5LqL5Lu2XHJcbiAgdmFyIHRhYnR4dCA9ICQodGhpcykudGV4dCgpO1xyXG4gIGlmKCB0YWJ0eHQgPT0gXCLmt7vliqBcIil7XHJcbiAgICAkKFwiI2FkZC1jb250ZW50XCIpLnJlbW92ZUNsYXNzKFwiZGlzcGxheS1ub25lXCIpO1xyXG4gICAgJChcIiNtb2RpZnktY29udGVudFwiKS5hZGRDbGFzcyhcImRpc3BsYXktbm9uZVwiKTtcclxuICB9ZWxzZSBpZiggdGFidHh0ID09IFwi5L+u5pS5XCIpe1xyXG4gICAgJChcIiNhZGQtY29udGVudFwiKS5hZGRDbGFzcyhcImRpc3BsYXktbm9uZVwiKTtcclxuICAgICQoXCIjbW9kaWZ5LWNvbnRlbnRcIikucmVtb3ZlQ2xhc3MoXCJkaXNwbGF5LW5vbmVcIik7XHJcbiAgfVxyXG4gICQodGhpcykuYWRkQ2xhc3MoXCJ0YWItYWN0aXZlXCIpLnBhcmVudCgpLnNpYmxpbmdzKCkuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcInRhYi1hY3RpdmVcIilcclxufSlcclxuZnVuY3Rpb24gbG9hZGluZygkZWxlbSl7ICAvL+WKoOi9veWbvuagh1xyXG4gICRlbGVtLnBhcmVudCgpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImFudC1zaXRlLWxvYWRpbmdcIiBpZD1cImFudC1zaXRlLWxvYWRpbmdcIj48ZGl2IGlkPVwibG9hZGluZy10ZXh0XCI+PHNwYW4gY2xhc3M9XCJ1bmRlZmluZWRcIj5MPC9zcGFuPjxzcGFuIGNsYXNzPVwieW95by14LTFcIj5PPC9zcGFuPjxzcGFuIGNsYXNzPVwieW95by14LTJcIj5BPC9zcGFuPjxzcGFuIGNsYXNzPVwieW95by14LTNcIj5EPC9zcGFuPjxzcGFuIGNsYXNzPVwieW95by14LTVcIj5JPC9zcGFuPjxzcGFuIGNsYXNzPVwieW95by14LTBcIj5OPC9zcGFuPjxzcGFuIGNsYXNzPVwidW5kZWZpbmVkXCI+Rzwvc3Bhbj48L2Rpdj48L2Rpdj4nKVxyXG59XHJcbiIsIlxuJChmdW5jdGlvbigpe1xuICAgIHN0YWZmR2V0RGF0YShcInN0YWZmLXRhYmxlXCIsc3RhZmZHZXRVcmwpOyAvL+eOsOacieWRmOW3pWdldOS/oeaBr1xuICAgIHN0YWZmR2V0RGF0YShcInZvbHVudGFyeS1kZW1pc3Npb24tdGFibGVcIix2b2x1bnRhcnlEZW1pc3Npb25HZXRVcmwpOy8vIOemu+iBjOWRmOW3pWdldOS/oeaBr1xuXG59KVxuXG5mdW5jdGlvbiBzdGFmZkdldERhdGEoJGVsZW1UYWJsZSx1cmwpe1xuICAkKFwiI1wiKyAkZWxlbVRhYmxlICtcIiB0ciB0ZFwiKS5yZW1vdmUoKTtcbiAgbG9hZGluZygkKFwiI1wiKyAkZWxlbVRhYmxlKSlcbiAgJC5hamF4KHsgICAgICAgLy/lkZjlt6Xkv6Hmga/lsZXnpLpcbiAgICAgICB0eXBlOlwiR0VUXCIsXG4gICAgICAgdXJsOnVybCxcbiAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgIC8vICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xuICAgICAgICAgJChcIiNhbnQtc2l0ZS1sb2FkaW5nXCIpLnJlbW92ZSgpO1xuICAgICAgICAgdmFyIHN0YWZmRGF0YSxcbiAgICAgICAgICAgICBtZXNzYWdlRGF0YT1cIlwiLFxuXHRcdFx0ICAgICAgIHN0YWZmRGF0YUFycj1bXTtcbiAgICAgICAgIGlmKHR5cGVvZihkYXRhKSA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgICBzdGFmZkRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgfWVsc2UgaWYodHlwZW9mKGRhdGEpID09IFwib2JqZWN0XCIpe1xuICAgICAgICAgICAgIHN0YWZmRGF0YSA9IGRhdGE7XG4gICAgICAgICB9XG4gICAgICAgICBtZXNzYWdlRGF0YSA9IHN0YWZmRGF0YS5tZXNzYWdlO1xuXG4gICAgICAgICBzdGFmZkRhdGFBcnIgPSBzdGFmZkRhdGEuZGF0YTtcbiAgICAgICAgICAgLy/lvJXnlKh0YWJsZeaPkuS7tlxuXG4gICAgICAgICB2YXIgc3RhZmZEYXRhTGVuID0gc3RhZmZEYXRhQXJyLmxlbmd0aCxcbiAgICAgICAgICAgICBzdGFmZkh0bWwgPSBcIlwiLHN0YWZmUkRIdG1sID0gXCJcIixzdGFmZlpXSHRtbCA9IFwiXCIsc3RhZmZQVEh0bWwgPSBcIlwiO1xuICAgICAgICAgaWYoc3RhZmZEYXRhTGVuID09IDApe1xuICAgICAgICAgICAgIHN0YWZmSHRtbCArPSAgJzx0cj48dGQgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIGNvbHNwYW49XCI1XCI+5pqC5peg5Lq65ZGY5pWw5o2uLi4uPC90ZD48L3RyPidcbiAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7aSA8IHN0YWZmRGF0YUxlbjtpKyspe1xuICAgICAgICAgICAgICAgaWYoc3RhZmZEYXRhQXJyW2ldLnN0YWZmRGVwYXJ0bWVudCA9PSBcIlJEXCIpe1xuICAgICAgICAgICAgICAgICBzdGFmZlJESHRtbCArPSAgJzx0cj48dGQ+Jysgc3RhZmZEYXRhQXJyW2ldLnN0YWZmRGVwYXJ0bWVudCArICc8L3RkPjx0ZD48YSBocmVmPVwicGVvcGxlRGV0YWlscy5odG1sP3N0YWZmbmFtZT0nKyBlbmNvZGVVUkkoc3RhZmZEYXRhQXJyW2ldLnN0YWZmTmFtZSkgKydcIiB0YXJnZXQ9XCJfYmxhbmtcIj4nKyBzdGFmZkRhdGFBcnJbaV0uc3RhZmZOYW1lICsnPC9hPjwvdGQ+PHRkPicrIHN0YWZmRGF0YUFycltpXS5zdGFmZkVtYWlsICsnPC90ZD48dGQ+Jysgc3RhZmZEYXRhQXJyW2ldLnN0YWZmRXh0ZW5zaW9uICsnPC90ZD48dGQ+Jysgc3RhZmZEYXRhQXJyW2ldLnN0YWZmTnVtYmVyICsnPC90ZD48L3RyPidcbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIGlmKHN0YWZmRGF0YUFycltpXS5zdGFmZkRlcGFydG1lbnQgPT0gXCLmgLvliqFcIil7XG4gICAgICAgICAgICAgICAgIHN0YWZmWldIdG1sICs9ICAnPHRyPjx0ZD4nKyBzdGFmZkRhdGFBcnJbaV0uc3RhZmZEZXBhcnRtZW50ICsgJzwvdGQ+PHRkPjxzcGFuPicrIHN0YWZmRGF0YUFycltpXS5zdGFmZk5hbWUgKyc8L3NwYW4+PC90ZD48dGQ+Jysgc3RhZmZEYXRhQXJyW2ldLnN0YWZmRW1haWwgKyc8L3RkPjx0ZD4nKyBzdGFmZkRhdGFBcnJbaV0uc3RhZmZFeHRlbnNpb24gKyc8L3RkPjx0ZD4nKyBzdGFmZkRhdGFBcnJbaV0uc3RhZmZOdW1iZXIgKyc8L3RkPjwvdHI+J1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgaWYoc3RhZmZEYXRhQXJyW2ldLnN0YWZmRGVwYXJ0bWVudCA9PSBcIlBUXCIpe1xuICAgICAgICAgICAgICAgICBzdGFmZlBUSHRtbCArPSAgJzx0cj48dGQ+Jysgc3RhZmZEYXRhQXJyW2ldLnN0YWZmRGVwYXJ0bWVudCArICc8L3RkPjx0ZD48c3Bhbj4nKyBzdGFmZkRhdGFBcnJbaV0uc3RhZmZOYW1lICsnPC9zcGFuPjwvdGQ+PHRkPicrIHN0YWZmRGF0YUFycltpXS5zdGFmZkVtYWlsICsnPC90ZD48dGQ+Jysgc3RhZmZEYXRhQXJyW2ldLnN0YWZmRXh0ZW5zaW9uICsnPC90ZD48dGQ+Jysgc3RhZmZEYXRhQXJyW2ldLnN0YWZmTnVtYmVyICsnPC90ZD48L3RyPidcbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9XG4gICAgICAgICB9XG4gICAgICAgICBzdGFmZkh0bWwgPSBzdGFmZlJESHRtbCArIHN0YWZmWldIdG1sICsgc3RhZmZQVEh0bWw7XG4gICAgICAgICAkKFwiI1wiKyAkZWxlbVRhYmxlKS5hcHBlbmQoc3RhZmZIdG1sKVxuXG4gICAgICB9LFxuICAgICAgZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgIH1cbiAgICB9KTtcbn1cbiIsIlxuJChmdW5jdGlvbigpe1xudmFyIHBlb3BsZVBhcmFtID0gbG9jYXRpb24uc2VhcmNoLFxuICAgICAgcGVvcGxlTmFtZSA9IFwibnVsbFwiLFxuICAgICAgbW9yZVBhdGVudFVybCA9IFwicGF0ZW50U2VhcmNoLmh0bWxcIiArIGRlY29kZVVSSShlbmNvZGVVUkkocGVvcGxlUGFyYW0pKSxcbiAgICAgIG1vcmVUaGVzaWVVcmwgPSBcInRoZXNpc1NlYXJjaC5odG1sXCIgKyBkZWNvZGVVUkkoZW5jb2RlVVJJKHBlb3BsZVBhcmFtKSk7XG4gIGlmKHBlb3BsZVBhcmFtICE9PSBcIlwiKXtcbiAgICAgIHBlb3BsZU5hbWUgPSBkZWNvZGVVUkkocGVvcGxlUGFyYW0uc2xpY2UoKHBlb3BsZVBhcmFtLmluZGV4T2YoXCI9XCIpKzEpLHBlb3BsZVBhcmFtLmxlbmd0aCkpOyAgLy/ojrflj5Z1cmwg55qE5Y+C5pWw5YaF5a65XG4gICAgICBnZXRTaW5nbGVTdGFmZkRhdGEocGVvcGxlTmFtZSxzaW5nbGVTdGFmZkluZm9VcmwpICAvLyDojrflj5bnroDku4vlkozlt6XkvZznu4/pqoxcblxuICB9XG4gIHN0YWZmRGV0YWlsR2V0RGF0YShcInN0YWZmLXRoZXNpc1wiLFwidGhlc2lzLWxpbmtcIix0aGVzaXNHZXRVcmwsbW9yZVRoZXNpZVVybCxwZW9wbGVOYW1lLFwicGFwZXJUaXRsZVwiKSAgLy/lkZjlt6XkuKrkurrorrrmlodcbiAgc3RhZmZEZXRhaWxHZXREYXRhKFwic3RhZmYtcGF0ZW50XCIsXCJwYXRlbnQtbGlua1wiLHBhdGVudEdldFVybCxtb3JlUGF0ZW50VXJsLHBlb3BsZU5hbWUsXCJwYXRlbnRUaXRsZVwiKSAgIC8v5ZGY5bel5Liq5Lq65LiT5YipXG5cbn0pXG5cbmZ1bmN0aW9uIGdldFNpbmdsZVN0YWZmRGF0YShwZW9wbGVOYW1lLHVybCl7ICAvL+iOt+WPluWRmOW3peeahOeugOS7i+WSjOe7j+WOhiDvvIjnu4/ljobkv6Hmga/lhpnlnKhzdGFmZkRldGFpbHNTdG9yYWdlLmpz5Lit77yJXG5cbiAgICB2YXIgc2luZ2xlU3RhZmZJbmZvID0ge307XG4gICAgc2luZ2xlU3RhZmZJbmZvLnN0YWZmTmFtZSA9IHBlb3BsZU5hbWVcblxuICAgICQuYWpheCh7ICAgICAgIC8v5ZGY5bel5L+h5oGv5bGV56S6XG4gICAgIHR5cGU6XCJHRVRcIixcbiAgICAgdXJsOiB1cmwsXG4gICAgIGRhdGE6c2luZ2xlU3RhZmZJbmZvLFxuICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAvLyAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcbiAgICAvLyAgJChcIiNzdGFmZi1icmllZlwiKS5lbXB0eSgpO1xuICAgICAgICQoXCIjYW50LXNpdGUtbG9hZGluZ1wiKS5yZW1vdmUoKTtcbiAgICAgICB2YXIgc3RhZmZEYXRhLHN0YWZmRGF0YUxlbj1cIlwiLHN0YWZmSHRtbD1cIlwiO1xuICAgICAgIGlmKHR5cGVvZihkYXRhKSA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgc3RhZmZEYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICB9ZWxzZSBpZih0eXBlb2YoZGF0YSkgPT0gXCJvYmplY3RcIil7XG4gICAgICAgICAgIHN0YWZmRGF0YSA9IGRhdGE7XG4gICAgICAgfVxuXG4gICAgICAgaWYoc3RhZmZEYXRhICE9PSBudWxsICYmIHN0YWZmRGF0YSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgIHZhciBzaW5nbGVJbmZvID0gc3RhZmZEYXRhLmRhdGE7XG4gICAgICAgICBpZihzaW5nbGVJbmZvLmxlbmd0aCAhPT0gMCl7XG4gICAgICAgICAgIGlmKHBlb3BsZURldGFpbHNbcGVvcGxlTmFtZV0gPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAkKFwiI3N0YWZmLWJyaWVmXCIpLmFwcGVuZChcIjxkaXY+56m657y6PC9kaXY+XCIpXG4gICAgICAgICAgICAgJChcIiNzdGFmZi1leHBlcmllbmNlXCIpLmFwcGVuZChcIjxkaXY+56m657y6PC9kaXY+XCIpXG4gICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgIHZhciBzdGFmZkV4cGVyaWVuY2UgPSBwZW9wbGVEZXRhaWxzW3Blb3BsZU5hbWVdW1wiZXhwZXJpZW5jZVwiXSwgLy8gc3RhZmYg57uP5Y6GXG4gICAgICAgICAgICAgICAgIHN0YWZmSG9iYnkgPSBwZW9wbGVEZXRhaWxzW3Blb3BsZU5hbWVdW1wiYnJlZkNvbnRlbnRcIl0sIC8vIHN0YWZmIEhvYmJleVxuICAgICAgICAgICAgICAgICBzdGFmZkV4SW1nID0gcGVvcGxlRGV0YWlsc1twZW9wbGVOYW1lXVtcImltZ1wiXSwgLy8gc3RhZmYg5Zu+54mHXG4gICAgICAgICAgICAgICAgIHN0YWZmQ2hpbmVzZU5hbWUgPSAgcGVvcGxlRGV0YWlsc1twZW9wbGVOYW1lXVtcIm5hbWVcIl1bXCJjaGluZXNlTmFtZVwiXSxcbiAgICAgICAgICAgICAgICAgc3RhZmZFbmdsaXNoTmFtZSA9ICBwZW9wbGVEZXRhaWxzW3Blb3BsZU5hbWVdW1wibmFtZVwiXVtcImVuZ2xpc2hOYW1lXCJdLFxuICAgICAgICAgICAgICAgICBzdHJCcmllZkh0bWwgPVwiXCIsXG4gICAgICAgICAgICAgICAgIHN0ckV4cGVyaWVuY2VIdG1sID1cIlwiLFxuICAgICAgICAgICAgICAgICBpbmRleCA9IDE7XG5cbiAgICAgICAgICAgICAkKFwiLmJhbm5lci1pbWdcIikuY3NzKHtcImJhY2tncm91bmRcIjpcInVybChpbWcvXCIrIHN0YWZmRXhJbWcgK1wiLmpwZykgbm8tcmVwZWF0IDUwJSA1MCVcIixcImJhY2tncm91bmQtc2l6ZVwiOlwiY292ZXJcIn0pXG4gICAgICAgICAgICAgJChcIiNjaGluZXNlTmFtZVwiKS50ZXh0KHN0YWZmQ2hpbmVzZU5hbWUpXG4gICAgICAgICAgICAgJChcIiNlbmdsaXNoTmFtZVwiKS50ZXh0KHN0YWZmRW5nbGlzaE5hbWUpXG5cblxuICAgICAgICAgICAgIHN0ckJyaWVmSHRtbCArPSAnPGxpPjxkaXYgY2xhc3M9XCJsaTFcIj7pgq7nrrE8L2Rpdj48ZGl2IGNsYXNzPVwibGkyXCI+OjwvZGl2PjxkaXYgY2xhc3M9XCJsaTNcIj4nKyBzaW5nbGVJbmZvWzBdW1wic3RhZmZFbWFpbFwiXSArJzwvZGl2PjxkaXYgY2xhc3M9XCJjbGVhcmZpeFwiPjwvZGl2PjwvbGk+J1xuICAgICAgICAgICAgIHN0ckJyaWVmSHRtbCArPSAnPGxpPjxkaXYgY2xhc3M9XCJsaTFcIj7liIbmnLo8L2Rpdj48ZGl2IGNsYXNzPVwibGkyXCI+OjwvZGl2PjxkaXYgY2xhc3M9XCJsaTNcIj4nKyBzaW5nbGVJbmZvWzBdW1wic3RhZmZFeHRlbnNpb25cIl0gKyc8L2Rpdj48ZGl2IGNsYXNzPVwiY2xlYXJmaXhcIj48L2Rpdj48L2xpPidcbiAgICAgICAgICAgICBzdHJCcmllZkh0bWwgKz0gJzxsaT48ZGl2IGNsYXNzPVwibGkxXCI+5omL5py6PC9kaXY+PGRpdiBjbGFzcz1cImxpMlwiPjo8L2Rpdj48ZGl2IGNsYXNzPVwibGkzXCI+Jysgc2luZ2xlSW5mb1swXVtcInN0YWZmTnVtYmVyXCJdICsnPC9kaXY+PGRpdiBjbGFzcz1cImNsZWFyZml4XCI+PC9kaXY+PC9saT4nXG4gICAgICAgICAgICAgaWYoc3RhZmZIb2JieSAhPT0gXCLmmoLml6BcIil7XG4gICAgICAgICAgICAgICBzdHJCcmllZkh0bWwgKz0gJzxsaT48ZGl2IGNsYXNzPVwibGkxXCI+5YW06LajPC9kaXY+PGRpdiBjbGFzcz1cImxpMlwiPjo8L2Rpdj48ZGl2IGNsYXNzPVwibGkzXCI+Jysgc3RhZmZIb2JieVtcIuWFtOi2o1wiXSsnPC9kaXY+PGRpdiBjbGFzcz1cImNsZWFyZml4XCI+PC9kaXY+PC9saT4nXG4gICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICBpZihzdGFmZkV4cGVyaWVuY2UgPT0gXCLnqbrnvLpcIil7XG4gICAgICAgICAgICAgICBzdHJFeHBlcmllbmNlSHRtbCArPSBcIjxkaXY+56m657y6PC9kaXY+XCJcbiAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgIGZvcih2YXIga2V5IGluIHN0YWZmRXhwZXJpZW5jZSl7XG4gICAgICAgICAgICAgICAgICAgaWYoaW5kZXggJSAyID09IDApe1xuICAgICAgICAgICAgICAgICAgICAgc3RyRXhwZXJpZW5jZUh0bWwgKz0gJzxkaXYgY2xhc3M9XCJzdGFmZi1leHBlcmllbmNlXCI+PGRpdiBjbGFzcz1cImNvbC1tZC02IGV4cGVyaWVuY2UtbGVmdCB0ZXh0LXJpZ2h0XCI+PGg1PicrIHN0YWZmRXhwZXJpZW5jZVtrZXldICsnPC9oNT48L2Rpdj48ZGl2IGNsYXNzPVwiY29sLW1kLTYgZXhwZXJpZW5jZS1yaWdodFwiPjxoND4nKyBrZXkgKyc8L2g0PjwvZGl2PjwvZGl2PidcbiAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgIHN0ckV4cGVyaWVuY2VIdG1sICs9ICc8ZGl2IGNsYXNzPVwic3RhZmYtZXhwZXJpZW5jZVwiPjxkaXYgY2xhc3M9XCJjb2wtbWQtNiBleHBlcmllbmNlLWxlZnQgdGV4dC1yaWdodFwiPjxoND4nKyBrZXkgKyc8L2g0PjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wtbWQtNiBleHBlcmllbmNlLXJpZ2h0XCI+PGg1PicrIHN0YWZmRXhwZXJpZW5jZVtrZXldICsnPC9oNT48L2Rpdj48L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgJChcIiNzdGFmZi1icmllZlwiKS5hcHBlbmQoc3RyQnJpZWZIdG1sKVxuICAgICAgICAgICAgICQoXCIjc3RhZmYtZXhwZXJpZW5jZVwiKS5hcHBlbmQoc3RyRXhwZXJpZW5jZUh0bWwpXG4gICAgICAgICAgIH1cblxuXG4gICAgICAgICB9XG5cbiAgICAgICB9XG5cbiAgICB9LFxuICAgIGVycm9yOmZ1bmN0aW9uKFhNTEh0dHBSZXF1ZXN0LCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bil7XG4gICAgICBjb25zb2xlLmxvZyhYTUxIdHRwUmVxdWVzdC5zdGF0dXMpXG4gICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gc3RhZmZEZXRhaWxHZXREYXRhKCRlbGVtLCRsaW5rLHVybCxtb3JlVXJsLHN0YWZmTmFtZSxkYXRhUGFyYW0peyAvLyDojrflj5bkuJPliKnmiJbogIXorrrmlodcblxuICB2YXIgc3RhZmZQYXRlbnQgPSB7fTtcblxuICBpZigkZWxlbSA9PSBcInN0YWZmLXBhdGVudFwiKXtcbiAgICBzdGFmZlBhdGVudC5wYXRlbnRTb3J0ID0gXCJcIjtcbiAgICBzdGFmZlBhdGVudC5wYXRlbnRXb3JkID0gXCJcIjtcbiAgICBzdGFmZlBhdGVudC5wYXRlbnROYW1lID0gc3RhZmZOYW1lO1xuICAgIHN0YWZmUGF0ZW50LmRlc2lnbmF0aW9uV29yZCA9IFwiXCI7XG4gICAgc3RhZmZQYXRlbnQuc3RhcnRUaW1lID0gXCJcIjtcbiAgICBzdGFmZlBhdGVudC5lbmRUaW1lID0gXCJcIjtcbiAgfVxuICBpZigkZWxlbSA9PSBcInN0YWZmLXRoZXNpc1wiKXtcbiAgICBzdGFmZlBhdGVudC50aGVzaXNXb3JkID0gXCJcIjtcbiAgICBzdGFmZlBhdGVudC50aGVzaXNOYW1lID0gc3RhZmZOYW1lO1xuICB9XG5cbiAgJChcIiNcIisgJGVsZW0gK1wiIGxpXCIpLnJlbW92ZSgpO1xuICBsb2FkaW5nKCQoXCIjXCIrICRlbGVtKSlcbiAgJC5hamF4KHsgICAgICAgLy/lkZjlt6Xkv6Hmga/lsZXnpLpcbiAgICAgICB0eXBlOlwiR0VUXCIsXG4gICAgICAgdXJsOiB1cmwsXG4gICAgICAgZGF0YTpzdGFmZlBhdGVudCxcbiAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuXG4gICAgICAgLy8gIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgICAkKFwiI2FudC1zaXRlLWxvYWRpbmdcIikucmVtb3ZlKCk7XG4gICAgICAgICB2YXIgc3RhZmZEYXRhLHN0YWZmRGF0YUxlbj1cIlwiLHN0YWZmSHRtbD1cIlwiO1xuICAgICAgICAgaWYodHlwZW9mKGRhdGEpID09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgIHN0YWZmRGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICB9ZWxzZSBpZih0eXBlb2YoZGF0YSkgPT0gXCJvYmplY3RcIil7XG4gICAgICAgICAgICBzdGFmZkRhdGEgPSBkYXRhO1xuICAgICAgICAgfVxuICAgICAgICAgaWYoJGVsZW0gPT0gXCJzdGFmZi10aGVzaXNcIil7XG4gICAgICAgICAgIHN0YWZmRGF0YSA9IHN0YWZmRGF0YS5kYXRhO1xuICAgICAgICAgICBpZihzdGFmZkRhdGEgPT0gbnVsbCApeyAgLy/ml6DmlbDmja5cbiAgICAgICAgICAgICAkKFwiI1wiICsgJGVsZW0pLmFwcGVuZChcIjxkaXY+5pqC5peg55u45YWz5pWw5o2uLi4uPC9kaXY+XCIpXG4gICAgICAgICAgICAgJChcIiNcIisgJGxpbmspLmFkZENsYXNzKFwiZGlzcGxheS1ub25lXCIpXG4gICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFmZkRhdGFMZW4gPSBzdGFmZkRhdGEubGVuZ3RoO1xuICAgICAgICAgfVxuICAgICAgICAgaWYoJGVsZW0gPT0gXCJzdGFmZi1wYXRlbnRcIil7XG4gICAgICAgICAgIHN0YWZmRGF0YUxlbiA9IHN0YWZmRGF0YS5sZW5ndGggO1xuICAgICAgICAgICBpZihzdGFmZkRhdGFMZW4gPT0gMCApeyAgLy/ml6DmlbDmja5cbiAgICAgICAgICAgICAkKFwiI1wiICsgJGVsZW0pLmFwcGVuZChcIjxkaXY+5pqC5peg55u45YWz5pWw5o2uLi4uPC9kaXY+XCIpXG4gICAgICAgICAgICAgJChcIiNcIisgJGxpbmspLmFkZENsYXNzKFwiZGlzcGxheS1ub25lXCIpXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgfVxuICAgICAgICAgfVxuXG4gICAgICAgICBpZihzdGFmZkRhdGFMZW4gPiA1KXtcbiAgICAgICAgICAgZm9yKHZhciBpID0gMDtpIDwgNTtpKyspe1xuXG4gICAgICAgICAgICAgc3RhZmZIdG1sICs9ICc8bGk+Jysgc3RhZmZEYXRhW2ldW2RhdGFQYXJhbV0gKyc8L2xpPic7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgJChcIiNcIiArICRlbGVtKS5hcHBlbmQoc3RhZmZIdG1sKVxuICAgICAgICAgICAkKFwiI1wiKyAkbGluaykucHJvcChcImhyZWZcIixtb3JlVXJsKVxuICAgICAgICAgfVxuICAgICAgICAgaWYoc3RhZmZEYXRhTGVuIDwgNil7XG4gICAgICAgICAgIGZvcih2YXIgaT0wO2k8c3RhZmZEYXRhTGVuO2krKyl7XG5cbiAgICAgICAgICAgICBzdGFmZkh0bWwgKz0gJzxsaT4nKyBzdGFmZkRhdGFbaV1bZGF0YVBhcmFtXSArJzwvbGk+JztcbiAgICAgICAgICAgfVxuICAgICAgICAgICAkKFwiI1wiICsgJGVsZW0pLmFwcGVuZChzdGFmZkh0bWwpXG4gICAgICAgICAgICQoXCIjXCIrICRsaW5rKS5wcm9wKFwiaHJlZlwiLG1vcmVVcmwpXG5cbiAgICAgICAgIH1cblxuICAgICAgfSxcbiAgICAgIGVycm9yOmZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICB9XG4gICAgfSk7XG59XG5mdW5jdGlvbiBsb2FkaW5nKCRlbGVtKXtcblxuICAkZWxlbS5wYXJlbnQoKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJhbnQtc2l0ZS1sb2FkaW5nXCIgaWQ9XCJhbnQtc2l0ZS1sb2FkaW5nXCI+PGRpdiBpZD1cImxvYWRpbmctdGV4dFwiPjxzcGFuIGNsYXNzPVwidW5kZWZpbmVkXCI+TDwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0xXCI+Tzwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0yXCI+QTwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0zXCI+RDwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC01XCI+STwvc3Bhbj48c3BhbiBjbGFzcz1cInlveW8teC0wXCI+Tjwvc3Bhbj48c3BhbiBjbGFzcz1cInVuZGVmaW5lZFwiPkc8L3NwYW4+PC9kaXY+PC9kaXY+Jylcbn1cbiIsIlxuJChmdW5jdGlvbigpe1xuICB2YXIgcGVvcGxlUGFyYW0gPSBsb2NhdGlvbi5zZWFyY2gsXG4gICAgICBwZW9wbGVOYW1lID0gXCJudWxsXCIsXG4gICAgICBtb3JlUGF0ZW50VXJsID0gXCJwYXRlbnRTZWFyY2guaHRtbFwiICsgZGVjb2RlVVJJKHBlb3BsZVBhcmFtKTtcblxuICBpZihwZW9wbGVQYXJhbSAhPT0gXCJcIil7XG5cbiAgICAgIHBlb3BsZU5hbWUgPSBkZWNvZGVVUkkocGVvcGxlUGFyYW0uc2xpY2UoKHBlb3BsZVBhcmFtLmluZGV4T2YoXCI9XCIpKzEpLHBlb3BsZVBhcmFtLmxlbmd0aCkpOyAgLy/ojrflj5Z1cmwg55qE5Y+C5pWw5YaF5a65XG4gICAgICBnZXRTaW5nbGVTdGFmZkRhdGEocGVvcGxlTmFtZSxzaW5nbGVTdGFmZkluZm9VcmwpICAvLyDojrflj5bnroDku4vlkozlt6XkvZznu4/pqoxcblxuICB9XG4gIHN0YWZmRGV0YWlsR2V0RGF0YShcInN0YWZmLXBhdGVudFwiLFwicGF0ZW50LWxpbmtcIixwYXRlbnRHZXRVcmwsbW9yZVBhdGVudFVybCxwZW9wbGVOYW1lKSAgIC8v5ZGY5bel5Liq5Lq65LiT5YipXG5cblxuXG59KVxuXG5mdW5jdGlvbiBnZXRTaW5nbGVTdGFmZkRhdGEocGVvcGxlTmFtZSx1cmwpeyAgLy/ojrflj5blkZjlt6XnmoTnroDku4vlkoznu4/ljoYg77yI57uP5Y6G5L+h5oGv5YaZ5Zyoc3RhZmZEZXRhaWxzU3RvcmFnZS5qc+S4re+8iVxuXG4gICAgdmFyIHNpbmdsZVN0YWZmSW5mbyA9IHt9O1xuICAgIHNpbmdsZVN0YWZmSW5mby5zdGFmZk5hbWUgPSBlbmNvZGVVUkkoZW5jb2RlVVJJKHBlb3BsZU5hbWUpKVxuICAgICQuYWpheCh7ICAgICAgIC8v5ZGY5bel5L+h5oGv5bGV56S6XG4gICAgIHR5cGU6XCJHRVRcIixcbiAgICAgdXJsOiB1cmwsXG4gICAgIGRhdGE6c2luZ2xlU3RhZmZJbmZvLFxuICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAvLyAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcbiAgICAvLyAgJChcIiNzdGFmZi1icmllZlwiKS5lbXB0eSgpO1xuICAgICAgICQoXCIjYW50LXNpdGUtbG9hZGluZ1wiKS5yZW1vdmUoKTtcbiAgICAgICB2YXIgc3RhZmZEYXRhLHN0YWZmRGF0YUxlbj1cIlwiLHN0YWZmSHRtbD1cIlwiO1xuICAgICAgIGlmKHR5cGVvZihkYXRhKSA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgc3RhZmZEYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICB9ZWxzZSBpZih0eXBlb2YoZGF0YSkgPT0gXCJvYmplY3RcIil7XG4gICAgICAgICAgIHN0YWZmRGF0YSA9IGRhdGE7XG4gICAgICAgfVxuXG4gICAgICAgaWYoc3RhZmZEYXRhICE9PSBudWxsICYmIHN0YWZmRGF0YSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgIHZhciBzaW5nbGVJbmZvID0gc3RhZmZEYXRhLmRhdGE7XG4gICAgICAgICBpZihzaW5nbGVJbmZvLmxlbmd0aCAhPT0gMCl7XG4gICAgICAgICAgIGlmKHBlb3BsZURldGFpbHNbcGVvcGxlTmFtZV0gPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAkKFwiI3N0YWZmLWJyaWVmXCIpLmFwcGVuZChcIjxkaXY+56m657y6PC9kaXY+XCIpXG4gICAgICAgICAgICAgJChcIiNzdGFmZi1leHBlcmllbmNlXCIpLmFwcGVuZChcIjxkaXY+56m657y6PC9kaXY+XCIpXG4gICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgIHZhciBzdGFmZkV4cGVyaWVuY2UgPSBwZW9wbGVEZXRhaWxzW3Blb3BsZU5hbWVdW1wiZXhwZXJpZW5jZVwiXSwgLy8gc3RhZmYg57uP5Y6GXG4gICAgICAgICAgICAgICAgIHN0YWZmSG9iYnkgPSBwZW9wbGVEZXRhaWxzW3Blb3BsZU5hbWVdW1wiYnJlZkNvbnRlbnRcIl0sIC8vIHN0YWZmIEhvYmJleVxuICAgICAgICAgICAgICAgICBzdGFmZkV4SW1nID0gcGVvcGxlRGV0YWlsc1twZW9wbGVOYW1lXVtcImltZ1wiXSwgLy8gc3RhZmYg5Zu+54mHXG4gICAgICAgICAgICAgICAgIHN0YWZmQ2hpbmVzZU5hbWUgPSAgcGVvcGxlRGV0YWlsc1twZW9wbGVOYW1lXVtcIm5hbWVcIl1bXCJjaGluZXNlTmFtZVwiXSxcbiAgICAgICAgICAgICAgICAgc3RhZmZFbmdsaXNoTmFtZSA9ICBwZW9wbGVEZXRhaWxzW3Blb3BsZU5hbWVdW1wibmFtZVwiXVtcImVuZ2xpc2hOYW1lXCJdLFxuICAgICAgICAgICAgICAgICBzdHJCcmllZkh0bWwgPVwiXCIsXG4gICAgICAgICAgICAgICAgIHN0ckV4cGVyaWVuY2VIdG1sID1cIlwiLFxuICAgICAgICAgICAgICAgICBpbmRleCA9IDE7XG5cbiAgICAgICAgICAgICAkKFwiLmJhbm5lci1pbWdcIikuY3NzKHtcImJhY2tncm91bmRcIjpcInVybChpbWcvXCIrIHN0YWZmRXhJbWcgK1wiLmpwZykgbm8tcmVwZWF0IDUwJSA1MCVcIixcImJhY2tncm91bmQtc2l6ZVwiOlwiY292ZXJcIn0pXG4gICAgICAgICAgICAgJChcIiNjaGluZXNlTmFtZVwiKS5wcm9wKHtcInNyY1wiOlwiaW1nL1wiKyBzdGFmZkV4SW1nICtcImEucG5nXCIsXCJhbHRcIjpzdGFmZkNoaW5lc2VOYW1lfSlcbiAgICAgICAgICAgICAkKFwiI2VuZ2xpc2hOYW1lXCIpLnByb3Aoe1wic3JjXCI6XCJpbWcvXCIrIHN0YWZmRXhJbWcgK1wiYi5wbmdcIixcImFsdFwiOnN0YWZmRW5nbGlzaE5hbWV9KVxuXG5cbiAgICAgICAgICAgICBzdHJCcmllZkh0bWwgKz0gJzxsaT48ZGl2IGNsYXNzPVwibGkxXCI+6YKu566xPC9kaXY+PGRpdiBjbGFzcz1cImxpMlwiPjo8L2Rpdj48ZGl2IGNsYXNzPVwibGkzXCI+Jysgc2luZ2xlSW5mb1swXVtcInN0YWZmRW1haWxcIl0gKyc8L2Rpdj48ZGl2IGNsYXNzPVwiY2xlYXJmaXhcIj48L2Rpdj48L2xpPidcbiAgICAgICAgICAgICBzdHJCcmllZkh0bWwgKz0gJzxsaT48ZGl2IGNsYXNzPVwibGkxXCI+5YiG5py6PC9kaXY+PGRpdiBjbGFzcz1cImxpMlwiPjo8L2Rpdj48ZGl2IGNsYXNzPVwibGkzXCI+Jysgc2luZ2xlSW5mb1swXVtcInN0YWZmRXh0ZW5zaW9uXCJdICsnPC9kaXY+PGRpdiBjbGFzcz1cImNsZWFyZml4XCI+PC9kaXY+PC9saT4nXG4gICAgICAgICAgICAgc3RyQnJpZWZIdG1sICs9ICc8bGk+PGRpdiBjbGFzcz1cImxpMVwiPuaJi+acujwvZGl2PjxkaXYgY2xhc3M9XCJsaTJcIj46PC9kaXY+PGRpdiBjbGFzcz1cImxpM1wiPicrIHNpbmdsZUluZm9bMF1bXCJzdGFmZk51bWJlclwiXSArJzwvZGl2PjxkaXYgY2xhc3M9XCJjbGVhcmZpeFwiPjwvZGl2PjwvbGk+J1xuICAgICAgICAgICAgIGlmKHN0YWZmSG9iYnkgIT09IFwi5pqC5pegXCIpe1xuICAgICAgICAgICAgICAgc3RyQnJpZWZIdG1sICs9ICc8bGk+PGRpdiBjbGFzcz1cImxpMVwiPuWFtOi2ozwvZGl2PjxkaXYgY2xhc3M9XCJsaTJcIj46PC9kaXY+PGRpdiBjbGFzcz1cImxpM1wiPicrIHN0YWZmSG9iYnlbXCLlhbTotqNcIl0rJzwvZGl2PjxkaXYgY2xhc3M9XCJjbGVhcmZpeFwiPjwvZGl2PjwvbGk+J1xuICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgaWYoc3RhZmZFeHBlcmllbmNlID09IFwi56m657y6XCIpe1xuICAgICAgICAgICAgICAgc3RyRXhwZXJpZW5jZUh0bWwgKz0gXCI8ZGl2Puepuue8ujwvZGl2PlwiXG4gICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICBmb3IodmFyIGtleSBpbiBzdGFmZkV4cGVyaWVuY2Upe1xuICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ICUgMiA9PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgIHN0ckV4cGVyaWVuY2VIdG1sICs9ICc8ZGl2IGNsYXNzPVwic3RhZmYtZXhwZXJpZW5jZVwiPjxkaXYgY2xhc3M9XCJjb2wtbWQtNiBleHBlcmllbmNlLWxlZnQgdGV4dC1yaWdodFwiPjxoNT4nKyBzdGFmZkV4cGVyaWVuY2Vba2V5XSArJzwvaDU+PC9kaXY+PGRpdiBjbGFzcz1cImNvbC1tZC02IGV4cGVyaWVuY2UtcmlnaHRcIj48aDQ+Jysga2V5ICsnPC9oND48L2Rpdj48L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICBzdHJFeHBlcmllbmNlSHRtbCArPSAnPGRpdiBjbGFzcz1cInN0YWZmLWV4cGVyaWVuY2VcIj48ZGl2IGNsYXNzPVwiY29sLW1kLTYgZXhwZXJpZW5jZS1sZWZ0IHRleHQtcmlnaHRcIj48aDQ+Jysga2V5ICsnPC9oND48L2Rpdj48ZGl2IGNsYXNzPVwiY29sLW1kLTYgZXhwZXJpZW5jZS1yaWdodFwiPjxoNT4nKyBzdGFmZkV4cGVyaWVuY2Vba2V5XSArJzwvaDU+PC9kaXY+PC9kaXY+J1xuICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICQoXCIjc3RhZmYtYnJpZWZcIikuYXBwZW5kKHN0ckJyaWVmSHRtbClcbiAgICAgICAgICAgICAkKFwiI3N0YWZmLWV4cGVyaWVuY2VcIikuYXBwZW5kKHN0ckV4cGVyaWVuY2VIdG1sKVxuICAgICAgICAgICB9XG5cblxuICAgICAgICAgfVxuXG4gICAgICAgfVxuXG4gICAgfSxcbiAgICBlcnJvcjpmdW5jdGlvbihYTUxIdHRwUmVxdWVzdCwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pe1xuICAgICAgY29uc29sZS5sb2coWE1MSHR0cFJlcXVlc3Quc3RhdHVzKVxuICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHN0YWZmRGV0YWlsR2V0RGF0YSgkZWxlbSwkbGluayx1cmwsbW9yZVVybCxzdGFmZk5hbWUpeyAvLyDojrflj5bkuJPliKnmiJbogIXorrrmlodcblxuICB2YXIgc3RhZmZQYXRlbnQgPSB7fTtcbiAgICAgIHN0YWZmUGF0ZW50LnBhdGVudFNvcnQgPSBcIlwiO1xuICAgICAgc3RhZmZQYXRlbnQucGF0ZW50V29yZCA9IFwiXCI7XG4gICAgICBzdGFmZlBhdGVudC5wYXRlbnROYW1lID0gc3RhZmZOYW1lO1xuICAgICAgc3RhZmZQYXRlbnQuZGVzaWduYXRpb25Xb3JkID0gXCJcIjtcbiAgICAgIHN0YWZmUGF0ZW50LnN0YXJ0VGltZSA9IFwiXCI7XG4gICAgICBzdGFmZlBhdGVudC5lbmRUaW1lID0gXCJcIjtcblxuXG4gICQoXCIjXCIrICRlbGVtICtcIiBsaVwiKS5yZW1vdmUoKTtcbiAgbG9hZGluZygkKFwiI1wiKyAkZWxlbSkpXG4gICQuYWpheCh7ICAgICAgIC8v5ZGY5bel5L+h5oGv5bGV56S6XG4gICAgICAgdHlwZTpcIkdFVFwiLFxuICAgICAgIHVybDogdXJsLFxuICAgICAgIGRhdGE6c3RhZmZQYXRlbnQsXG4gICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcbiAgICAgICAvLyAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgICQoXCIjYW50LXNpdGUtbG9hZGluZ1wiKS5yZW1vdmUoKTtcbiAgICAgICAgIHZhciBzdGFmZkRhdGEsc3RhZmZEYXRhTGVuPVwiXCIsc3RhZmZIdG1sPVwiXCI7XG4gICAgICAgICBpZih0eXBlb2YoZGF0YSkgPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgc3RhZmZEYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgIH1lbHNlIGlmKHR5cGVvZihkYXRhKSA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAgICBzdGFmZkRhdGEgPSBkYXRhO1xuICAgICAgICAgfVxuXG4gICAgICAgICBzdGFmZkRhdGFMZW4gPSBzdGFmZkRhdGEubGVuZ3RoO1xuICAgICAgICAgaWYoc3RhZmZEYXRhTGVuID09IDApe1xuICAgICAgICAgICAkKFwiI1wiICsgJGVsZW0pLmFwcGVuZChcIjxkaXY+5pqC5peg55u45YWz5pWw5o2uLi4uPC9kaXY+XCIpXG4gICAgICAgICAgICQoXCIjXCIrICRsaW5rKS5hZGRDbGFzcyhcImRpc3BsYXktbm9uZVwiKVxuICAgICAgICAgfVxuICAgICAgICAgaWYoc3RhZmZEYXRhTGVuID4gNSl7XG4gICAgICAgICAgIGZvcih2YXIgaSA9IDA7aSA8IDU7aSsrKXtcblxuICAgICAgICAgICAgIHN0YWZmSHRtbCArPSAnPGxpPicrIHN0YWZmRGF0YVtpXS5wYXRlbnRUaXRsZSArJzwvbGk+JztcbiAgICAgICAgICAgfVxuICAgICAgICAgICAkKFwiI1wiICsgJGVsZW0pLmFwcGVuZChzdGFmZkh0bWwpXG4gICAgICAgICAgICQoXCIjXCIrICRsaW5rKS5wcm9wKFwiaHJlZlwiLG1vcmVVcmwpXG4gICAgICAgICB9XG4gICAgICAgICBpZihzdGFmZkRhdGFMZW4gPCA2KXtcbiAgICAgICAgICAgZm9yKHZhciBpPTA7aTxzdGFmZkRhdGFMZW47aSsrKXtcbiAgICAgICAgICAgICBzdGFmZkh0bWwgKz0gJzxsaT4nKyBzdGFmZkRhdGFbaV0ucGF0ZW50VGl0bGUgKyc8L2xpPic7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgJChcIiNcIiArICRlbGVtKS5hcHBlbmQoc3RhZmZIdG1sKVxuICAgICAgICAgICAkKFwiI1wiKyAkbGluaykucHJvcChcImhyZWZcIixtb3JlVXJsKVxuXG4gICAgICAgICB9XG5cbiAgICAgIH0sXG4gICAgICBlcnJvcjpmdW5jdGlvbihlcnJvcil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gbG9hZGluZygkZWxlbSl7XG5cbiAgJGVsZW0ucGFyZW50KCkuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYW50LXNpdGUtbG9hZGluZ1wiIGlkPVwiYW50LXNpdGUtbG9hZGluZ1wiPjxkaXYgaWQ9XCJsb2FkaW5nLXRleHRcIj48c3BhbiBjbGFzcz1cInVuZGVmaW5lZFwiPkw8L3NwYW4+PHNwYW4gY2xhc3M9XCJ5b3lvLXgtMVwiPk88L3NwYW4+PHNwYW4gY2xhc3M9XCJ5b3lvLXgtMlwiPkE8L3NwYW4+PHNwYW4gY2xhc3M9XCJ5b3lvLXgtM1wiPkQ8L3NwYW4+PHNwYW4gY2xhc3M9XCJ5b3lvLXgtNVwiPkk8L3NwYW4+PHNwYW4gY2xhc3M9XCJ5b3lvLXgtMFwiPk48L3NwYW4+PHNwYW4gY2xhc3M9XCJ1bmRlZmluZWRcIj5HPC9zcGFuPjwvZGl2PjwvZGl2PicpXG59XG4iLCJcbmNvbnN0IHBlb3BsZURldGFpbHMgPSB7XCLnmq7lhrDplItcIjp7XCJuYW1lXCI6e1wiY2hpbmVzZU5hbWVcIjpcIuearuWGsOmUi1wiLFwiZW5nbGlzaE5hbWVcIjpcIndpbnRlciBQaVwifSxcImltZ1wiOlwicGlcIixcImJyZWZDb250ZW50XCI6e1wi5YW06LajXCI6XCJoYWRvb3DvvIxudXRjaOetieW8gOa6kOmhueebru+8jOe+veavm+eQg1wifSxcImV4cGVyaWVuY2VcIjp7XCIyMDA0LzktMjAwNy8zXCI6XCLljY7kuK3np5HmioDlpKflrabmr5XkuJpcIixcIjIwMDcvNC0yMDEwLzVcIjpcIuWEkuixueaJi+acuuaQnOe0ouW8leaTjlwiLFwiMjAxMC81LeeOsOWcqFwiOlwi5a+M5aOr6YCa56CU56m25byA5Y+R5Lit5b+D5pyJ6ZmQ5YWs5Y+46IuP5bee5YiG5YWs5Y+4XCJ9fSxcIuWRqOaBqeetllwiOntcIm5hbWVcIjp7XCJjaGluZXNlTmFtZVwiOlwi5ZGo5oGp562WXCIsXCJlbmdsaXNoTmFtZVwiOlwiRW5jZSBaaG91XCJ9LFwiaW1nXCI6XCJ6aG91XCIsXCJicmVmQ29udGVudFwiOntcIuWFtOi2o1wiOlwi5a6e5Zyo5aSq5aSa77yM5L2G5peg5LiA57K+6YCaXCJ9LFwiZXhwZXJpZW5jZVwiOntcIjIwMDQvOS0yMDA4LzZcIjpcIuWugeazouWkp+WtpiDorqHnrpfmnLrnp5HlrabkuI7mioDmnK9cIixcIjIwMDgtMjAxMVwiOlwiIOiLj+W3nuWkp+WtpiDlm77lg4/lpITnkIbkuI7mqKHlvI/or4bliKtcIn19LFwi5byg5rKI5paMXCI6e1wibmFtZVwiOntcImNoaW5lc2VOYW1lXCI6XCLlvKDmsojmloxcIixcImVuZ2xpc2hOYW1lXCI6XCJTaGVuYmluIFpoYW5nXCJ9LFwiaW1nXCI6XCJ6aGFuZ1wiLFwiYnJlZkNvbnRlbnRcIjpcIuaaguaXoFwiLFwiZXhwZXJpZW5jZVwiOntcIjIwMDQtMjAwOFwiOlwi5rWZ5rGf5bel5Lia5aSn5a2mIOi9r+S7tuW3peeoi1wiLFwiMjAwOC0yMDExXCI6XCIg6IuP5bee5aSn5a2mIOaZuuiDveWMluS/oeaBr+WkhOeQhlwifX0sXCLljY7mnb5cIjp7XCJuYW1lXCI6e1wiY2hpbmVzZU5hbWVcIjpcIuWNjuadvlwiLFwiZW5nbGlzaE5hbWVcIjpcIlNvbmcgSHVhXCJ9LFwiaW1nXCI6XCJodWFcIixcImJyZWZDb250ZW50XCI6XCLmmoLml6BcIixcImV4cGVyaWVuY2VcIjp7XCIyMDA1LTIwMDlcIjpcIuiLj+W3nuWkp+WtpiDova/ku7blt6XnqItcIixcIjIwMDktMjAxMlwiOlwi6IuP5bee5aSn5a2mIOiuoeeul+acuuenkeWtpuS4juW6lOeUqC3kv6Hmga/mo4DntKIgXCJ9fSxcIuWtmeaYiueri1wiOntcIm5hbWVcIjp7XCJjaGluZXNlTmFtZVwiOlwi5a2Z5piK56uLXCIsXCJlbmdsaXNoTmFtZVwiOlwiSGFvbGkgU3VuXCJ9LFwiaW1nXCI6XCJzdW5cIixcImJyZWZDb250ZW50XCI6XCLmmoLml6BcIixcImV4cGVyaWVuY2VcIjpcIuepuue8ulwifX1cbiIsIiQoZnVuY3Rpb24oKXtcbiAgICQoXCIjYWRkLXRoZXNpcyBpbnB1dFwiKS52YWwoXCJcIik7XG5cbiAgIHZhciBwZW9wbGVQYXJhbSA9IGxvY2F0aW9uLnNlYXJjaCxwZW9wbGVOYW1lID0gXCJcIjtcbiAgIGlmKHBlb3BsZVBhcmFtICE9PSBcIlwiKXtcbiAgICAgaWYocGVvcGxlUGFyYW0uaW5kZXhPZihcIiZcIikgIT09IC0xKXtcbiAgICAgICAgcGVvcGxlTmFtZSA9IGRlY29kZVVSSShwZW9wbGVQYXJhbS5zbGljZSgocGVvcGxlUGFyYW0uaW5kZXhPZihcIj1cIikrMSksKHBlb3BsZVBhcmFtLmluZGV4T2YoXCImXCIpKSkpO1xuICAgICAgICBwZW9wbGVJZCA9IGRlY29kZVVSSShwZW9wbGVQYXJhbS5zbGljZSgocGVvcGxlUGFyYW0uaW5kZXhPZihcInN0YWZmaWRcIikrOCksKHBlb3BsZVBhcmFtLmxlbmd0aCsxKSkpO1xuICAgICB9ZWxzZXtcbiAgICAgICAgcGVvcGxlTmFtZSA9IGRlY29kZVVSSShwZW9wbGVQYXJhbS5zbGljZSgocGVvcGxlUGFyYW0uaW5kZXhPZihcIj1cIikrMSkscGVvcGxlUGFyYW0ubGVuZ3RoKSk7XG4gICAgIH1cblxuICAgICAkKFwiI3Blb3BsZS1uYW1lXCIpLnRleHQoXCIvXCIrIGRlY29kZVVSSShwZW9wbGVOYW1lKSlcbiAgICAgJChcIiNwcm9wb3Nlci1uYW1lXCIpLnZhbChkZWNvZGVVUkkocGVvcGxlTmFtZSkpXG4gICB9ZWxzZXtcbiAgICAgJChcIiNwZW9wbGUtbmFtZVwiKS50ZXh0KFwiXCIpXG4gICB9XG5cbiAgIC8vIGlmKHBlb3BsZVBhcmFtICE9PSBcIlwiKXtcbiAgIC8vXG4gICAvLyAgICBwZW9wbGVOYW1lID0gZGVjb2RlVVJJKHBlb3BsZVBhcmFtLnNsaWNlKChwZW9wbGVQYXJhbS5pbmRleE9mKFwiPVwiKSsxKSwocGVvcGxlUGFyYW0uaW5kZXhPZihcIiZcIikpKSk7XG4gICAvLyAgICQoXCIjcGVvcGxlLW5hbWVcIikudGV4dChcIi9cIisgZGVjb2RlVVJJKHBlb3BsZU5hbWUpKVxuICAgLy8gfWVsc2V7XG4gICAvLyAgICQoXCIjcGVvcGxlLW5hbWVcIikudGV4dChcIlwiKVxuICAgLy8gfVxuICBjYWxlbmRhcigpO1xuXG4gICQoXCIuYWRkLWxpIGxpIGFcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7ICAgICAgLy90YWLpgInpobkg54K55Ye75YiH5o2i5LqL5Lu2XG4gICAgdmFyIHRhYnR4dCA9ICQodGhpcykudGV4dCgpO1xuICAgIGlmKCB0YWJ0eHQgPT0gXCLmt7vliqBcIil7XG4gICAgICAkKFwiI2FkZC1jb250ZW50XCIpLnJlbW92ZUNsYXNzKFwiZGlzcGxheS1ub25lXCIpO1xuICAgICAgJChcIiNtb2RpZnktY29udGVudFwiKS5hZGRDbGFzcyhcImRpc3BsYXktbm9uZVwiKTtcbiAgICB9ZWxzZSBpZiggdGFidHh0ID09IFwi5L+u5pS5XCIpe1xuICAgICAgdmFyIGdldHBhcmFtcyA9IHt9O1xuICAgICAgICAgIGdldHBhcmFtcy50aGVzaXNOYW1lID0gcGVvcGxlTmFtZTtcblxuICAgICAgJChcIiNhZGQtY29udGVudFwiKS5hZGRDbGFzcyhcImRpc3BsYXktbm9uZVwiKTtcbiAgICAgICQoXCIjbW9kaWZ5LWNvbnRlbnRcIikucmVtb3ZlQ2xhc3MoXCJkaXNwbGF5LW5vbmVcIik7XG4gICAgICBnZXRUaGVzaXNEYXRhKHRoZXNpc0dldFVybCxnZXRwYXJhbXMpXG4gICAgfVxuICAgICQodGhpcykuYWRkQ2xhc3MoXCJ0YWItYWN0aXZlXCIpLnBhcmVudCgpLnNpYmxpbmdzKCkuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcInRhYi1hY3RpdmVcIilcbiAgfSlcblxuXG4gICQoXCIjZmlsZVR4dFwiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXsvL+a3u+WKoC3mlofku7bkuIrkvKDmjqfku7ZcbiAgICAkKFwiI2ZpbGVVcGxvYWRcIikuY2xpY2soKTtcbiAgfSlcbiAgJChcIiNmaWxlVXBsb2FkXCIpLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtcbiAgICB2YXIgJHRoaXNWYWwgPSAkKHRoaXMpLnZhbCgpO1xuICAgICQoXCIjZmlsZVR4dFwiKS52YWwoJHRoaXNWYWwuc2xpY2UoJHRoaXNWYWwubGFzdEluZGV4T2YoJ1xcXFwnKSsxLCR0aGlzVmFsLmxlbmd0aCkpXG4gICAgJChcIiNmaWxlLXVwbG9hZGVkLCNmaWxlLXVwbG9hZGVkLW5hbWUsI2ZpbGUtdXBsb2FkZWQtZGlyXCIpLnZhbChcIlwiKVxuICB9KVxuXG4gICQoXCIjdGhlc2lzLWNvbnRlbnRcIikub24oXCJjbGlja1wiLFwiI2ZpbGVNb2RpZnlUeHRcIixmdW5jdGlvbigpeyAgLy/kv67mlLkt5paH5Lu25LiK5Lyg5o6n5Lu2XG4gICAgJChcIiNmaWxlTW9kaWZ5VXBsb2FkXCIpLmNsaWNrKCk7XG4gIH0pXG4gICQoXCIjZmlsZU1vZGlmeVVwbG9hZFwiKS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7XG4gICAgdmFyICR0aGlzVmFsID0gJCh0aGlzKS52YWwoKTtcbiAgICAkKFwiI2ZpbGVNb2RpZnlUeHRcIikudmFsKCR0aGlzVmFsLnNsaWNlKCR0aGlzVmFsLmxhc3RJbmRleE9mKCdcXFxcJykrMSwkdGhpc1ZhbC5sZW5ndGgpKVxuICAgICQoXCIjZmlsZS1tb2RpZnktdXBsb2FkZWQsI2ZpbGUtbW9kaWZ5LXVwbG9hZGVkLW5hbWUsI2ZpbGUtbW9kaWZ5LXVwbG9hZGVkLWRpclwiKS52YWwoXCJcIilcbiAgfSlcblxuXG4gICQoXCIjZmlsZS11cGxvYWQtYnRuLCNmaWxlLW1vZGlmeS11cGxvYWQtYnRuXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpeyAgIC8v5LiK5Lyg5paH5Lu2XG5cbiAgICB2YXIgZmlsZVZhbCA9IFwiXCIsc2VsZiA9IHRoaXM7XG4gICAgaWYoJCh0aGlzKS5hdHRyKFwiaWRcIikgPT0gXCJmaWxlLXVwbG9hZC1idG5cIil7XG4gICAgICBmaWxlVmFsID0gJChcIiNmaWxlVXBsb2FkXCIpLnZhbCgpXG4gICAgfVxuICAgIGlmKCQodGhpcykuYXR0cihcImlkXCIpID09IFwiZmlsZS1tb2RpZnktdXBsb2FkLWJ0blwiKXtcbiAgICAgIGZpbGVWYWwgPSAkKFwiI2ZpbGVNb2RpZnlVcGxvYWRcIikudmFsKClcbiAgICB9XG4gICAgdmFyIGZpbGVTdWZmaXggPSBmaWxlVmFsLnNsaWNlKGZpbGVWYWwubGFzdEluZGV4T2YoXCIuXCIpKzEsZmlsZVZhbC5sZW5ndGgpLFxuICAgICAgICBmaWxlUHJvZ3Jlc3NIdG1sID0gXCJcIjtcbiAgICAgICAgZmlsZVN1ZmZpeCA9IGZpbGVTdWZmaXgudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmKGZpbGVWYWwgPT0gXCJcIil7XG4gICAgICAgIGFsZXJ0KFwi5YWI6YCJ5paH5Lu277yBXCIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYoZmlsZVN1ZmZpeCAhPT0gXCJwZGZcIil7XG4gICAgICAgIGFsZXJ0KFwi6K+36YCJ5oupUERG5paH5Lu2XCIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZmlsZVByb2dyZXNzSHRtbCA9ICc8ZGl2IGNsYXNzPVwiZmlsZS1wcm9ncmVzc1wiPjxkaXYgY2xhc3M9XCJwcm9ncmVzc1wiPjxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXIgcHJvZ3Jlc3MtYmFyLXN0cmlwZWQgYWN0aXZlXCIgcm9sZT1cInByb2dyZXNzYmFyXCIgYXJpYS12YWx1ZW5vdz1cIjQ1XCIgYXJpYS12YWx1ZW1pbj1cIjBcIiBhcmlhLXZhbHVlbWF4PVwiMTAwXCIgc3R5bGU9XCJ3aWR0aDogMTAwJVwiPjxzcGFuIGNsYXNzPVwic3Itb25seVwiPjwvc3Bhbj48L2Rpdj48L2Rpdj48L2Rpdj4nXG4gICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5hcHBlbmQoZmlsZVByb2dyZXNzSHRtbClcblxuICAgIHZhciBwb3N0RmlsZVZhbHVlO1xuICAgIGlmKCQodGhpcykuYXR0cihcImlkXCIpID09IFwiZmlsZS11cGxvYWQtYnRuXCIpe1xuICAgICAgcG9zdEZpbGVWYWx1ZSA9IG5ldyBGb3JtRGF0YSgkKCcjdGhlc2lzLWZpbGUtdXBsb2FkJylbMF0pXG4gICAgfVxuICAgIGlmKCQodGhpcykuYXR0cihcImlkXCIpID09IFwiZmlsZS1tb2RpZnktdXBsb2FkLWJ0blwiKXtcbiAgICAgIHBvc3RGaWxlVmFsdWUgPSBuZXcgRm9ybURhdGEoJCgnI3RoZXNpcy1tb2RpZnktZmlsZS11cGxvYWQnKVswXSlcbiAgICB9XG5cbiAgICAvL+ihqOWNleWGheWuuVxuICAgICQuYWpheCh7ICAgICAgIC8vcG9zdCDmj5DkuqTmlbDmja5cbiAgICAgICAgICB1cmw6IHVwbG9hZFRoZXNpc0ZpbGUsXG4gICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgICAgICBkYXRhOiBwb3N0RmlsZVZhbHVlLFxuICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcbiAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsXG4gICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICQoXCIuZmlsZS1wcm9ncmVzc1wiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHZhciB0aGVzaXNGaWxlRGF0YSA9IGRhdGE7XG4gICAgICAgICAgICBpZih0eXBlb2YoZGF0YSkgPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgICAgdGhlc2lzRmlsZURhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgfWVsc2UgaWYodHlwZW9mKGRhdGEpID09IFwib2JqZWN0XCIpe1xuICAgICAgICAgICAgICAgIHRoZXNpc0ZpbGVEYXRhID0gZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCQoc2VsZikuYXR0cihcImlkXCIpID09IFwiZmlsZS11cGxvYWQtYnRuXCIpe1xuICAgICAgICAgICAgICAkKFwiI2ZpbGUtdXBsb2FkZWRcIikudmFsKHRoZXNpc0ZpbGVEYXRhLmlkKVxuICAgICAgICAgICAgICAkKFwiI2ZpbGUtdXBsb2FkZWQtbmFtZVwiKS52YWwodGhlc2lzRmlsZURhdGEuZmlsZU5hbWUpXG4gICAgICAgICAgICAgICQoXCIjZmlsZS11cGxvYWRlZC1kaXJcIikudmFsKHRoZXNpc0ZpbGVEYXRhLmZpbGVEb3dubG9hZFVyaSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCQoc2VsZikuYXR0cihcImlkXCIpID09IFwiZmlsZS1tb2RpZnktdXBsb2FkLWJ0blwiKXtcbiAgICAgICAgICAgICAgYWxlcnQoXCJmZFwiKVxuICAgICAgICAgICAgICAkKFwiI2ZpbGUtbW9kaWZ5LXVwbG9hZGVkXCIpLnZhbCh0aGVzaXNGaWxlRGF0YS5pZClcbiAgICAgICAgICAgICAgJChcIiNmaWxlLW1vZGlmeS11cGxvYWRlZC1uYW1lXCIpLnZhbCh0aGVzaXNGaWxlRGF0YS5maWxlTmFtZSlcbiAgICAgICAgICAgICAgJChcIiNmaWxlLW1vZGlmeS11cGxvYWRlZC1kaXJcIikudmFsKHRoZXNpc0ZpbGVEYXRhLmZpbGVEb3dubG9hZFVyaSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFsZXJ0KFwi5paH5Lu25LiK5Lyg5oiQ5YqfXCIpXG4gICAgICAgICB9LFxuICAgICAgICAgZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgICAgfVxuICAgIH0pO1xuICB9KVxuICAkKFwiI3RoZXNpcy1zYXZlXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpeyAgLy/mj5DkuqTmt7vliqDorrrmlofmlbDmja5cbiAgICAgIC8v6KGo5Y2V6aqM6K+BXG5cbiAgICAgIHZhciBydWxlUmVzdWx0ID0gdmVyaWZ5UnVsZXMoJ2FkZC10aGVzaXMnLFwiM1wiKVxuICAgICAgaWYoIXJ1bGVSZXN1bHQpIHJldHVybiBmYWxzZTtcbiAgICAgIHZhciBwb3N0QWRkVmFsdWUgPSBuZXcgRm9ybURhdGEoJCgnI2FkZC10aGVzaXMtZm9ybScpWzBdKVxuXG5cbiAgICAgIC8v6KGo5Y2V5YaF5a65XG4gICAgICAkLmFqYXgoeyAgICAgICAvL3Bvc3Qg5o+Q5Lqk5pWw5o2uXG4gICAgICAgICAgICB1cmw6IHRoZXNpc0FkZFBvc3RVcmwsXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgICAgICBkYXRhOiBwb3N0QWRkVmFsdWUsXG4gICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsXG4gICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICB2YXIgdGhlc2lzUG9zdERhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICBpZih0eXBlb2YoZGF0YSkgPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgICAgICB0aGVzaXNQb3N0RGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgIH1lbHNlIGlmKHR5cGVvZihkYXRhKSA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAgICAgICAgIHRoZXNpc1Bvc3REYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZih0aGVzaXNQb3N0RGF0YS5jb2RlID09IDApe1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwi5re75Yqg5oiQ5YqfXCIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgJChcIiNhZGQtdGhlc2lzIGlucHV0XCIpLnZhbChcIlwiKVxuXG4gICAgICAgICAgIH0sXG4gICAgICAgICAgIGVycm9yOmZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIH0pXG4gICQoXCIjdGhlc2lzLW1vZGlmeS1zYXZlXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpeyAgLy/kv53lrZjorrrmlofkv67mlLnmlbDmja5cbiAgICAgICAgLy/ooajljZXpqozor4FcblxuICAgICAgIHZhciBydWxlUmVzdWx0ID0gdmVyaWZ5UnVsZXMoJ3RoZXNpcy1jb250ZW50JyxcIjRcIilcbiAgICAgICBpZighcnVsZVJlc3VsdCkgcmV0dXJuIGZhbHNlO1xuICAgICAgIHZhciBwb3N0TW9kaWZ5VmFsdWUgPSBuZXcgRm9ybURhdGEoJCgnI21vZGlmeS10aGVzaXMtZm9ybScpWzBdKSAgLy/ooajljZXlhoXlrrlcblxuICAgICAgICAkLmFqYXgoeyAgICAgICAgLy9wb3N0IOaPkOS6pOaVsOaNrlxuICAgICAgICAgICAgICB1cmw6IHRoZXNpc1Bvc3RNb2RpZnlVcmwsXG4gICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICAgICAgICBkYXRhOiBwb3N0TW9kaWZ5VmFsdWUsXG4gICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29udGVudFR5cGU6IGZhbHNlLFxuICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciB0aGVzaXNNb2RpZnlEYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YoZGF0YSkgPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgICAgICAgIHRoZXNpc01vZGlmeURhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1lbHNlIGlmKHR5cGVvZihkYXRhKSA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAgICAgICAgICAgdGhlc2lzTW9kaWZ5RGF0YSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHRoZXNpc01vZGlmeURhdGEuY29kZSA9IFwiMFwiKXtcbiAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi5L+u5pS55oiQ5YqfXCIpXG4gICAgICAgICAgICAgICAgICAkKFwiLmNsb3NlXCIpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAkKFwiI2VkaXQtdGhlc2lzLXRhYmxlXCIpLmNyZWF0ZVRhYmxlKHt0YWJsZURhdGE6dGhlc2lzTW9kaWZ5RGF0YS5kYXRhLGNob2ljZUNvbnRlbnQ6J21vZGlmeVRoZXNpcycscGFnZUlkOlwiI3BhZ2VcIix0b3RhbFBhZ2VJZDonI3RvdGFsLXBhZ2UnLHNraXBQYWdlSWQ6XCIjc2tpcC1jbGlja1wiLHRhYmxlSWQ6JyNlZGl0LXRoZXNpcy10YWJsZScsc2Vzc2lvblBhZ2U6J3RoZXNpc01vZGlmeVBhZ2UnLHNlc3Npb25Mb2NhdGlvbjondGhlc2lzTW9kaWZ5TG9jYXRpb24nLHByZXZpZXdVcmw6cHJldmlld0ZpbGVVcmwsZG93bmxvYWRVcmw6ZG93bmxvYWRGaWxlVXJsfSlcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi5pyJ5byC5bi4XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBlcnJvcjpmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnN0YXR1cylcbiAgICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pXG59KVxuZnVuY3Rpb24gY2FsZW5kYXIoKXtcbiAgJCgnI2FkZC10aGVzaXMgLmRhdGV0aW1lcGlja2VyLCN0aGVzaXMtY29udGVudCAuZGF0ZXRpbWVwaWNrZXIsI2VkaXQtdGhlc2lzLXRhYmxlIC5kYXRldGltZXBpY2tlcicpLmRhdGV0aW1lcGlja2VyKHtcbiAgICBmb3JtYXQ6J3l5eXkvbW0vZGQnLFxuICAgIGF1dG9jbG9zZTp0cnVlLC8v6Ieq5Yqo5YWz6ZetXG4gICAgbWluVmlldzoyLC8v5pyA57K+5YeG55qE5pe26Ze06YCJ5oup5Li65pel5pyfMC3liIYgMS3ml7YgMi3ml6UgMy3mnIhcbiAgICB3ZWVrU3RhcnQ6MCxcbiAgICBsYW5ndWFnZTonemgtQ04nXG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0VGhlc2lzRGF0YSh1cmwsZGF0YSl7XG5cbiAgbG9hZGluZygkKFwiI2VkaXQtdGhlc2lzLXRhYmxlXCIpKVxuXG4gICQuYWpheCh7ICAgICAgIC8vZ2V0IOiOt+WPluaVsOaNrlxuICAgICAgIHR5cGU6XCJHRVRcIixcbiAgICAgICB1cmw6dXJsLFxuICAgICAgIGNvbnRlbnRUeXBlOidhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnLFxuICAgICAgIGRhdGE6ZGF0YSxcbiAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgJChcIiNhbnQtc2l0ZS1sb2FkaW5nXCIpLnJlbW92ZSgpO1xuICAgICAgICAgdmFyIHRoZXNpc0dldERhdGEgPSBkYXRhO1xuICAgICAgICAgaWYodHlwZW9mKGRhdGEpID09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgIHRoZXNpc0dldERhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgfWVsc2UgaWYodHlwZW9mKGRhdGEpID09IFwib2JqZWN0XCIpe1xuICAgICAgICAgICAgIHRoZXNpc0dldERhdGEgPSBkYXRhO1xuICAgICAgICAgfVxuXG4gICAgICAgICBpZih0aGVzaXNHZXREYXRhLmNvZGUgPT0gXCIwXCIpe1xuICAgICAgICAgICB2YXIgdGhlc2lzRGF0YSA9IHRoZXNpc0dldERhdGEuZGF0YTtcbiAgICAgICAgICAgJChcIiNlZGl0LXRoZXNpcy10YWJsZVwiKS5jcmVhdGVUYWJsZSh7dGFibGVEYXRhOnRoZXNpc0RhdGEsY2hvaWNlQ29udGVudDonbW9kaWZ5VGhlc2lzJyxwYWdlSWQ6XCIjcGFnZVwiLHRvdGFsUGFnZUlkOicjdG90YWwtcGFnZScsc2tpcFBhZ2VJZDpcIiNza2lwLWNsaWNrXCIsdGFibGVJZDonI2VkaXQtdGhlc2lzLXRhYmxlJyxzZXNzaW9uUGFnZTondGhlc2lzTW9kaWZ5UGFnZScsc2Vzc2lvbkxvY2F0aW9uOid0aGVzaXNNb2RpZnlMb2NhdGlvbicscHJldmlld1VybDpwcmV2aWV3RmlsZVVybCxkb3dubG9hZFVybDpkb3dubG9hZEZpbGVVcmx9KVxuXG4gICAgICAgICAgICQoXCIjZWRpdC10aGVzaXMtdGFibGVcIikub2ZmKFwiY2xpY2tcIikub24oXCJjbGlja1wiLFwiLnRhYmxlLWVkaXRcIixmdW5jdGlvbigpeyAgICAgICAgLy/nvJbovpEgIOeCueWHu+S6i+S7tlxuICAgICAgICAgICAgICQoXCIjdGhlc2lzLWNvbnRlbnQgaW5wdXRcIikudmFsKFwiXCIpIC8v5riF6Zmk5omA5pyJaW5wdXTlgLxcbiAgICAgICAgICAgICB0aGVzaXNEYXRhLnJldmVyc2UoKVxuICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICR0ZFR4dCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuY2hpbGRyZW4oXCJ0ZFwiKS5lcSgwKS50ZXh0KCktMTtcblxuICAgICAgICAgICAgICQoXCIjdGhlc2lzLWNvbnRlbnQgaW5wdXRcIikuZXEoMCkudmFsKHRoZXNpc0RhdGFbJHRkVHh0XS5wYXBlcklkKVxuICAgICAgICAgICAgICQoXCIjdGhlc2lzLWNvbnRlbnQgaW5wdXRcIikuZXEoMSkudmFsKHRoZXNpc0RhdGFbJHRkVHh0XS5wYXBlclRpdGxlKVxuICAgICAgICAgICAgICQoXCIjdGhlc2lzLWNvbnRlbnQgaW5wdXRcIikuZXEoMikudmFsKHRoZXNpc0RhdGFbJHRkVHh0XS5wcm9wb3NlcilcbiAgICAgICAgICAgICAkKFwiI3RoZXNpcy1jb250ZW50IGlucHV0XCIpLmVxKDMpLnZhbCh0aGVzaXNEYXRhWyR0ZFR4dF0uYXBwbGljYXRpb25EYXRlKVxuICAgICAgICAgICAgICQoXCIjdGhlc2lzLWNvbnRlbnQgaW5wdXRcIikuZXEoNCkudmFsKHRoZXNpc0RhdGFbJHRkVHh0XS5maWxlTmFtZSlcbiAgICAgICAgICAgICAkKFwiI3RoZXNpcy1jb250ZW50IGlucHV0XCIpLmVxKDUpLnZhbCh0aGVzaXNEYXRhWyR0ZFR4dF0uZmlsZUlkKVxuICAgICAgICAgICAgICQoXCIjdGhlc2lzLWNvbnRlbnQgaW5wdXRcIikuZXEoNikudmFsKHRoZXNpc0RhdGFbJHRkVHh0XS5maWxlTmFtZSlcbiAgICAgICAgICAgICAkKFwiI3RoZXNpcy1jb250ZW50IGlucHV0XCIpLmVxKDcpLnZhbCh0aGVzaXNEYXRhWyR0ZFR4dF0uZmlsZURvd25sb2FkVXJpKVxuICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoZXNpc0RhdGFbJHRkVHh0XS5maWxlSWQpXG4gICAgICAgICAgICAgLy8gJChcIiN0aGVzaXMtY29udGVudCAuZm9ybS1jb250cm9sXCIpLmVxKDQpLnZhbCgkdGRUeHQuZXEoNCkudGV4dCgpKVxuICAgICAgICAgICAgIC8vICQoXCIjdGhlc2lzLWNvbnRlbnQgLmZvcm0tY29udHJvbFwiKS5lcSg1KS52YWwoJHRkVHh0LmVxKDQpLnRleHQoKSlcbiAgICAgICAgICAgfSlcblxuICAgICAgICAgfWVsc2UgaWYodGhlc2lzR2V0RGF0YS5jb2RlID09IFwiOTAwMDAwMVwiKXtcblxuICAgICAgICAgICAgJChcImVkaXQtdGhlc2lzLXRhYmxlIHRyOm5vdCg6Zmlyc3QtY2hpbGQpXCIpLnJlbW92ZSgpXG4gICAgICAgICAgICAkKFwiI2VkaXQtdGhlc2lzLXRhYmxlXCIpLmNyZWF0ZVRhYmxlKHt0YWJsZURhdGE6dGhlc2lzRGF0YSxjaG9pY2VDb250ZW50Oidtb2RpZnlUaGVzaXMnLHBhZ2VJZDpcIiNwYWdlXCIsdG90YWxQYWdlSWQ6JyN0b3RhbC1wYWdlJyxza2lwUGFnZUlkOlwiI3NraXAtY2xpY2tcIix0YWJsZUlkOicjZWRpdC10aGVzaXMtdGFibGUnLHNlc3Npb25QYWdlOid0aGVzaXNNb2RpZnlQYWdlJyxzZXNzaW9uTG9jYXRpb246J3RoZXNpc01vZGlmeUxvY2F0aW9uJyxwcmV2aWV3VXJsOnByZXZpZXdGaWxlVXJsLGRvd25sb2FkVXJsOmRvd25sb2FkRmlsZVVybH0pXG5cbiAgICAgICAgIH1lbHNle1xuICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOacieW8guW4uCFcIilcbiAgICAgICAgIH1cbiAgICAgICB9LFxuICAgICAgIGVycm9yOmZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gdmVyaWZ5UnVsZXMoaW5wdXRDb250ZW50SWQsY2hhbmdlSW5kZXgpeyAgLy/ooajljZXpqozor4FcbiAgdmFyIHRoZXNpc0FkZCA9IHRydWUsXG4gICAgICBjaGFuZ2VJbmRleFBhcmFtID0gTnVtYmVyKGNoYW5nZUluZGV4KTtcbiAgJChcIiNcIisgaW5wdXRDb250ZW50SWQgK1wiIGlucHV0XCIpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xuICAgIGNvbnNvbGUubG9nKGluZGV4KVxuICAgIHZhciBpbnB1dFZhbCA9ICQodGhpcykudmFsKCkucmVwbGFjZSgvKF5cXHMrKXwoXFxzKyQpL2csXCJcIilcbiAgICBpZihpbmRleCA9PSBjaGFuZ2VJbmRleFBhcmFtKXtcbiAgICAgIGlmKGlucHV0VmFsID09IFwiXCIpe1xuICAgICAgICBhbGVydChcIuWFiOmAieaLqeaWh+S7tuS4iuS8oO+8gVwiKVxuICAgICAgICB0aGVzaXNBZGQgPSBmYWxzZTtcblxuICAgICAgfVxuICAgICAgaWYoIXRoZXNpc0FkZCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZihpbmRleCA9PSAoY2hhbmdlSW5kZXhQYXJhbSArIDEpKXtcbiAgICAgIGlmKGlucHV0VmFsID09IFwiXCIpe1xuICAgICAgICBhbGVydChcIuWwhuaWh+S7tuS4iuS8oO+8gVwiKVxuICAgICAgICB0aGVzaXNBZGQgPSBmYWxzZTtcblxuICAgICAgfVxuICAgICAgaWYoIXRoZXNpc0FkZCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZihpbnB1dFZhbCA9PSBcIlwiKXtcbiAgICAgIGFsZXJ0KFwi5YaF5a655LiN5Li656m677yBXCIpXG4gICAgICB0aGVzaXNBZGQgPSBmYWxzZTtcbiAgICAgIGlmKCF0aGVzaXNBZGQpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgfSlcblxuICBpZighdGhlc2lzQWRkKSByZXR1cm4gdGhlc2lzQWRkOyAgLy/pqozor4HlpLHotKVcblxuICByZXR1cm4gdGhlc2lzQWRkO1xufVxuIiwiJChmdW5jdGlvbigpe1xuICAkKFwiI3RoZXNpcy1zZWFyY2ggaW5wdXRcIikudmFsKFwiXCIpO1xuXG4gIHZhciBwZW9wbGVQYXJhbSA9IGxvY2F0aW9uLnNlYXJjaCxnZXRQYXJhbXMgPSBcIlwiO1xuXG4gIC8vIGlmKHBlb3BsZVBhcmFtICE9PSBcIlwiKXtcbiAgLy8gICB2YXIgcGVvcGxlTmFtZSA9IGRlY29kZVVSSShwZW9wbGVQYXJhbS5zbGljZSgocGVvcGxlUGFyYW0uaW5kZXhPZihcIj1cIikrMSksKHBlb3BsZVBhcmFtLmluZGV4T2YoXCImXCIpKSkpO1xuICAvLyAgICQoXCIjc2VhcmNoLW5hbWVcIikudmFsKGRlY29kZVVSSShwZW9wbGVOYW1lKSlcbiAgLy8gfWVsc2V7XG4gIC8vICAgJChcIiNzZWFyY2gtbmFtZVwiKS52YWwoXCJcIilcbiAgLy8gfVxuXG4gIGlmKHBlb3BsZVBhcmFtICE9PSBcIlwiKXsgLy/ojrflj5Z1cmzkvKDpgJLnmoTlj4LmlbBcbiAgICB2YXIgcGVvcGxlTmFtZSA9IFwiXCIsdGhlc2lzRGF0YSA9IHt9O1xuICAgIGlmKHBlb3BsZVBhcmFtLmluZGV4T2YoXCImXCIpICE9PSAtMSl7XG4gICAgICAgcGVvcGxlTmFtZSA9IGRlY29kZVVSSShwZW9wbGVQYXJhbS5zbGljZSgocGVvcGxlUGFyYW0uaW5kZXhPZihcIj1cIikrMSksKHBlb3BsZVBhcmFtLmluZGV4T2YoXCImXCIpKSkpOyAvL+iOt+WPlnVybCDnmoTlj4LmlbDlhoXlrrlcbiAgICAgICBwZW9wbGVJZCA9IGRlY29kZVVSSShwZW9wbGVQYXJhbS5zbGljZSgocGVvcGxlUGFyYW0uaW5kZXhPZihcInN0YWZmaWRcIikrOCksKHBlb3BsZVBhcmFtLmxlbmd0aCsxKSkpO1xuICAgIH1lbHNle1xuICAgICAgIHBlb3BsZU5hbWUgPSBkZWNvZGVVUkkocGVvcGxlUGFyYW0uc2xpY2UoKHBlb3BsZVBhcmFtLmluZGV4T2YoXCI9XCIpKzEpLHBlb3BsZVBhcmFtLmxlbmd0aCkpO1xuICAgIH1cblxuICAgIHRoZXNpc0RhdGEudGhlc2lzV29yZCA9IFwiXCI7XG4gICAgdGhlc2lzRGF0YS50aGVzaXNOYW1lID0gcGVvcGxlTmFtZTtcbiAgICAkKFwiI3NlYXJjaC1uYW1lXCIpLnZhbChwZW9wbGVOYW1lKVxuICAgIGdldFBhcmFtcyA9IHRoZXNpc0RhdGE7XG4gIH1lbHNle1xuICAgICQoXCIjc2VhcmNoLW5hbWVcIikudmFsKFwiXCIpXG4gIH1cbiAgLy9cblxuICBnZXRUaGVzaXNEYXRhKHRoZXNpc0dldFVybCxnZXRQYXJhbXMpXG5cbiAgJCgnI3N0YXJ0LXRpbWUnKS5kYXRldGltZXBpY2tlcih7XG4gICAgIGZvcm1hdDoneXl5eS9tbS9kZCcsXG4gICAgIGF1dG9jbG9zZTp0cnVlLC8v6Ieq5Yqo5YWz6ZetXG4gICAgIGVuZERhdGU6bmV3IERhdGUoKSwgLy/lvZPliY3ml7bpl7TlkI7pnaLml6XmnJ/kuI3lj6/pgIlcbiAgICAgbWluVmlldzoyLC8v5pyA57K+5YeG55qE5pe26Ze06YCJ5oup5Li65pel5pyfMC3liIYgMS3ml7YgMi3ml6UgMy3mnIhcbiAgICAgd2Vla1N0YXJ0OjAsXG4gICAgIGxhbmd1YWdlOid6aC1DTidcbiAgIH0pLm9uKCdjaGFuZ2VEYXRlJyxmdW5jdGlvbihldil7XG4gICAgICB2YXIgc3RhcnR0aW1lPSQoXCIjc3RhcnQtdGltZVwiKS52YWwoKTtcbiAgICAgICQoXCIjZW5kLXRpbWUgXCIpLmRhdGV0aW1lcGlja2VyKCdzZXRTdGFydERhdGUnLHN0YXJ0dGltZSk7XG4gICAgICAkKFwiI3N0YXJ0LXRpbWVcIikuZGF0ZXRpbWVwaWNrZXIoJ2hpZGUnKTtcbiAgIH0pO1xuICAkKCcjZW5kLXRpbWUnKS5kYXRldGltZXBpY2tlcih7XG4gICAgICBmb3JtYXQ6J3l5eXkvbW0vZGQnLFxuICAgICAgYXV0b2Nsb3NlOnRydWUsLy/oh6rliqjlhbPpl61cbiAgICAgIGVuZERhdGU6bmV3IERhdGUoKSwvL+W9k+WJjeaXtumXtOWQjumdouaXpeacn+S4jeWPr+mAiVxuICAgICAgbWluVmlldzoyLC8v5pyA57K+5YeG55qE5pe26Ze06YCJ5oup5Li65pel5pyfMC3liIYgMS3ml7YgMi3ml6UgMy3mnIhcbiAgICAgIHdlZWtTdGFydDowLFxuICAgICAgbGFuZ3VhZ2U6J3poLUNOJ1xuICAgIH0pLm9uKCdjaGFuZ2VEYXRlJyxmdW5jdGlvbihldil7XG4gICAgICAgdmFyIHN0YXJ0dGltZT0kKFwiI3N0YXJ0LXRpbWVcIikudmFsKCk7XG4gICAgICAgdmFyIGVuZHRpbWU9JChcIiNlbmQtdGltZVwiKS52YWwoKTtcbiAgICAgICAkKFwiI3N0YXJ0LXRpbWVcIikuZGF0ZXRpbWVwaWNrZXIoJ3NldEVuZERhdGUnLGVuZHRpbWUpO1xuICAgICAgICQoXCIjZW5kLXRpbWVcIikuZGF0ZXRpbWVwaWNrZXIoJ2hpZGUnKVxuICAgIH0pO1xuXG4gICQoXCIjdGhlc2lzLXNlYXJjaC1idG5cIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7XG4gICAgICAvLyDmkJzntKLmoYbml7bpl7TorqTor4FcbiAgICAgIHZhciByZWcgPSAvKF5cXHMrKXwoXFxzKyQpL2c7XG4gICAgICB2YXIgdGhlc2lzV29yZFZhbCA9ICQoXCIjdGhlc2lzLXdvcmRcIikudmFsKCkucmVwbGFjZShyZWcsXCJcIiksXG4gICAgICAgICAgbmFtZVZhbCA9ICQoXCIjc2VhcmNoLW5hbWVcIikudmFsKCkucmVwbGFjZShyZWcsXCJcIiksXG4gICAgICAgICAgc3RhcnRUaW1lVmFsID0gJChcIiNzdGFydC10aW1lXCIpLnZhbCgpLnJlcGxhY2UocmVnLFwiXCIpLFxuICAgICAgICAgIGVuZFRpbWVWYWwgPSAkKFwiI2VuZC10aW1lXCIpLnZhbCgpLnJlcGxhY2UocmVnLFwiXCIpLFxuICAgICAgICAgIHRpbWVCb29sZWFuID0gdHJ1ZSxcbiAgICAgICAgICB0aGVzaXNEYXRhID0ge307XG4gICAgICAgICAgdGhlc2lzRGF0YS50aGVzaXNXb3JkID0gdGhlc2lzV29yZFZhbFxuICAgICAgICAgIHRoZXNpc0RhdGEudGhlc2lzTmFtZSA9IG5hbWVWYWxcblxuICAgICAgaWYoc3RhcnRUaW1lVmFsICE9PSBcIlwiIHx8IGVuZFRpbWVWYWwgIT09IFwiXCIgKXtcbiAgICAgICAgaWYoc3RhcnRUaW1lVmFsID09IFwiXCIgfHwgZW5kVGltZVZhbCA9PSBcIlwiICl7XG4gICAgICAgICAgdGltZUJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgdGhlc2lzRGF0YS5zdGFydFRpbWUgPSBzdGFydFRpbWVWYWxcbiAgICAgICAgICB0aGVzaXNEYXRhLmVuZFRpbWUgPSBlbmRUaW1lVmFsXG4gICAgICAgIH1cbiAgICAgICAgaWYoIXRpbWVCb29sZWFuKSB7XG4gICAgICAgICAgYWxlcnQoXCLor7fpgInlpb3otbflp4vml7bpl7RcIilcbiAgICAgICAgICByZXR1cm4gdGltZUJvb2xlYW47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZ2V0VGhlc2lzRGF0YSh0aGVzaXNHZXRVcmwsdGhlc2lzRGF0YSlcblxuICAgIH0pXG5cblxufSlcbmZ1bmN0aW9uIGdldFRoZXNpc0RhdGEodXJsLGRhdGEpe1xuICBsb2FkaW5nKCQoXCIjdGhlc2lzLXRhYmxlXCIpKVxuICAkLmFqYXgoeyAgICAgICAvL2dldCDojrflj5bmlbDmja5cbiAgICAgICB0eXBlOlwiR0VUXCIsXG4gICAgICAgdXJsOnVybCxcbiAgICAgICBjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICAgICBkYXRhVHlwZTpcImpzb25cIiwgIC8vIOmihOacn+acjeWKoeWZqOi/lOWbnueahOaVsOaNruexu+Wei+OAguWmguaenOS4jeaMh+Wumu+8jGpRdWVyeSDlsIboh6rliqjmoLnmja4gSFRUUCDljIUgTUlNRSDkv6Hmga/mnaXmmbrog73liKTmlq3vvIzmr5TlpoJYTUwgTUlNReexu+Wei+Wwseiiq+ivhuWIq+S4ulhNTOOAglxuICAgICAgIGRhdGE6ZGF0YSxcbiAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAkKFwiI2FudC1zaXRlLWxvYWRpbmdcIikucmVtb3ZlKCk7XG4gICAgICAgICB2YXIgdGhlc2lzR2V0RGF0YSA9IGRhdGE7XG4gICAgICAgICBpZih0eXBlb2YoZGF0YSkgPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgdGhlc2lzR2V0RGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICB9ZWxzZSBpZih0eXBlb2YoZGF0YSkgPT0gXCJvYmplY3RcIil7XG4gICAgICAgICAgICAgdGhlc2lzR2V0RGF0YSA9IGRhdGE7XG4gICAgICAgICB9XG5cbiAgICAgICAgIGlmKHRoZXNpc0dldERhdGEuY29kZSA9PSBcIjBcIil7XG4gICAgICAgICAgIHZhciB0aGVzaXNEYXRhID0gdGhlc2lzR2V0RGF0YS5kYXRhO1xuICAgICAgICAgICAkKFwiI3RoZXNpcy10YWJsZVwiKS5jcmVhdGVUYWJsZSh7dGFibGVEYXRhOnRoZXNpc0RhdGEsY2hvaWNlQ29udGVudDonaW5kZXhUaGVzaXMnLHBhZ2VJZDpcIiNwYWdlXCIsdG90YWxQYWdlSWQ6JyN0b3RhbC1wYWdlJyxza2lwUGFnZUlkOlwiI3NraXAtY2xpY2tcIix0YWJsZUlkOicjdGhlc2lzLXRhYmxlJyxzZXNzaW9uUGFnZTondGhlc2lzUGFnZScsc2Vzc2lvbkxvY2F0aW9uOid0aGVzaXNMb2NhdGlvbicscHJldmlld1VybDpwcmV2aWV3RmlsZVVybCxkb3dubG9hZFVybDpkb3dubG9hZEZpbGVVcmx9KVxuXG4gICAgICAgICB9ZWxzZSBpZih0aGVzaXNHZXREYXRhLmNvZGUgPT0gXCI5MDAwMDAxXCIpe1xuICAgICAgICAgICAgJChcIiN0aGVzaXMtdGFibGUgdHI6bm90KDpmaXJzdC1jaGlsZClcIikucmVtb3ZlKClcbiAgICAgICAgICAgICQoXCIjdGhlc2lzLXRhYmxlIFwiKS5hcHBlbmQoJzx0cj48dGQgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIGNvbHNwYW49XCI1XCI+5pqC5peg55u45YWz5pWw5o2uLi4uPC90ZD48L3RyPicpO1xuICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgIGFsZXJ0KFwi5pyN5Yqh5Zmo5pyJ5byC5bi4IVwiKVxuICAgICAgICAgfVxuICAgICAgIH0sXG4gICAgICAgZXJyb3I6ZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICB9XG4gIH0pO1xuXG59XG4iXX0=
